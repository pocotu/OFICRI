{"level":"info","message":"Servidor corriendo en puerto 3001","timestamp":"2025-03-21T04:55:39.121Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T04:55:39.163Z"}
{"level":"info","message":"Servidor corriendo en puerto 3001","timestamp":"2025-03-21T04:56:02.423Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T04:56:02.483Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T04:59:50.785Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-21T04:59:50.883Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-21T04:59:50.893Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:85:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:238:16)\n    at done (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-21T04:59:50.911Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:85:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:238:16)\n    at done (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-21T04:59:50.927Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-21T04:59:51.000Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-21T04:59:51.014Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:85:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:238:16)\n    at done (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-21T04:59:51.022Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-21T04:59:51.030Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-21T04:59:51.041Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:85:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:238:16)\n    at done (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-21T04:59:51.056Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T04:59:51.428Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:00:22.800Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:00:22.896Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:01:22.732Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:01:22.741Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:02:05.878Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:02:05.887Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:04:28.062Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:04:28.073Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:04:29.058Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:04:29.081Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:04:29.949Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:04:29.953Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:06:13.712Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:06:13.721Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:06:14.440Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:06:14.449Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:06:14.592Z"}
{"level":"debug","message":"Executing query [m8ibhz9hbg35vwee8g9]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T05:06:14.597Z"}
{"level":"debug","message":"Executing query [m8ibhz9j64ewixy2d4h]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T05:06:14.599Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8ibhz9j64ewixy2d4h]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T05:06:14.604Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:06:14.606Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T05:06:14.695Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T05:06:14.697Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T05:06:14.698Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T05:06:14.699Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T05:06:14.700Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T05:06:14.700Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:06:15.387Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:06:15.390Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:07:19.441Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:07:19.450Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:07:20.184Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:07:20.193Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:07:20.910Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:07:20.913Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:07:21.071Z"}
{"level":"debug","message":"Executing query [m8ibjek1iyfgv5c2crh]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T05:07:21.074Z"}
{"level":"debug","message":"Executing query [m8ibjek330m2ymaospv]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T05:07:21.075Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8ibjek330m2ymaospv]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T05:07:21.078Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:07:21.080Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T05:07:21.166Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T05:07:21.166Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T05:07:21.167Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T05:07:21.167Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T05:07:21.168Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T05:07:21.168Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:08:01.261Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:08:01.287Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:08:01.967Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:08:01.976Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:08:02.621Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:08:02.623Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:08:02.755Z"}
{"level":"debug","message":"Executing query [m8ibkapzrkn7c7e7cnn]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T05:08:02.759Z"}
{"level":"debug","message":"Executing query [m8ibkaq2uxo0bindgc]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T05:08:02.762Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8ibkaq2uxo0bindgc]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T05:08:02.765Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:08:02.767Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T05:08:02.848Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T05:08:02.849Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T05:08:02.849Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T05:08:02.850Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T05:08:02.851Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T05:08:02.851Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:09:40.561Z"}
{"level":"debug","message":"Executing query [m8ibme6xfzfai3szyi]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T05:09:40.569Z"}
{"level":"debug","message":"Executing query [m8ibme6zsy6pds5gb3]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T05:09:40.571Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8ibme6zsy6pds5gb3]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T05:09:40.575Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:09:40.577Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:09:55.924Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:09:55.959Z"}
{"level":"debug","message":"Executing query [m8ibz8ztd8wxv9cid7r]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 1","params":"[]","timestamp":"2025-03-21T05:19:40.362Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:19:40.392Z"}
{"level":"debug","message":"Executing query [m8ibz90yg2x7dkkxg]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea) VALUES (1, \"Área de Prueba\", \"TEST-AREA\", \"OTRO\")","params":"[]","timestamp":"2025-03-21T05:19:40.402Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`arealog`, CONSTRAINT `fk_arealog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE RESTRICT ON UPDATE CASCADE)","level":"error","message":"Database query error [m8ibz90yg2x7dkkxg]","params":"[]","query":"INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea) VALUES (1, \"Área de Prueba\", \"TEST-AREA\", \"OTRO\")","timestamp":"2025-03-21T05:19:40.418Z"}
{"error":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"message":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`arealog`, CONSTRAINT `fk_arealog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE RESTRICT ON UPDATE CASCADE)","queryId":"m8ibz90yg2x7dkkxg","sql":"INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea) VALUES (1, \"Área de Prueba\", \"TEST-AREA\", \"OTRO\")","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`arealog`, CONSTRAINT `fk_arealog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE RESTRICT ON UPDATE CASCADE)","sqlState":"23000"},"level":"error","message":"Error en la configuración inicial de pruebas de Usuario","timestamp":"2025-03-21T05:19:40.419Z"}
{"level":"debug","message":"Executing query [m8ibz91hcmvrlu0lpvv]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:19:40.421Z"}
{"level":"debug","message":"Executing query [m8ibz91u1qf72plnqeq]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"General\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",1,1]","timestamp":"2025-03-21T05:19:40.434Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuario`, CONSTRAINT `fk_usuario_area` FOREIGN KEY (`IDArea`) REFERENCES `areaespecializada` (`IDArea`) ON DELETE RESTRICT ON UPDATE CASCADE)","level":"error","message":"Database query error [m8ibz91u1qf72plnqeq]","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"General\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",1,1]","query":"INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","timestamp":"2025-03-21T05:19:40.437Z"}
{"level":"debug","message":"Executing query [m8ibz928y3luyjkjzr]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:19:40.448Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:19:40.457Z"}
{"level":"debug","message":"Executing query [m8ic2gez88brn8hgvxe]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:22:09.948Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:22:09.989Z"}
{"level":"info","message":"No se encontraron áreas en la base de datos. Se requiere al menos un área para las pruebas.","timestamp":"2025-03-21T05:22:09.996Z"}
{"level":"debug","message":"Executing query [m8ic2ggexqdm4l355tg]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:22:09.998Z"}
{"level":"debug","message":"Executing query [m8ic2ggig4dtht3juc8]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"General\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",null,null]","timestamp":"2025-03-21T05:22:10.002Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDArea' cannot be null","level":"error","message":"Database query error [m8ic2ggig4dtht3juc8]","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"General\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",null,null]","query":"INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","timestamp":"2025-03-21T05:22:10.004Z"}
{"level":"debug","message":"Executing query [m8ic2ggr9pjvpwdeqf8]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:22:10.011Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:22:10.021Z"}
{"level":"debug","message":"Executing query [m8ic9a1jianouxqgxm]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:27:28.279Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:27:28.311Z"}
{"level":"debug","message":"Executing query [m8ic9a2j7x6cvcij8l]: SELECT IDRol FROM Rol LIMIT 1","params":"[]","timestamp":"2025-03-21T05:27:28.315Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:27:28.320Z"}
{"level":"debug","message":"Executing query [m8ic9a2rrsmyylho04p]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:27:28.323Z"}
{"level":"debug","message":"Executing query [m8ic9a2us1lgsuiyxol]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"General\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:27:28.326Z"}
{"level":"debug","message":"Executing query [m8ic9a33td293ot3cii]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1000]","timestamp":"2025-03-21T05:27:28.335Z"}
{"level":"debug","message":"Executing query [m8ic9a36c3zd50cni3g]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:27:28.338Z"}
{"level":"debug","message":"Executing query [m8ic9a39rclp9x5jukr]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1000]","timestamp":"2025-03-21T05:27:28.341Z"}
{"level":"debug","message":"Executing query [m8ic9a3k130ec7g4as4n]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1000]","timestamp":"2025-03-21T05:27:28.352Z"}
{"level":"debug","message":"Executing query [m8ic9a3npsgr953zr8]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1000]","timestamp":"2025-03-21T05:27:28.355Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","level":"error","message":"Database query error [m8ic9a3npsgr953zr8]","params":"[1000]","query":"DELETE FROM Usuario WHERE IDUsuario = ?","timestamp":"2025-03-21T05:27:28.361Z"}
{"level":"error","message":"Error al eliminar usuario: Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","timestamp":"2025-03-21T05:27:28.362Z"}
{"level":"debug","message":"Executing query [m8ic9a3y8xhy97day66]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1000]","timestamp":"2025-03-21T05:27:28.366Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","level":"error","message":"Database query error [m8ic9a3y8xhy97day66]","params":"[1000]","query":"DELETE FROM Usuario WHERE IDUsuario = ?","timestamp":"2025-03-21T05:27:28.369Z"}
{"error":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"message":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","queryId":"m8ic9a3y8xhy97day66","sql":"DELETE FROM Usuario WHERE IDUsuario = 1000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","sqlState":"23000"},"level":"error","message":"Error al limpiar pruebas de Usuario","timestamp":"2025-03-21T05:27:28.370Z"}
{"level":"debug","message":"Executing query [m8icbqyzcnaf0pt2w3]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:29:23.531Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:29:23.570Z"}
{"level":"debug","message":"Executing query [m8icbr07ezsptpky4s6]: SELECT IDRol FROM Rol LIMIT 1","params":"[]","timestamp":"2025-03-21T05:29:23.575Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:29:23.579Z"}
{"level":"debug","message":"Executing query [m8icbr0d7xlqomk06mu]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:29:23.581Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","level":"error","message":"Database query error [m8icbr0d7xlqomk06mu]","params":"[\"TEST123456\"]","query":"DELETE FROM Usuario WHERE CodigoCIP = ?","timestamp":"2025-03-21T05:29:23.590Z"}
{"level":"error","message":"Error al crear usuario: Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","timestamp":"2025-03-21T05:29:23.591Z"}
{"level":"debug","message":"Executing query [m8icbr0uvocw182xk8]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:29:23.598Z"}
{"level":"error","message":"Error al obtener usuario por CIP: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mnull\u001b[39m\nReceived: \u001b[31m1000\u001b[39m","timestamp":"2025-03-21T05:29:23.603Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:29:23.608Z"}
{"level":"debug","message":"Executing query [m8iccya1nfv3g40tgs]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:30:19.658Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:30:19.706Z"}
{"level":"debug","message":"Executing query [m8iccybjfxj99c6od0e]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:30:19.711Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:30:19.715Z"}
{"level":"debug","message":"Executing query [m8iccybodgzsfp9gb8o]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:19.716Z"}
{"level":"debug","message":"Executing query [m8iccybuq3cy7fzu7ds]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:19.722Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","level":"error","message":"Database query error [m8iccybuq3cy7fzu7ds]","params":"[\"TEST123456\"]","query":"DELETE FROM Usuario WHERE CodigoCIP = ?","timestamp":"2025-03-21T05:30:19.726Z"}
{"level":"debug","message":"Error al limpiar datos previos: Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","timestamp":"2025-03-21T05:30:19.727Z"}
{"level":"debug","message":"Executing query [m8iccyc18mq8dea6d62]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:19.729Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","level":"error","message":"Database query error [m8iccyc18mq8dea6d62]","params":"[\"TEST123456\"]","query":"DELETE FROM Usuario WHERE CodigoCIP = ?","timestamp":"2025-03-21T05:30:19.733Z"}
{"level":"error","message":"Error al crear usuario: Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","timestamp":"2025-03-21T05:30:19.734Z"}
{"level":"debug","message":"Executing query [m8iccycdx9z1zrwjcf9]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:19.741Z"}
{"level":"error","message":"Error al obtener usuario por CIP: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mnull\u001b[39m\nReceived: \u001b[31m1000\u001b[39m","timestamp":"2025-03-21T05:30:19.746Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:30:19.750Z"}
{"level":"debug","message":"Executing query [m8icdquluv1yjxrx6ls]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:30:56.686Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:30:56.729Z"}
{"level":"debug","message":"Executing query [m8icdqvvsgo2iw73bs8]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:30:56.731Z"}
{"level":"debug","message":"Executing query [m8icdqvztot4uz8hu2r]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:30:56.735Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:30:56.737Z"}
{"level":"debug","message":"Executing query [m8icdqw2q7ihorul6a]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:56.738Z"}
{"level":"debug","message":"Executing query [m8icdqw51x8thv2y5iji]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:56.741Z"}
{"level":"debug","message":"Executing query [m8icdqwdstvgl37n4l]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:56.749Z"}
{"level":"debug","message":"Executing query [m8icdqwe93zcbjeapco]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:30:56.750Z"}
{"level":"debug","message":"Executing query [m8icdqwog1l9oia4719]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1001]","timestamp":"2025-03-21T05:30:56.760Z"}
{"level":"debug","message":"Executing query [m8icdqwtexpl215hrxl]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:56.765Z"}
{"level":"debug","message":"Executing query [m8icdqwwq9p02q86r]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1001]","timestamp":"2025-03-21T05:30:56.768Z"}
{"level":"debug","message":"Executing query [m8icdqx0wz1xsnnrtz]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1001]","timestamp":"2025-03-21T05:30:56.772Z"}
{"level":"debug","message":"Executing query [m8icdqx31w0nap2nhfe]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1001]","timestamp":"2025-03-21T05:30:56.775Z"}
{"level":"debug","message":"Executing query [m8icdqx6uzt5995sc5]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1001]","timestamp":"2025-03-21T05:30:56.778Z"}
{"level":"debug","message":"Executing query [m8icdqx9tisoiqzgx4]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:30:56.781Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:30:56.783Z"}
{"level":"debug","message":"Executing query [m8iceuwfm855p1c911j]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:31:48.591Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:31:48.636Z"}
{"level":"debug","message":"Executing query [m8iceuxu85mr8eq8nh7]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:31:48.642Z"}
{"level":"debug","message":"Executing query [m8iceuxy7toa1oqu8q6]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T05:31:48.646Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T05:31:48.648Z"}
{"level":"debug","message":"Executing query [m8iceuy18ezlbvbcpx6]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T05:31:48.649Z"}
{"level":"debug","message":"Executing query [m8iceuy3elieu7jh05a]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:31:48.651Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T05:31:48.654Z"}
{"level":"debug","message":"Executing query [m8iceuyg2qigv080dvt]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T05:31:48.664Z"}
{"level":"debug","message":"Executing query [m8iceuyl6bv8cmc9vy6]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T05:31:48.669Z"}
{"level":"debug","message":"Executing query [m8iceuyouvirpzrk32]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[999]","timestamp":"2025-03-21T05:31:48.672Z"}
{"level":"debug","message":"Executing query [m8iceuys0zj4q4vvvcsp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:31:48.676Z"}
{"level":"debug","message":"Executing query [m8icev41251ei1u514u]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:31:48.865Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:31:48.876Z"}
{"level":"debug","message":"Executing query [m8icev4fylxi7tci9rq]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:31:48.879Z"}
{"level":"debug","message":"Executing query [m8icev4hx3ohxe2r0jb]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:31:48.881Z"}
{"level":"debug","message":"Executing query [m8icev4jc232kkwqbfm]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:31:48.883Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:31:48.885Z"}
{"level":"debug","message":"Executing query [m8icev4nbbgszpywcdv]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535108864\"]","timestamp":"2025-03-21T05:31:48.887Z"}
{"level":"debug","message":"Executing query [m8icev4p6ohx6bgm8du]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535108864\",\"TEST-OFI-1742535108864\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:31:48.889Z"}
{"level":"debug","message":"Executing query [m8icev4wmlmxagfiqrn]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1000]","timestamp":"2025-03-21T05:31:48.896Z"}
{"level":"debug","message":"Executing query [m8icev50wabwp11u6vq]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535108864\"]","timestamp":"2025-03-21T05:31:48.900Z"}
{"level":"debug","message":"Executing query [m8icev52oii5rkgk13n]: UPDATE Documento SET Estado = ?, Observaciones = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1000]","timestamp":"2025-03-21T05:31:48.902Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8icev52oii5rkgk13n]","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1000]","query":"UPDATE Documento SET Estado = ?, Observaciones = ? WHERE IDDocumento = ?","timestamp":"2025-03-21T05:31:48.905Z"}
{"level":"debug","message":"Executing query [m8icev58lbxvajwxsp]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:31:48.908Z"}
{"level":"debug","message":"Executing query [m8icev5hwatuig4dwia]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1000]","timestamp":"2025-03-21T05:31:48.917Z"}
{"level":"debug","message":"Executing query [m8icev5mrrysf7q163]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1000]","timestamp":"2025-03-21T05:31:48.922Z"}
{"level":"debug","message":"Executing query [m8icev5pe2xd8qfcwfr]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1000]","timestamp":"2025-03-21T05:31:48.926Z"}
{"level":"debug","message":"Executing query [m8icev5r22yfawbxqtm]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:31:48.927Z"}
{"level":"debug","message":"Executing query [m8icev5t9bdonzvnyfk]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:31:48.929Z"}
{"level":"debug","message":"Executing query [m8icev5vu3vxvb8r8hh]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:31:48.931Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:31:48.933Z"}
{"level":"debug","message":"Executing query [m8iceva276d5xi06saf]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:31:49.083Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:31:49.100Z"}
{"level":"debug","message":"Executing query [m8icevalk51k94utu8c]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535109081\"]","timestamp":"2025-03-21T05:31:49.101Z"}
{"level":"debug","message":"Executing query [m8icevaodp1egmoy4tc]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535109081\"]","timestamp":"2025-03-21T05:31:49.104Z"}
{"level":"debug","message":"Executing query [m8icevaqrabsbwdnbvi]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742535109081\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:31:49.106Z"}
{"level":"debug","message":"Executing query [m8icevavfh626tayls8]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T05:31:49.111Z"}
{"level":"debug","message":"Executing query [m8icevaxtv9tun4iv5c]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535109081\"]","timestamp":"2025-03-21T05:31:49.113Z"}
{"level":"debug","message":"Executing query [m8icevaz9qaftti1cu4]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1000]","timestamp":"2025-03-21T05:31:49.115Z"}
{"level":"debug","message":"Executing query [m8icevb3cppxf66z2kf]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T05:31:49.119Z"}
{"level":"debug","message":"Executing query [m8icevb5c9j0nfprjy4]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T05:31:49.121Z"}
{"level":"debug","message":"Executing query [m8icevb8eyk23s25bfn]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T05:31:49.124Z"}
{"level":"debug","message":"Executing query [m8icevbaxxexc39hqh]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T05:31:49.126Z"}
{"level":"debug","message":"Executing query [m8icevbc11uw269bme1o]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T05:31:49.128Z"}
{"level":"debug","message":"Executing query [m8icevbfsxe9vvg7aw]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T05:31:49.131Z"}
{"level":"debug","message":"Executing query [m8icevbifqz0w0qiqof]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:31:49.134Z"}
{"level":"debug","message":"Executing query [m8icevbjl86ngzf9rue]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:31:49.135Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:31:49.137Z"}
{"level":"debug","message":"Executing query [m8icevf9xroizr3gpw]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:31:49.269Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:31:49.293Z"}
{"level":"debug","message":"Executing query [m8icevg26l6rc8svoss]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:31:49.298Z"}
{"level":"debug","message":"Executing query [m8icevg4hmxu1cgllnf]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:31:49.300Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:31:49.302Z"}
{"level":"debug","message":"Executing query [m8icevg6gyqg5tt805]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:31:49.302Z"}
{"level":"debug","message":"Executing query [m8icevg88v43pc6vitl]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:31:49.304Z"}
{"level":"debug","message":"Executing query [m8icevgat44n6pxc2j]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:31:49.306Z"}
{"level":"debug","message":"Executing query [m8icevgdvvou84ghde]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:31:49.309Z"}
{"level":"debug","message":"Executing query [m8icevgi53zbqkz4sey]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1002]","timestamp":"2025-03-21T05:31:49.315Z"}
{"level":"debug","message":"Executing query [m8icevgm7onve6odoso]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:31:49.318Z"}
{"level":"debug","message":"Executing query [m8icevgph86o0uzu8ta]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1002]","timestamp":"2025-03-21T05:31:49.321Z"}
{"level":"debug","message":"Executing query [m8icevgtf4cgben666o]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1002]","timestamp":"2025-03-21T05:31:49.325Z"}
{"level":"debug","message":"Executing query [m8icevgvqo8a4p0jfmd]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1002]","timestamp":"2025-03-21T05:31:49.327Z"}
{"level":"debug","message":"Executing query [m8icevgy99tthghryv7]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1002]","timestamp":"2025-03-21T05:31:49.330Z"}
{"level":"debug","message":"Executing query [m8icevh12joesltfecz]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:31:49.333Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:31:49.334Z"}
{"level":"debug","message":"Executing query [m8icglpckxvfz56uhnk]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:33:09.985Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:33:10.032Z"}
{"level":"debug","message":"Executing query [m8icglqr26xxljk5hmn]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:33:10.035Z"}
{"level":"debug","message":"Executing query [m8icglqvey37j13aov7]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:33:10.039Z"}
{"level":"debug","message":"Executing query [m8icglqxdikz20pmdot]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:33:10.041Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:33:10.043Z"}
{"level":"debug","message":"Executing query [m8icglr3zbjh1atu449]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535189981\"]","timestamp":"2025-03-21T05:33:10.047Z"}
{"level":"debug","message":"Executing query [m8icglr595giy7bchga]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535189981\",\"TEST-OFI-1742535189981\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:33:10.049Z"}
{"level":"debug","message":"Executing query [m8icglrfiswriauu4sm]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1001]","timestamp":"2025-03-21T05:33:10.059Z"}
{"level":"debug","message":"Executing query [m8icglrjxkz4864bbm]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535189981\"]","timestamp":"2025-03-21T05:33:10.064Z"}
{"level":"debug","message":"Executing query [m8icglrquwi5im7f76]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuario = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1001]","timestamp":"2025-03-21T05:33:10.070Z"}
{"code":"ER_BAD_FIELD_ERROR","error":"Unknown column 'IDUsuario' in 'field list'","level":"error","message":"Database query error [m8icglrquwi5im7f76]","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1001]","query":"UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuario = ? WHERE IDDocumento = ?","timestamp":"2025-03-21T05:33:10.072Z"}
{"level":"debug","message":"Executing query [m8icglrwzwlszvj6wus]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:33:10.076Z"}
{"level":"debug","message":"Executing query [m8icglsena1np2sp20l]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1001]","timestamp":"2025-03-21T05:33:10.094Z"}
{"level":"debug","message":"Executing query [m8icglsgtla5uyspnvh]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1001]","timestamp":"2025-03-21T05:33:10.096Z"}
{"level":"debug","message":"Executing query [m8icglskrm0apkup5s]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1001]","timestamp":"2025-03-21T05:33:10.100Z"}
{"level":"debug","message":"Executing query [m8icglsmnt2yrrjce8]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:33:10.102Z"}
{"level":"debug","message":"Executing query [m8icglsoyj8vt3hav5]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:33:10.104Z"}
{"level":"debug","message":"Executing query [m8icglsqb3ulopj2gh]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:33:10.106Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:33:10.108Z"}
{"level":"debug","message":"Executing query [m8ichex7mo3am4up58f]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:33:47.852Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:33:47.899Z"}
{"level":"debug","message":"Executing query [m8icheymh5vcpslavgw]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:33:47.902Z"}
{"level":"debug","message":"Executing query [m8icheypxifiwzwzkch]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:33:47.905Z"}
{"level":"debug","message":"Executing query [m8icheysq8u24mubm1]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:33:47.908Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:33:47.911Z"}
{"level":"debug","message":"Executing query [m8icheyxu1abncqwd0a]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535227848\"]","timestamp":"2025-03-21T05:33:47.913Z"}
{"level":"debug","message":"Executing query [m8ichez00lmjw95oygc]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535227848\",\"TEST-OFI-1742535227848\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:33:47.916Z"}
{"level":"debug","message":"Executing query [m8ichez9vbkclto9tyf]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1002]","timestamp":"2025-03-21T05:33:47.925Z"}
{"level":"debug","message":"Executing query [m8ichezdcy96fyt1od7]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535227848\"]","timestamp":"2025-03-21T05:33:47.929Z"}
{"level":"debug","message":"Executing query [m8ichezgcjdvdh1aplf]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1002]","timestamp":"2025-03-21T05:33:47.932Z"}
{"level":"debug","message":"Executing query [m8ichezmi4lcm9fgi9b]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1002]","timestamp":"2025-03-21T05:33:47.939Z"}
{"level":"debug","message":"Executing query [m8ichezq6x9hxrpyws]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:33:47.942Z"}
{"level":"debug","message":"Executing query [m8ichf0akfuf8bhs7n]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1002]","timestamp":"2025-03-21T05:33:47.962Z"}
{"level":"debug","message":"Executing query [m8ichf0c7igf1sgiry5]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1002]","timestamp":"2025-03-21T05:33:47.964Z"}
{"level":"debug","message":"Executing query [m8ichf0gjkc0kxldwjc]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1002]","timestamp":"2025-03-21T05:33:47.968Z"}
{"level":"debug","message":"Executing query [m8ichf0ipawkwmo9rcr]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:33:47.970Z"}
{"level":"debug","message":"Executing query [m8ichf0lo685qzzr0x]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:33:47.973Z"}
{"level":"debug","message":"Executing query [m8ichf0nxn5rdomyogf]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:33:47.975Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:33:47.977Z"}
{"level":"debug","message":"Executing query [m8ichq8suek1d1q3k3a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:02.525Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:02.574Z"}
{"level":"debug","message":"Executing query [m8ichqa9kaq4x29pjbi]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:02.577Z"}
{"level":"debug","message":"Executing query [m8ichqag7mt672ug2cl]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T05:34:02.584Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T05:34:02.588Z"}
{"level":"debug","message":"Executing query [m8ichqall4jfxv2k4v8]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T05:34:02.589Z"}
{"level":"debug","message":"Executing query [m8ichqanz7wteuu2ygn]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:02.591Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T05:34:02.593Z"}
{"level":"debug","message":"Executing query [m8ichqb0vsovjdy5nx]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T05:34:02.604Z"}
{"level":"debug","message":"Executing query [m8ichqb48xz4o7gxmx6]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T05:34:02.608Z"}
{"level":"debug","message":"Executing query [m8ichqb7jh1um5o8oo]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:02.611Z"}
{"level":"debug","message":"Executing query [m8icib7l65zm883utc7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:29.698Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:29.758Z"}
{"level":"debug","message":"Executing query [m8icib9gtzucbpun6k]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:29.764Z"}
{"level":"debug","message":"Executing query [m8icib9lzao2kqdgx0r]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T05:34:29.769Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T05:34:29.771Z"}
{"level":"debug","message":"Executing query [m8icib9oewexqx73y04]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T05:34:29.772Z"}
{"level":"debug","message":"Executing query [m8icib9qsa66k6xj0d]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:29.774Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T05:34:29.777Z"}
{"level":"debug","message":"Executing query [m8icibagi4r8s0jfqg]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T05:34:29.800Z"}
{"level":"debug","message":"Executing query [m8icibalc3z53qdhq8u]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T05:34:29.805Z"}
{"level":"debug","message":"Executing query [m8icibaoj5clx096sm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:29.808Z"}
{"level":"debug","message":"Executing query [m8icibf5c46mxxk007b]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:29.969Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:29.983Z"}
{"level":"debug","message":"Executing query [m8icibfl6hkm51b4sw]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:29.985Z"}
{"level":"debug","message":"Executing query [m8icibfmwi6p0nvgvkh]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:29.986Z"}
{"level":"debug","message":"Executing query [m8icibfnpq6wjguuytj]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:29.987Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:34:29.988Z"}
{"level":"debug","message":"Executing query [m8icibfpy8njbygx9h]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535269968\"]","timestamp":"2025-03-21T05:34:29.989Z"}
{"level":"debug","message":"Executing query [m8icibfqnn8c1z8p28d]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535269968\",\"TEST-OFI-1742535269968\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:34:29.990Z"}
{"level":"debug","message":"Executing query [m8icibfxdpmnzxyckqt]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1003]","timestamp":"2025-03-21T05:34:29.997Z"}
{"level":"debug","message":"Executing query [m8icibg00hlpotmjwqxc]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535269968\"]","timestamp":"2025-03-21T05:34:30.000Z"}
{"level":"debug","message":"Executing query [m8icibg28m04tdm96t6]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1003]","timestamp":"2025-03-21T05:34:30.003Z"}
{"level":"debug","message":"Executing query [m8icibgabbxyl7av6br]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.010Z"}
{"level":"debug","message":"Executing query [m8icibgedrbon144qbs]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:34:30.014Z"}
{"level":"debug","message":"Executing query [m8icibgit67r4m6c7pj]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.018Z"}
{"level":"debug","message":"Executing query [m8icibgk5ty1zn82fhq]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.020Z"}
{"level":"debug","message":"Executing query [m8icibgnvktdx6lj2ic]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.023Z"}
{"level":"debug","message":"Executing query [m8icibgok248snkkx0r]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:34:30.024Z"}
{"level":"debug","message":"Executing query [m8icibgqz3fmps66ea]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:34:30.026Z"}
{"level":"debug","message":"Executing query [m8icibgt7cge7ptqk28]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:30.029Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:30.031Z"}
{"level":"debug","message":"Executing query [m8icibldhjv53e2rhpr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:30.193Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:30.212Z"}
{"level":"debug","message":"Executing query [m8iciblynqpahj7zbe]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:34:30.214Z"}
{"level":"debug","message":"Executing query [m8icibm0gvac7t9uyk]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:34:30.216Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:34:30.219Z"}
{"level":"debug","message":"Executing query [m8icibm4xahtpq9przs]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:30.220Z"}
{"level":"debug","message":"Executing query [m8icibm6ljg73kcu9e]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:30.222Z"}
{"level":"debug","message":"Executing query [m8icibm769bkfew8i6f]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:30.223Z"}
{"level":"debug","message":"Executing query [m8icibm9zfnwxoyrz7]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:34:30.225Z"}
{"level":"debug","message":"Executing query [m8icibmhd9ddw84119]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.233Z"}
{"level":"debug","message":"Executing query [m8icibmm4ern7z7dv9m]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:30.238Z"}
{"level":"debug","message":"Executing query [m8icibmoz6nj8zxbn9]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1003]","timestamp":"2025-03-21T05:34:30.240Z"}
{"level":"debug","message":"Executing query [m8icibmt28gssxjmpck]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.245Z"}
{"level":"debug","message":"Executing query [m8icibmxt671cgw7e2d]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.249Z"}
{"level":"debug","message":"Executing query [m8icibn0hzf1wd5v1n]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.253Z"}
{"level":"debug","message":"Executing query [m8icibn2vjf7cbikxy]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:30.254Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:30.256Z"}
{"level":"debug","message":"Executing query [m8icibr631binudo9e4]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:30.402Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:30.423Z"}
{"level":"debug","message":"Executing query [m8icibrtd03m0mi5xfa]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535270401\"]","timestamp":"2025-03-21T05:34:30.425Z"}
{"level":"debug","message":"Executing query [m8icibrwc70hxyrcoeb]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535270401\"]","timestamp":"2025-03-21T05:34:30.428Z"}
{"level":"debug","message":"Executing query [m8icibrxc15h0wfxubt]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742535270401\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:34:30.429Z"}
{"level":"debug","message":"Executing query [m8icibs5znh0vyjtu2n]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T05:34:30.437Z"}
{"level":"debug","message":"Executing query [m8icibs711z3n9my176f]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535270401\"]","timestamp":"2025-03-21T05:34:30.439Z"}
{"level":"debug","message":"Executing query [m8icibs9av7hds3syhr]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1001]","timestamp":"2025-03-21T05:34:30.441Z"}
{"level":"debug","message":"Executing query [m8icibsddfm8qfz76gf]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T05:34:30.445Z"}
{"level":"debug","message":"Executing query [m8icibsf3chsj7soxmh]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T05:34:30.447Z"}
{"level":"debug","message":"Executing query [m8icibsjn3kobiz6ws]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T05:34:30.451Z"}
{"level":"debug","message":"Executing query [m8icibslqcm7863dwkj]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T05:34:30.453Z"}
{"level":"debug","message":"Executing query [m8icibsmwwodo1iark]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T05:34:30.454Z"}
{"level":"debug","message":"Executing query [m8icibsp41q69v6mhfd]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T05:34:30.457Z"}
{"level":"debug","message":"Executing query [m8icibsrgl5z73g0tbw]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:34:30.459Z"}
{"level":"debug","message":"Executing query [m8icibstnkwyg10p6t]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:30.461Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:30.462Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:45.081Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:45.121Z"}
{"level":"debug","message":"Executing query [m8icin8p17vc1jzpjy2]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:45.289Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:45.306Z"}
{"level":"debug","message":"Executing query [m8icin98yau93kz533]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:45.308Z"}
{"level":"debug","message":"Executing query [m8icin9czk8ar6u1av]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T05:34:45.312Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T05:34:45.315Z"}
{"level":"debug","message":"Executing query [m8icin9g9semdoxwywt]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T05:34:45.316Z"}
{"level":"debug","message":"Executing query [m8icin9kxbitfygwq]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:45.320Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T05:34:45.322Z"}
{"level":"debug","message":"Executing query [m8icin9rojab4ouz5t]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T05:34:45.327Z"}
{"level":"debug","message":"Executing query [m8icin9wx6qybwcecfa]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T05:34:45.332Z"}
{"level":"debug","message":"Executing query [m8icin9ztu39jjb7ar]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:45.335Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:46.200Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:46.223Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:47.190Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:34:47.193Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:47.351Z"}
{"level":"debug","message":"Executing query [m8iciou3kvb4qo9md8p]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T05:34:47.355Z"}
{"level":"debug","message":"Executing query [m8iciou8id81gwthyj]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T05:34:47.360Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8iciou8id81gwthyj]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T05:34:47.363Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:47.365Z"}
{"level":"debug","message":"Executing query [m8icioxyaaeoscyyxhq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:47.494Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:47.505Z"}
{"level":"debug","message":"Executing query [m8icioyago54h2onbs]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:34:47.506Z"}
{"level":"debug","message":"Executing query [m8icioydpzxwzyik2i8]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:34:47.509Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:34:47.510Z"}
{"level":"debug","message":"Executing query [m8icioyfkmruelmoxef]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:47.511Z"}
{"level":"debug","message":"Executing query [m8icioyhl3q323adidc]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:47.513Z"}
{"level":"debug","message":"Executing query [m8icioyjkcih1u2jkjo]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:47.515Z"}
{"level":"debug","message":"Executing query [m8icioyluh4k9w6xxa8]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:34:47.517Z"}
{"level":"debug","message":"Executing query [m8icioytf24e28ygy2]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.525Z"}
{"level":"debug","message":"Executing query [m8icioyw57fpp5tnoj]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:47.528Z"}
{"level":"debug","message":"Executing query [m8icioyznp53uaztvn]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1004]","timestamp":"2025-03-21T05:34:47.531Z"}
{"level":"debug","message":"Executing query [m8icioz3uf1gpvxug6r]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.535Z"}
{"level":"debug","message":"Executing query [m8icioz6g82kr8tipja]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.538Z"}
{"level":"debug","message":"Executing query [m8iciozaqlji2zxzioe]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.542Z"}
{"level":"debug","message":"Executing query [m8iciozchrltguikqt]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:47.544Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:47.546Z"}
{"level":"debug","message":"Executing query [m8icip3jxs1i71o3d5r]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:47.695Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:47.709Z"}
{"level":"debug","message":"Executing query [m8icip3z4lnyzopfrhl]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:47.711Z"}
{"level":"debug","message":"Executing query [m8icip426lq2342v5jk]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:47.714Z"}
{"level":"debug","message":"Executing query [m8icip457ttz7hqlkbg]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:47.717Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:34:47.719Z"}
{"level":"debug","message":"Executing query [m8icip48xqf6jpiupq]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535287694\"]","timestamp":"2025-03-21T05:34:47.720Z"}
{"level":"debug","message":"Executing query [m8icip495fdedoricd5]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535287694\",\"TEST-OFI-1742535287694\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:34:47.721Z"}
{"level":"debug","message":"Executing query [m8icip4da37htmzkwc6]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.725Z"}
{"level":"debug","message":"Executing query [m8icip4jsiq2q5etej]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535287694\"]","timestamp":"2025-03-21T05:34:47.731Z"}
{"level":"debug","message":"Executing query [m8icip4m3khrql1carz]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1004]","timestamp":"2025-03-21T05:34:47.734Z"}
{"level":"debug","message":"Executing query [m8icip4rrtnpdbqfgvq]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.739Z"}
{"level":"debug","message":"Executing query [m8icip4v16rmoi72sbo]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:34:47.743Z"}
{"level":"debug","message":"Executing query [m8icip514x9jweqmm56]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.749Z"}
{"level":"debug","message":"Executing query [m8icip53ix7qvy87kdk]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.751Z"}
{"level":"debug","message":"Executing query [m8icip57aka0ulte435]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.755Z"}
{"level":"debug","message":"Executing query [m8icip5asy2h7zhp1hf]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:34:47.758Z"}
{"level":"debug","message":"Executing query [m8icip5gi8jpp7d0bc]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:34:47.764Z"}
{"level":"debug","message":"Executing query [m8icip5jd8xhygj5uae]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:47.767Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:47.769Z"}
{"level":"debug","message":"Executing query [m8icipa1z8f1cdpvtn]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:47.929Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:47.941Z"}
{"level":"debug","message":"Executing query [m8icipagtej5uiohsm]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535287928\"]","timestamp":"2025-03-21T05:34:47.944Z"}
{"level":"debug","message":"Executing query [m8icipajw8mtw60jtl]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535287928\"]","timestamp":"2025-03-21T05:34:47.947Z"}
{"level":"debug","message":"Executing query [m8icipak1pcxqg6eb7gi]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742535287928\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:34:47.948Z"}
{"level":"debug","message":"Executing query [m8icipart67vkbk0ckl]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T05:34:47.955Z"}
{"level":"debug","message":"Executing query [m8icipawbaua7ff02d]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535287928\"]","timestamp":"2025-03-21T05:34:47.960Z"}
{"level":"debug","message":"Executing query [m8icipazpjq30qu1e6]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1002]","timestamp":"2025-03-21T05:34:47.963Z"}
{"level":"debug","message":"Executing query [m8icipb4d6rxxrc2oga]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T05:34:47.968Z"}
{"level":"debug","message":"Executing query [m8icipb7mzv365k8qcd]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T05:34:47.971Z"}
{"level":"debug","message":"Executing query [m8icipbe44comm441vn]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T05:34:47.978Z"}
{"level":"debug","message":"Executing query [m8icipbgchnb8q4lq7]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T05:34:47.980Z"}
{"level":"debug","message":"Executing query [m8icipbkqhy60cm5sgl]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T05:34:47.984Z"}
{"level":"debug","message":"Executing query [m8icipboe9zrmbe1m5v]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T05:34:47.988Z"}
{"level":"debug","message":"Executing query [m8icipbq9k8kpb9bbz5]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:34:47.990Z"}
{"level":"debug","message":"Executing query [m8icipbsov7bntyj0v]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:47.992Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:47.993Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T05:34:48.101Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T05:34:48.102Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T05:34:48.103Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T05:34:48.104Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T05:34:48.105Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T05:34:48.105Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T05:35:47.585Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T05:35:47.595Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T05:35:47.596Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T05:35:47.597Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T05:35:47.598Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T05:35:47.598Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Executing query [m8icjzgqab5348pzv7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:35:47.786Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:35:47.845Z"}
{"level":"debug","message":"Executing query [m8icjzhx7sy0pux1wze]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:35:47.830Z"}
{"level":"debug","message":"Executing query [m8icjzikppgbikc70x]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:35:47.852Z"}
{"level":"debug","message":"Executing query [m8icjzipkrrvxemnso]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:35:47.857Z"}
{"level":"debug","message":"Executing query [m8icjziu7ja7k0t15js]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:35:47.862Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:35:47.865Z"}
{"level":"debug","message":"Executing query [m8icjzjcq9lk14fhhz]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535347780\"]","timestamp":"2025-03-21T05:35:47.880Z"}
{"level":"debug","message":"Executing query [m8icjziu7l32z5s27qv]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:35:47.863Z"}
{"level":"debug","message":"Executing query [m8icjzivjxy12ehv3n]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:35:47.864Z"}
{"level":"debug","message":"Executing query [m8icjzjh9l13weqr34u]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535347780\",\"TEST-OFI-1742535347780\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:35:47.885Z"}
{"level":"debug","message":"Executing query [m8icjzjqxtdp39xtt3h]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1005]","timestamp":"2025-03-21T05:35:47.894Z"}
{"level":"debug","message":"Executing query [m8icjzjx3dnjykdyfz3]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535347780\"]","timestamp":"2025-03-21T05:35:47.901Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:35:47.900Z"}
{"level":"debug","message":"Executing query [m8icjzk11324vqd1frbo]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1005]","timestamp":"2025-03-21T05:35:47.905Z"}
{"level":"debug","message":"Executing query [m8icjzkb1lk4jvhnxtb]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1005]","timestamp":"2025-03-21T05:35:47.915Z"}
{"level":"debug","message":"Executing query [m8icjzk68hqzsix80f3]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535347826\"]","timestamp":"2025-03-21T05:35:47.910Z"}
{"level":"debug","message":"Executing query [m8icjzkjfn395vjam8d]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:35:47.923Z"}
{"level":"debug","message":"Executing query [m8icjzkqdwb0zt05eg]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535347826\"]","timestamp":"2025-03-21T05:35:47.930Z"}
{"level":"debug","message":"Executing query [m8icjzksbmdb5hevrxc]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742535347826\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:35:47.932Z"}
{"level":"debug","message":"Executing query [m8icjzl1py8kic22na]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T05:35:47.942Z"}
{"level":"debug","message":"Executing query [m8icjzl7uw9e9fvdkvo]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535347826\"]","timestamp":"2025-03-21T05:35:47.947Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:35:47.955Z"}
{"level":"debug","message":"Executing query [m8icjzlixugqs3bcjtg]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1003]","timestamp":"2025-03-21T05:35:47.959Z"}
{"level":"debug","message":"Executing query [m8icjzlnnyjbhu4ibnq]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T05:35:47.963Z"}
{"level":"debug","message":"Executing query [m8icjzlnzgibaj8l63h]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:35:47.963Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:35:47.963Z"}
{"level":"debug","message":"Executing query [m8icjzlrabdlgvam2at]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T05:35:47.967Z"}
{"level":"debug","message":"Executing query [m8icjzlt0t3p1470bxbf]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T05:35:47.969Z"}
{"level":"debug","message":"Executing query [m8icjzlv6r8dzoktuj3]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:35:47.971Z"}
{"level":"debug","message":"Executing query [m8icjzlw14utwkh916sj]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T05:35:47.972Z"}
{"level":"debug","message":"Executing query [m8icjzlwk9ulxbc608a]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T05:35:47.972Z"}
{"level":"debug","message":"Executing query [m8icjzlyxzgu205xqk]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:35:47.975Z"}
{"level":"debug","message":"Executing query [m8icjzm2ct76f7f1ob]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:35:47.978Z"}
{"level":"info","message":"Usando Mesa ID: 999, Áreas ID: 999/1003, Usuarios ID: 998/999, Documento ID: 1005","timestamp":"2025-03-21T05:35:47.979Z"}
{"level":"debug","message":"Executing query [m8icjzlzddlbdpainjm]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T05:35:47.975Z"}
{"level":"debug","message":"Executing query [m8icjzm5c96ea5hxmw]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T05:35:47.981Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:35:47.982Z"}
{"level":"debug","message":"Executing query [m8icjzm7c90xb1hwcyw]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:35:47.983Z"}
{"level":"debug","message":"Executing query [m8icjzm9os3dcfxcmv8]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:35:47.985Z"}
{"level":"debug","message":"Executing query [m8icjzmb3wszfmw7i93]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T05:35:47.987Z"}
{"level":"debug","message":"Executing query [m8icjzmdoiaq21uak6]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:35:47.989Z"}
{"level":"debug","message":"Executing query [m8icjzmgkojnyd1h6d]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:35:47.992Z"}
{"level":"debug","message":"Executing query [m8icjzmj5podpcox0do]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1005]","timestamp":"2025-03-21T05:35:47.995Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:35:47.990Z"}
{"level":"debug","message":"Executing query [m8icjzmi01fv6kcaau47]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[1005,999,1003]","timestamp":"2025-03-21T05:35:47.994Z"}
{"level":"debug","message":"Executing query [m8icjzmmiecpj8kdn3f]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1005]","timestamp":"2025-03-21T05:35:47.998Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:35:47.995Z"}
{"level":"debug","message":"Executing query [m8icjzmn1j4tdx7lp4u]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1005,999,999,1003,998,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-21T05:35:47.999Z"}
{"level":"debug","message":"Executing query [m8icjzmtuvkcnq3z8wa]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T05:35:48.005Z"}
{"level":"debug","message":"Executing query [m8icjzmvg26q2gtobtq]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:35:48.007Z"}
{"level":"debug","message":"Executing query [m8icjzn113iz6s798gm]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-21T05:35:48.013Z"}
{"level":"debug","message":"Executing query [m8icjzmxlh21vbsyd8p]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:35:48.009Z"}
{"level":"debug","message":"Executing query [m8icjzn6izyg8orxzf]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T05:35:48.018Z"}
{"level":"debug","message":"Executing query [m8icjzn9mdbf2hqpgp]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-21 05:35:48\",999,1]","timestamp":"2025-03-21T05:35:48.021Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8icjzn6izyg8orxzf]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T05:35:48.023Z"}
{"level":"debug","message":"Executing query [m8icjznb134ndqgvsjjd]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1005]","timestamp":"2025-03-21T05:35:48.023Z"}
{"level":"debug","message":"Executing query [m8icjzngyv3hwbtvqz]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-21T05:35:48.028Z"}
{"level":"debug","message":"Executing query [m8icjznh3b1apdptlt3]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:35:48.029Z"}
{"level":"debug","message":"Executing query [m8icjznl7fvvnbknmyc]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T05:35:48.033Z"}
{"level":"debug","message":"Executing query [m8icjznpm0fn75k99]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[1003]","timestamp":"2025-03-21T05:35:48.037Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:35:48.028Z"}
{"level":"debug","message":"Executing query [m8icjznr5nf2sbsts4j]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1005]","timestamp":"2025-03-21T05:35:48.039Z"}
{"level":"debug","message":"Executing query [m8icjznsd679y2xy327]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-21T05:35:48.040Z"}
{"level":"debug","message":"Executing query [m8icjzntgubs24bn9in]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1005]","timestamp":"2025-03-21T05:35:48.041Z"}
{"level":"debug","message":"Executing query [m8icjznvzp6d6pis8q]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:35:48.043Z"}
{"level":"debug","message":"Executing query [m8icjznv3xxri380suy]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1005]","timestamp":"2025-03-21T05:35:48.044Z"}
{"level":"debug","message":"Executing query [m8icjznybitnbx7e9ou]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:35:48.046Z"}
{"level":"debug","message":"Executing query [m8icjznyou7zljd5hz]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-21T05:35:48.046Z"}
{"level":"debug","message":"Executing query [m8icjzo168sm37lwcss]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:35:48.049Z"}
{"level":"debug","message":"Executing query [m8icjzo1hxk1350n4c9]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1005]","timestamp":"2025-03-21T05:35:48.049Z"}
{"level":"debug","message":"Executing query [m8icjzoh1c0yookvxn8]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1005]","timestamp":"2025-03-21T05:35:48.066Z"}
{"level":"debug","message":"Executing query [m8icjzo1m853a1yk23h]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1005]","timestamp":"2025-03-21T05:35:48.049Z"}
{"level":"debug","message":"Executing query [m8icjzo2j9j9oudrhwn]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:35:48.050Z"}
{"level":"debug","message":"Executing query [m8icjzok0b6afbmxkild]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:35:48.068Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:35:48.052Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:35:48.070Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:35:50.839Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:35:50.838Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:35:50.856Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:35:50.843Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:35:50.885Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:35:50.949Z"}
{"level":"debug","message":"Executing query [m8ics4ep3e5yqsu3g4e]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.442Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.504Z"}
{"level":"debug","message":"Executing query [m8ics4gk8hp8wl70y5]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.508Z"}
{"level":"debug","message":"Executing query [m8ics4gwg72mk95kdwq]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.520Z"}
{"level":"debug","message":"Executing query [m8ics4h0u0p4enqmf6]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.524Z"}
{"level":"debug","message":"Executing query [m8ics4ggjazsfoeiwu]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.506Z"}
{"level":"debug","message":"Executing query [m8ics4h24nttmihmt5d]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.526Z"}
{"level":"debug","message":"Executing query [m8ics4h4dp1qti48nbq]: INSERT INTO Documento (\n            IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n            NroRegistro, NumeroOficioDocumento, FechaDocumento, \n            OrigenDocumento, Estado, Observaciones\n          ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-ARCHIVO-1742535727528\",\"TEST-OFI-ARCHIVO-1742535727528\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento para pruebas de archivo\"]","timestamp":"2025-03-21T05:42:07.528Z"}
{"level":"debug","message":"Executing query [m8ics4goc97kdar16pc]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.513Z"}
{"level":"debug","message":"Executing query [m8ics4gwm7z5uh750p]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.521Z"}
{"level":"info","message":"Documento de prueba creado con ID: 1006","timestamp":"2025-03-21T05:42:07.535Z"}
{"level":"debug","message":"Executing query [m8ics4h5a5cayi3s9ev]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.531Z"}
{"level":"debug","message":"Executing query [m8ics4hpgbo4gdn4nj]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/documento_1742535727438.pdf\"]","timestamp":"2025-03-21T05:42:07.549Z"}
{"level":"debug","message":"Executing query [m8ics4hub5dj689o6id]: INSERT INTO DocumentoArchivo (\n          IDDocumento, TipoArchivo, RutaArchivo, FechaSubida, Observaciones\n        ) VALUES (?, ?, ?, CURRENT_TIMESTAMP, ?)","params":"[1006,\"PDF\",\"/uploads/test/documento_1742535727438.pdf\",\"Archivo creado para pruebas automatizadas\"]","timestamp":"2025-03-21T05:42:07.554Z"}
{"level":"debug","message":"Executing query [m8ics4i4x5qbvgplw7k]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.564Z"}
{"level":"debug","message":"Executing query [m8ics4hlx2mcezf4xhd]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742535727523\"]","timestamp":"2025-03-21T05:42:07.546Z"}
{"level":"debug","message":"Executing query [m8ics4i9qjohri9fgq]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[1006]","timestamp":"2025-03-21T05:42:07.569Z"}
{"level":"debug","message":"Executing query [m8ics4ihzioblz8ypff]: UPDATE DocumentoArchivo SET Observaciones = ? WHERE IDArchivo = ?","params":"[\"Observaciones actualizadas para pruebas\",1]","timestamp":"2025-03-21T05:42:07.577Z"}
{"level":"debug","message":"Executing query [m8ics4hpjw9pircjn1a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.552Z"}
{"level":"debug","message":"Executing query [m8ics4inptvn82ptdff]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.584Z"}
{"level":"debug","message":"Executing query [m8ics4ir6tgq3k3nchx]: DELETE FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.587Z"}
{"level":"debug","message":"Executing query [m8ics4iwrtgiifuq4e]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.592Z"}
{"level":"debug","message":"Executing query [m8ics4iyhkhrfv9jer]: CALL sp_subir_archivo_documento(?, ?, ?, ?)","params":"[1006,\"IMAGEN\",\"/uploads/test/imagen_1742535727594.jpg\",\"Archivo creado usando el procedimiento almacenado\"]","timestamp":"2025-03-21T05:42:07.594Z"}
{"level":"debug","message":"Executing query [m8ics4j4sa6akz4rgtj]: SELECT * FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742535727594.jpg\"]","timestamp":"2025-03-21T05:42:07.600Z"}
{"level":"debug","message":"Executing query [m8ics4j6gvi1rgozg7b]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742535727594.jpg\"]","timestamp":"2025-03-21T05:42:07.602Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.591Z"}
{"level":"debug","message":"Executing query [m8ics4j3jbi65e3b3fl]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.599Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.601Z"}
{"level":"debug","message":"Executing query [m8ics4imemnoqhym86r]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.591Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.598Z"}
{"level":"debug","message":"Executing query [m8ics4j6f254bbeob15]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.603Z"}
{"level":"debug","message":"Executing query [m8ics4janqpss7qw5r]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.606Z"}
{"level":"debug","message":"Executing query [m8ics4j9r3gsymxyet]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.605Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.608Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.612Z"}
{"level":"debug","message":"Executing query [m8ics4jo9lypljmb01a]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742535727523\",true]","timestamp":"2025-03-21T05:42:07.620Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.618Z"}
{"level":"debug","message":"Executing query [m8ics4jtb4k04kioqc7]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.625Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`mesaparteslog`, CONSTRAINT `fk_mesaparteslog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE RESTRICT ON UPDATE CASCADE)","level":"error","message":"Database query error [m8ics4jo9lypljmb01a]","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742535727523\",true]","query":"INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","timestamp":"2025-03-21T05:42:07.627Z"}
{"level":"debug","message":"Executing query [m8ics4jwky5jn7qpyq]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742535727515\"]","timestamp":"2025-03-21T05:42:07.628Z"}
{"level":"debug","message":"Executing query [m8ics4jw0h0zoxa5myo]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742535727500\"]","timestamp":"2025-03-21T05:42:07.628Z"}
{"level":"debug","message":"Executing query [m8ics4jyzl0ui55xc3s]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.630Z"}
{"level":"debug","message":"Executing query [m8ics4k1es8vpue22q4]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-FORENSE-1742535727515\",\"TEST-OFI-FORENSE-1742535727515\",7911,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742535727515\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:42:07.633Z"}
{"level":"debug","message":"Executing query [m8ics4k1sm4i1a5x5w]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742535727509\"]","timestamp":"2025-03-21T05:42:07.633Z"}
{"level":"debug","message":"Executing query [m8ics4k1u50ioafgmum]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.633Z"}
{"level":"debug","message":"Executing query [m8ics4k3ok151jh9o6o]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-QUIMICA-1742535727500\",\"TEST-OFI-QUIMICA-1742535727500\",5530,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:42:07.636Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:42:07.636Z"}
{"level":"debug","message":"Executing query [m8ics4k4bygo7rrzaj]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742535727523\"]","timestamp":"2025-03-21T05:42:07.636Z"}
{"level":"debug","message":"Executing query [m8ics4k9p6zvxe5b3c]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-DOSAJE-1742535727509\",\"TEST-OFICIO-1742535727509\",9323,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:42:07.642Z"}
{"level":"debug","message":"Executing query [m8ics4kbh4gnejh9oh]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.643Z"}
{"level":"debug","message":"Executing query [m8ics4kc9g7q360msxa]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.644Z"}
{"level":"debug","message":"Executing query [m8ics4kdnuusyhviqe]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:42:07.645Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.647Z"}
{"level":"debug","message":"Executing query [m8ics4khfgmbiwdo82g]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742535727515\"]","timestamp":"2025-03-21T05:42:07.649Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.652Z"}
{"level":"debug","message":"Executing query [m8ics4klht1hccgi2r5]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742535727500\"]","timestamp":"2025-03-21T05:42:07.653Z"}
{"level":"debug","message":"Executing query [m8ics4kmgvdrfuggpkq]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.654Z"}
{"level":"debug","message":"Executing query [m8ics4kncyivl6c9s4r]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",1]","timestamp":"2025-03-21T05:42:07.656Z"}
{"level":"debug","message":"Executing query [m8ics4kpf9x0ck95pzn]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:42:07.657Z"}
{"level":"debug","message":"Executing query [m8ics4kpqe63slwb52r]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",1]","timestamp":"2025-03-21T05:42:07.657Z"}
{"level":"debug","message":"Executing query [m8ics4ktz3iko8z7j9l]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.661Z"}
{"level":"debug","message":"Executing query [m8ics4ktbnyk6nhmapq]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742535727509\"]","timestamp":"2025-03-21T05:42:07.662Z"}
{"level":"debug","message":"Executing query [m8ics4kuesnhwf3utpo]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:42:07.662Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:42:07.666Z"}
{"level":"debug","message":"Executing query [m8ics4ky10g3ehv5dugg]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.666Z"}
{"level":"debug","message":"Executing query [m8ics4kzww8hgs20ohn]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.667Z"}
{"level":"debug","message":"Executing query [m8ics4kzmiawrszp0go]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:42:07.667Z"}
{"level":"debug","message":"Executing query [m8ics4l19qttix0iet]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:42:07.669Z"}
{"level":"debug","message":"Executing query [m8ics4l2wm29ihah6be]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",1]","timestamp":"2025-03-21T05:42:07.670Z"}
{"level":"debug","message":"Executing query [m8ics4l3p6va679ox1p]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.671Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.669Z"}
{"level":"debug","message":"Executing query [m8ics4l5td1dqm3lm1p]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.673Z"}
{"level":"debug","message":"Executing query [m8ics4l8v15c2lmvge]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.677Z"}
{"level":"debug","message":"Executing query [m8ics4l96hdcipt9d5]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.677Z"}
{"level":"debug","message":"Executing query [m8ics4l77ynk4defkjb]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.675Z"}
{"level":"debug","message":"Executing query [m8ics4lc2xgkg7yests]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.680Z"}
{"level":"debug","message":"Executing query [m8ics4lcl4wn3gmahx]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.680Z"}
{"level":"debug","message":"Executing query [m8ics4lj8o34qlvlcri]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.687Z"}
{"level":"debug","message":"Executing query [m8ics4lkfbw3o2rdbav]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.689Z"}
{"level":"debug","message":"Executing query [m8ics4l65b077k0d37p]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535727520\"]","timestamp":"2025-03-21T05:42:07.674Z"}
{"level":"debug","message":"Executing query [m8ics4lg4una1sewrix]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535727520\",\"TEST-OFI-1742535727520\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:42:07.684Z"}
{"level":"debug","message":"Executing query [m8ics4llbe5igaa9x9v]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.689Z"}
{"level":"debug","message":"Executing query [m8ics4lmlgf2z12uydd]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-FORENSE-1742535727690\",\"TEST-SP-OFI-FORENSE-1742535727690\",1765,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T05:42:07.690Z"}
{"level":"debug","message":"Executing query [m8ics4ln2n69dwut17j]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.691Z"}
{"level":"debug","message":"Executing query [m8ics4lpj54yf79b1c]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.693Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.694Z"}
{"level":"debug","message":"Executing query [m8ics4lro4cwd5q88xn]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:42:07.695Z"}
{"level":"debug","message":"Executing query [m8ics4ltx4sucssrlkh]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:42:07.697Z"}
{"level":"debug","message":"Executing query [m8ics4ltvhvqwrtu54p]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742535727690\"]","timestamp":"2025-03-21T05:42:07.697Z"}
{"level":"debug","message":"Executing query [m8ics4lv15p77s0zjwb]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742535727690\"]","timestamp":"2025-03-21T05:42:07.699Z"}
{"level":"debug","message":"Executing query [m8ics4lub2dg1q2l8p7]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.698Z"}
{"level":"debug","message":"Executing query [m8ics4lx0ndo8bumuuio]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-DOSAJE-1742535727701\",\"TEST-SP-OFICIO-1742535727701\",81,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T05:42:07.701Z"}
{"level":"debug","message":"Executing query [m8ics4m1kxp9tm3f0qh]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1007]","timestamp":"2025-03-21T05:42:07.705Z"}
{"level":"debug","message":"Executing query [m8ics4m2b34cbpvsdvi]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.706Z"}
{"level":"debug","message":"Executing query [m8ics4m31ykqz0ay9tp]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742535727701\"]","timestamp":"2025-03-21T05:42:07.707Z"}
{"level":"debug","message":"Executing query [m8ics4ls3rpny0m60jr]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.696Z"}
{"level":"debug","message":"Executing query [m8ics4m2ill3qukdxzq]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T05:42:07.706Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.709Z"}
{"level":"debug","message":"Executing query [m8ics4m52jfcpdewen3]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1006]","timestamp":"2025-03-21T05:42:07.709Z"}
{"level":"debug","message":"Executing query [m8ics4m524m7lj6agps]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742535727701\"]","timestamp":"2025-03-21T05:42:07.709Z"}
{"level":"debug","message":"Executing query [m8ics4madfnfn0hux5r]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.714Z"}
{"level":"debug","message":"Executing query [m8ics4mc50olohvy75]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:42:07.716Z"}
{"level":"debug","message":"Executing query [m8ics4mgolo1j39jnwe]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1006]","timestamp":"2025-03-21T05:42:07.720Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.721Z"}
{"level":"debug","message":"Executing query [m8ics4m8ansde3vs7x6]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535727520\"]","timestamp":"2025-03-21T05:42:07.712Z"}
{"level":"debug","message":"Executing query [m8ics4mms6twgl68r57]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1006]","timestamp":"2025-03-21T05:42:07.726Z"}
{"level":"debug","message":"Executing query [m8ics4mld7662nlfwj6]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1007]","timestamp":"2025-03-21T05:42:07.725Z"}
{"level":"debug","message":"Executing query [m8ics4mo775na7xiftd]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1006]","timestamp":"2025-03-21T05:42:07.729Z"}
{"level":"debug","message":"Executing query [m8ics4mqa26kvk2jcab]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1007]","timestamp":"2025-03-21T05:42:07.730Z"}
{"level":"debug","message":"Executing query [m8ics4msyvh66chrce]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1006]","timestamp":"2025-03-21T05:42:07.732Z"}
{"level":"debug","message":"Executing query [m8ics4m2rn8in806zu]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.708Z"}
{"level":"debug","message":"Executing query [m8ics4mthiui09v32m4]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:42:07.733Z"}
{"level":"debug","message":"Executing query [m8ics4mv60thilj76gk]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.735Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.736Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.769Z"}
{"level":"debug","message":"Executing query [m8ics4nvnj4rsjr6f4j]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535727701\"]","timestamp":"2025-03-21T05:42:07.771Z"}
{"level":"debug","message":"Executing query [m8ics4o4ym1vr0ehjeq]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1007]","timestamp":"2025-03-21T05:42:07.780Z"}
{"level":"debug","message":"Executing query [m8ics4o6thyskt5kzhb]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1007]","timestamp":"2025-03-21T05:42:07.783Z"}
{"level":"debug","message":"Executing query [m8ics4o91lzwuwmn9vg]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535727701\"]","timestamp":"2025-03-21T05:42:07.785Z"}
{"level":"debug","message":"Executing query [m8ics4oavnar3mg3mua]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1007]","timestamp":"2025-03-21T05:42:07.786Z"}
{"level":"debug","message":"Executing query [m8ics4oaodae5pyfya9]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742535727701\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:42:07.787Z"}
{"level":"debug","message":"Executing query [m8ics4ocxc599e38m9]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:42:07.788Z"}
{"level":"debug","message":"Executing query [m8ics4od47bzmdxrawg]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:42:07.789Z"}
{"level":"debug","message":"Executing query [m8ics4oecr7p6fxytv5]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.790Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.791Z"}
{"level":"debug","message":"Executing query [m8ics4og9fwf7yxcx8e]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T05:42:07.792Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T05:42:07.709Z"}
{"level":"debug","message":"Executing query [m8ics4m5m96mbarq7l]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T05:42:07.709Z"}
{"level":"debug","message":"Executing query [m8ics4m8ie3vc9klz9e]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.712Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T05:42:07.720Z"}
{"level":"debug","message":"Executing query [m8ics4oha0aoizn8zkl]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T05:42:07.793Z"}
{"level":"debug","message":"Executing query [m8ics4ojeo1rywicmdi]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535727701\"]","timestamp":"2025-03-21T05:42:07.795Z"}
{"level":"debug","message":"Executing query [m8ics4opr2oaakuum7g]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1004]","timestamp":"2025-03-21T05:42:07.801Z"}
{"level":"debug","message":"Executing query [m8ics4opl2izmghoo3s]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T05:42:07.802Z"}
{"level":"debug","message":"Executing query [m8ics4orioi0ohtwzo]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1006]","timestamp":"2025-03-21T05:42:07.803Z"}
{"level":"debug","message":"Executing query [m8ics4oscg5fnux3b9f]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T05:42:07.804Z"}
{"level":"debug","message":"Executing query [m8ics4ourcpwcvefm1f]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.806Z"}
{"level":"debug","message":"Executing query [m8ics4ouiqeq84mej18]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T05:42:07.807Z"}
{"level":"debug","message":"Executing query [m8ics4oytofnru7hvk]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T05:42:07.810Z"}
{"level":"debug","message":"Executing query [m8ics4p0rqjsiudgwuh]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T05:42:07.813Z"}
{"level":"debug","message":"Executing query [m8ics4p2vm9n8bxwsv]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T05:42:07.814Z"}
{"level":"debug","message":"Executing query [m8ics4p67wrv32o4o7t]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T05:42:07.818Z"}
{"level":"debug","message":"Executing query [m8ics4p7dh0yolc50ce]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:42:07.819Z"}
{"level":"debug","message":"Executing query [m8ics4p8hqxzkzdz0jo]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.820Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.821Z"}
{"level":"debug","message":"Executing query [m8icsjriku4f5itra2g]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:27.343Z"}
{"level":"debug","message":"Executing query [m8icsjro3q82mio3x1z]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:27.348Z"}
{"level":"debug","message":"Executing query [m8icsjrurs41uke87on]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:27.356Z"}
{"level":"debug","message":"Executing query [m8icsjryscke5vi3wlr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:27.359Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:27.398Z"}
{"level":"debug","message":"Executing query [m8icsjt4p0z3er9reno]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:27.400Z"}
{"level":"debug","message":"Executing query [m8icsjtdd0sllm5vztv]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:27.409Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:27.411Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:27.411Z"}
{"level":"debug","message":"Executing query [m8icsjtid49nndgxwvs]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:27.415Z"}
{"level":"debug","message":"Executing query [m8icsjtlprd69sh1ape]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742535747340\"]","timestamp":"2025-03-21T05:42:27.417Z"}
{"level":"debug","message":"Executing query [m8icsjtll2ckv6uq98j]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:27.417Z"}
{"level":"debug","message":"Executing query [m8icsjtotjmgjtirzm]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:27.420Z"}
{"level":"debug","message":"Executing query [m8icsjtonj6moggmbv]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-FORENSE-1742535747340\",\"TEST-OFI-FORENSE-1742535747340\",18,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742535747340\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:42:27.420Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:27.414Z"}
{"level":"debug","message":"Executing query [m8icsjtnhi29jlabcrp]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:27.419Z"}
{"level":"debug","message":"Executing query [m8icsjtqu3kg727e1m]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:27.423Z"}
{"level":"debug","message":"Executing query [m8icsjtu94zxk5f11i4]: INSERT INTO Documento (\n            IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n            NroRegistro, NumeroOficioDocumento, FechaDocumento, \n            OrigenDocumento, Estado, Observaciones\n          ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-ARCHIVO-1742535747426\",\"TEST-OFI-ARCHIVO-1742535747426\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento para pruebas de archivo\"]","timestamp":"2025-03-21T05:42:27.426Z"}
{"level":"info","message":"Documento de prueba creado con ID: 1008","timestamp":"2025-03-21T05:42:27.431Z"}
{"level":"debug","message":"Executing query [m8icsjtzkgz5ym0hw48]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.431Z"}
{"level":"debug","message":"Executing query [m8icsju3bvtq45dr1br]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742535747349\"]","timestamp":"2025-03-21T05:42:27.436Z"}
{"level":"debug","message":"Executing query [m8icsju5fm58694xloe]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742535747340\"]","timestamp":"2025-03-21T05:42:27.437Z"}
{"level":"debug","message":"Executing query [m8icsju68zvyxvngozw]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742535747351\"]","timestamp":"2025-03-21T05:42:27.438Z"}
{"level":"debug","message":"Executing query [m8icsju9s99uq8k8iad]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-DOSAJE-1742535747349\",\"TEST-OFICIO-1742535747349\",605,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:42:27.441Z"}
{"level":"debug","message":"Executing query [m8icsjua4k4t7340kz]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-QUIMICA-1742535747351\",\"TEST-OFI-QUIMICA-1742535747351\",4098,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:42:27.442Z"}
{"level":"debug","message":"Executing query [m8icsju827sv8jgck4u]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",3]","timestamp":"2025-03-21T05:42:27.441Z"}
{"level":"debug","message":"Executing query [m8icsjucdjzhw8sb0mw]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/documento_1742535747345.pdf\"]","timestamp":"2025-03-21T05:42:27.444Z"}
{"level":"debug","message":"Executing query [m8icsjue6rvkw8ch4xj]: INSERT INTO DocumentoArchivo (\n          IDDocumento, TipoArchivo, RutaArchivo, FechaSubida, Observaciones\n        ) VALUES (?, ?, ?, CURRENT_TIMESTAMP, ?)","params":"[1008,\"PDF\",\"/uploads/test/documento_1742535747345.pdf\",\"Archivo creado para pruebas automatizadas\"]","timestamp":"2025-03-21T05:42:27.446Z"}
{"level":"debug","message":"Executing query [m8icsjufzaqmzxxr1i]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.447Z"}
{"level":"debug","message":"Executing query [m8icsjuipo98g1d6tvp]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.451Z"}
{"level":"debug","message":"Executing query [m8icsjul0yzer8c5eqfj]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T05:42:27.453Z"}
{"level":"debug","message":"Executing query [m8icsjuk5inojs12ppr]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.452Z"}
{"level":"debug","message":"Executing query [m8icsjuoyv8vk6je7ui]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.456Z"}
{"level":"debug","message":"Executing query [m8icsjuqzrbbejo81zi]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742535747349\"]","timestamp":"2025-03-21T05:42:27.458Z"}
{"level":"debug","message":"Executing query [m8icsjusarcphk1wufk]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742535747351\"]","timestamp":"2025-03-21T05:42:27.460Z"}
{"level":"debug","message":"Executing query [m8icsjusk98f795mugr]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.460Z"}
{"level":"debug","message":"Executing query [m8icsjuu9sc0857wd9j]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",3]","timestamp":"2025-03-21T05:42:27.462Z"}
{"level":"debug","message":"Executing query [m8icsjuu8l306wwlik4]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[1008]","timestamp":"2025-03-21T05:42:27.462Z"}
{"level":"debug","message":"Executing query [m8icsjuw7nlm5jji9w4]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.464Z"}
{"level":"debug","message":"Executing query [m8icsjux3lla3c0qpp5]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",2]","timestamp":"2025-03-21T05:42:27.465Z"}
{"level":"debug","message":"Executing query [m8icsjuykoryhqxkmmg]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.466Z"}
{"level":"debug","message":"Executing query [m8icsjuyqgyd1xa17lm]: UPDATE DocumentoArchivo SET Observaciones = ? WHERE IDArchivo = ?","params":"[\"Observaciones actualizadas para pruebas\",3]","timestamp":"2025-03-21T05:42:27.466Z"}
{"level":"debug","message":"Executing query [m8icsjv3mfgxcxg9e1g]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.471Z"}
{"level":"debug","message":"Executing query [m8icsjv3csf5809tp2o]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T05:42:27.471Z"}
{"level":"debug","message":"Executing query [m8icsjuzy65zmv6gog]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.467Z"}
{"level":"debug","message":"Executing query [m8icsjv3jbqggy9gae]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-FORENSE-1742535747471\",\"TEST-SP-OFI-FORENSE-1742535747471\",59,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T05:42:27.471Z"}
{"level":"debug","message":"Executing query [m8icsjv43t7paftier7]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.472Z"}
{"level":"debug","message":"Executing query [m8icsjv79v9riiczqzb]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T05:42:27.475Z"}
{"level":"debug","message":"Executing query [m8icsjv8na8iem90ikb]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.476Z"}
{"level":"debug","message":"Executing query [m8icsjv76b3kv7pk949]: DELETE FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.475Z"}
{"level":"debug","message":"Executing query [m8icsjv7lmivlrju8v]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742535747471\"]","timestamp":"2025-03-21T05:42:27.476Z"}
{"level":"debug","message":"Executing query [m8icsjva5qx7ib3b6c]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742535747471\"]","timestamp":"2025-03-21T05:42:27.478Z"}
{"level":"debug","message":"Executing query [m8icsjvbt6hc3zbq989]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.479Z"}
{"level":"debug","message":"Executing query [m8icsjvcl1z0no9afls]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T05:42:27.480Z"}
{"level":"debug","message":"Executing query [m8icsjvd5g4ip1x909k]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.481Z"}
{"level":"debug","message":"Executing query [m8icsjvgvz3haqblf2]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.484Z"}
{"level":"debug","message":"Executing query [m8icsjvh5jrbff56b1q]: CALL sp_subir_archivo_documento(?, ?, ?, ?)","params":"[1008,\"IMAGEN\",\"/uploads/test/imagen_1742535747485.jpg\",\"Archivo creado usando el procedimiento almacenado\"]","timestamp":"2025-03-21T05:42:27.485Z"}
{"level":"debug","message":"Executing query [m8icsjvg1ftvj4iitl4]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T05:42:27.484Z"}
{"level":"debug","message":"Executing query [m8icsjvfh5ijsodlnm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:27.483Z"}
{"level":"debug","message":"Executing query [m8icsjvk6fcojy0nx4r]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-DOSAJE-1742535747488\",\"TEST-SP-OFICIO-1742535747488\",1601,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T05:42:27.488Z"}
{"level":"debug","message":"Executing query [m8icsjvqtrjr67v74ll]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T05:42:27.494Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:27.486Z"}
{"level":"debug","message":"Executing query [m8icsjvrlmd7vtbql2c]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742535747488\"]","timestamp":"2025-03-21T05:42:27.495Z"}
{"level":"debug","message":"Executing query [m8icsjvr45xn6opm00a]: SELECT * FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742535747485.jpg\"]","timestamp":"2025-03-21T05:42:27.495Z"}
{"level":"debug","message":"Executing query [m8icsjvub7h6howbkv6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:27.498Z"}
{"level":"debug","message":"Executing query [m8icsjvtz16gnkw8ksn]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742535747485.jpg\"]","timestamp":"2025-03-21T05:42:27.497Z"}
{"level":"debug","message":"Executing query [m8icsjvuh1lzaiw7pse]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742535747488\"]","timestamp":"2025-03-21T05:42:27.498Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:27.500Z"}
{"level":"debug","message":"Executing query [m8icsjvx63bfy1d633k]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:27.501Z"}
{"level":"debug","message":"Executing query [m8icsjvz4f6sous9vyq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:27.503Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:27.503Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:27.505Z"}
{"level":"debug","message":"Executing query [m8ictv3eg8jv08oz1l6]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:28.683Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:28.724Z"}
{"level":"debug","message":"Executing query [m8ictv4pxj013n10w9]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742535808680\"]","timestamp":"2025-03-21T05:43:28.730Z"}
{"level":"debug","message":"Executing query [m8ictv4scgnokj093ao]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742535808680\",true]","timestamp":"2025-03-21T05:43:28.732Z"}
{"level":"debug","message":"Executing query [m8ictv53d4fecfajcof]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1001]","timestamp":"2025-03-21T05:43:28.743Z"}
{"level":"debug","message":"Executing query [m8ictv59soa7ogkohiq]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742535808680\"]","timestamp":"2025-03-21T05:43:28.749Z"}
{"level":"debug","message":"Executing query [m8ictv5cxe4do70u28p]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",1001]","timestamp":"2025-03-21T05:43:28.752Z"}
{"level":"debug","message":"Executing query [m8ictv5gsvlv09wwij]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1001]","timestamp":"2025-03-21T05:43:28.756Z"}
{"level":"debug","message":"Executing query [m8ictv5k8ekfw6c9bel]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[1001]","timestamp":"2025-03-21T05:43:28.760Z"}
{"level":"debug","message":"Executing query [m8ictv5oe9fy89z4g3q]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1001]","timestamp":"2025-03-21T05:43:28.764Z"}
{"level":"debug","message":"Executing query [m8ictv5q6odduhzelil]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[1001]","timestamp":"2025-03-21T05:43:28.766Z"}
{"level":"debug","message":"Executing query [m8ictv5tra35us3tvwk]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1001]","timestamp":"2025-03-21T05:43:28.770Z"}
{"level":"debug","message":"Executing query [m8ictv5z8hmgaxexcwr]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1001]","timestamp":"2025-03-21T05:43:28.775Z"}
{"level":"debug","message":"Executing query [m8ictv61x09bj2mrj1]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:43:28.777Z"}
{"level":"debug","message":"Executing query [m8ictv62kezkepvyr4]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:28.778Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:28.780Z"}
{"level":"debug","message":"Executing query [m8icu7g0nq4v2abreys]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.688Z"}
{"level":"debug","message":"Executing query [m8icu7gfge16uloa41]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.704Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.747Z"}
{"level":"debug","message":"Executing query [m8icu7hrwdctroiwv3l]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:43:44.751Z"}
{"level":"debug","message":"Executing query [m8icu7hzpqgef62vuei]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:43:44.759Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:43:44.762Z"}
{"level":"debug","message":"Executing query [m8icu7i2eohbqo6uft6]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:43:44.762Z"}
{"level":"debug","message":"Executing query [m8icu7i6xkm3wk9pa79]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:43:44.766Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.761Z"}
{"level":"debug","message":"Executing query [m8icu7i6ni0eoz172hq]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.766Z"}
{"level":"debug","message":"Executing query [m8icu7ifgzxy10nr4cn]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.775Z"}
{"level":"debug","message":"Executing query [m8icu7iooryy9fmqz6]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:43:44.784Z"}
{"level":"debug","message":"Executing query [m8icu7iqc0c1yr7cmhh]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:43:44.786Z"}
{"level":"debug","message":"Executing query [m8icu7ip5mhxzoz0lxl]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.785Z"}
{"level":"debug","message":"Executing query [m8icu7icyxp09ftynq8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.773Z"}
{"level":"debug","message":"Executing query [m8icu7j0g6zswasqsjl]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1007]","timestamp":"2025-03-21T05:43:44.796Z"}
{"level":"debug","message":"Executing query [m8icu7igcaxxr1i95fh]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.781Z"}
{"level":"debug","message":"Executing query [m8icu7j4jsjj2rzjry]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:43:44.800Z"}
{"level":"debug","message":"Executing query [m8icu7j86etirdcp65c]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1007]","timestamp":"2025-03-21T05:43:44.804Z"}
{"level":"debug","message":"Executing query [m8icu7iqropdgqwon1q]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.788Z"}
{"level":"debug","message":"Executing query [m8icu7jfbxc4d616kcf]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1007]","timestamp":"2025-03-21T05:43:44.811Z"}
{"level":"debug","message":"Executing query [m8icu7ixhtdtxg0m0ue]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.794Z"}
{"level":"debug","message":"Executing query [m8icu7itorderwijks]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.792Z"}
{"level":"debug","message":"Executing query [m8icu7jjkrq9ym679xe]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1007]","timestamp":"2025-03-21T05:43:44.815Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:43:44.788Z"}
{"level":"debug","message":"Executing query [m8icu7jdgiyi3mr0yqm]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535824697\"]","timestamp":"2025-03-21T05:43:44.811Z"}
{"level":"debug","message":"Executing query [m8icu7jj4msq3p54m57]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535824697\",\"TEST-OFI-1742535824697\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:43:44.816Z"}
{"level":"debug","message":"Executing query [m8icu7jouwg3x2eodk]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1007]","timestamp":"2025-03-21T05:43:44.820Z"}
{"level":"debug","message":"Executing query [m8icu7j0dgyd6dhhbo]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.797Z"}
{"level":"debug","message":"Executing query [m8icu7jqdevononq2rs]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:44.822Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:44.825Z"}
{"level":"debug","message":"Executing query [m8icu7ju9mu5e9jdvjp]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1009]","timestamp":"2025-03-21T05:43:44.826Z"}
{"level":"debug","message":"Executing query [m8icu7k0ax9eh1y3vs]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535824697\"]","timestamp":"2025-03-21T05:43:44.832Z"}
{"level":"debug","message":"Executing query [m8icu7k8tx0yhrk74w]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1009]","timestamp":"2025-03-21T05:43:44.840Z"}
{"level":"debug","message":"Executing query [m8icu7kix09ceiff7i]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1009]","timestamp":"2025-03-21T05:43:44.850Z"}
{"level":"debug","message":"Executing query [m8icu7klkynlfnoe11c]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:43:44.853Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.854Z"}
{"level":"debug","message":"Executing query [m8icu7kph5spkwlvwc]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.857Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.864Z"}
{"level":"debug","message":"Executing query [m8icu7kyscjak0l98n]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.866Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.870Z"}
{"level":"debug","message":"Executing query [m8icu7l5t3w5eyxtp0j]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535824785\"]","timestamp":"2025-03-21T05:43:44.873Z"}
{"level":"debug","message":"Executing query [m8icu7l7eeljfesxyqk]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742535824768\"]","timestamp":"2025-03-21T05:43:44.875Z"}
{"level":"debug","message":"Executing query [m8icu7l630ebyh1gqxb]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T05:43:44.874Z"}
{"level":"debug","message":"Executing query [m8icu7lbgy7a117rx1u]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-FORENSE-1742535824768\",\"TEST-OFI-FORENSE-1742535824768\",1520,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742535824768\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:43:44.879Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T05:43:44.879Z"}
{"level":"debug","message":"Executing query [m8icu7lcrwltok5a9zn]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T05:43:44.880Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.870Z"}
{"level":"debug","message":"Executing query [m8icu7la86fvjfj5ao7]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.879Z"}
{"level":"debug","message":"Executing query [m8icu7lfrsdpwicewaf]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.883Z"}
{"level":"debug","message":"Executing query [m8icu7lkz5dako4q1u]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.889Z"}
{"level":"debug","message":"Executing query [m8icu7lkptnifkq30h8]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.888Z"}
{"level":"debug","message":"Executing query [m8icu7ln6ke1q20q8h8]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.891Z"}
{"level":"debug","message":"Executing query [m8icu7lq9bnao7b4io8]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535824785\"]","timestamp":"2025-03-21T05:43:44.894Z"}
{"level":"debug","message":"Executing query [m8icu7l9356ef5ctaug]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.879Z"}
{"level":"debug","message":"Executing query [m8icu7lqslvq88jxbjj]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.894Z"}
{"level":"debug","message":"Executing query [m8icu7ls2xdc544dgav]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742535824785\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:43:44.897Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.875Z"}
{"level":"debug","message":"Executing query [m8icu7lqsnp3d49z28d]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742535824781\"]","timestamp":"2025-03-21T05:43:44.894Z"}
{"level":"debug","message":"Executing query [m8icu7lqpusn2c0dohj]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742535824768\"]","timestamp":"2025-03-21T05:43:44.894Z"}
{"level":"debug","message":"Executing query [m8icu7lwwe3spmmzpb]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742535824781\",true]","timestamp":"2025-03-21T05:43:44.900Z"}
{"level":"debug","message":"Executing query [m8icu7m03zv644nmbkb]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",5]","timestamp":"2025-03-21T05:43:44.904Z"}
{"level":"debug","message":"Executing query [m8icu7m6vzhubdh09nf]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T05:43:44.910Z"}
{"level":"debug","message":"Executing query [m8icu7m6ueu01fc0exs]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.910Z"}
{"level":"debug","message":"Executing query [m8icu7m916vnwolqq61]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1002]","timestamp":"2025-03-21T05:43:44.913Z"}
{"level":"debug","message":"Executing query [m8icu7max8vj500zpin]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.914Z"}
{"level":"debug","message":"Executing query [m8icu7mc85wyl2p8fw]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535824785\"]","timestamp":"2025-03-21T05:43:44.916Z"}
{"level":"debug","message":"Executing query [m8icu7mdj1xyuvfuqwf]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1009]","timestamp":"2025-03-21T05:43:44.917Z"}
{"level":"debug","message":"Executing query [m8icu7metoo635wtc1]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.918Z"}
{"level":"debug","message":"Executing query [m8icu7mf4p5chltw5ud]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1009]","timestamp":"2025-03-21T05:43:44.919Z"}
{"level":"debug","message":"Executing query [m8icu7mf5hcc9ehkx4t]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1005]","timestamp":"2025-03-21T05:43:44.919Z"}
{"level":"debug","message":"Executing query [m8icu7mg89p6q04h1oa]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742535824781\"]","timestamp":"2025-03-21T05:43:44.920Z"}
{"level":"debug","message":"Executing query [m8icu7mgsvq6l63wzi]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.921Z"}
{"level":"debug","message":"Executing query [m8icu7mki8z198ibme]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",1002]","timestamp":"2025-03-21T05:43:44.924Z"}
{"level":"debug","message":"Executing query [m8icu7mjedr7wxe3imw]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T05:43:44.923Z"}
{"level":"debug","message":"Executing query [m8icu7mlajw8dc9ds4e]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.925Z"}
{"level":"debug","message":"Executing query [m8icu7mlmeta6q4xtis]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1009]","timestamp":"2025-03-21T05:43:44.925Z"}
{"level":"debug","message":"Executing query [m8icu7mi3wnlzyxr006]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/documento_1742535824788.pdf\"]","timestamp":"2025-03-21T05:43:44.923Z"}
{"level":"debug","message":"Executing query [m8icu7mndycko5hvw9b]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:43:44.927Z"}
{"level":"debug","message":"Executing query [m8icu7mns5nphy2pfgc]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-FORENSE-1742535824927\",\"TEST-SP-OFI-FORENSE-1742535824927\",5208,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T05:43:44.927Z"}
{"level":"debug","message":"Executing query [m8icu7mopf5wb8a29rs]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T05:43:44.928Z"}
{"level":"debug","message":"Executing query [m8icu7mof9f7940kzzu]: INSERT INTO DocumentoArchivo (\n          IDDocumento, TipoArchivo, RutaArchivo, FechaSubida, Observaciones\n        ) VALUES (?, ?, ?, CURRENT_TIMESTAMP, ?)","params":"[1008,\"PDF\",\"/uploads/test/documento_1742535824788.pdf\",\"Archivo creado para pruebas automatizadas\"]","timestamp":"2025-03-21T05:43:44.928Z"}
{"level":"debug","message":"Executing query [m8icu7mp70dcelz9l1j]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1002]","timestamp":"2025-03-21T05:43:44.929Z"}
{"level":"debug","message":"Executing query [m8icu7mqitrl7e19xxe]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:43:44.930Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.882Z"}
{"level":"debug","message":"Executing query [m8icu7lj2awl6ch5pnf]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.887Z"}
{"level":"debug","message":"Executing query [m8icu7mj5rp4a064ba]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742535824791\"]","timestamp":"2025-03-21T05:43:44.923Z"}
{"level":"debug","message":"Executing query [m8icu7moq8a1zduhae]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-DOSAJE-1742535824791\",\"TEST-OFICIO-1742535824791\",7318,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:43:44.929Z"}
{"level":"debug","message":"Executing query [m8icu7ms3g50nn7x498]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:44.932Z"}
{"level":"debug","message":"Executing query [m8icu7mtndg2cl9kyc]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742535824927\"]","timestamp":"2025-03-21T05:43:44.934Z"}
{"level":"debug","message":"Executing query [m8icu7mtsr2fa8r473h]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[1002]","timestamp":"2025-03-21T05:43:44.933Z"}
{"level":"debug","message":"Executing query [m8icu7mw9ybvwat0404]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T05:43:44.936Z"}
{"level":"debug","message":"Executing query [m8icu7mwe2bx4jtpdhu]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742535824927\"]","timestamp":"2025-03-21T05:43:44.936Z"}
{"level":"debug","message":"Executing query [m8icu7mz36y908ax1t]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T05:43:44.939Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:44.935Z"}
{"level":"debug","message":"Executing query [m8icu7n06grsebywkye]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.940Z"}
{"level":"debug","message":"Executing query [m8icu7mywpiyfv0m1kb]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1002]","timestamp":"2025-03-21T05:43:44.938Z"}
{"level":"debug","message":"Executing query [m8icu7n0zb5qzzvkhqs]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.940Z"}
{"level":"debug","message":"Executing query [m8icu7n1k5ud8vim63i]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:44.941Z"}
{"level":"debug","message":"Executing query [m8icu7n7rkpmjg610y7]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742535824791\"]","timestamp":"2025-03-21T05:43:44.948Z"}
{"level":"debug","message":"Executing query [m8icu7nefqlrxdkk0ta]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",5]","timestamp":"2025-03-21T05:43:44.955Z"}
{"level":"debug","message":"Executing query [m8icu7nf9kzpasyonkn]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T05:43:44.955Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:44.945Z"}
{"level":"debug","message":"Executing query [m8icu7n6wk5i98wecim]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[1008]","timestamp":"2025-03-21T05:43:44.947Z"}
{"level":"debug","message":"Executing query [m8icu7ncq2haqec27st]: UPDATE DocumentoArchivo SET Observaciones = ? WHERE IDArchivo = ?","params":"[\"Observaciones actualizadas para pruebas\",5]","timestamp":"2025-03-21T05:43:44.952Z"}
{"level":"debug","message":"Executing query [m8icu7nho7rx7f4go1i]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[1002]","timestamp":"2025-03-21T05:43:44.957Z"}
{"level":"debug","message":"Executing query [m8icu7nk09uva73bsonv]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.960Z"}
{"level":"debug","message":"Executing query [m8icu7nju31jfeibh]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1002]","timestamp":"2025-03-21T05:43:44.960Z"}
{"level":"debug","message":"Executing query [m8icu7nlbv4ijohtymp]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T05:43:44.961Z"}
{"level":"debug","message":"Executing query [m8icu7nlyeg85if451a]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.961Z"}
{"level":"debug","message":"Executing query [m8icu7nn771wdgm3c4i]: DELETE FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.963Z"}
{"level":"debug","message":"Executing query [m8icu7nnwjaq41treun]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:43:44.963Z"}
{"level":"debug","message":"Executing query [m8icu7nnt4xmedoztgo]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1002]","timestamp":"2025-03-21T05:43:44.964Z"}
{"level":"debug","message":"Executing query [m8icu7np9bt41sbcxww]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:44.965Z"}
{"level":"debug","message":"Executing query [m8icu7nphv47fuvw2nh]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.966Z"}
{"level":"debug","message":"Executing query [m8icu7nq2nssftorflr]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:43:44.966Z"}
{"level":"debug","message":"Executing query [m8icu7nr4api6cm991x]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.967Z"}
{"level":"debug","message":"Executing query [m8icu7nstjf0u868lz9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:44.968Z"}
{"level":"debug","message":"Executing query [m8icu7nt8rvujwr18w]: CALL sp_subir_archivo_documento(?, ?, ?, ?)","params":"[1008,\"IMAGEN\",\"/uploads/test/imagen_1742535824969.jpg\",\"Archivo creado usando el procedimiento almacenado\"]","timestamp":"2025-03-21T05:43:44.969Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:44.967Z"}
{"level":"debug","message":"Executing query [m8icu7nvyrark1dcxje]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.971Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:44.971Z"}
{"level":"debug","message":"Executing query [m8icu7nx24859ccu3xh]: SELECT * FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742535824969.jpg\"]","timestamp":"2025-03-21T05:43:44.973Z"}
{"level":"debug","message":"Executing query [m8icu7nzhxdz6bjntp9]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.975Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.970Z"}
{"level":"debug","message":"Executing query [m8icu7o1rgpnm9nlt2]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742535824969.jpg\"]","timestamp":"2025-03-21T05:43:44.977Z"}
{"level":"debug","message":"Executing query [m8icu7o6ksewll10r9l]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.982Z"}
{"level":"debug","message":"Executing query [m8icu7o3ij3lfwvs1rl]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.980Z"}
{"level":"debug","message":"Executing query [m8icu7o71ndo5io1uc8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:44.983Z"}
{"level":"debug","message":"Executing query [m8icu7o8e3qaj2r1pj]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-DOSAJE-1742535824984\",\"TEST-SP-OFICIO-1742535824984\",1371,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T05:43:44.984Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:44.985Z"}
{"level":"debug","message":"Executing query [m8icu7obrzzd3h7fyr]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742535824984\"]","timestamp":"2025-03-21T05:43:44.987Z"}
{"level":"debug","message":"Executing query [m8icu7odiovk6zfc3fc]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742535824984\"]","timestamp":"2025-03-21T05:43:44.989Z"}
{"level":"debug","message":"Executing query [m8icu7ogfldievu508u]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:44.993Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:44.994Z"}
{"level":"debug","message":"Executing query [m8icu7ol3dx74lguhza]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742535824873\"]","timestamp":"2025-03-21T05:43:44.997Z"}
{"level":"debug","message":"Executing query [m8icu7omvrehu7yitzb]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-QUIMICA-1742535824873\",\"TEST-OFI-QUIMICA-1742535824873\",319,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:43:44.999Z"}
{"level":"debug","message":"Executing query [m8icu7oty4xnksldwr8]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T05:43:45.005Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T05:43:44.888Z"}
{"level":"debug","message":"Executing query [m8icu7ot9vox6h5yws9]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T05:43:45.006Z"}
{"level":"debug","message":"Executing query [m8icu7p1ddx1w57u0nc]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742535824873\"]","timestamp":"2025-03-21T05:43:45.013Z"}
{"level":"debug","message":"Executing query [m8icu7p4ga7yhemrkc9]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T05:43:45.016Z"}
{"level":"debug","message":"Executing query [m8icu7p5n4dibazb70s]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",3]","timestamp":"2025-03-21T05:43:45.017Z"}
{"level":"debug","message":"Executing query [m8icu7p70jvtwohabc69]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1008]","timestamp":"2025-03-21T05:43:45.019Z"}
{"level":"debug","message":"Executing query [m8icu7p8rzqiomz7t]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T05:43:45.020Z"}
{"level":"debug","message":"Executing query [m8icu7pbxcplfp3g1wp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:45.023Z"}
{"level":"debug","message":"Executing query [m8icu7pb4dh7hjkpse2]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T05:43:45.023Z"}
{"level":"debug","message":"Executing query [m8icu7pdbeqwb34qbub]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T05:43:45.026Z"}
{"level":"debug","message":"Executing query [m8icu7pfsp2dri032c]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T05:43:45.027Z"}
{"level":"debug","message":"Executing query [m8icu7pjcs8o3po98f5]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T05:43:45.031Z"}
{"level":"debug","message":"Executing query [m8icu7pkbjamswjnuzo]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:45.032Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:45.034Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T20:04:45.348Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:45.390Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T20:04:45.394Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:46.067Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:46.097Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:46.754Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:46.768Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:47.422Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T20:04:47.424Z"}
{"level":"debug","message":"Executing query [m8j7lirbf37rc9rzjne]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:47.543Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:47.555Z"}
{"level":"debug","message":"Executing query [m8j7lirpamuvmju4k5q]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:47.557Z"}
{"level":"debug","message":"Executing query [m8j7lisjwwszme49y1g]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T20:04:47.587Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T20:04:47.611Z"}
{"level":"debug","message":"Executing query [m8j7lit8glsfz40giy]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T20:04:47.612Z"}
{"level":"debug","message":"Executing query [m8j7litdgl7zrbuihir]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:47.617Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T20:04:47.622Z"}
{"level":"debug","message":"Executing query [m8j7litned6v9shn4wq]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T20:04:47.627Z"}
{"level":"debug","message":"Executing query [m8j7litt2f4pyps3b9o]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T20:04:47.633Z"}
{"level":"debug","message":"Executing query [m8j7litw3wr4tu1j646]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:47.636Z"}
{"level":"debug","message":"Executing query [m8j7liwsyljzncnolu]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:47.740Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:47.750Z"}
{"level":"debug","message":"Executing query [m8j7lix4jmkh771nzd]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:47.752Z"}
{"level":"debug","message":"Executing query [m8j7lix6ez8w1tmil65]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:47.754Z"}
{"level":"debug","message":"Executing query [m8j7lix740rmlwyygbk]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:47.755Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T20:04:47.757Z"}
{"level":"debug","message":"Executing query [m8j7lixax04886qxcv]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742587487739\"]","timestamp":"2025-03-21T20:04:47.758Z"}
{"level":"debug","message":"Executing query [m8j7lixejd7y8wdhsq]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742587487739\",\"TEST-OFI-1742587487739\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T20:04:47.762Z"}
{"level":"debug","message":"Executing query [m8j7lixnr122o8ty25]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1010]","timestamp":"2025-03-21T20:04:47.771Z"}
{"level":"debug","message":"Executing query [m8j7lixqorrqx6jizc]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742587487739\"]","timestamp":"2025-03-21T20:04:47.774Z"}
{"level":"debug","message":"Executing query [m8j7lixsggoqy9spjb]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1010]","timestamp":"2025-03-21T20:04:47.776Z"}
{"level":"debug","message":"Executing query [m8j7lixxsvjiqghzdk]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1010]","timestamp":"2025-03-21T20:04:47.781Z"}
{"level":"debug","message":"Executing query [m8j7liy0nwfb4dwe6s]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T20:04:47.784Z"}
{"level":"debug","message":"Executing query [m8j7liy3k99vzqiabxb]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1010]","timestamp":"2025-03-21T20:04:47.787Z"}
{"level":"debug","message":"Executing query [m8j7liy61s8jqm6gszz]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1010]","timestamp":"2025-03-21T20:04:47.790Z"}
{"level":"debug","message":"Executing query [m8j7liyah8qaiok4bvn]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1010]","timestamp":"2025-03-21T20:04:47.794Z"}
{"level":"debug","message":"Executing query [m8j7liyc6srg14da05b]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T20:04:47.796Z"}
{"level":"debug","message":"Executing query [m8j7liyeh204cgy4jfs]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T20:04:47.798Z"}
{"level":"debug","message":"Executing query [m8j7liyf6gzr94dqw83]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:47.799Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:47.800Z"}
{"level":"debug","message":"Executing query [m8j7lj1d87so8dhgjm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:47.905Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:47.916Z"}
{"level":"debug","message":"Executing query [m8j7lj1pmolocdau6nc]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:47.917Z"}
{"level":"debug","message":"Executing query [m8j7lj1rod170yhieyp]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742587487904\"]","timestamp":"2025-03-21T20:04:47.919Z"}
{"level":"debug","message":"Executing query [m8j7lj1wz4z2n2e6w7b]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-DOSAJE-1742587487904\",\"TEST-OFICIO-1742587487904\",9220,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T20:04:47.924Z"}
{"level":"debug","message":"Executing query [m8j7lj24ojuhc7zyu7]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T20:04:47.932Z"}
{"level":"debug","message":"Executing query [m8j7lj27gq3ebovr3o]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742587487904\"]","timestamp":"2025-03-21T20:04:47.935Z"}
{"level":"debug","message":"Executing query [m8j7lj28amcs0j266om]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",7]","timestamp":"2025-03-21T20:04:47.936Z"}
{"level":"debug","message":"Executing query [m8j7lj2b2do79jmyxvv]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T20:04:47.939Z"}
{"level":"debug","message":"Executing query [m8j7lj2ed3jyaeqbo0o]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T20:04:47.942Z"}
{"level":"debug","message":"Executing query [m8j7lj2g37aesj8ablx]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T20:04:47.945Z"}
{"level":"debug","message":"Executing query [m8j7lj2ijt98cc3haz]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T20:04:47.946Z"}
{"level":"debug","message":"Executing query [m8j7lj2lxoiq9mb5s5g]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T20:04:47.949Z"}
{"level":"debug","message":"Executing query [m8j7lj2nao0xpbeoo7]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-DOSAJE-1742587487951\",\"TEST-SP-OFICIO-1742587487951\",4164,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T20:04:47.951Z"}
{"level":"debug","message":"Executing query [m8j7lj30mf9d5676d8f]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742587487951\"]","timestamp":"2025-03-21T20:04:47.964Z"}
{"level":"debug","message":"Executing query [m8j7lj32bsb7qfc7hgv]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742587487951\"]","timestamp":"2025-03-21T20:04:47.966Z"}
{"level":"debug","message":"Executing query [m8j7lj363y5icofvkmr]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:47.970Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:47.972Z"}
{"level":"debug","message":"Executing query [m8j7lj646bxqw7xqlo9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:48.077Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:48.086Z"}
{"level":"debug","message":"Executing query [m8j7lj6fr6b8eplakxs]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:48.087Z"}
{"level":"debug","message":"Executing query [m8j7lj6h5drq744fmmj]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:48.089Z"}
{"level":"debug","message":"Executing query [m8j7lj6hbfles5k2avc]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:48.089Z"}
{"level":"debug","message":"Executing query [m8j7lj6in2yc6z6d019]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:48.090Z"}
{"level":"debug","message":"Executing query [m8j7lj6k0amawzem2jnf]: INSERT INTO Documento (\n            IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n            NroRegistro, NumeroOficioDocumento, FechaDocumento, \n            OrigenDocumento, Estado, Observaciones\n          ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-ARCHIVO-1742587488092\",\"TEST-OFI-ARCHIVO-1742587488092\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento para pruebas de archivo\"]","timestamp":"2025-03-21T20:04:48.092Z"}
{"level":"info","message":"Documento de prueba creado con ID: 1011","timestamp":"2025-03-21T20:04:48.095Z"}
{"level":"debug","message":"Executing query [m8j7lj6o0jplcaoytq5q]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/documento_1742587488076.pdf\"]","timestamp":"2025-03-21T20:04:48.096Z"}
{"level":"debug","message":"Executing query [m8j7lj6s9m4i71700tc]: INSERT INTO DocumentoArchivo (\n          IDDocumento, TipoArchivo, RutaArchivo, FechaSubida, Observaciones\n        ) VALUES (?, ?, ?, CURRENT_TIMESTAMP, ?)","params":"[1011,\"PDF\",\"/uploads/test/documento_1742587488076.pdf\",\"Archivo creado para pruebas automatizadas\"]","timestamp":"2025-03-21T20:04:48.100Z"}
{"level":"debug","message":"Executing query [m8j7lj6wlapga3jo8lg]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.104Z"}
{"level":"debug","message":"Executing query [m8j7lj6y8ptnif0i9dm]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[1011]","timestamp":"2025-03-21T20:04:48.106Z"}
{"level":"debug","message":"Executing query [m8j7lj70oo8byhbd9mq]: UPDATE DocumentoArchivo SET Observaciones = ? WHERE IDArchivo = ?","params":"[\"Observaciones actualizadas para pruebas\",7]","timestamp":"2025-03-21T20:04:48.108Z"}
{"level":"debug","message":"Executing query [m8j7lj73tc7tcr26ebf]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.111Z"}
{"level":"debug","message":"Executing query [m8j7lj76nh0cy0h40q]: DELETE FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.114Z"}
{"level":"debug","message":"Executing query [m8j7lj78dviyseeo08t]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.116Z"}
{"level":"debug","message":"Executing query [m8j7lj7a1x1s37p9qiah]: CALL sp_subir_archivo_documento(?, ?, ?, ?)","params":"[1011,\"IMAGEN\",\"/uploads/test/imagen_1742587488118.jpg\",\"Archivo creado usando el procedimiento almacenado\"]","timestamp":"2025-03-21T20:04:48.118Z"}
{"level":"debug","message":"Executing query [m8j7lj7eauu2x778hv9]: SELECT * FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742587488118.jpg\"]","timestamp":"2025-03-21T20:04:48.122Z"}
{"level":"debug","message":"Executing query [m8j7lj7fza54jrcfugn]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742587488118.jpg\"]","timestamp":"2025-03-21T20:04:48.123Z"}
{"level":"debug","message":"Executing query [m8j7lj7jt2g0b9bept]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:48.127Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:48.128Z"}
{"level":"debug","message":"Executing query [m8j7ljaeicpw8j3mye]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:48.230Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:48.242Z"}
{"level":"debug","message":"Executing query [m8j7ljarfwf1nmmc0sc]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742587488229\"]","timestamp":"2025-03-21T20:04:48.243Z"}
{"level":"debug","message":"Executing query [m8j7ljatepvyvg8bjlu]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742587488229\"]","timestamp":"2025-03-21T20:04:48.246Z"}
{"level":"debug","message":"Executing query [m8j7ljav7s1te73dxtd]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742587488229\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T20:04:48.247Z"}
{"level":"debug","message":"Executing query [m8j7ljb2wvfdlai3l9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T20:04:48.254Z"}
{"level":"debug","message":"Executing query [m8j7ljb4yx24pjh36cj]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742587488229\"]","timestamp":"2025-03-21T20:04:48.256Z"}
{"level":"debug","message":"Executing query [m8j7ljb7n81b76b7ta]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1006]","timestamp":"2025-03-21T20:04:48.259Z"}
{"level":"debug","message":"Executing query [m8j7ljbah8zijly25fp]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T20:04:48.262Z"}
{"level":"debug","message":"Executing query [m8j7ljbc3hfbakfdwmx]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T20:04:48.264Z"}
{"level":"debug","message":"Executing query [m8j7ljbfqrshkmpx1rk]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T20:04:48.267Z"}
{"level":"debug","message":"Executing query [m8j7ljbh614qwb11sre]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T20:04:48.269Z"}
{"level":"debug","message":"Executing query [m8j7ljbifbfimwx1h3v]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T20:04:48.270Z"}
{"level":"debug","message":"Executing query [m8j7ljbov5358vrkfb]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T20:04:48.276Z"}
{"level":"debug","message":"Executing query [m8j7ljbp010609h81jjbo]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T20:04:48.277Z"}
{"level":"debug","message":"Executing query [m8j7ljbr2ful66oaee]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:48.279Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:48.281Z"}
{"level":"debug","message":"Executing query [m8j7ljemu3nqibh6ot8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:48.382Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:48.393Z"}
{"level":"debug","message":"Executing query [m8j7ljeyvy4pdd6oey]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:48.394Z"}
{"level":"debug","message":"Executing query [m8j7ljf0y9ei1zap5]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742587488381\"]","timestamp":"2025-03-21T20:04:48.396Z"}
{"level":"debug","message":"Executing query [m8j7ljf4iozquk2c41e]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-QUIMICA-1742587488381\",\"TEST-OFI-QUIMICA-1742587488381\",7642,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T20:04:48.401Z"}
{"level":"debug","message":"Executing query [m8j7ljfac5996darsbl]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T20:04:48.406Z"}
{"level":"debug","message":"Executing query [m8j7ljfcsmmc3ufyzb]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742587488381\"]","timestamp":"2025-03-21T20:04:48.408Z"}
{"level":"debug","message":"Executing query [m8j7ljfel24u6xypewh]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",4]","timestamp":"2025-03-21T20:04:48.410Z"}
{"level":"debug","message":"Executing query [m8j7ljfhfk1j2ggplco]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T20:04:48.413Z"}
{"level":"debug","message":"Executing query [m8j7ljfjgmj602x51xb]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T20:04:48.415Z"}
{"level":"debug","message":"Executing query [m8j7ljfmajcmkljo1jb]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T20:04:48.418Z"}
{"level":"debug","message":"Executing query [m8j7ljfo5r48kd3r8h]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T20:04:48.420Z"}
{"level":"debug","message":"Executing query [m8j7ljfr2qok4v9asfa]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T20:04:48.423Z"}
{"level":"debug","message":"Executing query [m8j7ljft4v4o7me5zsj]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:48.425Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:48.427Z"}
{"level":"debug","message":"Executing query [m8j7ljip6l414njuhcj]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:48.530Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:48.541Z"}
{"level":"debug","message":"Executing query [m8j7ljj2j7vttykdja]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:48.542Z"}
{"level":"debug","message":"Executing query [m8j7ljj4uqfytfjh4yb]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742587488529\"]","timestamp":"2025-03-21T20:04:48.545Z"}
{"level":"debug","message":"Executing query [m8j7ljj9stt5binqfc]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-FORENSE-1742587488529\",\"TEST-OFI-FORENSE-1742587488529\",7968,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742587488529\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T20:04:48.549Z"}
{"level":"debug","message":"Executing query [m8j7ljje33x2lf59r7r]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.554Z"}
{"level":"debug","message":"Executing query [m8j7ljjg7l9sfp9sog]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742587488529\"]","timestamp":"2025-03-21T20:04:48.556Z"}
{"level":"debug","message":"Executing query [m8j7ljjif0kyub1uh4e]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",7]","timestamp":"2025-03-21T20:04:48.558Z"}
{"level":"debug","message":"Executing query [m8j7ljjlprey7ktxq7k]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.561Z"}
{"level":"debug","message":"Executing query [m8j7ljjnqlu2rr49zy]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.563Z"}
{"level":"debug","message":"Executing query [m8j7ljjqeoecuopos57]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.566Z"}
{"level":"debug","message":"Executing query [m8j7ljjrrekpbn1zju]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.567Z"}
{"level":"debug","message":"Executing query [m8j7ljjumu42igrrbb]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.570Z"}
{"level":"debug","message":"Executing query [m8j7ljjx6d527d4196]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-FORENSE-1742587488573\",\"TEST-SP-OFI-FORENSE-1742587488573\",8742,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T20:04:48.573Z"}
{"level":"debug","message":"Executing query [m8j7ljk0jjl0xxymjy]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742587488573\"]","timestamp":"2025-03-21T20:04:48.576Z"}
{"level":"debug","message":"Executing query [m8j7ljk2g93f7rq692i]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742587488573\"]","timestamp":"2025-03-21T20:04:48.578Z"}
{"level":"debug","message":"Executing query [m8j7ljk5cjgsna3jedb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:48.581Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:48.583Z"}
{"level":"debug","message":"Executing query [m8j7ljmyag19r4xpuwa]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:48.682Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:48.691Z"}
{"level":"debug","message":"Executing query [m8j7ljn94dpzjb57qbi]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742587488681\"]","timestamp":"2025-03-21T20:04:48.693Z"}
{"level":"debug","message":"Executing query [m8j7ljnby7z9ckjrzae]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742587488681\",true]","timestamp":"2025-03-21T20:04:48.695Z"}
{"level":"debug","message":"Executing query [m8j7ljnl5ijjdh6aq9v]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1003]","timestamp":"2025-03-21T20:04:48.705Z"}
{"level":"debug","message":"Executing query [m8j7ljnnsrngv09okqs]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742587488681\"]","timestamp":"2025-03-21T20:04:48.707Z"}
{"level":"debug","message":"Executing query [m8j7ljno0tslqk1z237j]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",1003]","timestamp":"2025-03-21T20:04:48.708Z"}
{"level":"debug","message":"Executing query [m8j7ljns4eggl749ynb]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1003]","timestamp":"2025-03-21T20:04:48.712Z"}
{"level":"debug","message":"Executing query [m8j7ljnumwbzhtihyd]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[1003]","timestamp":"2025-03-21T20:04:48.714Z"}
{"level":"debug","message":"Executing query [m8j7ljnxdn8oflm81ic]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1003]","timestamp":"2025-03-21T20:04:48.717Z"}
{"level":"debug","message":"Executing query [m8j7ljnz5irl4cr0kyr]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[1003]","timestamp":"2025-03-21T20:04:48.719Z"}
{"level":"debug","message":"Executing query [m8j7ljo0ubo41e67hwh]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1003]","timestamp":"2025-03-21T20:04:48.720Z"}
{"level":"debug","message":"Executing query [m8j7ljo474ifpavke6r]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1003]","timestamp":"2025-03-21T20:04:48.724Z"}
{"level":"debug","message":"Executing query [m8j7ljo5uk882yph5p8]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T20:04:48.725Z"}
{"level":"debug","message":"Executing query [m8j7ljo73a49urwzyzq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:48.727Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:48.727Z"}
{"level":"debug","message":"Executing query [m8j7ljqwgr60crcz1fm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:48.824Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:48.836Z"}
{"level":"debug","message":"Executing query [m8j7ljraick7vpusmd]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T20:04:48.838Z"}
{"level":"debug","message":"Executing query [m8j7ljrb2il8lh81uv9]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T20:04:48.839Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T20:04:48.846Z"}
{"level":"debug","message":"Executing query [m8j7ljrinjjwxmdsz7a]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T20:04:48.846Z"}
{"level":"debug","message":"Executing query [m8j7ljrm8kr6f9kk3uk]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T20:04:48.850Z"}
{"level":"debug","message":"Executing query [m8j7ljrnsfoh7eqnyt]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T20:04:48.851Z"}
{"level":"debug","message":"Executing query [m8j7ljrosjkjocjygsi]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T20:04:48.852Z"}
{"level":"debug","message":"Executing query [m8j7ljrs9vnqj64yjm]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1008]","timestamp":"2025-03-21T20:04:48.856Z"}
{"level":"debug","message":"Executing query [m8j7ljruiavqimg1lxm]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T20:04:48.858Z"}
{"level":"debug","message":"Executing query [m8j7ljrwk5dtru4wul]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1008]","timestamp":"2025-03-21T20:04:48.860Z"}
{"level":"debug","message":"Executing query [m8j7ljs0triynl0rl3]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1008]","timestamp":"2025-03-21T20:04:48.864Z"}
{"level":"debug","message":"Executing query [m8j7ljs2fx7mikhz7vv]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1008]","timestamp":"2025-03-21T20:04:48.866Z"}
{"level":"debug","message":"Executing query [m8j7ljs772ijy1ea9bu]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1008]","timestamp":"2025-03-21T20:04:48.871Z"}
{"level":"debug","message":"Executing query [m8j7ljs9kcrvokpvox]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:48.873Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:48.874Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:48.980Z"}
{"level":"debug","message":"Executing query [m8j7ljvcmqg1h01vj7]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T20:04:48.984Z"}
{"level":"debug","message":"Executing query [m8j7ljve40oj5u9wxbu]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T20:04:48.986Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8j7ljve40oj5u9wxbu]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T20:04:48.988Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:48.990Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T20:04:49.070Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T20:04:49.071Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T20:04:49.071Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T20:04:49.071Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T20:04:49.072Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T20:04:49.072Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:02.242Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:02.287Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:02.955Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:02.964Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T21:48:03.675Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:03.684Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:48:03.686Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:04.367Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:48:04.369Z"}
{"level":"debug","message":"Executing query [m8jbaccpxwvz661kgnq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:04.489Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:04.499Z"}
{"level":"debug","message":"Executing query [m8jbacd2ivc97uep5in]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:04.502Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:48:04.506Z"}
{"level":"debug","message":"Executing query [m8jbacd627myi3v4a8v]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T21:48:04.506Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T21:48:04.508Z"}
{"level":"debug","message":"Executing query [m8jbacd92ckfxnpa0d]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T21:48:04.509Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T21:48:04.510Z"}
{"level":"debug","message":"Executing query [m8jbacdbelqjs2mxkg]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:04.511Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:48:04.513Z"}
{"level":"debug","message":"Executing query [m8jbacdh1f80yzte59j]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T21:48:04.517Z"}
{"level":"debug","message":"Executing query [m8jbacdljj33auc07j]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T21:48:04.521Z"}
{"level":"debug","message":"Executing query [m8jbacdoxdkr2b0za59]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:04.524Z"}
{"level":"debug","message":"Executing query [m8jbacgib2v6iaro8bn]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:04.626Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:04.636Z"}
{"level":"debug","message":"Executing query [m8jbacgturdpo7stj9f]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:04.638Z"}
{"level":"debug","message":"Executing query [m8jbacgv3u152rg7hzo]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742593684626\"]","timestamp":"2025-03-21T21:48:04.639Z"}
{"level":"debug","message":"Executing query [m8jbacgyikyw3t7lfvg]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742593684626\",\"TEST-OFICIO-1742593684626\",4916,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:48:04.642Z"}
{"level":"debug","message":"Executing query [m8jbach3xv18s8xhxd]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.647Z"}
{"level":"debug","message":"Executing query [m8jbach7lidxq7nwe98]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742593684626\"]","timestamp":"2025-03-21T21:48:04.651Z"}
{"level":"debug","message":"Executing query [m8jbachbzpvx4u8dsb]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",1]","timestamp":"2025-03-21T21:48:04.655Z"}
{"level":"debug","message":"Executing query [m8jbachf5jdbvjusxae]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.659Z"}
{"level":"debug","message":"Executing query [m8jbachht6wx63nfnan]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.661Z"}
{"level":"debug","message":"Executing query [m8jbachkxgqlls2sqa]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.664Z"}
{"level":"debug","message":"Executing query [m8jbachmtzjds9l3ke]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.666Z"}
{"level":"debug","message":"Executing query [m8jbachpcp6xyvkb1t]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.669Z"}
{"level":"debug","message":"Executing query [m8jbachsb5wxamkzh8k]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742593684672\",\"TEST-SP-OFICIO-1742593684672\",764,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T21:48:04.672Z"}
{"level":"debug","message":"Executing query [m8jbachxloy5afoij2]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742593684672\"]","timestamp":"2025-03-21T21:48:04.677Z"}
{"level":"debug","message":"Executing query [m8jbachzpfaezb9rcd9]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742593684672\"]","timestamp":"2025-03-21T21:48:04.679Z"}
{"level":"debug","message":"Executing query [m8jbaci23joohgqe0mg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:04.682Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:04.683Z"}
{"level":"debug","message":"Executing query [m8jbaclb2m2ltlsuov9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:04.799Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:04.809Z"}
{"level":"debug","message":"Executing query [m8jbaclmvxk0hescrrh]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:04.811Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:48:04.812Z"}
{"level":"debug","message":"Executing query [m8jbaclo0p9vqi4tdfu]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:04.812Z"}
{"level":"debug","message":"Executing query [m8jbaclp2zn24pjo9b]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:04.813Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:48:04.814Z"}
{"level":"debug","message":"Executing query [m8jbaclufmgag9gwhjd]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742593684799\"]","timestamp":"2025-03-21T21:48:04.818Z"}
{"level":"debug","message":"Executing query [m8jbaclygymbyodnt9g]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T21:48:04.822Z"}
{"level":"debug","message":"Executing query [m8jbacm1ikekxwnzxz]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T21:48:04.825Z"}
{"level":"debug","message":"Executing query [m8jbacm3x157f9jfx48]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T21:48:04.827Z"}
{"level":"debug","message":"Executing query [m8jbacm44syb2j37c3l]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:04.828Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:04.830Z"}
{"level":"debug","message":"Executing query [m8jbacp6xs8n6xzj6s]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:04.938Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:04.949Z"}
{"level":"debug","message":"Executing query [m8jbacpj79a534524rx]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:04.951Z"}
{"level":"debug","message":"Executing query [m8jbacplas6gq3fi0lr]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742593684937\"]","timestamp":"2025-03-21T21:48:04.953Z"}
{"level":"debug","message":"Executing query [m8jbacpnomei8qxhrzh]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742593684937\",\"TEST-OFI-FORENSE-1742593684937\",735,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742593684937\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:48:04.955Z"}
{"level":"debug","message":"Executing query [m8jbacpuux2unvyozyk]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.962Z"}
{"level":"debug","message":"Executing query [m8jbacpwfwnpvjneq8s]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742593684937\"]","timestamp":"2025-03-21T21:48:04.965Z"}
{"level":"debug","message":"Executing query [m8jbacpy2sls79q4a2o]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",1]","timestamp":"2025-03-21T21:48:04.966Z"}
{"level":"debug","message":"Executing query [m8jbacq149wpgwyctza]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.969Z"}
{"level":"debug","message":"Executing query [m8jbacq3n6ojlz2cx6]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.971Z"}
{"level":"debug","message":"Executing query [m8jbacq66fvanc1gmkp]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.974Z"}
{"level":"debug","message":"Executing query [m8jbacq8dlr92o5buaj]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.976Z"}
{"level":"debug","message":"Executing query [m8jbacqa1tstmtip7eb]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.978Z"}
{"level":"debug","message":"Executing query [m8jbacqcrjveeql4ghr]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742593684980\",\"TEST-SP-OFI-FORENSE-1742593684980\",69,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T21:48:04.980Z"}
{"level":"debug","message":"Executing query [m8jbacqgfxh9t853t2b]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742593684980\"]","timestamp":"2025-03-21T21:48:04.984Z"}
{"level":"debug","message":"Executing query [m8jbacqhnfsrf4z7lio]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742593684980\"]","timestamp":"2025-03-21T21:48:04.985Z"}
{"level":"debug","message":"Executing query [m8jbacqltk9lo8s1oh]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:04.989Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:04.990Z"}
{"level":"debug","message":"Executing query [m8jbactd5cvxnwjbx0c]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:05.089Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:05.098Z"}
{"level":"debug","message":"Executing query [m8jbacto0ttk4fcjq7j8]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:05.100Z"}
{"level":"debug","message":"Executing query [m8jbactq92gpa22rmdk]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:05.102Z"}
{"level":"debug","message":"Executing query [m8jbactr46d4glhj9g8]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:05.103Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T21:48:05.104Z"}
{"level":"debug","message":"Executing query [m8jbactwbm82cb4aj8]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T21:48:05.108Z"}
{"level":"debug","message":"Executing query [m8jbacu0q9xkw03tl6l]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:05.112Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:05.113Z"}
{"level":"debug","message":"Executing query [m8jbacwsuyx5cihrj0g]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:05.212Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:05.223Z"}
{"level":"debug","message":"Executing query [m8jbacx41g0835mk4h9]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742593685211\"]","timestamp":"2025-03-21T21:48:05.224Z"}
{"level":"debug","message":"Executing query [m8jbacx6gyh0a4vuyjq]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742593685211\"]","timestamp":"2025-03-21T21:48:05.226Z"}
{"level":"debug","message":"Executing query [m8jbacx8dx4dil15ci]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742593685211\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:48:05.228Z"}
{"level":"debug","message":"Executing query [m8jbacxdiiwoyik0pip]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.233Z"}
{"level":"debug","message":"Executing query [m8jbacxfye0q9l9mfc9]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742593685211\"]","timestamp":"2025-03-21T21:48:05.235Z"}
{"level":"debug","message":"Executing query [m8jbacxhiownsqeipo]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",2]","timestamp":"2025-03-21T21:48:05.237Z"}
{"level":"debug","message":"Executing query [m8jbacxl5nczq6owb2h]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.241Z"}
{"level":"debug","message":"Executing query [m8jbacxm0ch9dlzhuqfo]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.242Z"}
{"level":"debug","message":"Executing query [m8jbacxqd4ce4r2yf7]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.246Z"}
{"level":"debug","message":"Executing query [m8jbacxr1w4q9503i27h]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.247Z"}
{"level":"debug","message":"Executing query [m8jbacxspgyfx56q63]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.248Z"}
{"level":"debug","message":"Executing query [m8jbacxxl0dwo01kqhj]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.253Z"}
{"level":"debug","message":"Executing query [m8jbacxyhk2wehjd4y9]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:48:05.254Z"}
{"level":"debug","message":"Executing query [m8jbacy0l0dsbnwmzph]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:05.256Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:05.258Z"}
{"level":"debug","message":"Executing query [m8jbad1h31tu46zj97v]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:05.381Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:05.392Z"}
{"level":"debug","message":"Executing query [m8jbad1uwgpnz4eoywh]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T21:48:05.394Z"}
{"level":"debug","message":"Executing query [m8jbad1wel91w2vy7xm]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T21:48:05.396Z"}
{"level":"debug","message":"Executing query [m8jbad1xk5slq4fji1]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive, Descripcion) VALUES (?, ?, ?, ?, ?, ?)","params":"[999,\"Área de Prueba\",\"TEST-AREA\",\"PRUEBA\",1,\"Área creada para pruebas\"]","timestamp":"2025-03-21T21:48:05.397Z"}
{"level":"debug","message":"Executing query [m8jbad21ouyvvcdqswc]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[999,\"Rol de Prueba\",\"Rol creado para pruebas\",1,255]","timestamp":"2025-03-21T21:48:05.401Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T21:48:05.403Z"}
{"level":"debug","message":"Executing query [m8jbad23k86pjqqu6v]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:48:05.403Z"}
{"level":"debug","message":"Executing query [m8jbad25sgcopsqwsgr]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:48:05.405Z"}
{"level":"debug","message":"Executing query [m8jbad277769qgj9uwe]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:48:05.407Z"}
{"level":"debug","message":"Executing query [m8jbad28vruclusl0x]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T21:48:05.408Z"}
{"level":"debug","message":"Executing query [m8jbad2cyyl5592t9q]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.412Z"}
{"level":"debug","message":"Executing query [m8jbad2f1hrj7dvfc4n]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:48:05.415Z"}
{"level":"debug","message":"Executing query [m8jbad2gorcjyly0p9s]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",2]","timestamp":"2025-03-21T21:48:05.416Z"}
{"level":"debug","message":"Executing query [m8jbad2jvwttjl4d0m]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.419Z"}
{"level":"debug","message":"Executing query [m8jbad2lj4if6rxbwr]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.421Z"}
{"level":"debug","message":"Executing query [m8jbad2ou4bqjcuzsyi]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.424Z"}
{"level":"debug","message":"Executing query [m8jbad2p466fz1xj4ea]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:05.425Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:05.426Z"}
{"level":"debug","message":"Executing query [m8jbad5espoklz68fe]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:05.522Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:05.531Z"}
{"level":"debug","message":"Executing query [m8jbad5pju4w0k2edt]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:05.533Z"}
{"level":"debug","message":"Executing query [m8jbad5q4y2ck5ay7t]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742593685521\"]","timestamp":"2025-03-21T21:48:05.534Z"}
{"level":"debug","message":"Executing query [m8jbad5sp14u8ho8epg]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742593685521\",\"TEST-OFI-QUIMICA-1742593685521\",9681,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:48:05.536Z"}
{"level":"debug","message":"Executing query [m8jbad5z88vqal03nly]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.543Z"}
{"level":"debug","message":"Executing query [m8jbad6148etavdj45j]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742593685521\"]","timestamp":"2025-03-21T21:48:05.545Z"}
{"level":"debug","message":"Executing query [m8jbad63w4p9j8o353m]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",1]","timestamp":"2025-03-21T21:48:05.547Z"}
{"level":"debug","message":"Executing query [m8jbad67z2c901hk9ah]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.551Z"}
{"level":"debug","message":"Executing query [m8jbad69zno55irt4ea]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.553Z"}
{"level":"debug","message":"Executing query [m8jbad6cjohkj1lx8yk]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.556Z"}
{"level":"debug","message":"Executing query [m8jbad6f6igwedtdmoc]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.559Z"}
{"level":"debug","message":"Executing query [m8jbad6igvmaci0xc9]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.562Z"}
{"level":"debug","message":"Executing query [m8jbad6k0uotx80xo99o]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:05.564Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:05.566Z"}
{"level":"debug","message":"Executing query [m8jbad99rh7phtsvvtg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:05.661Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:05.673Z"}
{"level":"debug","message":"Executing query [m8jbad9n5kx8qyvi1iw]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742593685660\"]","timestamp":"2025-03-21T21:48:05.675Z"}
{"level":"debug","message":"Executing query [m8jbad9ob8iy1hjjn5p]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742593685660\",true]","timestamp":"2025-03-21T21:48:05.676Z"}
{"level":"debug","message":"Executing query [m8jbad9s8iygr633t4h]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.680Z"}
{"level":"debug","message":"Executing query [m8jbad9v7rrizr1r9k]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742593685660\"]","timestamp":"2025-03-21T21:48:05.683Z"}
{"level":"debug","message":"Executing query [m8jbad9xg73z1k7lttk]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",1]","timestamp":"2025-03-21T21:48:05.685Z"}
{"level":"debug","message":"Executing query [m8jbada0almjg1d1d1r]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.688Z"}
{"level":"debug","message":"Executing query [m8jbada20muog8rz19se]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.690Z"}
{"level":"debug","message":"Executing query [m8jbada4cuszwtwwo8o]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.692Z"}
{"level":"debug","message":"Executing query [m8jbada6wz5qg28sdka]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.694Z"}
{"level":"debug","message":"Executing query [m8jbada75n5yajcodjq]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.695Z"}
{"level":"debug","message":"Executing query [m8jbada9btxyxj6pqll]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.697Z"}
{"level":"debug","message":"Executing query [m8jbadaachpvsnc3cg]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:48:05.698Z"}
{"level":"debug","message":"Executing query [m8jbadab1vv4efb59s1]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:05.699Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:05.700Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:05.811Z"}
{"level":"debug","message":"Executing query [m8jbaddi2tz4u5f9lgq]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T21:48:05.814Z"}
{"level":"debug","message":"Executing query [m8jbaddkw5oyrt4r7wo]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T21:48:05.816Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbaddkw5oyrt4r7wo]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T21:48:05.817Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:05.818Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T21:48:05.897Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T21:48:05.899Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T21:48:05.899Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T21:48:05.900Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T21:48:05.900Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T21:48:05.900Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:44.903Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:44.939Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:45.706Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:45.717Z"}
{"level":"debug","message":"Executing query [m8jbhnr7q9sppy5lzfm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:45.859Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:45.875Z"}
{"level":"debug","message":"Executing query [m8jbhnrqurycoiabltg]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:45.878Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:53:45.882Z"}
{"level":"debug","message":"Executing query [m8jbhnrvptpac9ub6ah]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:45.883Z"}
{"level":"debug","message":"Executing query [m8jbhnrxquk6tbtpq1]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:45.885Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:53:45.887Z"}
{"level":"debug","message":"Executing query [m8jbhns3jtqi6y5hp3]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594025858\"]","timestamp":"2025-03-21T21:53:45.891Z"}
{"level":"debug","message":"Executing query [m8jbhns91dhml4z99h]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T21:53:45.897Z"}
{"level":"debug","message":"Executing query [m8jbhnsdc3vuwrujcgu]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T21:53:45.902Z"}
{"level":"debug","message":"Executing query [m8jbhnsgfsuaxgcffeg]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T21:53:45.904Z"}
{"level":"debug","message":"Executing query [m8jbhnsim6d24wq7jx]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:45.906Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:45.908Z"}
{"level":"debug","message":"Executing query [m8jbhnw0yhj5gxsof0a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:46.032Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:46.046Z"}
{"level":"debug","message":"Executing query [m8jbhnwg0drltlpw3bs]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:46.048Z"}
{"level":"debug","message":"Executing query [m8jbhnwhusv33bbekoq]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:46.049Z"}
{"level":"debug","message":"Executing query [m8jbhnwiwzbue4q9h]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:46.050Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T21:53:46.052Z"}
{"level":"debug","message":"Executing query [m8jbhnwozpkqx8e71hs]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T21:53:46.056Z"}
{"level":"debug","message":"Executing query [m8jbhnwtfsadypjrbs]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:46.061Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:46.062Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:46.814Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T21:53:46.817Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:46.828Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:47.534Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:53:47.536Z"}
{"level":"debug","message":"Executing query [m8jbhp55pjsjg8usijm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:47.657Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:47.666Z"}
{"level":"debug","message":"Executing query [m8jbhp5f8sdbwykymrb]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T21:53:47.667Z"}
{"level":"debug","message":"Executing query [m8jbhp5gef2qc01ufu9]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T21:53:47.668Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T21:53:47.670Z"}
{"level":"debug","message":"Executing query [m8jbhp5itqqjfozs8dq]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:53:47.670Z"}
{"level":"debug","message":"Executing query [m8jbhp5jguuezt25s06]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:53:47.671Z"}
{"level":"debug","message":"Executing query [m8jbhp5lr43yoplf73]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:53:47.673Z"}
{"level":"debug","message":"Executing query [m8jbhp5mx5znrg20oc]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T21:53:47.674Z"}
{"level":"debug","message":"Executing query [m8jbhp5shxjtvwc4mql]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.680Z"}
{"level":"debug","message":"Executing query [m8jbhp5uaak2fdsotgw]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:53:47.682Z"}
{"level":"debug","message":"Executing query [m8jbhp5xs4lbqfau39]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",3]","timestamp":"2025-03-21T21:53:47.685Z"}
{"level":"debug","message":"Executing query [m8jbhp60jj9dl29nyi9]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.688Z"}
{"level":"debug","message":"Executing query [m8jbhp62thtxf9nnpg]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.690Z"}
{"level":"debug","message":"Executing query [m8jbhp661u6h05ji86]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.694Z"}
{"level":"debug","message":"Executing query [m8jbhp678wren6ld51r]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:47.695Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:47.696Z"}
{"level":"debug","message":"Executing query [m8jbhp97u7f6cfjfx5p]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:47.803Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:47.816Z"}
{"level":"debug","message":"Executing query [m8jbhp9lmg78o3h8eg8]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:47.817Z"}
{"level":"debug","message":"Executing query [m8jbhp9nj1whkb1knwr]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594027803\"]","timestamp":"2025-03-21T21:53:47.819Z"}
{"level":"debug","message":"Executing query [m8jbhp9pi78xbbpm2b]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594027803\",\"TEST-OFICIO-1742594027803\",2151,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:53:47.821Z"}
{"level":"debug","message":"Executing query [m8jbhp9vwm8u05jeri]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.827Z"}
{"level":"debug","message":"Executing query [m8jbhp9yilhn6ty0qdn]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594027803\"]","timestamp":"2025-03-21T21:53:47.830Z"}
{"level":"debug","message":"Executing query [m8jbhpa1ydpjba6dkej]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",3]","timestamp":"2025-03-21T21:53:47.833Z"}
{"level":"debug","message":"Executing query [m8jbhpa49swg362i0t]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.836Z"}
{"level":"debug","message":"Executing query [m8jbhpa7v788c87es]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.839Z"}
{"level":"debug","message":"Executing query [m8jbhpaa135vdcef03r]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.842Z"}
{"level":"debug","message":"Executing query [m8jbhpacev2nh0trh8o]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.844Z"}
{"level":"debug","message":"Executing query [m8jbhpafkv0tzjoxi6l]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.847Z"}
{"level":"debug","message":"Executing query [m8jbhpagmptc5symrs]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594027848\",\"TEST-SP-OFICIO-1742594027848\",5209,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T21:53:47.848Z"}
{"level":"debug","message":"Executing query [m8jbhpak3333m6hp47a]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594027848\"]","timestamp":"2025-03-21T21:53:47.852Z"}
{"level":"debug","message":"Executing query [m8jbhpamorsxkta4sdb]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594027848\"]","timestamp":"2025-03-21T21:53:47.854Z"}
{"level":"debug","message":"Executing query [m8jbhpaopc7lthl057e]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:47.856Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:47.858Z"}
{"level":"debug","message":"Executing query [m8jbhpdj56apmhu8azg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:47.959Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:47.970Z"}
{"level":"debug","message":"Executing query [m8jbhpdvzpf1ey0nx4g]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:47.971Z"}
{"level":"debug","message":"Executing query [m8jbhpdxovsow7dfejr]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594027958\"]","timestamp":"2025-03-21T21:53:47.973Z"}
{"level":"debug","message":"Executing query [m8jbhpdyi7bjns58yl]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594027958\",\"TEST-OFI-FORENSE-1742594027958\",7022,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594027958\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:53:47.974Z"}
{"level":"debug","message":"Executing query [m8jbhpe3tmga8oiw9s]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.979Z"}
{"level":"debug","message":"Executing query [m8jbhpe5rrwtilomzh9]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594027958\"]","timestamp":"2025-03-21T21:53:47.981Z"}
{"level":"debug","message":"Executing query [m8jbhpe7w070zjyhh9]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",3]","timestamp":"2025-03-21T21:53:47.983Z"}
{"level":"debug","message":"Executing query [m8jbhpebpmze2a10dz]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.987Z"}
{"level":"debug","message":"Executing query [m8jbhpeeecqpkro666]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.990Z"}
{"level":"debug","message":"Executing query [m8jbhpeh8o5noalvhju]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.993Z"}
{"level":"debug","message":"Executing query [m8jbhpeisd7385que5d]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.994Z"}
{"level":"debug","message":"Executing query [m8jbhpemoctec5aff9e]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.998Z"}
{"level":"debug","message":"Executing query [m8jbhpenfqxk69ufrab]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594027999\",\"TEST-SP-OFI-FORENSE-1742594027999\",6214,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T21:53:47.999Z"}
{"level":"debug","message":"Executing query [m8jbhpergdq0486ykr7]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594027999\"]","timestamp":"2025-03-21T21:53:48.003Z"}
{"level":"debug","message":"Executing query [m8jbhpetw8gdgvjpemd]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594027999\"]","timestamp":"2025-03-21T21:53:48.005Z"}
{"level":"debug","message":"Executing query [m8jbhpewood1lcmyuyg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:48.008Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:48.009Z"}
{"level":"debug","message":"Executing query [m8jbhphspbpli0hgfij]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:48.112Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:48.125Z"}
{"level":"debug","message":"Executing query [m8jbhpi6z8jt0i5cra8]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594028111\"]","timestamp":"2025-03-21T21:53:48.126Z"}
{"level":"debug","message":"Executing query [m8jbhpi8v6lj1qs98ao]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594028111\"]","timestamp":"2025-03-21T21:53:48.128Z"}
{"level":"debug","message":"Executing query [m8jbhpi96clgyc0mwlo]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594028111\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:53:48.129Z"}
{"level":"debug","message":"Executing query [m8jbhpifvkdbh6t9b1]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T21:53:48.135Z"}
{"level":"debug","message":"Executing query [m8jbhpiiyjtnrz6x4dh]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594028111\"]","timestamp":"2025-03-21T21:53:48.138Z"}
{"level":"debug","message":"Executing query [m8jbhpikdgi12ejbx0m]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1000]","timestamp":"2025-03-21T21:53:48.140Z"}
{"level":"debug","message":"Executing query [m8jbhpin85puuk1wubs]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T21:53:48.143Z"}
{"level":"debug","message":"Executing query [m8jbhpipilvrk932el]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T21:53:48.145Z"}
{"level":"debug","message":"Executing query [m8jbhpiry1ctzxfq2c]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T21:53:48.147Z"}
{"level":"debug","message":"Executing query [m8jbhpitm77of04bbo]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T21:53:48.149Z"}
{"level":"debug","message":"Executing query [m8jbhpivjy3482inrd]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T21:53:48.151Z"}
{"level":"debug","message":"Executing query [m8jbhpiy4b3kxaheaq6]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T21:53:48.154Z"}
{"level":"debug","message":"Executing query [m8jbhpizm9ah2vsix2]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:53:48.155Z"}
{"level":"debug","message":"Executing query [m8jbhpj2h936ghj5c1]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:48.158Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:48.159Z"}
{"level":"debug","message":"Executing query [m8jbhplxdvgpex34ms]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:48.261Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:48.271Z"}
{"level":"debug","message":"Executing query [m8jbhpm9qs7zpwuma1]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:48.273Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:53:48.274Z"}
{"level":"debug","message":"Executing query [m8jbhpmaboqkim4yvqb]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T21:53:48.274Z"}
{"level":"debug","message":"Executing query [m8jbhpmbz2wnucq0eu]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T21:53:48.275Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T21:53:48.277Z"}
{"level":"debug","message":"Executing query [m8jbhpmdpba5gxtmmfo]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:48.277Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:53:48.278Z"}
{"level":"debug","message":"Executing query [m8jbhpmi3mo39oow79v]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T21:53:48.282Z"}
{"level":"debug","message":"Executing query [m8jbhpmlpc1ue39sfm]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T21:53:48.285Z"}
{"level":"debug","message":"Executing query [m8jbhpmnhdkf6ddh62d]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:48.287Z"}
{"level":"debug","message":"Executing query [m8jbhppfo0t2plnu3fp]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:48.387Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:48.400Z"}
{"level":"debug","message":"Executing query [m8jbhpptyjw6dsypgn]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:48.401Z"}
{"level":"debug","message":"Executing query [m8jbhppvx8viuhqa9rq]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594028386\"]","timestamp":"2025-03-21T21:53:48.403Z"}
{"level":"debug","message":"Executing query [m8jbhppwu3rs54bob3m]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594028386\",\"TEST-OFI-QUIMICA-1742594028386\",8799,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:53:48.404Z"}
{"level":"debug","message":"Executing query [m8jbhpq2tpvfugxjpc]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.410Z"}
{"level":"debug","message":"Executing query [m8jbhpq443nk8zu4d0v]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594028386\"]","timestamp":"2025-03-21T21:53:48.412Z"}
{"level":"debug","message":"Executing query [m8jbhpq7r9cgo9adz1]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",2]","timestamp":"2025-03-21T21:53:48.415Z"}
{"level":"debug","message":"Executing query [m8jbhpqarj6zhb7jp6s]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.418Z"}
{"level":"debug","message":"Executing query [m8jbhpqch8oayaky37b]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.420Z"}
{"level":"debug","message":"Executing query [m8jbhpqfn99nhavc5u9]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.423Z"}
{"level":"debug","message":"Executing query [m8jbhpqha7vl96rshz9]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.425Z"}
{"level":"debug","message":"Executing query [m8jbhpqkjzc4jwuaqmg]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.428Z"}
{"level":"debug","message":"Executing query [m8jbhpqm5h220ox0lin]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:48.430Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:48.431Z"}
{"level":"debug","message":"Executing query [m8jbhpteuhkgpm9wtkg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:48.531Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:48.541Z"}
{"level":"debug","message":"Executing query [m8jbhptrrtmvam10z1d]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594028530\"]","timestamp":"2025-03-21T21:53:48.543Z"}
{"level":"debug","message":"Executing query [m8jbhpts9hgxlzggbm8]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594028530\",true]","timestamp":"2025-03-21T21:53:48.544Z"}
{"level":"debug","message":"Executing query [m8jbhptw6gb9wurjf22]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.548Z"}
{"level":"debug","message":"Executing query [m8jbhptyviv9dpilgon]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594028530\"]","timestamp":"2025-03-21T21:53:48.550Z"}
{"level":"debug","message":"Executing query [m8jbhpu0j0bzrmyj07g]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",2]","timestamp":"2025-03-21T21:53:48.552Z"}
{"level":"debug","message":"Executing query [m8jbhpu3a36wih76pmp]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.555Z"}
{"level":"debug","message":"Executing query [m8jbhpu5ksnf6szygjl]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.557Z"}
{"level":"debug","message":"Executing query [m8jbhpu859bix8cf05v]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.560Z"}
{"level":"debug","message":"Executing query [m8jbhpuaie4jw1bl55b]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.562Z"}
{"level":"debug","message":"Executing query [m8jbhpub3ga57rdepjy]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.563Z"}
{"level":"debug","message":"Executing query [m8jbhpuey5t6xiy6pqf]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.566Z"}
{"level":"debug","message":"Executing query [m8jbhpugfzflg5mfz5n]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:53:48.568Z"}
{"level":"debug","message":"Executing query [m8jbhpuh4ai1k8evkkv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:48.569Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:48.570Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:48.684Z"}
{"level":"debug","message":"Executing query [m8jbhpxr35du48ithlr]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T21:53:48.687Z"}
{"level":"debug","message":"Executing query [m8jbhpxt80erc3hlnk]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T21:53:48.689Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbhpxt80erc3hlnk]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T21:53:48.691Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:48.692Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T21:53:48.774Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T21:53:48.775Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T21:53:48.776Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T21:53:48.776Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T21:53:48.777Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T21:53:48.777Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:22.143Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:22.181Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:22.912Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:22.922Z"}
{"level":"debug","message":"Executing query [m8jbl11kmt1h8r3okx]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:23.048Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:23.063Z"}
{"level":"debug","message":"Executing query [m8jbl121afhswrzc6x]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:23.065Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:56:23.070Z"}
{"level":"debug","message":"Executing query [m8jbl126cu81s9wtg8m]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:23.071Z"}
{"level":"debug","message":"Executing query [m8jbl128bxj948kfjev]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:23.072Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:56:23.074Z"}
{"level":"debug","message":"Executing query [m8jbl12e25i2hjp5be]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594183047\"]","timestamp":"2025-03-21T21:56:23.078Z"}
{"level":"debug","message":"Executing query [m8jbl12kxm7dj5e7yne]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T21:56:23.084Z"}
{"level":"debug","message":"Executing query [m8jbl12p9qes4u5v3of]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T21:56:23.089Z"}
{"level":"debug","message":"Executing query [m8jbl12rpuc2ir4ggqa]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T21:56:23.091Z"}
{"level":"debug","message":"Executing query [m8jbl12tei98pq2hjuf]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:23.093Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:23.095Z"}
{"level":"debug","message":"Executing query [m8jbl16kt1n40i4ovy]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:23.228Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:23.242Z"}
{"level":"debug","message":"Executing query [m8jbl1703oktgaqrt9m]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:23.244Z"}
{"level":"debug","message":"Executing query [m8jbl171ldfiy9ye2u]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:23.245Z"}
{"level":"debug","message":"Executing query [m8jbl172qrkhbe00er]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:23.246Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T21:56:23.249Z"}
{"level":"debug","message":"Executing query [m8jbl179bp5dwh5xl5g]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T21:56:23.253Z"}
{"level":"debug","message":"Executing query [m8jbl17e8aq37zk5zl]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:23.258Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:23.259Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T21:56:23.964Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:23.973Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:56:23.975Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:24.681Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:56:24.683Z"}
{"level":"debug","message":"Executing query [m8jbl2e9wp2r8qfe34i]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:24.802Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:24.813Z"}
{"level":"debug","message":"Executing query [m8jbl2emjrju0fwuf5]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:24.814Z"}
{"level":"debug","message":"Executing query [m8jbl2eo84pqccawa6k]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594184801\"]","timestamp":"2025-03-21T21:56:24.816Z"}
{"level":"debug","message":"Executing query [m8jbl2eqidiytdxfqm]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594184801\",\"TEST-OFICIO-1742594184801\",9499,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:56:24.818Z"}
{"level":"debug","message":"Executing query [m8jbl2ey5oc9lsvh5ev]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.826Z"}
{"level":"debug","message":"Executing query [m8jbl2f141ip1vlyzup]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594184801\"]","timestamp":"2025-03-21T21:56:24.829Z"}
{"level":"debug","message":"Executing query [m8jbl2f4ixsej2ecz2]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",5]","timestamp":"2025-03-21T21:56:24.832Z"}
{"level":"debug","message":"Executing query [m8jbl2f85uabq0esbn4]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.836Z"}
{"level":"debug","message":"Executing query [m8jbl2fboy4xnmd8yx]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.839Z"}
{"level":"debug","message":"Executing query [m8jbl2fei0c5igrxutm]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.842Z"}
{"level":"debug","message":"Executing query [m8jbl2ff51jrl8mp7n6]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.843Z"}
{"level":"debug","message":"Executing query [m8jbl2fj5zcjvziry1m]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.847Z"}
{"level":"debug","message":"Executing query [m8jbl2flknkm4e0lj6]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594184849\",\"TEST-SP-OFICIO-1742594184849\",6363,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T21:56:24.849Z"}
{"level":"debug","message":"Executing query [m8jbl2fo2lrtap09z0r]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594184849\"]","timestamp":"2025-03-21T21:56:24.852Z"}
{"level":"debug","message":"Executing query [m8jbl2fqy7d108rqgfo]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594184849\"]","timestamp":"2025-03-21T21:56:24.854Z"}
{"level":"debug","message":"Executing query [m8jbl2ft8rew82kakk]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:24.857Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:24.859Z"}
{"level":"debug","message":"Executing query [m8jbl2iumkldx8ksx5]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:24.966Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:24.975Z"}
{"level":"debug","message":"Executing query [m8jbl2j5m09x2fvq9z]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:24.977Z"}
{"level":"debug","message":"Executing query [m8jbl2j7dvzapj94y6]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594184965\"]","timestamp":"2025-03-21T21:56:24.979Z"}
{"level":"debug","message":"Executing query [m8jbl2j8efwpa7mp5zu]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594184965\",\"TEST-OFI-FORENSE-1742594184965\",8651,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594184965\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:56:24.980Z"}
{"level":"debug","message":"Executing query [m8jbl2jd0a4vf4jdby0j]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.985Z"}
{"level":"debug","message":"Executing query [m8jbl2jgas130xn0ni4]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594184965\"]","timestamp":"2025-03-21T21:56:24.988Z"}
{"level":"debug","message":"Executing query [m8jbl2jhrlgi2opbobs]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",5]","timestamp":"2025-03-21T21:56:24.989Z"}
{"level":"debug","message":"Executing query [m8jbl2jl6y640x35afm]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.993Z"}
{"level":"debug","message":"Executing query [m8jbl2jnf7999ecxpy9]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.995Z"}
{"level":"debug","message":"Executing query [m8jbl2jquyckkrsf1ye]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.998Z"}
{"level":"debug","message":"Executing query [m8jbl2jsywk90cb83hm]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T21:56:25.000Z"}
{"level":"debug","message":"Executing query [m8jbl2jvrgkxtgzyw8]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T21:56:25.003Z"}
{"level":"debug","message":"Executing query [m8jbl2jxrf0yss8ww4]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594185005\",\"TEST-SP-OFI-FORENSE-1742594185005\",1785,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T21:56:25.005Z"}
{"level":"debug","message":"Executing query [m8jbl2k1pwz9fi3emsi]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594185005\"]","timestamp":"2025-03-21T21:56:25.009Z"}
{"level":"debug","message":"Executing query [m8jbl2k2myweh1pmels]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594185005\"]","timestamp":"2025-03-21T21:56:25.010Z"}
{"level":"debug","message":"Executing query [m8jbl2k60l6cktpgovn]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:25.014Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:25.015Z"}
{"level":"debug","message":"Executing query [m8jbl2n30oal626py1jd]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:25.119Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:25.133Z"}
{"level":"debug","message":"Executing query [m8jbl2njvsjn37vfxa]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594185118\"]","timestamp":"2025-03-21T21:56:25.135Z"}
{"level":"debug","message":"Executing query [m8jbl2nl28x2go6jwxj]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594185118\"]","timestamp":"2025-03-21T21:56:25.137Z"}
{"level":"debug","message":"Executing query [m8jbl2nmnt9dja6b497]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594185118\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:56:25.138Z"}
{"level":"debug","message":"Executing query [m8jbl2nqf2wdbxxy84]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T21:56:25.142Z"}
{"level":"debug","message":"Executing query [m8jbl2ntb4n6qr87jzt]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594185118\"]","timestamp":"2025-03-21T21:56:25.145Z"}
{"level":"debug","message":"Executing query [m8jbl2nv7sy7vzierzw]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1001]","timestamp":"2025-03-21T21:56:25.147Z"}
{"level":"debug","message":"Executing query [m8jbl2nyihalvjr1dc]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T21:56:25.151Z"}
{"level":"debug","message":"Executing query [m8jbl2o1xev3bvmx0v]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T21:56:25.153Z"}
{"level":"debug","message":"Executing query [m8jbl2o3uubfq3c2tl]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T21:56:25.155Z"}
{"level":"debug","message":"Executing query [m8jbl2o6rr48fftw6z]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T21:56:25.158Z"}
{"level":"debug","message":"Executing query [m8jbl2o7j5rek6z54om]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T21:56:25.159Z"}
{"level":"debug","message":"Executing query [m8jbl2oajtdtboj4ixo]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T21:56:25.162Z"}
{"level":"debug","message":"Executing query [m8jbl2oc3key4q3p35x]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:56:25.165Z"}
{"level":"debug","message":"Executing query [m8jbl2oe3cxlh1hdkat]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:25.166Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:25.168Z"}
{"level":"debug","message":"Executing query [m8jbl2rivcagntl3b58]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:25.279Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:25.288Z"}
{"level":"debug","message":"Executing query [m8jbl2rvw56w75bp3g]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T21:56:25.291Z"}
{"level":"debug","message":"Executing query [m8jbl2rwgoplxq9qso9]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T21:56:25.292Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T21:56:25.294Z"}
{"level":"debug","message":"Executing query [m8jbl2ryvazzml1ozp]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:56:25.294Z"}
{"level":"debug","message":"Executing query [m8jbl2rzcatow04f25c]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:56:25.295Z"}
{"level":"debug","message":"Executing query [m8jbl2s12404794hjus]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:56:25.297Z"}
{"level":"debug","message":"Executing query [m8jbl2s225flnkgrfm4]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T21:56:25.298Z"}
{"level":"debug","message":"Executing query [m8jbl2s8hvrybqcp05n]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-21T21:56:25.305Z"}
{"level":"debug","message":"Executing query [m8jbl2sbzr8uwy356dm]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:56:25.307Z"}
{"level":"debug","message":"Executing query [m8jbl2sd8m5zq51x1yl]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",4]","timestamp":"2025-03-21T21:56:25.309Z"}
{"level":"debug","message":"Executing query [m8jbl2sgikl0558doth]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-21T21:56:25.312Z"}
{"level":"debug","message":"Executing query [m8jbl2siu3a7r1zwiz]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-21T21:56:25.314Z"}
{"level":"debug","message":"Executing query [m8jbl2sloiwpklmxk1d]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-21T21:56:25.317Z"}
{"level":"debug","message":"Executing query [m8jbl2sn92scpy81eym]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:25.319Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:25.320Z"}
{"level":"debug","message":"Executing query [m8jbl2vloi2l95hhokg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:25.425Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:25.439Z"}
{"level":"debug","message":"Executing query [m8jbl2w0c5y18p2g1sn]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:25.440Z"}
{"level":"debug","message":"Executing query [m8jbl2w2lnhanxgdfx]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594185424\"]","timestamp":"2025-03-21T21:56:25.442Z"}
{"level":"debug","message":"Executing query [m8jbl2w3yizey85u71k]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594185424\",\"TEST-OFI-QUIMICA-1742594185424\",5754,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:56:25.444Z"}
{"level":"debug","message":"Executing query [m8jbl2wam6nf7638xts]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.450Z"}
{"level":"debug","message":"Executing query [m8jbl2wdrkidpra7e]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594185424\"]","timestamp":"2025-03-21T21:56:25.453Z"}
{"level":"debug","message":"Executing query [m8jbl2wfudw12k5tthq]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",3]","timestamp":"2025-03-21T21:56:25.455Z"}
{"level":"debug","message":"Executing query [m8jbl2wjvys2brbi27r]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.459Z"}
{"level":"debug","message":"Executing query [m8jbl2wkdy9yv0in44]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.461Z"}
{"level":"debug","message":"Executing query [m8jbl2wouc7ql8yuzgn]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.464Z"}
{"level":"debug","message":"Executing query [m8jbl2wp2uop83d8rb9]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.465Z"}
{"level":"debug","message":"Executing query [m8jbl2wsc6h11mlbyyv]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.468Z"}
{"level":"debug","message":"Executing query [m8jbl2wut8xilxuwcq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:25.470Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:25.472Z"}
{"level":"debug","message":"Executing query [m8jbl2zqf2sjk44iprn]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:25.575Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:25.585Z"}
{"level":"debug","message":"Executing query [m8jbl302bai638qyd7p]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594185574\"]","timestamp":"2025-03-21T21:56:25.586Z"}
{"level":"debug","message":"Executing query [m8jbl303pwr54vm5cz]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594185574\",true]","timestamp":"2025-03-21T21:56:25.587Z"}
{"level":"debug","message":"Executing query [m8jbl3085055h9kimjw]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.592Z"}
{"level":"debug","message":"Executing query [m8jbl30ac4q5c3ojhav]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594185574\"]","timestamp":"2025-03-21T21:56:25.594Z"}
{"level":"debug","message":"Executing query [m8jbl30d6id4ukq3now]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",3]","timestamp":"2025-03-21T21:56:25.597Z"}
{"level":"debug","message":"Executing query [m8jbl30gu8h8eahoxkb]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.600Z"}
{"level":"debug","message":"Executing query [m8jbl30j0e6gitqunlhb]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.603Z"}
{"level":"debug","message":"Executing query [m8jbl30m38bjs5epzqt]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.606Z"}
{"level":"debug","message":"Executing query [m8jbl30oy48vccccd9]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.608Z"}
{"level":"debug","message":"Executing query [m8jbl30q11j08e20h3fj]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.610Z"}
{"level":"debug","message":"Executing query [m8jbl30stj9dmnkioh]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.612Z"}
{"level":"debug","message":"Executing query [m8jbl30u7h45cjsg2av]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:56:25.614Z"}
{"level":"debug","message":"Executing query [m8jbl30v1suiz2tv644j]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:25.615Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:25.616Z"}
{"level":"debug","message":"Executing query [m8jbl33q9g6dv84wk6]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:25.719Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:25.732Z"}
{"level":"debug","message":"Executing query [m8jbl346if9t630v9z]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:25.734Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:56:25.736Z"}
{"level":"debug","message":"Executing query [m8jbl348g1ii3vn448k]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T21:56:25.736Z"}
{"level":"debug","message":"Executing query [m8jbl3497g91gqj9jly]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T21:56:25.737Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T21:56:25.738Z"}
{"level":"debug","message":"Executing query [m8jbl34azyw8qajge1e]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:25.738Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:56:25.739Z"}
{"level":"debug","message":"Executing query [m8jbl34fw0t1ishmsal]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T21:56:25.743Z"}
{"level":"debug","message":"Executing query [m8jbl34hpvwd40r01va]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T21:56:25.745Z"}
{"level":"debug","message":"Executing query [m8jbl34kivbe5dg1d4n]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:25.748Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:25.865Z"}
{"level":"debug","message":"Executing query [m8jbl37wfq15m289ipc]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T21:56:25.868Z"}
{"level":"debug","message":"Executing query [m8jbl37ye7es4680pyv]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T21:56:25.870Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbl37ye7es4680pyv]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T21:56:25.871Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:25.873Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T21:56:25.956Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T21:56:25.957Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T21:56:25.958Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T21:56:25.958Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T21:56:25.959Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T21:56:25.959Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:43.323Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:43.364Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:44.108Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:44.119Z"}
{"level":"debug","message":"Executing query [m8jbmrp370tq5y9jc3n]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:44.247Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:44.263Z"}
{"level":"debug","message":"Executing query [m8jbmrpmbuz0961wcxw]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:44.266Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:57:44.270Z"}
{"level":"debug","message":"Executing query [m8jbmrprh20axpa3qnr]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:44.271Z"}
{"level":"debug","message":"Executing query [m8jbmrpsfcakr4kzomu]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:44.272Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:57:44.274Z"}
{"level":"debug","message":"Executing query [m8jbmrpz3ck78akazak]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594264247\"]","timestamp":"2025-03-21T21:57:44.279Z"}
{"level":"debug","message":"Executing query [m8jbmrq4rti72tg53xe]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T21:57:44.284Z"}
{"level":"debug","message":"Executing query [m8jbmrq7svhthezixe]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T21:57:44.287Z"}
{"level":"debug","message":"Executing query [m8jbmrq9sq1emytuooe]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T21:57:44.289Z"}
{"level":"debug","message":"Executing query [m8jbmrqbv08f04otbhi]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:44.291Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:44.292Z"}
{"level":"debug","message":"Executing query [m8jbmrtm3qiwls2eavz]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:44.411Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:44.425Z"}
{"level":"debug","message":"Executing query [m8jbmru3hir0d2po7u]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:44.427Z"}
{"level":"debug","message":"Executing query [m8jbmru57c34ac5934c]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:44.429Z"}
{"level":"debug","message":"Executing query [m8jbmru6je9eti6wzsj]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:44.430Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T21:57:44.431Z"}
{"level":"debug","message":"Executing query [m8jbmrubsqurd4ytc2]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T21:57:44.435Z"}
{"level":"debug","message":"Executing query [m8jbmrugul51w1g1pjn]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:44.440Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:44.442Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:45.138Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T21:57:45.140Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:45.148Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:45.850Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:57:45.853Z"}
{"level":"debug","message":"Executing query [m8jbmt0zqahlbfqrgzs]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:45.971Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:45.985Z"}
{"level":"debug","message":"Executing query [m8jbmt1ets35j5xhdw]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:45.986Z"}
{"level":"debug","message":"Executing query [m8jbmt1fg60odi5mrbv]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594265970\"]","timestamp":"2025-03-21T21:57:45.987Z"}
{"level":"debug","message":"Executing query [m8jbmt1i4le89ieszxd]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594265970\",\"TEST-OFICIO-1742594265970\",2556,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:57:45.990Z"}
{"level":"debug","message":"Executing query [m8jbmt1pj6ixxk5mor9]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T21:57:45.997Z"}
{"level":"debug","message":"Executing query [m8jbmt1sutsux386fkn]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594265970\"]","timestamp":"2025-03-21T21:57:46.000Z"}
{"level":"debug","message":"Executing query [m8jbmt1usnmovrrma7a]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",7]","timestamp":"2025-03-21T21:57:46.002Z"}
{"level":"debug","message":"Executing query [m8jbmt1yb5lfwcdkv5h]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.006Z"}
{"level":"debug","message":"Executing query [m8jbmt20g69rbczkfi6]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.008Z"}
{"level":"debug","message":"Executing query [m8jbmt23guucaqq248b]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.011Z"}
{"level":"debug","message":"Executing query [m8jbmt2589ue7rvsvf]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.013Z"}
{"level":"debug","message":"Executing query [m8jbmt28ydd8fuir8vt]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.016Z"}
{"level":"debug","message":"Executing query [m8jbmt2b24datvgpfux]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594266019\",\"TEST-SP-OFICIO-1742594266019\",254,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T21:57:46.019Z"}
{"level":"debug","message":"Executing query [m8jbmt2euc9prx6gee]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594266019\"]","timestamp":"2025-03-21T21:57:46.022Z"}
{"level":"debug","message":"Executing query [m8jbmt2hrr276g1z698]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594266019\"]","timestamp":"2025-03-21T21:57:46.025Z"}
{"level":"debug","message":"Executing query [m8jbmt2kgfmco2ycde8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:46.028Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:46.030Z"}
{"level":"debug","message":"Executing query [m8jbmt5jbno8x40urqu]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:46.135Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:46.145Z"}
{"level":"debug","message":"Executing query [m8jbmt5vievo55kvokh]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:46.147Z"}
{"level":"debug","message":"Executing query [m8jbmt5xutf2h6oz4he]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594266134\"]","timestamp":"2025-03-21T21:57:46.149Z"}
{"level":"debug","message":"Executing query [m8jbmt5z51tr9yhibpr]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594266134\",\"TEST-OFI-FORENSE-1742594266134\",1525,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594266134\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:57:46.151Z"}
{"level":"debug","message":"Executing query [m8jbmt627srpyzhsnz8]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.154Z"}
{"level":"debug","message":"Executing query [m8jbmt66yfq4x1v148]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594266134\"]","timestamp":"2025-03-21T21:57:46.158Z"}
{"level":"debug","message":"Executing query [m8jbmt68qhb1z4s3ae]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",7]","timestamp":"2025-03-21T21:57:46.160Z"}
{"level":"debug","message":"Executing query [m8jbmt6b8hsj2rk8s6i]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.163Z"}
{"level":"debug","message":"Executing query [m8jbmt6ds55xttho65b]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.165Z"}
{"level":"debug","message":"Executing query [m8jbmt6fa8ednaqauxj]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.167Z"}
{"level":"debug","message":"Executing query [m8jbmt6hd7n88iz9mcw]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.169Z"}
{"level":"debug","message":"Executing query [m8jbmt6k5fgky83p31i]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.172Z"}
{"level":"debug","message":"Executing query [m8jbmt6m6w2s6et1dnr]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594266174\",\"TEST-SP-OFI-FORENSE-1742594266174\",8744,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T21:57:46.174Z"}
{"level":"debug","message":"Executing query [m8jbmt6pfcctwbryny8]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594266174\"]","timestamp":"2025-03-21T21:57:46.177Z"}
{"level":"debug","message":"Executing query [m8jbmt6qhqrd4c82w8i]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594266174\"]","timestamp":"2025-03-21T21:57:46.178Z"}
{"level":"debug","message":"Executing query [m8jbmt6tkgu5rbg6ni8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:46.181Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:46.182Z"}
{"level":"debug","message":"Executing query [m8jbmta4og3di28h56o]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:46.300Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:46.314Z"}
{"level":"debug","message":"Executing query [m8jbmtak19nfce3p18q]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T21:57:46.316Z"}
{"level":"debug","message":"Executing query [m8jbmtalptccgmtxs8d]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T21:57:46.317Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T21:57:46.319Z"}
{"level":"debug","message":"Executing query [m8jbmtaniq19pb8xndc]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:57:46.319Z"}
{"level":"debug","message":"Executing query [m8jbmtaolgt5dchk7lr]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:57:46.320Z"}
{"level":"debug","message":"Executing query [m8jbmtap1w13ge1d03u]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:57:46.321Z"}
{"level":"debug","message":"Executing query [m8jbmtarpfqadhrn36]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T21:57:46.323Z"}
{"level":"debug","message":"Executing query [m8jbmtavz8054p2cek]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-21T21:57:46.327Z"}
{"level":"debug","message":"Executing query [m8jbmtaygwf4dyc2imr]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:57:46.330Z"}
{"level":"debug","message":"Executing query [m8jbmtb03gh4gxstkr3]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",5]","timestamp":"2025-03-21T21:57:46.332Z"}
{"level":"debug","message":"Executing query [m8jbmtb2qxac7jgzjlb]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-21T21:57:46.334Z"}
{"level":"debug","message":"Executing query [m8jbmtb4jj098o42a2h]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-21T21:57:46.336Z"}
{"level":"debug","message":"Executing query [m8jbmtb7qv547gtmsph]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-21T21:57:46.339Z"}
{"level":"debug","message":"Executing query [m8jbmtb8j3d52vt2z5s]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:46.340Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:46.341Z"}
{"level":"debug","message":"Executing query [m8jbmtecivi20p72po]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:46.452Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:46.464Z"}
{"level":"debug","message":"Executing query [m8jbmtept8iehnc3cg]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594266452\"]","timestamp":"2025-03-21T21:57:46.465Z"}
{"level":"debug","message":"Executing query [m8jbmternwddek9cbe9]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594266452\"]","timestamp":"2025-03-21T21:57:46.467Z"}
{"level":"debug","message":"Executing query [m8jbmtesmfg5nyrs3h]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594266452\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:57:46.468Z"}
{"level":"debug","message":"Executing query [m8jbmtexxbj0cryh9q]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T21:57:46.473Z"}
{"level":"debug","message":"Executing query [m8jbmtf0vch6gnlipgg]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594266452\"]","timestamp":"2025-03-21T21:57:46.476Z"}
{"level":"debug","message":"Executing query [m8jbmtf1xb06e64vzzn]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1002]","timestamp":"2025-03-21T21:57:46.477Z"}
{"level":"debug","message":"Executing query [m8jbmtf4gvuqz4emcp]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T21:57:46.480Z"}
{"level":"debug","message":"Executing query [m8jbmtf6pxbqi55cis]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T21:57:46.482Z"}
{"level":"debug","message":"Executing query [m8jbmtf9cdv8nn0p5cv]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T21:57:46.485Z"}
{"level":"debug","message":"Executing query [m8jbmtfaq2lo1tp6e5s]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T21:57:46.486Z"}
{"level":"debug","message":"Executing query [m8jbmtfbn5qsd12u2v]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T21:57:46.487Z"}
{"level":"debug","message":"Executing query [m8jbmtfe7bih7ty132u]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T21:57:46.490Z"}
{"level":"debug","message":"Executing query [m8jbmtff7up8d2355de]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:57:46.491Z"}
{"level":"debug","message":"Executing query [m8jbmtfh0a0qukllazgg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:46.493Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:46.493Z"}
{"level":"debug","message":"Executing query [m8jbmtiiik4ye21cvkq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:46.602Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:46.617Z"}
{"level":"debug","message":"Executing query [m8jbmtiykfrh9vptlo]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:46.618Z"}
{"level":"debug","message":"Executing query [m8jbmtj0i34nhkuhcg]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594266602\"]","timestamp":"2025-03-21T21:57:46.620Z"}
{"level":"debug","message":"Executing query [m8jbmtj2kaa6z5z2is]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594266602\",\"TEST-OFI-QUIMICA-1742594266602\",8891,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:57:46.622Z"}
{"level":"debug","message":"Executing query [m8jbmtj51mi44xpcffb]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.625Z"}
{"level":"debug","message":"Executing query [m8jbmtj8hf938xb0u2n]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594266602\"]","timestamp":"2025-03-21T21:57:46.628Z"}
{"level":"debug","message":"Executing query [m8jbmtjat3louxijgac]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",4]","timestamp":"2025-03-21T21:57:46.630Z"}
{"level":"debug","message":"Executing query [m8jbmtjcux9cyxof9dp]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.632Z"}
{"level":"debug","message":"Executing query [m8jbmtjef7t0mzbz8xf]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.634Z"}
{"level":"debug","message":"Executing query [m8jbmtjh3ic8m0lf9tf]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.637Z"}
{"level":"debug","message":"Executing query [m8jbmtjjjjb5na1ujpo]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.639Z"}
{"level":"debug","message":"Executing query [m8jbmtjlwb27dfkazf]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.641Z"}
{"level":"debug","message":"Executing query [m8jbmtjnthe3ey9hlep]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:46.643Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:46.644Z"}
{"level":"debug","message":"Executing query [m8jbmtms2jwoh81ppgi]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:46.756Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:46.768Z"}
{"level":"debug","message":"Executing query [m8jbmtn5fl0dfa08uhs]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594266755\"]","timestamp":"2025-03-21T21:57:46.769Z"}
{"level":"debug","message":"Executing query [m8jbmtn7gjy3bikvh9t]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594266755\",true]","timestamp":"2025-03-21T21:57:46.771Z"}
{"level":"debug","message":"Executing query [m8jbmtncdw8xbkx48zl]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.776Z"}
{"level":"debug","message":"Executing query [m8jbmtne3h92hvp6a38]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594266755\"]","timestamp":"2025-03-21T21:57:46.778Z"}
{"level":"debug","message":"Executing query [m8jbmtnfczwhrxz325]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",4]","timestamp":"2025-03-21T21:57:46.779Z"}
{"level":"debug","message":"Executing query [m8jbmtnj2yg0uvoc5ba]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.783Z"}
{"level":"debug","message":"Executing query [m8jbmtnkcozcec4fwuj]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.784Z"}
{"level":"debug","message":"Executing query [m8jbmtno502naxhvg5k]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.788Z"}
{"level":"debug","message":"Executing query [m8jbmtnp0rrcoad82o9l]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.789Z"}
{"level":"debug","message":"Executing query [m8jbmtnqkj5nsdv4us]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.790Z"}
{"level":"debug","message":"Executing query [m8jbmtnusfznvaa2z3]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.794Z"}
{"level":"debug","message":"Executing query [m8jbmtnwh7lhb45b4g9]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:57:46.796Z"}
{"level":"debug","message":"Executing query [m8jbmtnxf9ocnehnrjb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:46.797Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:46.798Z"}
{"level":"debug","message":"Executing query [m8jbmtr0xb8gqvgif8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:46.908Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:46.925Z"}
{"level":"debug","message":"Executing query [m8jbmtrj8cd5r7u7y3p]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:46.927Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:57:46.928Z"}
{"level":"debug","message":"Executing query [m8jbmtrl69os3a9qtex]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T21:57:46.929Z"}
{"level":"debug","message":"Executing query [m8jbmtrm03egzogogt8n]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T21:57:46.930Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T21:57:46.930Z"}
{"level":"debug","message":"Executing query [m8jbmtrn5rm42vcelcq]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:46.931Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:57:46.931Z"}
{"level":"debug","message":"Executing query [m8jbmtrsza8pihsl1wb]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T21:57:46.936Z"}
{"level":"debug","message":"Executing query [m8jbmtru4vdur4kgrli]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T21:57:46.938Z"}
{"level":"debug","message":"Executing query [m8jbmtrwpjfbu480uy]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:46.940Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:47.066Z"}
{"level":"debug","message":"Executing query [m8jbmtvhaivnq6jbuv7]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T21:57:47.069Z"}
{"level":"debug","message":"Executing query [m8jbmtvknp4seu8qcv]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T21:57:47.072Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbmtvknp4seu8qcv]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T21:57:47.075Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:47.077Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T21:57:47.186Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T21:57:47.187Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T21:57:47.187Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T21:57:47.188Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T21:57:47.189Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T21:57:47.189Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:35.559Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:35.598Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:36.391Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:36.404Z"}
{"level":"debug","message":"Executing query [m8jbnw1rivkongz64zk]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:36.544Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:36.558Z"}
{"level":"debug","message":"Executing query [m8jbnw29xxrith79st]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:36.561Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:58:36.563Z"}
{"level":"debug","message":"Executing query [m8jbnw2cxe6pzo4fq6h]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:36.564Z"}
{"level":"debug","message":"Executing query [m8jbnw2ephvw8d3o42e]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:36.566Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:58:36.568Z"}
{"level":"debug","message":"Executing query [m8jbnw2kfdvpny1k2fs]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594316542\"]","timestamp":"2025-03-21T21:58:36.572Z"}
{"level":"debug","message":"Executing query [m8jbnw2oanv6tnv7nxc]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T21:58:36.576Z"}
{"level":"debug","message":"Executing query [m8jbnw2sf0l0g2bsiq]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T21:58:36.580Z"}
{"level":"debug","message":"Executing query [m8jbnw2u3ttf3hdeq4k]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T21:58:36.582Z"}
{"level":"debug","message":"Executing query [m8jbnw2wrckq4etchv9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:36.584Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:36.586Z"}
{"level":"debug","message":"Executing query [m8jbnw6fxshdlbujr2a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:36.711Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:36.726Z"}
{"level":"debug","message":"Executing query [m8jbnw6wrwjgc4pft9h]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:36.728Z"}
{"level":"debug","message":"Executing query [m8jbnw6x64tezx9jalv]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:36.729Z"}
{"level":"debug","message":"Executing query [m8jbnw6y1c656vezx5j]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:36.730Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T21:58:36.732Z"}
{"level":"debug","message":"Executing query [m8jbnw73np3tbfh0ja]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T21:58:36.736Z"}
{"level":"debug","message":"Executing query [m8jbnw78qpddvxngf3b]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:36.740Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:36.742Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:37.438Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T21:58:37.440Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:37.448Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:38.173Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:58:38.176Z"}
{"level":"debug","message":"Executing query [m8jbnxehub5gaol69gd]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:38.298Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:38.310Z"}
{"level":"debug","message":"Executing query [m8jbnxew5fef5uvrhyt]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:38.312Z"}
{"level":"debug","message":"Executing query [m8jbnxey95g7pd0xn6m]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594318297\"]","timestamp":"2025-03-21T21:58:38.314Z"}
{"level":"debug","message":"Executing query [m8jbnxezg59svn19kcc]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594318297\",\"TEST-OFICIO-1742594318297\",2589,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:58:38.315Z"}
{"level":"debug","message":"Executing query [m8jbnxf52qmylv0dbtk]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-21T21:58:38.321Z"}
{"level":"debug","message":"Executing query [m8jbnxf8h7yd86b8jqe]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594318297\"]","timestamp":"2025-03-21T21:58:38.324Z"}
{"level":"debug","message":"Executing query [m8jbnxfa62swvrq7f7r]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",9]","timestamp":"2025-03-21T21:58:38.326Z"}
{"level":"debug","message":"Executing query [m8jbnxfehtoesnwrbf5]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-21T21:58:38.330Z"}
{"level":"debug","message":"Executing query [m8jbnxfh92get1dtig]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-21T21:58:38.333Z"}
{"level":"debug","message":"Executing query [m8jbnxfkt3ur9l07uu8]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-21T21:58:38.336Z"}
{"level":"debug","message":"Executing query [m8jbnxfmghaufws0vw]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-21T21:58:38.338Z"}
{"level":"debug","message":"Executing query [m8jbnxfpjjt9tl0bg0e]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-21T21:58:38.341Z"}
{"level":"debug","message":"Executing query [m8jbnxfrksocveipa8b]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594318343\",\"TEST-SP-OFICIO-1742594318343\",5840,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T21:58:38.343Z"}
{"level":"debug","message":"Executing query [m8jbnxfu47po6nn20nc]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594318343\"]","timestamp":"2025-03-21T21:58:38.346Z"}
{"level":"debug","message":"Executing query [m8jbnxfwl0l1cbkkj8i]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594318343\"]","timestamp":"2025-03-21T21:58:38.348Z"}
{"level":"debug","message":"Executing query [m8jbnxg153mx5tvvmo4]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:38.353Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:38.354Z"}
{"level":"debug","message":"Executing query [m8jbnxj9omyoxykq7pk]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:38.469Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:38.479Z"}
{"level":"debug","message":"Executing query [m8jbnxjl1xn5hrnyxqe]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T21:58:38.481Z"}
{"level":"debug","message":"Executing query [m8jbnxjnrd6pcllp16]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T21:58:38.483Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T21:58:38.485Z"}
{"level":"debug","message":"Executing query [m8jbnxjpyjfrtbw8d9]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:58:38.485Z"}
{"level":"debug","message":"Executing query [m8jbnxjqdpjfosplilo]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:58:38.486Z"}
{"level":"debug","message":"Executing query [m8jbnxjrjvvhmu4n3rf]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:58:38.487Z"}
{"level":"debug","message":"Executing query [m8jbnxjteghyjb62d49]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T21:58:38.489Z"}
{"level":"debug","message":"Executing query [m8jbnxjwygzdsxqin]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-21T21:58:38.492Z"}
{"level":"debug","message":"Executing query [m8jbnxk0kuhof4kzuoe]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:58:38.496Z"}
{"level":"debug","message":"Executing query [m8jbnxk237577bken8x]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",6]","timestamp":"2025-03-21T21:58:38.498Z"}
{"level":"debug","message":"Executing query [m8jbnxk5hdmoamzwg05]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-21T21:58:38.501Z"}
{"level":"debug","message":"Executing query [m8jbnxk8zsemm5ohjtr]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-21T21:58:38.504Z"}
{"level":"debug","message":"Executing query [m8jbnxkas1tzyc9ag1]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-21T21:58:38.507Z"}
{"level":"debug","message":"Executing query [m8jbnxkc311itp57nd4]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:38.508Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:38.510Z"}
{"level":"debug","message":"Executing query [m8jbnxnbppftbse5pe]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:38.615Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:38.629Z"}
{"level":"debug","message":"Executing query [m8jbnxnr0l1g1e4321n]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594318614\"]","timestamp":"2025-03-21T21:58:38.631Z"}
{"level":"debug","message":"Executing query [m8jbnxns7jh8xn0n2qd]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594318614\",true]","timestamp":"2025-03-21T21:58:38.632Z"}
{"level":"debug","message":"Executing query [m8jbnxnxs6d248yjjjr]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.637Z"}
{"level":"debug","message":"Executing query [m8jbnxnz6tcrlopxe02]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594318614\"]","timestamp":"2025-03-21T21:58:38.639Z"}
{"level":"debug","message":"Executing query [m8jbnxo2hiiejfjq00v]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",5]","timestamp":"2025-03-21T21:58:38.642Z"}
{"level":"debug","message":"Executing query [m8jbnxo561rut2ax95d]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.645Z"}
{"level":"debug","message":"Executing query [m8jbnxo7b7nvnxwgaf]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.647Z"}
{"level":"debug","message":"Executing query [m8jbnxoap7pssxx0bih]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.650Z"}
{"level":"debug","message":"Executing query [m8jbnxoct0bz64t6dy]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.652Z"}
{"level":"debug","message":"Executing query [m8jbnxodko4hw97so4]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.653Z"}
{"level":"debug","message":"Executing query [m8jbnxogygm6kr5ez7f]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.656Z"}
{"level":"debug","message":"Executing query [m8jbnxohf8kr2u9cedp]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:58:38.657Z"}
{"level":"debug","message":"Executing query [m8jbnxoiktv3i9vopyi]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:38.658Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:38.659Z"}
{"level":"debug","message":"Executing query [m8jbnxrf7pm07dpgn3e]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:38.763Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:38.774Z"}
{"level":"debug","message":"Executing query [m8jbnxrsa7ee8f4alpj]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:38.776Z"}
{"level":"debug","message":"Executing query [m8jbnxrt7ia3qhdhyxh]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594318763\"]","timestamp":"2025-03-21T21:58:38.777Z"}
{"level":"debug","message":"Executing query [m8jbnxru2c4zo8myl9k]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594318763\",\"TEST-OFI-QUIMICA-1742594318763\",5309,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:58:38.778Z"}
{"level":"debug","message":"Executing query [m8jbnxs1a63jtlw4ar]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.785Z"}
{"level":"debug","message":"Executing query [m8jbnxs51fzuo26jmfj]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594318763\"]","timestamp":"2025-03-21T21:58:38.789Z"}
{"level":"debug","message":"Executing query [m8jbnxs6atea04x2xn5]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",5]","timestamp":"2025-03-21T21:58:38.790Z"}
{"level":"debug","message":"Executing query [m8jbnxsaef53vawsyo]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.794Z"}
{"level":"debug","message":"Executing query [m8jbnxscsuf7o7qphep]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.796Z"}
{"level":"debug","message":"Executing query [m8jbnxsfel7mod0xce8]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.799Z"}
{"level":"debug","message":"Executing query [m8jbnxshqeupwi738m]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.801Z"}
{"level":"debug","message":"Executing query [m8jbnxskonnseq3xka]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.804Z"}
{"level":"debug","message":"Executing query [m8jbnxsli1rxpn76lz9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:38.805Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:38.807Z"}
{"level":"debug","message":"Executing query [m8jbnxvixjws0uzfw5s]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:38.910Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:38.924Z"}
{"level":"debug","message":"Executing query [m8jbnxvyklbwyen8cda]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594318909\"]","timestamp":"2025-03-21T21:58:38.926Z"}
{"level":"debug","message":"Executing query [m8jbnxw0qdj5wwu0e1h]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594318909\"]","timestamp":"2025-03-21T21:58:38.928Z"}
{"level":"debug","message":"Executing query [m8jbnxw1vw88r9wljni]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594318909\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:58:38.929Z"}
{"level":"debug","message":"Executing query [m8jbnxw601r58enrwwu5]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T21:58:38.934Z"}
{"level":"debug","message":"Executing query [m8jbnxw9uhi0w5zys2t]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594318909\"]","timestamp":"2025-03-21T21:58:38.937Z"}
{"level":"debug","message":"Executing query [m8jbnxwbad2sg8zfn6]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1003]","timestamp":"2025-03-21T21:58:38.939Z"}
{"level":"debug","message":"Executing query [m8jbnxwfgljyud3ezt5]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T21:58:38.944Z"}
{"level":"debug","message":"Executing query [m8jbnxwijrw3qd5mil]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T21:58:38.946Z"}
{"level":"debug","message":"Executing query [m8jbnxwmueegqty6nub]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T21:58:38.950Z"}
{"level":"debug","message":"Executing query [m8jbnxwo4ns9ciy6soh]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T21:58:38.952Z"}
{"level":"debug","message":"Executing query [m8jbnxwq4xod32uttdr]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T21:58:38.954Z"}
{"level":"debug","message":"Executing query [m8jbnxwtvd6nxnh31p]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T21:58:38.957Z"}
{"level":"debug","message":"Executing query [m8jbnxwvyyt1mxzx0ya]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:58:38.959Z"}
{"level":"debug","message":"Executing query [m8jbnxwxfv75elnffr]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:38.961Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:38.962Z"}
{"level":"debug","message":"Executing query [m8jbny01w2xas3ioh2]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:39.073Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:39.083Z"}
{"level":"debug","message":"Executing query [m8jbny0d9whqic56zbt]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:39.085Z"}
{"level":"debug","message":"Executing query [m8jbny0g7wnqtd3a7eq]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594319072\"]","timestamp":"2025-03-21T21:58:39.088Z"}
{"level":"debug","message":"Executing query [m8jbny0hti6bqzisxc]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594319072\",\"TEST-OFI-FORENSE-1742594319072\",7012,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594319072\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:58:39.089Z"}
{"level":"debug","message":"Executing query [m8jbny0nprzhxr43j5]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-21T21:58:39.095Z"}
{"level":"debug","message":"Executing query [m8jbny0plq7qze5t34h]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594319072\"]","timestamp":"2025-03-21T21:58:39.097Z"}
{"level":"debug","message":"Executing query [m8jbny0qc9ci84xgn4h]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",9]","timestamp":"2025-03-21T21:58:39.098Z"}
{"level":"debug","message":"Executing query [m8jbny0ut24xkjfi7lm]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-21T21:58:39.102Z"}
{"level":"debug","message":"Executing query [m8jbny0w4yls7unede]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-21T21:58:39.104Z"}
{"level":"debug","message":"Executing query [m8jbny0zuny2wwgqun]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-21T21:58:39.107Z"}
{"level":"debug","message":"Executing query [m8jbny11tc3ydmflkhh]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-21T21:58:39.109Z"}
{"level":"debug","message":"Executing query [m8jbny13ahz6jt3hlml]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-21T21:58:39.112Z"}
{"level":"debug","message":"Executing query [m8jbny16oiuhtj0vpw]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594319114\",\"TEST-SP-OFI-FORENSE-1742594319114\",3313,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T21:58:39.114Z"}
{"level":"debug","message":"Executing query [m8jbny1askh76zapyah]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594319114\"]","timestamp":"2025-03-21T21:58:39.118Z"}
{"level":"debug","message":"Executing query [m8jbny1bx4k9iiyx92]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594319114\"]","timestamp":"2025-03-21T21:58:39.119Z"}
{"level":"debug","message":"Executing query [m8jbny1fjlg0i3yyl6f]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:39.123Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:39.124Z"}
{"level":"debug","message":"Executing query [m8jbny4h14yhy676j03]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:39.233Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:39.248Z"}
{"level":"debug","message":"Executing query [m8jbny4xvxzqavh24ye]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:39.249Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:58:39.250Z"}
{"level":"debug","message":"Executing query [m8jbny4zmwp3c9lxc9l]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T21:58:39.251Z"}
{"level":"debug","message":"Executing query [m8jbny50g3as7vr068u]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T21:58:39.252Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T21:58:39.253Z"}
{"level":"debug","message":"Executing query [m8jbny52n9ay7bmet0o]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:39.254Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:58:39.254Z"}
{"level":"debug","message":"Executing query [m8jbny58m4jpslmj1y]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T21:58:39.260Z"}
{"level":"debug","message":"Executing query [m8jbny5a8zwlv9ct4kx]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T21:58:39.262Z"}
{"level":"debug","message":"Executing query [m8jbny5c5urds7c6bm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:39.264Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:39.380Z"}
{"level":"debug","message":"Executing query [m8jbny8ntodsaflo1b]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T21:58:39.383Z"}
{"level":"debug","message":"Executing query [m8jbny8p9fghk9hxkum]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T21:58:39.385Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbny8p9fghk9hxkum]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T21:58:39.386Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:39.388Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T21:58:39.470Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T21:58:39.471Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T21:58:39.471Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T21:58:39.471Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T21:58:39.472Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T21:58:39.472Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:03.233Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:03.286Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:04.067Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:04.078Z"}
{"level":"debug","message":"Executing query [m8jbohesempuq4pmz9n]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:04.228Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:04.240Z"}
{"level":"debug","message":"Executing query [m8jbohf6r5q81cq8nrk]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:04.243Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:59:04.246Z"}
{"level":"debug","message":"Executing query [m8jbohfbg9svnk8h2ct]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:04.247Z"}
{"level":"debug","message":"Executing query [m8jbohfcajogzdo677v]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:04.248Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:59:04.249Z"}
{"level":"debug","message":"Executing query [m8jbohfhj5fjp85bbt]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594344227\"]","timestamp":"2025-03-21T21:59:04.253Z"}
{"level":"debug","message":"Executing query [m8jbohfls2sfpd4ccoj]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T21:59:04.257Z"}
{"level":"debug","message":"Executing query [m8jbohfq2n90awjnjaq]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T21:59:04.262Z"}
{"level":"debug","message":"Executing query [m8jbohfsjcjb0p83zlb]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T21:59:04.264Z"}
{"level":"debug","message":"Executing query [m8jbohfvbcgceoy55u]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:04.267Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:04.268Z"}
{"level":"debug","message":"Executing query [m8jbohk2wg0x6fyt68p]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:04.418Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:04.430Z"}
{"level":"debug","message":"Executing query [m8jbohkg5c26elhvvdi]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:04.432Z"}
{"level":"debug","message":"Executing query [m8jbohkib5tfggvtdsb]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:04.434Z"}
{"level":"debug","message":"Executing query [m8jbohkjloh1ttkv9zr]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:04.435Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T21:59:04.436Z"}
{"level":"debug","message":"Executing query [m8jbohkpel9gqbsp0a]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T21:59:04.441Z"}
{"level":"debug","message":"Executing query [m8jbohkuva29mja2bnp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:04.446Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:04.447Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:05.151Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:59:05.154Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T21:59:05.884Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:05.893Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:59:05.895Z"}
{"level":"debug","message":"Executing query [m8jboisjoqry63e3ud]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:06.019Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:06.032Z"}
{"level":"debug","message":"Executing query [m8jboisycvms20k3sf]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:06.034Z"}
{"level":"debug","message":"Executing query [m8jboit0nefa25hqoc]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594346018\"]","timestamp":"2025-03-21T21:59:06.036Z"}
{"level":"debug","message":"Executing query [m8jboit2l13751b1qn7]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594346018\",\"TEST-OFICIO-1742594346018\",2086,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:59:06.038Z"}
{"level":"debug","message":"Executing query [m8jboit8alqwpe07m89]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.044Z"}
{"level":"debug","message":"Executing query [m8jboitbt39ltyqr8f]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594346018\"]","timestamp":"2025-03-21T21:59:06.047Z"}
{"level":"debug","message":"Executing query [m8jboitdv8uvia73md]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",11]","timestamp":"2025-03-21T21:59:06.049Z"}
{"level":"debug","message":"Executing query [m8jboitge156vg5ic0f]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.052Z"}
{"level":"debug","message":"Executing query [m8jboitidcywtojk57i]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.054Z"}
{"level":"debug","message":"Executing query [m8jboitl8mxwba7x6pd]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.057Z"}
{"level":"debug","message":"Executing query [m8jboitn7aucgvezpn7]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.059Z"}
{"level":"debug","message":"Executing query [m8jboitqb4l8szl8hku]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.062Z"}
{"level":"debug","message":"Executing query [m8jboittx0v1qi4n3qh]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594346065\",\"TEST-SP-OFICIO-1742594346065\",779,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T21:59:06.065Z"}
{"level":"debug","message":"Executing query [m8jboitwje0ym36gojn]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594346065\"]","timestamp":"2025-03-21T21:59:06.068Z"}
{"level":"debug","message":"Executing query [m8jboitz9zsnco5mbom]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594346065\"]","timestamp":"2025-03-21T21:59:06.071Z"}
{"level":"debug","message":"Executing query [m8jboiu27l9znj36iaa]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:06.074Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:06.076Z"}
{"level":"debug","message":"Executing query [m8jboix6lxdq55reb9i]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:06.186Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:06.198Z"}
{"level":"debug","message":"Executing query [m8jboixkhpxw2isjdgo]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:06.200Z"}
{"level":"debug","message":"Executing query [m8jboixm9i87rw39m5o]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594346186\"]","timestamp":"2025-03-21T21:59:06.202Z"}
{"level":"debug","message":"Executing query [m8jboixo5dt9q20yzxh]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594346186\",\"TEST-OFI-FORENSE-1742594346186\",2208,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594346186\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:59:06.204Z"}
{"level":"debug","message":"Executing query [m8jboixu1petneiidqd]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.210Z"}
{"level":"debug","message":"Executing query [m8jboixxfsxlanmap9e]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594346186\"]","timestamp":"2025-03-21T21:59:06.213Z"}
{"level":"debug","message":"Executing query [m8jboixz7wtpe1me1e5]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",11]","timestamp":"2025-03-21T21:59:06.215Z"}
{"level":"debug","message":"Executing query [m8jboiy3rs2tr4yuv5]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.219Z"}
{"level":"debug","message":"Executing query [m8jboiy5l4x6y15ldga]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.221Z"}
{"level":"debug","message":"Executing query [m8jboiyasj1wlba1da]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.226Z"}
{"level":"debug","message":"Executing query [m8jboiycq6roup2g09k]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.228Z"}
{"level":"debug","message":"Executing query [m8jboiygghkpg7kihqs]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.232Z"}
{"level":"debug","message":"Executing query [m8jboiyi6zo4csjy8mj]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594346234\",\"TEST-SP-OFI-FORENSE-1742594346234\",1783,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T21:59:06.234Z"}
{"level":"debug","message":"Executing query [m8jboiymkv0u3jkkk3]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594346234\"]","timestamp":"2025-03-21T21:59:06.238Z"}
{"level":"debug","message":"Executing query [m8jboiyo748lo4e8fd2]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594346234\"]","timestamp":"2025-03-21T21:59:06.240Z"}
{"level":"debug","message":"Executing query [m8jboiyrfrs1i8efdka]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:06.243Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:06.245Z"}
{"level":"debug","message":"Executing query [m8jboj2bliis5y2af4l]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:06.371Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:06.382Z"}
{"level":"debug","message":"Executing query [m8jboj2nhy8u126df9f]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T21:59:06.383Z"}
{"level":"debug","message":"Executing query [m8jboj2pbx9h089l7v9]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T21:59:06.385Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T21:59:06.386Z"}
{"level":"debug","message":"Executing query [m8jboj2q3zlrr5ijg58]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:59:06.386Z"}
{"level":"debug","message":"Executing query [m8jboj2ru4ru61p9itf]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:59:06.387Z"}
{"level":"debug","message":"Executing query [m8jboj2s9viodqbrd08]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:59:06.388Z"}
{"level":"debug","message":"Executing query [m8jboj2t496ymz6lko4]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T21:59:06.389Z"}
{"level":"debug","message":"Executing query [m8jboj380mjs16t3wtm]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-21T21:59:06.405Z"}
{"level":"debug","message":"Executing query [m8jboj3b5jnphsthnav]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:59:06.407Z"}
{"level":"debug","message":"Executing query [m8jboj3ej8ufaa8dfnp]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",7]","timestamp":"2025-03-21T21:59:06.410Z"}
{"level":"debug","message":"Executing query [m8jboj3hdrwt1rbkumj]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-21T21:59:06.413Z"}
{"level":"debug","message":"Executing query [m8jboj3jzsp3xzn4d8d]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-21T21:59:06.415Z"}
{"level":"debug","message":"Executing query [m8jboj3nilnfgvp94lc]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-21T21:59:06.419Z"}
{"level":"debug","message":"Executing query [m8jboj3o084z6x76nrck]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:06.420Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:06.422Z"}
{"level":"debug","message":"Executing query [m8jboj6kxq1eqjgehqj]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:06.524Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:06.535Z"}
{"level":"debug","message":"Executing query [m8jboj6xeyarfr3kguq]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594346523\"]","timestamp":"2025-03-21T21:59:06.537Z"}
{"level":"debug","message":"Executing query [m8jboj6ytq534gjdius]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594346523\"]","timestamp":"2025-03-21T21:59:06.538Z"}
{"level":"debug","message":"Executing query [m8jboj6z3bikmwmjpti]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594346523\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:59:06.539Z"}
{"level":"debug","message":"Executing query [m8jboj78o6gjgmto16]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T21:59:06.548Z"}
{"level":"debug","message":"Executing query [m8jboj7by64vsa4jsvm]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594346523\"]","timestamp":"2025-03-21T21:59:06.551Z"}
{"level":"debug","message":"Executing query [m8jboj7d7rfpcgek8zc]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1004]","timestamp":"2025-03-21T21:59:06.553Z"}
{"level":"debug","message":"Executing query [m8jboj7ge3wpr16l5g7]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T21:59:06.556Z"}
{"level":"debug","message":"Executing query [m8jboj7ie3jp50dwh]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T21:59:06.558Z"}
{"level":"debug","message":"Executing query [m8jboj7lezakzg0b2p]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T21:59:06.561Z"}
{"level":"debug","message":"Executing query [m8jboj7m30ld5ly3fka]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T21:59:06.562Z"}
{"level":"debug","message":"Executing query [m8jboj7orws099nxwlk]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T21:59:06.564Z"}
{"level":"debug","message":"Executing query [m8jboj7qa1h5p2sdv2]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T21:59:06.566Z"}
{"level":"debug","message":"Executing query [m8jboj7s9o3s6tt04b]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:59:06.568Z"}
{"level":"debug","message":"Executing query [m8jboj7uyf012q5m3wa]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:06.570Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:06.571Z"}
{"level":"debug","message":"Executing query [m8jbojajq6npsswcm5a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:06.667Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:06.677Z"}
{"level":"debug","message":"Executing query [m8jbojau172i6torv0d]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594346666\"]","timestamp":"2025-03-21T21:59:06.678Z"}
{"level":"debug","message":"Executing query [m8jbojawmdg6zg0ad5s]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594346666\",true]","timestamp":"2025-03-21T21:59:06.680Z"}
{"level":"debug","message":"Executing query [m8jbojbdussjm3nvxw]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.697Z"}
{"level":"debug","message":"Executing query [m8jbojbgacv61etjzl]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594346666\"]","timestamp":"2025-03-21T21:59:06.700Z"}
{"level":"debug","message":"Executing query [m8jbojbh7y2sat9ir8o]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",6]","timestamp":"2025-03-21T21:59:06.701Z"}
{"level":"debug","message":"Executing query [m8jbojbkigu274663lj]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.704Z"}
{"level":"debug","message":"Executing query [m8jbojbmp95yrcpdc1d]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.706Z"}
{"level":"debug","message":"Executing query [m8jbojboonutj1vazx]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.708Z"}
{"level":"debug","message":"Executing query [m8jbojbqzij0fpclk4e]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.710Z"}
{"level":"debug","message":"Executing query [m8jbojbromofa3lzpo]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.711Z"}
{"level":"debug","message":"Executing query [m8jbojbt6vlnlqgrpmb]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.713Z"}
{"level":"debug","message":"Executing query [m8jbojbvmzlv6nbs5b]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:59:06.715Z"}
{"level":"debug","message":"Executing query [m8jbojbxr5neq1to2k]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:06.717Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:06.718Z"}
{"level":"debug","message":"Executing query [m8jbojepj86psmpqt7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:06.817Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:06.829Z"}
{"level":"debug","message":"Executing query [m8jbojf2m9csbz9205h]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:06.830Z"}
{"level":"debug","message":"Executing query [m8jbojf4h3o2tsorhtb]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594346816\"]","timestamp":"2025-03-21T21:59:06.832Z"}
{"level":"debug","message":"Executing query [m8jbojf53dn70dz0wel]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594346816\",\"TEST-OFI-QUIMICA-1742594346816\",8067,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:59:06.833Z"}
{"level":"debug","message":"Executing query [m8jbojf9r1wfwlk9t6l]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.837Z"}
{"level":"debug","message":"Executing query [m8jbojfco9m42ta34fd]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594346816\"]","timestamp":"2025-03-21T21:59:06.840Z"}
{"level":"debug","message":"Executing query [m8jbojfeo0t89wcsqyo]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",6]","timestamp":"2025-03-21T21:59:06.842Z"}
{"level":"debug","message":"Executing query [m8jbojfifd2kiv9xupg]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.846Z"}
{"level":"debug","message":"Executing query [m8jbojfkk3ulq98hz9]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.848Z"}
{"level":"debug","message":"Executing query [m8jbojfnk5oe10kmi0m]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.851Z"}
{"level":"debug","message":"Executing query [m8jbojfpy4jm6sp1se]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.853Z"}
{"level":"debug","message":"Executing query [m8jbojfsqo1mobptmcr]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.856Z"}
{"level":"debug","message":"Executing query [m8jbojfudxml2sckwhv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:06.858Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:06.859Z"}
{"level":"debug","message":"Executing query [m8jbojipxuj2zx61p5l]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:06.961Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:06.971Z"}
{"level":"debug","message":"Executing query [m8jbojj03068mfl6f9c]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:06.972Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:59:06.974Z"}
{"level":"debug","message":"Executing query [m8jbojj2vdpfrq4qa7]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T21:59:06.974Z"}
{"level":"debug","message":"Executing query [m8jbojj37yf79epbivf]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T21:59:06.975Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T21:59:06.977Z"}
{"level":"debug","message":"Executing query [m8jbojj58ibo4tofmp9]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:06.977Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:59:06.978Z"}
{"level":"debug","message":"Executing query [m8jbojjb5netd7n29n]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T21:59:06.983Z"}
{"level":"debug","message":"Executing query [m8jbojjdyu2thz2xnv]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T21:59:06.985Z"}
{"level":"debug","message":"Executing query [m8jbojjgh7ieoq4j3ut]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:06.988Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:07.105Z"}
{"level":"debug","message":"Executing query [m8jbojms1f5ox34roul]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T21:59:07.108Z"}
{"level":"debug","message":"Executing query [m8jbojmu20sh0cbagmq]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T21:59:07.110Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbojmu20sh0cbagmq]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T21:59:07.111Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:07.113Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T21:59:07.206Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T21:59:07.206Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T21:59:07.207Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T21:59:07.207Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T21:59:07.208Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T21:59:07.208Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:53.277Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:53.315Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:54.071Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:54.082Z"}
{"level":"debug","message":"Executing query [m8jbqu9y3ccjlxeev4n]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:54.214Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:54.228Z"}
{"level":"debug","message":"Executing query [m8jbquaewor0wa4t93]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:54.230Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:00:54.233Z"}
{"level":"debug","message":"Executing query [m8jbquaiclxy2k4r4v8]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:54.234Z"}
{"level":"debug","message":"Executing query [m8jbquak9bxd82eplt6]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:54.236Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:00:54.237Z"}
{"level":"debug","message":"Executing query [m8jbquaq0zsbxlpas6s9]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594454213\"]","timestamp":"2025-03-21T22:00:54.242Z"}
{"level":"debug","message":"Executing query [m8jbquauxq0mp3fdgeq]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:00:54.246Z"}
{"level":"debug","message":"Executing query [m8jbquaytxmin4wezu]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:00:54.250Z"}
{"level":"debug","message":"Executing query [m8jbqub0ttn3cx7m5v]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:00:54.252Z"}
{"level":"debug","message":"Executing query [m8jbqub3s5e1noxnhcm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:54.255Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:54.256Z"}
{"level":"debug","message":"Executing query [m8jbqueey2jhrdovs3]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:54.374Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:54.393Z"}
{"level":"debug","message":"Executing query [m8jbquezopme3387pf]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:54.395Z"}
{"level":"debug","message":"Executing query [m8jbquf1fvfcpeeho86]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:54.397Z"}
{"level":"debug","message":"Executing query [m8jbquf3e08peua8rm9]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:54.400Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:00:54.402Z"}
{"level":"debug","message":"Executing query [m8jbqufe62v65zwh0nc]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:00:54.410Z"}
{"level":"debug","message":"Executing query [m8jbquflbhre84m1zdc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:54.417Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:54.419Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:00:55.166Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:55.176Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:00:55.178Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:55.911Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:00:55.914Z"}
{"level":"debug","message":"Executing query [m8jbqvop4qqmoididry]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:56.041Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:56.055Z"}
{"level":"debug","message":"Executing query [m8jbqvp4ask7pfugax9]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:00:56.056Z"}
{"level":"debug","message":"Executing query [m8jbqvp6c7nj3mlthqo]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:00:56.058Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:00:56.059Z"}
{"level":"debug","message":"Executing query [m8jbqvp8bm3z0qiora]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:00:56.060Z"}
{"level":"debug","message":"Executing query [m8jbqvp9nf80aeznito]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:00:56.061Z"}
{"level":"debug","message":"Executing query [m8jbqvpag4zbcawdyu7]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:00:56.062Z"}
{"level":"debug","message":"Executing query [m8jbqvpbswho4v62kz]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:00:56.063Z"}
{"level":"debug","message":"Executing query [m8jbqvpf90g799h9vt]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-21T22:00:56.067Z"}
{"level":"debug","message":"Executing query [m8jbqvph5t2mqj07q6h]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:00:56.069Z"}
{"level":"debug","message":"Executing query [m8jbqvpjtsk5jbsriqf]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",8]","timestamp":"2025-03-21T22:00:56.071Z"}
{"level":"debug","message":"Executing query [m8jbqvpna9nxw1o7z4]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-21T22:00:56.075Z"}
{"level":"debug","message":"Executing query [m8jbqvppxtj7zj669lf]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-21T22:00:56.077Z"}
{"level":"debug","message":"Executing query [m8jbqvpsdh0k52m3f18]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-21T22:00:56.080Z"}
{"level":"debug","message":"Executing query [m8jbqvpu0tq8dzjdoa]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:56.082Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:56.083Z"}
{"level":"debug","message":"Executing query [m8jbqvsssv2twl783ej]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:56.188Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:56.199Z"}
{"level":"debug","message":"Executing query [m8jbqvt5hi8aj7xurg]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:56.201Z"}
{"level":"debug","message":"Executing query [m8jbqvt6nm7i6wfhv3b]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594456187\"]","timestamp":"2025-03-21T22:00:56.202Z"}
{"level":"debug","message":"Executing query [m8jbqvt842rr3f54rjc]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594456187\",\"TEST-OFI-FORENSE-1742594456187\",2328,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594456187\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:00:56.204Z"}
{"level":"debug","message":"Executing query [m8jbqvtfi1w20cikpb9]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.211Z"}
{"level":"debug","message":"Executing query [m8jbqvtifu9xkmgcx04]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594456187\"]","timestamp":"2025-03-21T22:00:56.214Z"}
{"level":"debug","message":"Executing query [m8jbqvtklylepwrc12m]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",13]","timestamp":"2025-03-21T22:00:56.216Z"}
{"level":"debug","message":"Executing query [m8jbqvtnouxvtzp7d2]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.219Z"}
{"level":"debug","message":"Executing query [m8jbqvtpw02ql1eaym]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.221Z"}
{"level":"debug","message":"Executing query [m8jbqvttnqiqh1gkby]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.225Z"}
{"level":"debug","message":"Executing query [m8jbqvtvz1qqnxdbplo]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.227Z"}
{"level":"debug","message":"Executing query [m8jbqvtytpv3jvye9m]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.230Z"}
{"level":"debug","message":"Executing query [m8jbqvu0co1tm1jrlnm]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594456232\",\"TEST-SP-OFI-FORENSE-1742594456232\",4771,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:00:56.232Z"}
{"level":"debug","message":"Executing query [m8jbqvu3h36qpg051gt]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594456232\"]","timestamp":"2025-03-21T22:00:56.235Z"}
{"level":"debug","message":"Executing query [m8jbqvu469t32xs5mfw]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594456232\"]","timestamp":"2025-03-21T22:00:56.236Z"}
{"level":"debug","message":"Executing query [m8jbqvu7zb9osath8t7]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:56.240Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:56.241Z"}
{"level":"debug","message":"Executing query [m8jbqvx5cfie4kky7cm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:56.345Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:56.360Z"}
{"level":"debug","message":"Executing query [m8jbqvxlnlp3lz9cjkc]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:56.361Z"}
{"level":"debug","message":"Executing query [m8jbqvxnr8fxsf71ndp]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594456345\"]","timestamp":"2025-03-21T22:00:56.363Z"}
{"level":"debug","message":"Executing query [m8jbqvxp1pgf45chm7u]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594456345\",\"TEST-OFICIO-1742594456345\",811,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:00:56.365Z"}
{"level":"debug","message":"Executing query [m8jbqvxtoybym5l7uhm]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.369Z"}
{"level":"debug","message":"Executing query [m8jbqvxxrqkkqfw14or]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594456345\"]","timestamp":"2025-03-21T22:00:56.373Z"}
{"level":"debug","message":"Executing query [m8jbqvxyexttdrtg0d]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",13]","timestamp":"2025-03-21T22:00:56.374Z"}
{"level":"debug","message":"Executing query [m8jbqvy2dau7irvbdt7]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.378Z"}
{"level":"debug","message":"Executing query [m8jbqvy42bwshe849ho]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.380Z"}
{"level":"debug","message":"Executing query [m8jbqvy71otz67hr9kr]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.383Z"}
{"level":"debug","message":"Executing query [m8jbqvyauco9r26l3x]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.386Z"}
{"level":"debug","message":"Executing query [m8jbqvyc6w2f6uszpwx]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.388Z"}
{"level":"debug","message":"Executing query [m8jbqvyfnsoxef9quni]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594456391\",\"TEST-SP-OFICIO-1742594456391\",1504,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:00:56.391Z"}
{"level":"debug","message":"Executing query [m8jbqvyicodvofh7bg]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594456391\"]","timestamp":"2025-03-21T22:00:56.394Z"}
{"level":"debug","message":"Executing query [m8jbqvykrnpwwygce8m]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594456391\"]","timestamp":"2025-03-21T22:00:56.396Z"}
{"level":"debug","message":"Executing query [m8jbqvyncs4ciwgsxod]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:56.399Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:56.400Z"}
{"level":"debug","message":"Executing query [m8jbqw1ki9v024ey8cr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:56.504Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:56.514Z"}
{"level":"debug","message":"Executing query [m8jbqw1vaas0gzbbh2n]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594456503\"]","timestamp":"2025-03-21T22:00:56.515Z"}
{"level":"debug","message":"Executing query [m8jbqw1yw9ds9fmfz5]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594456503\"]","timestamp":"2025-03-21T22:00:56.518Z"}
{"level":"debug","message":"Executing query [m8jbqw1z341p4m4yzwg]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594456503\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:00:56.519Z"}
{"level":"debug","message":"Executing query [m8jbqw250sxkhfr8chba]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T22:00:56.525Z"}
{"level":"debug","message":"Executing query [m8jbqw27blr2hnxayyp]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594456503\"]","timestamp":"2025-03-21T22:00:56.527Z"}
{"level":"debug","message":"Executing query [m8jbqw29a0vdpj7shrm]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1005]","timestamp":"2025-03-21T22:00:56.529Z"}
{"level":"debug","message":"Executing query [m8jbqw2cfxirt78b2tf]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T22:00:56.532Z"}
{"level":"debug","message":"Executing query [m8jbqw2e6o84d4bojsa]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T22:00:56.534Z"}
{"level":"debug","message":"Executing query [m8jbqw2hwbujz6vzy7]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T22:00:56.537Z"}
{"level":"debug","message":"Executing query [m8jbqw2jnk8ul8yaihq]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T22:00:56.539Z"}
{"level":"debug","message":"Executing query [m8jbqw2k7hmothtk6lb]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T22:00:56.540Z"}
{"level":"debug","message":"Executing query [m8jbqw2nmt5ocionrfj]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T22:00:56.543Z"}
{"level":"debug","message":"Executing query [m8jbqw2pni4l1nsa6q]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:00:56.545Z"}
{"level":"debug","message":"Executing query [m8jbqw2r68v7q66z9a4]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:56.547Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:56.548Z"}
{"level":"debug","message":"Executing query [m8jbqw5ps5o0ipcx47k]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:56.653Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:56.668Z"}
{"level":"debug","message":"Executing query [m8jbqw66riq2g9d4ct]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594456653\"]","timestamp":"2025-03-21T22:00:56.670Z"}
{"level":"debug","message":"Executing query [m8jbqw68o1a5qesyvdr]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594456653\",true]","timestamp":"2025-03-21T22:00:56.672Z"}
{"level":"debug","message":"Executing query [m8jbqw6cgjwdnyrq1jq]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.676Z"}
{"level":"debug","message":"Executing query [m8jbqw6f1fm40gg26ah]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594456653\"]","timestamp":"2025-03-21T22:00:56.679Z"}
{"level":"debug","message":"Executing query [m8jbqw6hfix0lkb2w8m]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",7]","timestamp":"2025-03-21T22:00:56.681Z"}
{"level":"debug","message":"Executing query [m8jbqw6lgcyo470t61o]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.685Z"}
{"level":"debug","message":"Executing query [m8jbqw6no28ncgvs5ls]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.687Z"}
{"level":"debug","message":"Executing query [m8jbqw6qowwubtmmfmo]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.690Z"}
{"level":"debug","message":"Executing query [m8jbqw6tn14iwgsyc4j]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.693Z"}
{"level":"debug","message":"Executing query [m8jbqw6uxqycbw7ga0n]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.694Z"}
{"level":"debug","message":"Executing query [m8jbqw6y6yrjncscu6u]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.698Z"}
{"level":"debug","message":"Executing query [m8jbqw707u7razdpzjs]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:00:56.700Z"}
{"level":"debug","message":"Executing query [m8jbqw72nani7kzwx2n]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:56.702Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:56.703Z"}
{"level":"debug","message":"Executing query [m8jbqwa8mrwcofbfssi]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:56.816Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:56.827Z"}
{"level":"debug","message":"Executing query [m8jbqwall3uj1ud107]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:56.829Z"}
{"level":"debug","message":"Executing query [m8jbqwanjxu612d7xx]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594456815\"]","timestamp":"2025-03-21T22:00:56.831Z"}
{"level":"debug","message":"Executing query [m8jbqwap7h7ky6i81r]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594456815\",\"TEST-OFI-QUIMICA-1742594456815\",9828,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:00:56.833Z"}
{"level":"debug","message":"Executing query [m8jbqwatf5prnilc61g]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.838Z"}
{"level":"debug","message":"Executing query [m8jbqwawodi2gjxyqg8]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594456815\"]","timestamp":"2025-03-21T22:00:56.840Z"}
{"level":"debug","message":"Executing query [m8jbqwayxltuvg2i0y]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",7]","timestamp":"2025-03-21T22:00:56.842Z"}
{"level":"debug","message":"Executing query [m8jbqwb1l0mhqx68gc9]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.846Z"}
{"level":"debug","message":"Executing query [m8jbqwb423ldl7rxhog]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.848Z"}
{"level":"debug","message":"Executing query [m8jbqwb8jh3xn8disar]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.852Z"}
{"level":"debug","message":"Executing query [m8jbqwbaqnzb9xrx5vk]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.854Z"}
{"level":"debug","message":"Executing query [m8jbqwbd9tq653shf0v]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.857Z"}
{"level":"debug","message":"Executing query [m8jbqwbfsuh4m05mfx8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:56.859Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:56.861Z"}
{"level":"debug","message":"Executing query [m8jbqwfaw8ck4fyjlxm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:56.998Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:57.022Z"}
{"level":"debug","message":"Executing query [m8jbqwg2hftwr4ie6be]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:57.026Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:00:57.028Z"}
{"level":"debug","message":"Executing query [m8jbqwg5arhayi70j9m]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:00:57.029Z"}
{"level":"debug","message":"Executing query [m8jbqwg8k9zq6cdujid]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:00:57.032Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:00:57.034Z"}
{"level":"debug","message":"Executing query [m8jbqwgawiex2ojc5u]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:57.034Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:00:57.036Z"}
{"level":"debug","message":"Executing query [m8jbqwglku3s0z8c74]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:00:57.045Z"}
{"level":"debug","message":"Executing query [m8jbqwgo86vpaj4a5jl]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:00:57.048Z"}
{"level":"debug","message":"Executing query [m8jbqwgrm4azf6tbbv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:57.051Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:57.174Z"}
{"level":"debug","message":"Executing query [m8jbqwkau54xe0139d]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:00:57.178Z"}
{"level":"debug","message":"Executing query [m8jbqwkcpuet0n1sjg]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:00:57.180Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbqwkcpuet0n1sjg]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:00:57.181Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:57.183Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:00:57.268Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:00:57.269Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:00:57.270Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:00:57.270Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:00:57.271Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:00:57.271Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:04:57.377Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:04:57.433Z"}
{"authTokenExists":false,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":false,"timestamp":"2025-03-21T22:04:57.450Z"}
{"level":"info","message":"Omitiendo prueba de refresh token, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:04:57.452Z"}
{"level":"info","message":"Omitiendo prueba de verificación, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:04:57.454Z"}
{"level":"info","message":"Omitiendo prueba de logout, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:04:57.455Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:04:57.456Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:04:58.204Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:04:58.214Z"}
{"level":"debug","message":"Executing query [m8jbw2ngbhedihe3vs]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:04:58.348Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:04:58.363Z"}
{"level":"debug","message":"Executing query [m8jbw2nxfferbszxng4]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:04:58.365Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:04:58.367Z"}
{"level":"debug","message":"Executing query [m8jbw2o0wj9ygjkg05]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:04:58.368Z"}
{"level":"debug","message":"Executing query [m8jbw2o2hb06gb8byu]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:04:58.370Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:04:58.371Z"}
{"level":"debug","message":"Executing query [m8jbw2o8q3yqei3m9qq]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594698348\"]","timestamp":"2025-03-21T22:04:58.376Z"}
{"level":"debug","message":"Executing query [m8jbw2ocmmih9v82wx]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:04:58.380Z"}
{"level":"debug","message":"Executing query [m8jbw2ofrhbivyiqb5i]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:04:58.383Z"}
{"level":"debug","message":"Executing query [m8jbw2oigoxyfkd1z5]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:04:58.386Z"}
{"level":"debug","message":"Executing query [m8jbw2oj02ipfantt166]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:04:58.387Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:04:58.390Z"}
{"level":"debug","message":"Executing query [m8jbw2rz485vq63ugnf]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:04:58.511Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:04:58.525Z"}
{"level":"debug","message":"Executing query [m8jbw2seh3qlqxft32f]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:04:58.526Z"}
{"level":"debug","message":"Executing query [m8jbw2sgg59no8dc6lr]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:04:58.528Z"}
{"level":"debug","message":"Executing query [m8jbw2si5idxmeudase]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:04:58.530Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:04:58.531Z"}
{"level":"debug","message":"Executing query [m8jbw2ssn8yal2qjz0r]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:04:58.540Z"}
{"level":"debug","message":"Executing query [m8jbw2sxs5r0vwl9e4i]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:04:58.545Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:04:58.546Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:04:59.286Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:04:59.295Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:04:59.297Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:00.033Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:05:00.037Z"}
{"level":"debug","message":"Executing query [m8jbw41veojqrzkbcgu]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:05:00.163Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:00.177Z"}
{"level":"debug","message":"Executing query [m8jbw42blbm63ax21yc]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:05:00.179Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:05:00.181Z"}
{"level":"debug","message":"Executing query [m8jbw42dgapw4t7nje]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:05:00.181Z"}
{"level":"debug","message":"Executing query [m8jbw42ee0o3snqq9y]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:05:00.182Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:05:00.184Z"}
{"level":"debug","message":"Executing query [m8jbw42ggzm1hqkzl6v]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:05:00.184Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:05:00.185Z"}
{"level":"debug","message":"Executing query [m8jbw42mqsy0f04re6]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:05:00.190Z"}
{"level":"debug","message":"Executing query [m8jbw42p8idofuk9iqm]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:05:00.193Z"}
{"level":"debug","message":"Executing query [m8jbw42shh2nqf2xos]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:05:00.196Z"}
{"level":"debug","message":"Executing query [m8jbw45z3436tb1rx6d]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:05:00.311Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:00.321Z"}
{"level":"debug","message":"Executing query [m8jbw46au6o614ndxr]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:05:00.322Z"}
{"level":"debug","message":"Executing query [m8jbw46c0tmandvmaice]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594700310\"]","timestamp":"2025-03-21T22:05:00.324Z"}
{"level":"debug","message":"Executing query [m8jbw46dplozjn6z3s]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594700310\",\"TEST-OFICIO-1742594700310\",8132,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:05:00.325Z"}
{"level":"debug","message":"Executing query [m8jbw46jnljl7v412wc]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.331Z"}
{"level":"debug","message":"Executing query [m8jbw46l0cl70llsxa2g]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594700310\"]","timestamp":"2025-03-21T22:05:00.333Z"}
{"level":"debug","message":"Executing query [m8jbw46n70v9jgxtye5]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",15]","timestamp":"2025-03-21T22:05:00.335Z"}
{"level":"debug","message":"Executing query [m8jbw46qbkqmmx5oefm]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.338Z"}
{"level":"debug","message":"Executing query [m8jbw46s7xjm9e2yc9c]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.340Z"}
{"level":"debug","message":"Executing query [m8jbw46v7fa4d76ixch]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.343Z"}
{"level":"debug","message":"Executing query [m8jbw46x6h97l0o3yfr]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.346Z"}
{"level":"debug","message":"Executing query [m8jbw470zga9k91r1q8]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.348Z"}
{"level":"debug","message":"Executing query [m8jbw473e2kler3ocj]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594700351\",\"TEST-SP-OFICIO-1742594700351\",1639,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:05:00.351Z"}
{"level":"debug","message":"Executing query [m8jbw476icw50a00w7]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594700351\"]","timestamp":"2025-03-21T22:05:00.354Z"}
{"level":"debug","message":"Executing query [m8jbw478cix5vgnhlt]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594700351\"]","timestamp":"2025-03-21T22:05:00.356Z"}
{"level":"debug","message":"Executing query [m8jbw47blyrujvmcgni]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:05:00.359Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:00.360Z"}
{"level":"debug","message":"Executing query [m8jbw4a1yb1sv77i1x]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:05:00.457Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:00.469Z"}
{"level":"debug","message":"Executing query [m8jbw4aeodon83cud4s]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:05:00.470Z"}
{"level":"debug","message":"Executing query [m8jbw4ag6kw15mkyz4x]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594700456\"]","timestamp":"2025-03-21T22:05:00.472Z"}
{"level":"debug","message":"Executing query [m8jbw4aik9r9it2f31d]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594700456\",\"TEST-OFI-FORENSE-1742594700456\",1861,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594700456\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:05:00.474Z"}
{"level":"debug","message":"Executing query [m8jbw4anl1jgcodd7ud]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.479Z"}
{"level":"debug","message":"Executing query [m8jbw4aq8mw5op21zer]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594700456\"]","timestamp":"2025-03-21T22:05:00.482Z"}
{"level":"debug","message":"Executing query [m8jbw4as8p5vocd3oks]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",15]","timestamp":"2025-03-21T22:05:00.484Z"}
{"level":"debug","message":"Executing query [m8jbw4avpp20bm1tow]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.487Z"}
{"level":"debug","message":"Executing query [m8jbw4axwezdapaakkr]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.489Z"}
{"level":"debug","message":"Executing query [m8jbw4b0udbw237jqr]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.492Z"}
{"level":"debug","message":"Executing query [m8jbw4b2m1807m472km]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.494Z"}
{"level":"debug","message":"Executing query [m8jbw4b5g3d74d6aqn9]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.497Z"}
{"level":"debug","message":"Executing query [m8jbw4b637v9vs7rd74]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594700498\",\"TEST-SP-OFI-FORENSE-1742594700498\",9641,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:05:00.498Z"}
{"level":"debug","message":"Executing query [m8jbw4bq8nqamzbzywp]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594700498\"]","timestamp":"2025-03-21T22:05:00.518Z"}
{"level":"debug","message":"Executing query [m8jbw4brngj5zjzabsc]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594700498\"]","timestamp":"2025-03-21T22:05:00.519Z"}
{"level":"debug","message":"Executing query [m8jbw4bvucuwx7kes8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:05:00.523Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:00.524Z"}
{"level":"debug","message":"Executing query [m8jbw4esos6hcarto3a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:05:00.628Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:00.636Z"}
{"level":"debug","message":"Executing query [m8jbw4f2fknze9yriqr]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:05:00.638Z"}
{"level":"debug","message":"Executing query [m8jbw4f3975usm1yt97]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:05:00.639Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:05:00.640Z"}
{"level":"debug","message":"Executing query [m8jbw4f56ckobddgrix]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:05:00.641Z"}
{"level":"debug","message":"Executing query [m8jbw4f75lcwe1p5joa]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:05:00.643Z"}
{"level":"debug","message":"Executing query [m8jbw4f88hp8al9q0m4]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:05:00.644Z"}
{"level":"debug","message":"Executing query [m8jbw4f80aud2isjykqf]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:05:00.644Z"}
{"level":"debug","message":"Executing query [m8jbw4fe7k7lb2cyivf]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[9]","timestamp":"2025-03-21T22:05:00.650Z"}
{"level":"debug","message":"Executing query [m8jbw4fhzlb9afj2vsf]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:05:00.653Z"}
{"level":"debug","message":"Executing query [m8jbw4fjhp05o2t88af]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",9]","timestamp":"2025-03-21T22:05:00.655Z"}
{"level":"debug","message":"Executing query [m8jbw4fnkjk5nf0ecse]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[9]","timestamp":"2025-03-21T22:05:00.659Z"}
{"level":"debug","message":"Executing query [m8jbw4fp9z4yakqugjs]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[9]","timestamp":"2025-03-21T22:05:00.661Z"}
{"level":"debug","message":"Executing query [m8jbw4fu6ni5abc7k5r]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[9]","timestamp":"2025-03-21T22:05:00.666Z"}
{"level":"debug","message":"Executing query [m8jbw4fvkm2r3z6h1qc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:05:00.667Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:00.668Z"}
{"level":"debug","message":"Executing query [m8jbw4ipx2ppde76nr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:05:00.769Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:00.782Z"}
{"level":"debug","message":"Executing query [m8jbw4j3uq0cx7jf2we]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:05:00.783Z"}
{"level":"debug","message":"Executing query [m8jbw4j5s49v28u7fbs]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594700768\"]","timestamp":"2025-03-21T22:05:00.785Z"}
{"level":"debug","message":"Executing query [m8jbw4j6eqe4kxcw9bv]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594700768\",\"TEST-OFI-QUIMICA-1742594700768\",1218,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:05:00.786Z"}
{"level":"debug","message":"Executing query [m8jbw4ja0ph4rsatne1b]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.790Z"}
{"level":"debug","message":"Executing query [m8jbw4jcyejj4rx9oxl]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594700768\"]","timestamp":"2025-03-21T22:05:00.792Z"}
{"level":"debug","message":"Executing query [m8jbw4je1q9r0rr8ve3]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",8]","timestamp":"2025-03-21T22:05:00.794Z"}
{"level":"debug","message":"Executing query [m8jbw4jiq0gt3yz6nt9]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.798Z"}
{"level":"debug","message":"Executing query [m8jbw4jlzoz0c66qho]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.801Z"}
{"level":"debug","message":"Executing query [m8jbw4jp5k1ihfjidfm]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.805Z"}
{"level":"debug","message":"Executing query [m8jbw4jr1hasvfvk2nv]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.807Z"}
{"level":"debug","message":"Executing query [m8jbw4jvc3c51exb3zp]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.812Z"}
{"level":"debug","message":"Executing query [m8jbw4jxmcwtiheg4p8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:05:00.813Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:00.815Z"}
{"level":"debug","message":"Executing query [m8jbw4mqum6stofgqwh]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:05:00.914Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:00.924Z"}
{"level":"debug","message":"Executing query [m8jbw4n1dlnjkvx5omt]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594700913\"]","timestamp":"2025-03-21T22:05:00.925Z"}
{"level":"debug","message":"Executing query [m8jbw4n23rtto7bmbdi]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594700913\",true]","timestamp":"2025-03-21T22:05:00.926Z"}
{"level":"debug","message":"Executing query [m8jbw4n7jud5eg5777p]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.931Z"}
{"level":"debug","message":"Executing query [m8jbw4n92gltmfk2dku]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594700913\"]","timestamp":"2025-03-21T22:05:00.933Z"}
{"level":"debug","message":"Executing query [m8jbw4nbeld14s92igf]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",8]","timestamp":"2025-03-21T22:05:00.935Z"}
{"level":"debug","message":"Executing query [m8jbw4nd4zgxeinmk4n]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.937Z"}
{"level":"debug","message":"Executing query [m8jbw4nfvn03fvddcac]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.939Z"}
{"level":"debug","message":"Executing query [m8jbw4nieomnuhscj6h]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.942Z"}
{"level":"debug","message":"Executing query [m8jbw4nl0tyo3wg68r1r]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.945Z"}
{"level":"debug","message":"Executing query [m8jbw4nm39c0t0uvvfq]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.946Z"}
{"level":"debug","message":"Executing query [m8jbw4npnc4ve52qmza]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.949Z"}
{"level":"debug","message":"Executing query [m8jbw4nqmwbb4w6a4v]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:05:00.950Z"}
{"level":"debug","message":"Executing query [m8jbw4nsa85flk3qdt]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:05:00.952Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:00.954Z"}
{"level":"debug","message":"Executing query [m8jbw4qqwydxrjrsmap]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:05:01.058Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:01.071Z"}
{"level":"debug","message":"Executing query [m8jbw4r5p4kru74nvr]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594701057\"]","timestamp":"2025-03-21T22:05:01.073Z"}
{"level":"debug","message":"Executing query [m8jbw4r6i4xgdgtrw1o]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594701057\"]","timestamp":"2025-03-21T22:05:01.074Z"}
{"level":"debug","message":"Executing query [m8jbw4r7r9kkdpsaocs]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594701057\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:05:01.075Z"}
{"level":"debug","message":"Executing query [m8jbw4re6fbztx8iq4m]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T22:05:01.082Z"}
{"level":"debug","message":"Executing query [m8jbw4rh40vtkhj7amn]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594701057\"]","timestamp":"2025-03-21T22:05:01.085Z"}
{"level":"debug","message":"Executing query [m8jbw4rj5lz1nc2209t]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1006]","timestamp":"2025-03-21T22:05:01.087Z"}
{"level":"debug","message":"Executing query [m8jbw4rmpsjy04504oo]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T22:05:01.090Z"}
{"level":"debug","message":"Executing query [m8jbw4rotprxkozt81b]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T22:05:01.092Z"}
{"level":"debug","message":"Executing query [m8jbw4rr2tlt7hbufs8]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T22:05:01.095Z"}
{"level":"debug","message":"Executing query [m8jbw4rtt03dsets91k]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T22:05:01.098Z"}
{"level":"debug","message":"Executing query [m8jbw4rvtwd4yq81y7r]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T22:05:01.099Z"}
{"level":"debug","message":"Executing query [m8jbw4rypmk4grc6v2]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T22:05:01.102Z"}
{"level":"debug","message":"Executing query [m8jbw4s063749jtugzi]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:05:01.104Z"}
{"level":"debug","message":"Executing query [m8jbw4s2zqblj4jfj9o]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:05:01.106Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:01.107Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:01.225Z"}
{"level":"debug","message":"Executing query [m8jbw4vg83rwlx4qrlt]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:05:01.228Z"}
{"level":"debug","message":"Executing query [m8jbw4vhizht6mbim1]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:05:01.229Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbw4vhizht6mbim1]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:05:01.231Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:01.233Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:05:01.314Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:05:01.315Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:05:01.316Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:05:01.316Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:05:01.317Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:05:01.317Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:06:29.585Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:29.639Z"}
{"authTokenExists":false,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":false,"timestamp":"2025-03-21T22:06:29.656Z"}
{"level":"info","message":"Omitiendo prueba de refresh token, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:06:29.657Z"}
{"level":"info","message":"Omitiendo prueba de verificación, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:06:29.658Z"}
{"level":"info","message":"Omitiendo prueba de logout, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:06:29.661Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:29.663Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:30.408Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:30.420Z"}
{"level":"debug","message":"Executing query [m8jby1sk7in5h6e713n]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:30.548Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:30.562Z"}
{"level":"debug","message":"Executing query [m8jby1t0y54gqbc32ze]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:30.564Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:06:30.567Z"}
{"level":"debug","message":"Executing query [m8jby1t4kw2bkuek2tq]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:30.568Z"}
{"level":"debug","message":"Executing query [m8jby1t5ocpq2sfgr0f]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:30.569Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:06:30.571Z"}
{"level":"debug","message":"Executing query [m8jby1tbn6qma9kkrm]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594790547\"]","timestamp":"2025-03-21T22:06:30.575Z"}
{"level":"debug","message":"Executing query [m8jby1tf4ngn0kyp2kd]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:06:30.579Z"}
{"level":"debug","message":"Executing query [m8jby1tjbu6epxq22ms]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:06:30.583Z"}
{"level":"debug","message":"Executing query [m8jby1tmcn5ajb4xyog]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:06:30.586Z"}
{"level":"debug","message":"Executing query [m8jby1tod5z3vw01hb6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:30.588Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:30.589Z"}
{"level":"debug","message":"Executing query [m8jby1wznq9y0ba2qw]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:30.707Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:30.720Z"}
{"level":"debug","message":"Executing query [m8jby1xdewtkvyo6g2l]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:30.721Z"}
{"level":"debug","message":"Executing query [m8jby1xge6z48jlmrja]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:30.724Z"}
{"level":"debug","message":"Executing query [m8jby1xh83ruc4b0bs]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:30.725Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:06:30.727Z"}
{"level":"debug","message":"Executing query [m8jby1xtfqlo9a7mz1c]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:06:30.737Z"}
{"level":"debug","message":"Executing query [m8jby1xxj1sqewoyjy]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:30.741Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:30.742Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:06:31.489Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:31.497Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:06:31.499Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:32.217Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:06:32.219Z"}
{"level":"debug","message":"Executing query [m8jby36l3a75jehsmz3]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:32.349Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:32.363Z"}
{"level":"debug","message":"Executing query [m8jby370n62gfswh0ep]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:32.364Z"}
{"level":"debug","message":"Executing query [m8jby372ksxgk1lvhvi]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594792348\"]","timestamp":"2025-03-21T22:06:32.366Z"}
{"level":"debug","message":"Executing query [m8jby37466sphnsod6n]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594792348\",\"TEST-OFI-FORENSE-1742594792348\",9785,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594792348\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:06:32.368Z"}
{"level":"debug","message":"Executing query [m8jby37dkk9xx2e8mzj]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.377Z"}
{"level":"debug","message":"Executing query [m8jby37hm6m3l1qxa]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594792348\"]","timestamp":"2025-03-21T22:06:32.381Z"}
{"level":"debug","message":"Executing query [m8jby37lxbas0zjel9]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",17]","timestamp":"2025-03-21T22:06:32.385Z"}
{"level":"debug","message":"Executing query [m8jby37rk03z06iod6q]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.391Z"}
{"level":"debug","message":"Executing query [m8jby37u82d53tt646d]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.394Z"}
{"level":"debug","message":"Executing query [m8jby37zkiltve464df]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.399Z"}
{"level":"debug","message":"Executing query [m8jby3812uvy52vng2b]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.401Z"}
{"level":"debug","message":"Executing query [m8jby386afq3kioyd1o]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.406Z"}
{"level":"debug","message":"Executing query [m8jby388fm84ptcgodk]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594792408\",\"TEST-SP-OFI-FORENSE-1742594792408\",3725,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:06:32.408Z"}
{"level":"debug","message":"Executing query [m8jby38dapv8j41wz1]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594792408\"]","timestamp":"2025-03-21T22:06:32.413Z"}
{"level":"debug","message":"Executing query [m8jby38fu9ivz9ss9xf]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594792408\"]","timestamp":"2025-03-21T22:06:32.415Z"}
{"level":"debug","message":"Executing query [m8jby38j8kkmzc4muol]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:32.419Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:32.421Z"}
{"level":"debug","message":"Executing query [m8jby3bva6ta61ts4l9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:32.539Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:32.549Z"}
{"level":"debug","message":"Executing query [m8jby3c62vibgi59wex]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:32.551Z"}
{"level":"debug","message":"Executing query [m8jby3c82frl5flk45t]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594792538\"]","timestamp":"2025-03-21T22:06:32.552Z"}
{"level":"debug","message":"Executing query [m8jby3c9zacswxitz3m]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594792538\",\"TEST-OFICIO-1742594792538\",5800,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:06:32.553Z"}
{"level":"debug","message":"Executing query [m8jby3cdeuldxl6nwza]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.557Z"}
{"level":"debug","message":"Executing query [m8jby3cgakl0a1c3isp]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594792538\"]","timestamp":"2025-03-21T22:06:32.560Z"}
{"level":"debug","message":"Executing query [m8jby3ci319er4l0q0o]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",17]","timestamp":"2025-03-21T22:06:32.562Z"}
{"level":"debug","message":"Executing query [m8jby3cmp3371zzw0ic]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.566Z"}
{"level":"debug","message":"Executing query [m8jby3co4s46ows7ggq]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.568Z"}
{"level":"debug","message":"Executing query [m8jby3cri1c8ko4c0ll]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.571Z"}
{"level":"debug","message":"Executing query [m8jby3cty7j1mj19v]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.573Z"}
{"level":"debug","message":"Executing query [m8jby3cvgf6x62hr70f]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.575Z"}
{"level":"debug","message":"Executing query [m8jby3cyhsxvp3v8afp]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594792578\",\"TEST-SP-OFICIO-1742594792578\",1003,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:06:32.578Z"}
{"level":"debug","message":"Executing query [m8jby3d1tc403a6i7he]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594792578\"]","timestamp":"2025-03-21T22:06:32.581Z"}
{"level":"debug","message":"Executing query [m8jby3d3hrchwxcso06]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594792578\"]","timestamp":"2025-03-21T22:06:32.583Z"}
{"level":"debug","message":"Executing query [m8jby3d70bjrtegog0wd]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:32.587Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:32.588Z"}
{"level":"debug","message":"Executing query [m8jby3gf9t8l7mxfc14]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:32.703Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:32.714Z"}
{"level":"debug","message":"Executing query [m8jby3gryznjzcghx1]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594792702\"]","timestamp":"2025-03-21T22:06:32.715Z"}
{"level":"debug","message":"Executing query [m8jby3gtmj8sub2dl6p]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594792702\"]","timestamp":"2025-03-21T22:06:32.717Z"}
{"level":"debug","message":"Executing query [m8jby3gua4uz51n1ro9]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594792702\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:06:32.718Z"}
{"level":"debug","message":"Executing query [m8jby3h0ibo4calduv]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-21T22:06:32.724Z"}
{"level":"debug","message":"Executing query [m8jby3h2io7ig4hdybn]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594792702\"]","timestamp":"2025-03-21T22:06:32.726Z"}
{"level":"debug","message":"Executing query [m8jby3h3uaad9ohyj4]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1007]","timestamp":"2025-03-21T22:06:32.728Z"}
{"level":"debug","message":"Executing query [m8jby3h7t0km7dfaoup]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-21T22:06:32.731Z"}
{"level":"debug","message":"Executing query [m8jby3h9tvqzewrudgj]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-21T22:06:32.733Z"}
{"level":"debug","message":"Executing query [m8jby3hbkh2fauoy9ln]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-21T22:06:32.735Z"}
{"level":"debug","message":"Executing query [m8jby3hefkhrq1ez8lw]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-21T22:06:32.738Z"}
{"level":"debug","message":"Executing query [m8jby3hfaomm5vlbtd7]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-21T22:06:32.739Z"}
{"level":"debug","message":"Executing query [m8jby3hi24zccy2533e]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-21T22:06:32.742Z"}
{"level":"debug","message":"Executing query [m8jby3hj6zlfgemjb13]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:06:32.743Z"}
{"level":"debug","message":"Executing query [m8jby3hll0if5d04px]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:32.745Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:32.746Z"}
{"level":"debug","message":"Executing query [m8jby3kew8cady6jv6]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:32.846Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:32.855Z"}
{"level":"debug","message":"Executing query [m8jby3koy0swf8aos4m]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:32.856Z"}
{"level":"debug","message":"Executing query [m8jby3kqdmcznxvlq3s]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594792845\"]","timestamp":"2025-03-21T22:06:32.858Z"}
{"level":"debug","message":"Executing query [m8jby3krvm5rrq7fhwo]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594792845\",\"TEST-OFI-QUIMICA-1742594792845\",4247,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:06:32.859Z"}
{"level":"debug","message":"Executing query [m8jby3kvg27u6pqfbj6]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-21T22:06:32.863Z"}
{"level":"debug","message":"Executing query [m8jby3kxcz8bq5sdqdd]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594792845\"]","timestamp":"2025-03-21T22:06:32.865Z"}
{"level":"debug","message":"Executing query [m8jby3kzxw5ib1qjpar]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",9]","timestamp":"2025-03-21T22:06:32.867Z"}
{"level":"debug","message":"Executing query [m8jby3l3ce0njrm83q8]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-21T22:06:32.871Z"}
{"level":"debug","message":"Executing query [m8jby3l5jnxf0xpr4s]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-21T22:06:32.873Z"}
{"level":"debug","message":"Executing query [m8jby3l8btqqmjts8y8]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-21T22:06:32.876Z"}
{"level":"debug","message":"Executing query [m8jby3lasxrt7ajcywq]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-21T22:06:32.878Z"}
{"level":"debug","message":"Executing query [m8jby3lcjm6k2768p2j]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-21T22:06:32.880Z"}
{"level":"debug","message":"Executing query [m8jby3le5vspoe4hne6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:32.882Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:32.883Z"}
{"level":"debug","message":"Executing query [m8jby3o44e62ml4eag8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:32.980Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:32.992Z"}
{"level":"debug","message":"Executing query [m8jby3ohre1nrdvfy3q]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:32.993Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:06:32.994Z"}
{"level":"debug","message":"Executing query [m8jby3ojsdxezwg7czo]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:06:32.995Z"}
{"level":"debug","message":"Executing query [m8jby3ok8ra7p8b88o4]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:06:32.996Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:06:32.997Z"}
{"level":"debug","message":"Executing query [m8jby3olafa1i5bkbdw]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:32.997Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:06:32.998Z"}
{"level":"debug","message":"Executing query [m8jby3oqbtj88nvou3c]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:06:33.002Z"}
{"level":"debug","message":"Executing query [m8jby3ot0j26vv7gcpld]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:06:33.005Z"}
{"level":"debug","message":"Executing query [m8jby3ouee2gihzw9k]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:33.006Z"}
{"level":"debug","message":"Executing query [m8jby3ro7pm5o1oexz5]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:33.109Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:33.118Z"}
{"level":"debug","message":"Executing query [m8jby3rzytt907d7499]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:06:33.119Z"}
{"level":"debug","message":"Executing query [m8jby3s0ylytibk8fvp]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:06:33.120Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:06:33.121Z"}
{"level":"debug","message":"Executing query [m8jby3s2zovv5euv68k]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:06:33.122Z"}
{"level":"debug","message":"Executing query [m8jby3s3jg0kqfwy4vo]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:06:33.123Z"}
{"level":"debug","message":"Executing query [m8jby3s4d0dz38ksh5u]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:06:33.124Z"}
{"level":"debug","message":"Executing query [m8jby3s46xhe22c59js]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:06:33.124Z"}
{"level":"debug","message":"Executing query [m8jby3s8cei0pd8pojh]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[10]","timestamp":"2025-03-21T22:06:33.128Z"}
{"level":"debug","message":"Executing query [m8jby3sa3kr9an3h0q6]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:06:33.130Z"}
{"level":"debug","message":"Executing query [m8jby3scxw1qbfqyig]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",10]","timestamp":"2025-03-21T22:06:33.132Z"}
{"level":"debug","message":"Executing query [m8jby3sfn96osqjvjv]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[10]","timestamp":"2025-03-21T22:06:33.135Z"}
{"level":"debug","message":"Executing query [m8jby3sh9w87ivetr9a]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[10]","timestamp":"2025-03-21T22:06:33.137Z"}
{"level":"debug","message":"Executing query [m8jby3sjlrtu1fpylve]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[10]","timestamp":"2025-03-21T22:06:33.139Z"}
{"level":"debug","message":"Executing query [m8jby3sl4288hw7zyly]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:33.141Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:33.143Z"}
{"level":"debug","message":"Executing query [m8jby3vcffc9hfh17uc]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:33.240Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:33.253Z"}
{"level":"debug","message":"Executing query [m8jby3vqx0lkuk59v3]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594793240\"]","timestamp":"2025-03-21T22:06:33.254Z"}
{"level":"debug","message":"Executing query [m8jby3vrslk2e51ahj]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594793240\",true]","timestamp":"2025-03-21T22:06:33.255Z"}
{"level":"debug","message":"Executing query [m8jby3vwmqopzx2ditk]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-21T22:06:33.260Z"}
{"level":"debug","message":"Executing query [m8jby3vyc3svgzknpi8]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594793240\"]","timestamp":"2025-03-21T22:06:33.262Z"}
{"level":"debug","message":"Executing query [m8jby3w1dd1u3ikssba]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",9]","timestamp":"2025-03-21T22:06:33.265Z"}
{"level":"debug","message":"Executing query [m8jby3w49k8nuewl9fr]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-21T22:06:33.268Z"}
{"level":"debug","message":"Executing query [m8jby3w6wqsjgrgq9pk]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-21T22:06:33.270Z"}
{"level":"debug","message":"Executing query [m8jby3w9ucz74tq7zv]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-21T22:06:33.273Z"}
{"level":"debug","message":"Executing query [m8jby3wbghfg38lhnxc]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-21T22:06:33.275Z"}
{"level":"debug","message":"Executing query [m8jby3wcivgu8547yn]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-21T22:06:33.276Z"}
{"level":"debug","message":"Executing query [m8jby3wfnob2b9w9b8a]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-21T22:06:33.280Z"}
{"level":"debug","message":"Executing query [m8jby3whpt2sdnd1iu]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:06:33.281Z"}
{"level":"debug","message":"Executing query [m8jby3wjpao1a775r9h]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:33.283Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:33.284Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:33.393Z"}
{"level":"debug","message":"Executing query [m8jby3znusqqqxud6yo]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:06:33.395Z"}
{"level":"debug","message":"Executing query [m8jby3zpvbsar0rqxus]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:06:33.397Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jby3zpvbsar0rqxus]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:06:33.398Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:33.400Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:06:33.481Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:06:33.482Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:06:33.482Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:06:33.483Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:06:33.483Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:06:33.483Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:07:06.759Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:06.821Z"}
{"authTokenExists":false,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":false,"timestamp":"2025-03-21T22:07:06.842Z"}
{"level":"info","message":"Omitiendo prueba de refresh token, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:07:06.844Z"}
{"level":"info","message":"Omitiendo prueba de verificación, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:07:06.845Z"}
{"level":"info","message":"Omitiendo prueba de logout, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:07:06.847Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:06.849Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:07.645Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:07.656Z"}
{"level":"debug","message":"Executing query [m8jbyuj8gw8rimpkkx]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:07.796Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:07.812Z"}
{"level":"debug","message":"Executing query [m8jbyujqt66b5vus1i]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:07.814Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:07:07.817Z"}
{"level":"debug","message":"Executing query [m8jbyujurpsuej6vsv8]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:07.818Z"}
{"level":"debug","message":"Executing query [m8jbyujvl0ovsuh547o]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:07.819Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:07:07.820Z"}
{"level":"debug","message":"Executing query [m8jbyuk051zhi56i2yx]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594827795\"]","timestamp":"2025-03-21T22:07:07.824Z"}
{"level":"debug","message":"Executing query [m8jbyuk5sl0dmra4nif]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:07:07.829Z"}
{"level":"debug","message":"Executing query [m8jbyuk8taypijzkpwc]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:07:07.832Z"}
{"level":"debug","message":"Executing query [m8jbyuka97c8sskxb5b]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:07:07.834Z"}
{"level":"debug","message":"Executing query [m8jbyukd2mwz1l9n6wh]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:07.837Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:07.839Z"}
{"level":"debug","message":"Executing query [m8jbyuo5jytq6vrqq0m]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:07.973Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:07.986Z"}
{"level":"debug","message":"Executing query [m8jbyuolkcwd4vz8ip]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:07.989Z"}
{"level":"debug","message":"Executing query [m8jbyuon29cjx4b4h4t]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:07.991Z"}
{"level":"debug","message":"Executing query [m8jbyuooc0kngzvj2i5]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:07.992Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:07:07.993Z"}
{"level":"debug","message":"Executing query [m8jbyuozxj6zbmzr6u]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:07:08.003Z"}
{"level":"debug","message":"Executing query [m8jbyup4ei6yvksoc9h]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:08.008Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:08.010Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:07:08.757Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:08.768Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:07:08.770Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:09.595Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:07:09.599Z"}
{"level":"debug","message":"Executing query [m8jbyw1a59607nui1xl]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:09.742Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:09.756Z"}
{"level":"debug","message":"Executing query [m8jbyw1qck16j3sxfj6]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:09.758Z"}
{"level":"debug","message":"Executing query [m8jbyw1s56qc7xpjw96]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594829741\"]","timestamp":"2025-03-21T22:07:09.760Z"}
{"level":"debug","message":"Executing query [m8jbyw1ux2pl7onjaw]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594829741\",\"TEST-OFI-FORENSE-1742594829741\",5791,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594829741\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:09.762Z"}
{"level":"debug","message":"Executing query [m8jbyw20qevfepo8y4l]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.768Z"}
{"level":"debug","message":"Executing query [m8jbyw24krddt1ysjd]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594829741\"]","timestamp":"2025-03-21T22:07:09.772Z"}
{"level":"debug","message":"Executing query [m8jbyw27y66b5i4du2h]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",19]","timestamp":"2025-03-21T22:07:09.775Z"}
{"level":"debug","message":"Executing query [m8jbyw2a9vi7vttjw7o]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.778Z"}
{"level":"debug","message":"Executing query [m8jbyw2ef1z8su0uo7v]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.782Z"}
{"level":"debug","message":"Executing query [m8jbyw2h5rdhj2qlt8]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.785Z"}
{"level":"debug","message":"Executing query [m8jbyw2ki3wdup1f20s]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.788Z"}
{"level":"debug","message":"Executing query [m8jbyw2np5x185f0t18]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.791Z"}
{"level":"debug","message":"Executing query [m8jbyw2ptqx7eqkrm1a]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594829793\",\"TEST-SP-OFI-FORENSE-1742594829793\",4316,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:07:09.793Z"}
{"level":"debug","message":"Executing query [m8jbyw2t8w9g8lop7bu]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594829793\"]","timestamp":"2025-03-21T22:07:09.797Z"}
{"level":"debug","message":"Executing query [m8jbyw2vkcq556ie3i]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594829793\"]","timestamp":"2025-03-21T22:07:09.799Z"}
{"level":"debug","message":"Executing query [m8jbyw2zs14r5prfqe8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:09.803Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:09.805Z"}
{"level":"debug","message":"Executing query [m8jbyw6g23s9d1114j6]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:09.928Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:09.937Z"}
{"level":"debug","message":"Executing query [m8jbyw6s88r3g9h3in4]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:09.940Z"}
{"level":"debug","message":"Executing query [m8jbyw6ticfybwo03zh]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594829927\"]","timestamp":"2025-03-21T22:07:09.941Z"}
{"level":"debug","message":"Executing query [m8jbyw6um97ez4l2vws]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594829927\",\"TEST-OFICIO-1742594829927\",3212,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:09.943Z"}
{"level":"debug","message":"Executing query [m8jbyw7077elf0g9d8d]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.948Z"}
{"level":"debug","message":"Executing query [m8jbyw73ziu7s2jpter]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594829927\"]","timestamp":"2025-03-21T22:07:09.951Z"}
{"level":"debug","message":"Executing query [m8jbyw766kzt74pw609]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",19]","timestamp":"2025-03-21T22:07:09.954Z"}
{"level":"debug","message":"Executing query [m8jbyw7979vodgi6lax]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.958Z"}
{"level":"debug","message":"Executing query [m8jbyw7ci25rohrkhwq]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.960Z"}
{"level":"debug","message":"Executing query [m8jbyw7fqnnaydndq]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.963Z"}
{"level":"debug","message":"Executing query [m8jbyw7h5yz6gfw2eci]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.965Z"}
{"level":"debug","message":"Executing query [m8jbyw7ml2eh6gv6tkj]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.970Z"}
{"level":"debug","message":"Executing query [m8jbyw7olp29w4333o]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594829972\",\"TEST-SP-OFICIO-1742594829972\",9901,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:07:09.972Z"}
{"level":"debug","message":"Executing query [m8jbyw7rkj54tf9mjxm]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594829972\"]","timestamp":"2025-03-21T22:07:09.975Z"}
{"level":"debug","message":"Executing query [m8jbyw7tsvvl67fdhhq]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594829972\"]","timestamp":"2025-03-21T22:07:09.977Z"}
{"level":"debug","message":"Executing query [m8jbyw7xnv0eu157hmb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:09.981Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:09.983Z"}
{"level":"debug","message":"Executing query [m8jbywb9tjvrgyg905]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:10.101Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:10.117Z"}
{"level":"debug","message":"Executing query [m8jbywbqai0ru0m57fg]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594830100\"]","timestamp":"2025-03-21T22:07:10.118Z"}
{"level":"debug","message":"Executing query [m8jbywbtenaor3npx1l]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594830100\"]","timestamp":"2025-03-21T22:07:10.121Z"}
{"level":"debug","message":"Executing query [m8jbywbvtkktpnofs1]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594830100\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:10.123Z"}
{"level":"debug","message":"Executing query [m8jbywc2zzr8aqkmf9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1008]","timestamp":"2025-03-21T22:07:10.130Z"}
{"level":"debug","message":"Executing query [m8jbywc47qdkqe0d4xn]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594830100\"]","timestamp":"2025-03-21T22:07:10.132Z"}
{"level":"debug","message":"Executing query [m8jbywc73evjrwwi1cu]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1008]","timestamp":"2025-03-21T22:07:10.135Z"}
{"level":"debug","message":"Executing query [m8jbywca2d4d9tvpwdh]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1008]","timestamp":"2025-03-21T22:07:10.138Z"}
{"level":"debug","message":"Executing query [m8jbywcdrsaoq0c1lsk]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1008]","timestamp":"2025-03-21T22:07:10.141Z"}
{"level":"debug","message":"Executing query [m8jbywcg73enbdox293]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1008]","timestamp":"2025-03-21T22:07:10.144Z"}
{"level":"debug","message":"Executing query [m8jbywci10g5nzorlrt]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1008]","timestamp":"2025-03-21T22:07:10.146Z"}
{"level":"debug","message":"Executing query [m8jbywckxruzm1t7tje]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1008]","timestamp":"2025-03-21T22:07:10.149Z"}
{"level":"debug","message":"Executing query [m8jbywconemwd9u4r49]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1008]","timestamp":"2025-03-21T22:07:10.152Z"}
{"level":"debug","message":"Executing query [m8jbywcqpwpk5ksgd2b]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:07:10.154Z"}
{"level":"debug","message":"Executing query [m8jbywcseu2jcxfc6oc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:10.156Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:10.158Z"}
{"level":"debug","message":"Executing query [m8jbywgbyhp43ascg4i]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:10.283Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:10.294Z"}
{"level":"debug","message":"Executing query [m8jbywgo9usb3b690q]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594830282\"]","timestamp":"2025-03-21T22:07:10.296Z"}
{"level":"debug","message":"Executing query [m8jbywgq5dzsa6smmol]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594830282\",true]","timestamp":"2025-03-21T22:07:10.298Z"}
{"level":"debug","message":"Executing query [m8jbywgve4jay0vyabw]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.303Z"}
{"level":"debug","message":"Executing query [m8jbywgxa10zbt5ix55]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594830282\"]","timestamp":"2025-03-21T22:07:10.305Z"}
{"level":"debug","message":"Executing query [m8jbywh038zunnhq9a9]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",10]","timestamp":"2025-03-21T22:07:10.308Z"}
{"level":"debug","message":"Executing query [m8jbywh3hz3xj9i0fe]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.311Z"}
{"level":"debug","message":"Executing query [m8jbywh51clsq2es0k4]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.313Z"}
{"level":"debug","message":"Executing query [m8jbywhamv8wqapxlzr]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.318Z"}
{"level":"debug","message":"Executing query [m8jbywhcxozy4lxviu]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.320Z"}
{"level":"debug","message":"Executing query [m8jbywhf3nt0j65zqp8]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.323Z"}
{"level":"debug","message":"Executing query [m8jbywhjckiwej9mhzv]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.327Z"}
{"level":"debug","message":"Executing query [m8jbywhmemmb0bcgnf8]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:07:10.330Z"}
{"level":"debug","message":"Executing query [m8jbywho1mzpvjw88z7]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:10.332Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:10.334Z"}
{"level":"debug","message":"Executing query [m8jbywl6f2oq2al5f0f]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:10.458Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:10.472Z"}
{"level":"debug","message":"Executing query [m8jbywlm3gl6kixlijq]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:10.474Z"}
{"level":"debug","message":"Executing query [m8jbywlovzwraik5jq]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594830458\"]","timestamp":"2025-03-21T22:07:10.476Z"}
{"level":"debug","message":"Executing query [m8jbywlpsjju8mknjx]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594830458\",\"TEST-OFI-QUIMICA-1742594830458\",2067,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:10.478Z"}
{"level":"debug","message":"Executing query [m8jbywlua0cy8fnkmj]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.482Z"}
{"level":"debug","message":"Executing query [m8jbywlxm7ccu2mo4rg]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594830458\"]","timestamp":"2025-03-21T22:07:10.485Z"}
{"level":"debug","message":"Executing query [m8jbywlypp2fokd6tra]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",10]","timestamp":"2025-03-21T22:07:10.486Z"}
{"level":"debug","message":"Executing query [m8jbywm3w4a3xhs3cml]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.491Z"}
{"level":"debug","message":"Executing query [m8jbywm5p0ren91j0g]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.493Z"}
{"level":"debug","message":"Executing query [m8jbywm9330fiphoz8i]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.497Z"}
{"level":"debug","message":"Executing query [m8jbywmbreta4t2k85j]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.499Z"}
{"level":"debug","message":"Executing query [m8jbywmf0d11t8b6rgo]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.503Z"}
{"level":"debug","message":"Executing query [m8jbywmh1nylltc6krb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:10.505Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:10.506Z"}
{"level":"debug","message":"Executing query [m8jbywq5y66ktl2p66]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:10.637Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:10.648Z"}
{"level":"debug","message":"Executing query [m8jbywqh28fet5qah5r]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:07:10.649Z"}
{"level":"debug","message":"Executing query [m8jbywqjce2br5hls7s]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:07:10.651Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:07:10.652Z"}
{"level":"debug","message":"Executing query [m8jbywqkl4s7erlgs6]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:10.652Z"}
{"level":"debug","message":"Executing query [m8jbywqlr35o0ys7xr]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:10.653Z"}
{"level":"debug","message":"Executing query [m8jbywqnie5lggehpn]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:10.655Z"}
{"level":"debug","message":"Executing query [m8jbywqocvhqpy7jibs]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:07:10.656Z"}
{"level":"debug","message":"Executing query [m8jbywqvpsjnrnptvxe]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[11]","timestamp":"2025-03-21T22:07:10.663Z"}
{"level":"debug","message":"Executing query [m8jbywqy6ri4ib5advu]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:10.666Z"}
{"level":"debug","message":"Executing query [m8jbywr0rp7a3aou4wk]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",11]","timestamp":"2025-03-21T22:07:10.668Z"}
{"level":"debug","message":"Executing query [m8jbywr3vj8n11d7q9]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[11]","timestamp":"2025-03-21T22:07:10.671Z"}
{"level":"debug","message":"Executing query [m8jbywr50li8nuutsu9]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[11]","timestamp":"2025-03-21T22:07:10.673Z"}
{"level":"debug","message":"Executing query [m8jbywr9ukjxk3uakj]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[11]","timestamp":"2025-03-21T22:07:10.677Z"}
{"level":"debug","message":"Executing query [m8jbywrbr1807juoma]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:10.679Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:10.680Z"}
{"level":"debug","message":"Executing query [m8jbywun2g65zd2bfq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:10.799Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:10.813Z"}
{"level":"debug","message":"Executing query [m8jbywv3mk17btcpbs]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:10.815Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:07:10.816Z"}
{"level":"debug","message":"Executing query [m8jbywv5f46c0agmcxj]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:07:10.817Z"}
{"level":"debug","message":"Executing query [m8jbywv6vq75m8f6rue]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:07:10.818Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:07:10.818Z"}
{"level":"debug","message":"Executing query [m8jbywv7kpal8k7yhyg]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:10.819Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:07:10.820Z"}
{"level":"debug","message":"Executing query [m8jbywvdy8ai6drz8p9]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:07:10.825Z"}
{"level":"debug","message":"Executing query [m8jbywvfdttnvv0k7re]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:07:10.827Z"}
{"level":"debug","message":"Executing query [m8jbywvigdpkz4qvo8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:10.830Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:10.943Z"}
{"level":"debug","message":"Executing query [m8jbywyrojo8amie2a]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:07:10.947Z"}
{"level":"debug","message":"Executing query [m8jbywytvqztn2yk3di]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:07:10.949Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbywytvqztn2yk3di]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:07:10.950Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:10.952Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:07:11.034Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:07:11.034Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:07:11.035Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:07:11.036Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:07:11.037Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:07:11.037Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:07:36.660Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:36.734Z"}
{"level":"error","message":"Error al procesar login válido:","timestamp":"2025-03-21T22:07:36.767Z"}
{"level":"info","message":"Omitiendo prueba de refresh token, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:07:36.768Z"}
{"level":"info","message":"Omitiendo prueba de verificación, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:07:36.769Z"}
{"level":"info","message":"Omitiendo prueba de logout, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:07:36.770Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:36.772Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:37.523Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:37.534Z"}
{"level":"debug","message":"Executing query [m8jbzhkw3zmm7d58rsi]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:37.664Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:37.678Z"}
{"level":"debug","message":"Executing query [m8jbzhlc6xodpozr14m]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:37.680Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:07:37.684Z"}
{"level":"debug","message":"Executing query [m8jbzhlhk06u8zoyal]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:37.685Z"}
{"level":"debug","message":"Executing query [m8jbzhlicet43dfsprn]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:37.686Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:07:37.687Z"}
{"level":"debug","message":"Executing query [m8jbzhlo8xb71v51uao]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594857663\"]","timestamp":"2025-03-21T22:07:37.692Z"}
{"level":"debug","message":"Executing query [m8jbzhlsd97olnb5lot]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:07:37.696Z"}
{"level":"debug","message":"Executing query [m8jbzhlwi3fgsf31hd9]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:07:37.700Z"}
{"level":"debug","message":"Executing query [m8jbzhly6obivdfsayh]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:07:37.702Z"}
{"level":"debug","message":"Executing query [m8jbzhm15ra0hmyzcf3]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:37.705Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:37.706Z"}
{"level":"debug","message":"Executing query [m8jbzhpiz375d70dvi9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:37.830Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:37.840Z"}
{"level":"debug","message":"Executing query [m8jbzhpuznmow9myfg8]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:37.842Z"}
{"level":"debug","message":"Executing query [m8jbzhpwzzc51073keo]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:37.844Z"}
{"level":"debug","message":"Executing query [m8jbzhpx2nnuugbey3]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:37.845Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:07:37.846Z"}
{"level":"debug","message":"Executing query [m8jbzhq2rxai3ih7icq]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:07:37.850Z"}
{"level":"debug","message":"Executing query [m8jbzhq6l0ra0wir46]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:37.854Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:37.856Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:38.587Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:07:38.589Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:07:39.317Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:39.325Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:07:39.327Z"}
{"level":"debug","message":"Executing query [m8jbziykqld3ypm6r8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:39.452Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:39.464Z"}
{"level":"debug","message":"Executing query [m8jbziyxl1oejec1stc]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:39.465Z"}
{"level":"debug","message":"Executing query [m8jbziyzou9ui4yvio]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594859451\"]","timestamp":"2025-03-21T22:07:39.467Z"}
{"level":"debug","message":"Executing query [m8jbziz0f4wwdlaned7]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594859451\",\"TEST-OFI-FORENSE-1742594859451\",1942,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594859451\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:39.468Z"}
{"level":"debug","message":"Executing query [m8jbziz6uehwgkgz9na]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.474Z"}
{"level":"debug","message":"Executing query [m8jbziz9twkeq8vlzfk]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594859451\"]","timestamp":"2025-03-21T22:07:39.477Z"}
{"level":"debug","message":"Executing query [m8jbzizbt754fqge5fd]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",21]","timestamp":"2025-03-21T22:07:39.479Z"}
{"level":"debug","message":"Executing query [m8jbzizeybb9vnaqn7l]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.483Z"}
{"level":"debug","message":"Executing query [m8jbzizgac927x8265f]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.484Z"}
{"level":"debug","message":"Executing query [m8jbzizjxu7icm3ez6]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.487Z"}
{"level":"debug","message":"Executing query [m8jbzizmtpe1n2j8bk]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.490Z"}
{"level":"debug","message":"Executing query [m8jbzizoxses86vcymn]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.493Z"}
{"level":"debug","message":"Executing query [m8jbzizre9vx4obv0pt]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594859495\",\"TEST-SP-OFI-FORENSE-1742594859495\",2508,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:07:39.495Z"}
{"level":"debug","message":"Executing query [m8jbzizvuivan94mkca]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594859495\"]","timestamp":"2025-03-21T22:07:39.499Z"}
{"level":"debug","message":"Executing query [m8jbzizxjx8gn31mra]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594859495\"]","timestamp":"2025-03-21T22:07:39.501Z"}
{"level":"debug","message":"Executing query [m8jbzj00oei5bugy2ma]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:39.505Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:39.506Z"}
{"level":"debug","message":"Executing query [m8jbzj307t4x3hpq2vo]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:39.613Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:39.623Z"}
{"level":"debug","message":"Executing query [m8jbzj3cj8ukceql2o]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:39.624Z"}
{"level":"debug","message":"Executing query [m8jbzj3ek65z3f5fg5i]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594859611\"]","timestamp":"2025-03-21T22:07:39.626Z"}
{"level":"debug","message":"Executing query [m8jbzj3gj6cm7tpezqb]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594859611\",\"TEST-OFICIO-1742594859611\",3103,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:39.628Z"}
{"level":"debug","message":"Executing query [m8jbzj3k9tylnat1mad]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.632Z"}
{"level":"debug","message":"Executing query [m8jbzj3ntpvqat08kb]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594859611\"]","timestamp":"2025-03-21T22:07:39.635Z"}
{"level":"debug","message":"Executing query [m8jbzj3p2izjwkn8hcx]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",21]","timestamp":"2025-03-21T22:07:39.637Z"}
{"level":"debug","message":"Executing query [m8jbzj3tt9xodqx22xp]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.641Z"}
{"level":"debug","message":"Executing query [m8jbzj3v0znenzhx7ekn]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.643Z"}
{"level":"debug","message":"Executing query [m8jbzj3yqma6mromjf9]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.646Z"}
{"level":"debug","message":"Executing query [m8jbzj40qpry9fifab9]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.648Z"}
{"level":"debug","message":"Executing query [m8jbzj43rcbzs2uo29n]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.651Z"}
{"level":"debug","message":"Executing query [m8jbzj48btl1vnaoxvi]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594859656\",\"TEST-SP-OFICIO-1742594859656\",3931,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:07:39.656Z"}
{"level":"debug","message":"Executing query [m8jbzj4b4xbqtgdxdpu]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594859656\"]","timestamp":"2025-03-21T22:07:39.659Z"}
{"level":"debug","message":"Executing query [m8jbzj4dds6gw9rzaje]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594859656\"]","timestamp":"2025-03-21T22:07:39.661Z"}
{"level":"debug","message":"Executing query [m8jbzj4ga2bnmgu4xf]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:39.664Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:39.665Z"}
{"level":"debug","message":"Executing query [m8jbzj7ih8j10v4iuil]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:39.774Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:39.783Z"}
{"level":"debug","message":"Executing query [m8jbzj7tbz314db2qc8]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594859773\"]","timestamp":"2025-03-21T22:07:39.785Z"}
{"level":"debug","message":"Executing query [m8jbzj7v377hnbiudm7]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594859773\",true]","timestamp":"2025-03-21T22:07:39.787Z"}
{"level":"debug","message":"Executing query [m8jbzj82dj0vq496flh]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-21T22:07:39.794Z"}
{"level":"debug","message":"Executing query [m8jbzj84exb60v83bd8]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594859773\"]","timestamp":"2025-03-21T22:07:39.796Z"}
{"level":"debug","message":"Executing query [m8jbzj85z36u13uy9da]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",11]","timestamp":"2025-03-21T22:07:39.797Z"}
{"level":"debug","message":"Executing query [m8jbzj89q2vlf15lqb]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-21T22:07:39.801Z"}
{"level":"debug","message":"Executing query [m8jbzj8aea5i6iukg5o]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-21T22:07:39.802Z"}
{"level":"debug","message":"Executing query [m8jbzj8dam2fear63bs]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-21T22:07:39.805Z"}
{"level":"debug","message":"Executing query [m8jbzj8gd3d4apcag3b]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-21T22:07:39.808Z"}
{"level":"debug","message":"Executing query [m8jbzj8hywsmoghhnm9]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-21T22:07:39.809Z"}
{"level":"debug","message":"Executing query [m8jbzj8khnlt93dmfce]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-21T22:07:39.812Z"}
{"level":"debug","message":"Executing query [m8jbzj8mucv6c59657d]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:07:39.814Z"}
{"level":"debug","message":"Executing query [m8jbzj8okhx4a9if9bt]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:39.816Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:39.817Z"}
{"level":"debug","message":"Executing query [m8jbzjbos24d3l1heg8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:39.924Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:39.937Z"}
{"level":"debug","message":"Executing query [m8jbzjc3zo9wn4mfbj]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:07:39.939Z"}
{"level":"debug","message":"Executing query [m8jbzjc5atcq7zmrgve]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:07:39.941Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:07:39.942Z"}
{"level":"debug","message":"Executing query [m8jbzjc7vi7bk6rvjg]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:39.943Z"}
{"level":"debug","message":"Executing query [m8jbzjc7kyh835u9kil]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:39.943Z"}
{"level":"debug","message":"Executing query [m8jbzjc91jj79w16cyb]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:39.945Z"}
{"level":"debug","message":"Executing query [m8jbzjcarzfmv4xi0t]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:07:39.946Z"}
{"level":"debug","message":"Executing query [m8jbzjcesu50vn3l1c]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[12]","timestamp":"2025-03-21T22:07:39.950Z"}
{"level":"debug","message":"Executing query [m8jbzjchc3utdjy2y6e]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:39.954Z"}
{"level":"debug","message":"Executing query [m8jbzjcjzhs71wgdwc]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",12]","timestamp":"2025-03-21T22:07:39.955Z"}
{"level":"debug","message":"Executing query [m8jbzjcnmm5xw9v519]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[12]","timestamp":"2025-03-21T22:07:39.959Z"}
{"level":"debug","message":"Executing query [m8jbzjcplpdqq1d1ha]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[12]","timestamp":"2025-03-21T22:07:39.961Z"}
{"level":"debug","message":"Executing query [m8jbzjctcq54r7fjyqq]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[12]","timestamp":"2025-03-21T22:07:39.965Z"}
{"level":"debug","message":"Executing query [m8jbzjcv6gmwmxe9tme]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:39.967Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:39.969Z"}
{"level":"debug","message":"Executing query [m8jbzjfs6g6m3t5nkc7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:40.072Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:40.081Z"}
{"level":"debug","message":"Executing query [m8jbzjg3i0ke4ki7gn]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594860071\"]","timestamp":"2025-03-21T22:07:40.083Z"}
{"level":"debug","message":"Executing query [m8jbzjg5teyxmhl7uc]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594860071\"]","timestamp":"2025-03-21T22:07:40.085Z"}
{"level":"debug","message":"Executing query [m8jbzjg6smotwqfq9qj]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594860071\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:40.086Z"}
{"level":"debug","message":"Executing query [m8jbzjgd1w6v3eubc49]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1009]","timestamp":"2025-03-21T22:07:40.093Z"}
{"level":"debug","message":"Executing query [m8jbzjgfl4foevokgk]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594860071\"]","timestamp":"2025-03-21T22:07:40.095Z"}
{"level":"debug","message":"Executing query [m8jbzjghltl4wy8ft9f]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1009]","timestamp":"2025-03-21T22:07:40.097Z"}
{"level":"debug","message":"Executing query [m8jbzjgkg90itxamha]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1009]","timestamp":"2025-03-21T22:07:40.100Z"}
{"level":"debug","message":"Executing query [m8jbzjgm40aspul76ed]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1009]","timestamp":"2025-03-21T22:07:40.102Z"}
{"level":"debug","message":"Executing query [m8jbzjgo9waunc6a8ui]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1009]","timestamp":"2025-03-21T22:07:40.104Z"}
{"level":"debug","message":"Executing query [m8jbzjgq5ghkb4eaky5]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1009]","timestamp":"2025-03-21T22:07:40.106Z"}
{"level":"debug","message":"Executing query [m8jbzjgsakjow1ve2nh]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1009]","timestamp":"2025-03-21T22:07:40.108Z"}
{"level":"debug","message":"Executing query [m8jbzjgvl8z1za0aftb]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1009]","timestamp":"2025-03-21T22:07:40.111Z"}
{"level":"debug","message":"Executing query [m8jbzjgxndn75fxl5o8]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:07:40.113Z"}
{"level":"debug","message":"Executing query [m8jbzjgy7pl4ynyyizp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:40.114Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:40.115Z"}
{"level":"debug","message":"Executing query [m8jbzjjyyqnofxlcve]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:40.222Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:40.236Z"}
{"level":"debug","message":"Executing query [m8jbzjke8kubztg052a]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:40.238Z"}
{"level":"debug","message":"Executing query [m8jbzjkfgktfqgyd1jw]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594860222\"]","timestamp":"2025-03-21T22:07:40.240Z"}
{"level":"debug","message":"Executing query [m8jbzjkgtibqcnoszx]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594860222\",\"TEST-OFI-QUIMICA-1742594860222\",437,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:40.240Z"}
{"level":"debug","message":"Executing query [m8jbzjkl6irc9gh2umf]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-21T22:07:40.245Z"}
{"level":"debug","message":"Executing query [m8jbzjknzwrsvruwu5]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594860222\"]","timestamp":"2025-03-21T22:07:40.247Z"}
{"level":"debug","message":"Executing query [m8jbzjkpmlxz1xd0y7]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",11]","timestamp":"2025-03-21T22:07:40.249Z"}
{"level":"debug","message":"Executing query [m8jbzjksq0gjmox6td9]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-21T22:07:40.252Z"}
{"level":"debug","message":"Executing query [m8jbzjkudcrazrqynza]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-21T22:07:40.254Z"}
{"level":"debug","message":"Executing query [m8jbzjkx2mquomf4pb7]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-21T22:07:40.257Z"}
{"level":"debug","message":"Executing query [m8jbzjl0g1zfpdj4dj4]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-21T22:07:40.260Z"}
{"level":"debug","message":"Executing query [m8jbzjl2eli5r0m80f6]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-21T22:07:40.262Z"}
{"level":"debug","message":"Executing query [m8jbzjl4qr5z7ysn0sa]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:40.264Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:40.266Z"}
{"level":"debug","message":"Executing query [m8jbzjo40d5gdp4dsst8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:40.372Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:40.383Z"}
{"level":"debug","message":"Executing query [m8jbzjoh363bg881njn]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:40.385Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:07:40.386Z"}
{"level":"debug","message":"Executing query [m8jbzjoicu6snmrr2wr]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:07:40.386Z"}
{"level":"debug","message":"Executing query [m8jbzjoj052rhb4qeyaf]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:07:40.387Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:07:40.388Z"}
{"level":"debug","message":"Executing query [m8jbzjolvvmi9e2qik]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:40.389Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:07:40.391Z"}
{"level":"debug","message":"Executing query [m8jbzjos8j7e0wd4k44]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:07:40.396Z"}
{"level":"debug","message":"Executing query [m8jbzjowoie5b1e93v]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:07:40.400Z"}
{"level":"debug","message":"Executing query [m8jbzjoyft3v2289t4w]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:40.402Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:40.528Z"}
{"level":"debug","message":"Executing query [m8jbzjskym2v5eipp9a]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:07:40.532Z"}
{"level":"debug","message":"Executing query [m8jbzjslxaunuo9gvwb]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:07:40.534Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbzjslxaunuo9gvwb]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:07:40.535Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:40.538Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:07:40.623Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:07:40.624Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:07:40.624Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:07:40.625Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:07:40.626Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:07:40.626Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:09:00.083Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:00.175Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:09:00.192Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:00.233Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:02.014Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:02.026Z"}
{"level":"debug","message":"Executing query [m8jc1as16s90fqzwpad]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:02.161Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:02.177Z"}
{"level":"debug","message":"Executing query [m8jc1askm5ailiyolae]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:02.180Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:09:02.183Z"}
{"level":"debug","message":"Executing query [m8jc1aso6rewj0d49bo]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:02.184Z"}
{"level":"debug","message":"Executing query [m8jc1asqodw91mqgf6o]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:02.186Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:09:02.187Z"}
{"level":"debug","message":"Executing query [m8jc1asv3f3qncgjjzy]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594942160\"]","timestamp":"2025-03-21T22:09:02.191Z"}
{"level":"debug","message":"Executing query [m8jc1aszjo7ro21pub]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:09:02.195Z"}
{"level":"debug","message":"Executing query [m8jc1at3az8wpu0yx2r]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:09:02.199Z"}
{"level":"debug","message":"Executing query [m8jc1at5omdyqphguj]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:09:02.201Z"}
{"level":"debug","message":"Executing query [m8jc1at7why2jr2o4ir]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:02.203Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:02.205Z"}
{"level":"debug","message":"Executing query [m8jc1awnmabgw4vw2zl]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:02.327Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:02.341Z"}
{"level":"debug","message":"Executing query [m8jc1ax2n9y15xbre5]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:02.342Z"}
{"level":"debug","message":"Executing query [m8jc1ax4sr134ju9r4o]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:02.344Z"}
{"level":"debug","message":"Executing query [m8jc1ax5xvdmbi742u]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:02.345Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:09:02.346Z"}
{"level":"debug","message":"Executing query [m8jc1axabtrg8bcouc]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:09:02.350Z"}
{"level":"debug","message":"Executing query [m8jc1axew3urlgebejd]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:02.354Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:02.355Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:03.068Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:09:03.070Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:09:03.795Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:03.807Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:09:03.810Z"}
{"level":"debug","message":"Executing query [m8jc1c63cnmlp2hsbj]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:03.963Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:03.973Z"}
{"level":"debug","message":"Executing query [m8jc1c6g1zv35flwas]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:03.976Z"}
{"level":"debug","message":"Executing query [m8jc1c6hdjmvfj2pzcd]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594943962\"]","timestamp":"2025-03-21T22:09:03.977Z"}
{"level":"debug","message":"Executing query [m8jc1c6i3f3zuhxs9pl]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594943962\",\"TEST-OFI-FORENSE-1742594943962\",8269,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594943962\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:09:03.978Z"}
{"level":"debug","message":"Executing query [m8jc1c6onjhy6qri6ki]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-21T22:09:03.984Z"}
{"level":"debug","message":"Executing query [m8jc1c6re6b1aunei3]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594943962\"]","timestamp":"2025-03-21T22:09:03.987Z"}
{"level":"debug","message":"Executing query [m8jc1c6ucju8zlfuazg]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",23]","timestamp":"2025-03-21T22:09:03.990Z"}
{"level":"debug","message":"Executing query [m8jc1c6y9269ociz9w]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-21T22:09:03.994Z"}
{"level":"debug","message":"Executing query [m8jc1c71jdwi22oh16]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-21T22:09:03.997Z"}
{"level":"debug","message":"Executing query [m8jc1c75xotv99jyemi]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.001Z"}
{"level":"debug","message":"Executing query [m8jc1c77i1btbk7vxk8]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.003Z"}
{"level":"debug","message":"Executing query [m8jc1c7an1q8sq7423m]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.006Z"}
{"level":"debug","message":"Executing query [m8jc1c7ccs1neoo77mw]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594944008\",\"TEST-SP-OFI-FORENSE-1742594944008\",2638,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:09:04.008Z"}
{"level":"debug","message":"Executing query [m8jc1c7gviklmq2jabm]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594944008\"]","timestamp":"2025-03-21T22:09:04.012Z"}
{"level":"debug","message":"Executing query [m8jc1c7h4edznf0cwi]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594944008\"]","timestamp":"2025-03-21T22:09:04.013Z"}
{"level":"debug","message":"Executing query [m8jc1c7lrhij8ym43x9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:04.017Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:04.018Z"}
{"level":"debug","message":"Executing query [m8jc1caphnwqiid68q]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:04.129Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:04.143Z"}
{"level":"debug","message":"Executing query [m8jc1cb4bah2j0d2m7n]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:04.144Z"}
{"level":"debug","message":"Executing query [m8jc1cb61eifgo105em]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594944128\"]","timestamp":"2025-03-21T22:09:04.146Z"}
{"level":"debug","message":"Executing query [m8jc1cb60anf1fi8ziq6]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594944128\",\"TEST-OFICIO-1742594944128\",9389,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:09:04.146Z"}
{"level":"debug","message":"Executing query [m8jc1cbbzl4n1zt6aco]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.151Z"}
{"level":"debug","message":"Executing query [m8jc1cbe4je1ltz5ifv]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594944128\"]","timestamp":"2025-03-21T22:09:04.154Z"}
{"level":"debug","message":"Executing query [m8jc1cbh6r8yjrprsqw]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",23]","timestamp":"2025-03-21T22:09:04.157Z"}
{"level":"debug","message":"Executing query [m8jc1cbkz42mbarn3x]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.160Z"}
{"level":"debug","message":"Executing query [m8jc1cbms7a49kv8hlp]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.163Z"}
{"level":"debug","message":"Executing query [m8jc1cbposayeof8cba]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.165Z"}
{"level":"debug","message":"Executing query [m8jc1cbri09v70ns7jr]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.167Z"}
{"level":"debug","message":"Executing query [m8jc1cbu8eq0pguu18]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.170Z"}
{"level":"debug","message":"Executing query [m8jc1cbvebuf9ruus6]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594944171\",\"TEST-SP-OFICIO-1742594944171\",3936,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:09:04.171Z"}
{"level":"debug","message":"Executing query [m8jc1cbzfkjn1w4fe2b]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594944171\"]","timestamp":"2025-03-21T22:09:04.175Z"}
{"level":"debug","message":"Executing query [m8jc1cc19q8geqsg00d]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594944171\"]","timestamp":"2025-03-21T22:09:04.177Z"}
{"level":"debug","message":"Executing query [m8jc1cc4i38qvgt1krf]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:04.180Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:04.181Z"}
{"level":"debug","message":"Executing query [m8jc1cfaj9b754bs1h]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:04.295Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:04.305Z"}
{"level":"debug","message":"Executing query [m8jc1cfm528ipyjjd0s]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:09:04.306Z"}
{"level":"debug","message":"Executing query [m8jc1cfny7oonpylf1a]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:09:04.307Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:09:04.309Z"}
{"level":"debug","message":"Executing query [m8jc1cfq1iknjj8l397]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:09:04.310Z"}
{"level":"debug","message":"Executing query [m8jc1cfrh8z172pmtws]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:09:04.311Z"}
{"level":"debug","message":"Executing query [m8jc1cfsr54gttxn44m]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:09:04.312Z"}
{"level":"debug","message":"Executing query [m8jc1cfs15r3dd5m8nj]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:09:04.312Z"}
{"level":"debug","message":"Executing query [m8jc1cfy95v930qy138]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[13]","timestamp":"2025-03-21T22:09:04.318Z"}
{"level":"debug","message":"Executing query [m8jc1cg0sov7h3ckqi]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:09:04.320Z"}
{"level":"debug","message":"Executing query [m8jc1cg3iqluhy6c69]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",13]","timestamp":"2025-03-21T22:09:04.323Z"}
{"level":"debug","message":"Executing query [m8jc1cg6d9mte01orz]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[13]","timestamp":"2025-03-21T22:09:04.326Z"}
{"level":"debug","message":"Executing query [m8jc1cg77r80by9chqc]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[13]","timestamp":"2025-03-21T22:09:04.327Z"}
{"level":"debug","message":"Executing query [m8jc1cgbpgqqsuixu8]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[13]","timestamp":"2025-03-21T22:09:04.331Z"}
{"level":"debug","message":"Executing query [m8jc1cgcsygonsg5nys]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:04.332Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:04.333Z"}
{"level":"debug","message":"Executing query [m8jc1cjaoi9jdjn5h0h]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:04.439Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:04.454Z"}
{"level":"debug","message":"Executing query [m8jc1cjrvf2s0j35s58]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:04.455Z"}
{"level":"debug","message":"Executing query [m8jc1cjtxpktg1n1a6]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594944438\"]","timestamp":"2025-03-21T22:09:04.457Z"}
{"level":"debug","message":"Executing query [m8jc1cjuk3ofyy08v4g]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594944438\",\"TEST-OFI-QUIMICA-1742594944438\",1184,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:09:04.458Z"}
{"level":"debug","message":"Executing query [m8jc1cjzd3qazm6tda5]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.463Z"}
{"level":"debug","message":"Executing query [m8jc1ck1rqn2k4yj2n]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594944438\"]","timestamp":"2025-03-21T22:09:04.465Z"}
{"level":"debug","message":"Executing query [m8jc1ck302azhkwbnrxl]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",12]","timestamp":"2025-03-21T22:09:04.467Z"}
{"level":"debug","message":"Executing query [m8jc1ck72s7286vzzuc]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.471Z"}
{"level":"debug","message":"Executing query [m8jc1ck9jkyr6r04q5s]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.473Z"}
{"level":"debug","message":"Executing query [m8jc1ckb9n3xcn2ndht]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.475Z"}
{"level":"debug","message":"Executing query [m8jc1ckdsudzn710fu9]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.477Z"}
{"level":"debug","message":"Executing query [m8jc1ckg2x6o2pdtlaj]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.480Z"}
{"level":"debug","message":"Executing query [m8jc1ckjqu6l6e6pfbq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:04.483Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:04.484Z"}
{"level":"debug","message":"Executing query [m8jc1cnld1s25s1xlas]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:04.593Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:04.603Z"}
{"level":"debug","message":"Executing query [m8jc1cnxra87ehwh4if]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594944592\"]","timestamp":"2025-03-21T22:09:04.605Z"}
{"level":"debug","message":"Executing query [m8jc1cnyoirzthnc6v]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594944592\",true]","timestamp":"2025-03-21T22:09:04.606Z"}
{"level":"debug","message":"Executing query [m8jc1co39po65nilmlc]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.611Z"}
{"level":"debug","message":"Executing query [m8jc1co6xnjhjpnuhn]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594944592\"]","timestamp":"2025-03-21T22:09:04.614Z"}
{"level":"debug","message":"Executing query [m8jc1co86gbjhu9ipkn]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",12]","timestamp":"2025-03-21T22:09:04.616Z"}
{"level":"debug","message":"Executing query [m8jc1cobtj2wy85s40d]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.619Z"}
{"level":"debug","message":"Executing query [m8jc1codcmjmr1sigxi]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.621Z"}
{"level":"debug","message":"Executing query [m8jc1coghwm88ym3wes]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.624Z"}
{"level":"debug","message":"Executing query [m8jc1coh0vg0l7w92o6r]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.625Z"}
{"level":"debug","message":"Executing query [m8jc1coj4qapzy382tb]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.627Z"}
{"level":"debug","message":"Executing query [m8jc1conc77saxabp9c]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.631Z"}
{"level":"debug","message":"Executing query [m8jc1cool92wprbmr6]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:09:04.632Z"}
{"level":"debug","message":"Executing query [m8jc1core5d4ok3kgon]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:04.635Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:04.636Z"}
{"level":"debug","message":"Executing query [m8jc1crrxahqhsfvcl]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:04.743Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:04.757Z"}
{"level":"debug","message":"Executing query [m8jc1cs7ffff3brguqb]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594944742\"]","timestamp":"2025-03-21T22:09:04.759Z"}
{"level":"debug","message":"Executing query [m8jc1cs93lhzt9gfql4]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594944742\"]","timestamp":"2025-03-21T22:09:04.761Z"}
{"level":"debug","message":"Executing query [m8jc1csaykjuapac2x]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594944742\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:09:04.762Z"}
{"level":"debug","message":"Executing query [m8jc1csgjtxjg7g53j9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1010]","timestamp":"2025-03-21T22:09:04.768Z"}
{"level":"debug","message":"Executing query [m8jc1csizty21zyak1l]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594944742\"]","timestamp":"2025-03-21T22:09:04.770Z"}
{"level":"debug","message":"Executing query [m8jc1csk0bqpga057i8q]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1010]","timestamp":"2025-03-21T22:09:04.772Z"}
{"level":"debug","message":"Executing query [m8jc1csn28yujk85x45]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1010]","timestamp":"2025-03-21T22:09:04.775Z"}
{"level":"debug","message":"Executing query [m8jc1csplhwkjzo0o6]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1010]","timestamp":"2025-03-21T22:09:04.777Z"}
{"level":"debug","message":"Executing query [m8jc1cssxfwzp0k2zf]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1010]","timestamp":"2025-03-21T22:09:04.780Z"}
{"level":"debug","message":"Executing query [m8jc1csuk72idgzt3af]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1010]","timestamp":"2025-03-21T22:09:04.782Z"}
{"level":"debug","message":"Executing query [m8jc1csvnyl3f7yz5hf]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1010]","timestamp":"2025-03-21T22:09:04.783Z"}
{"level":"debug","message":"Executing query [m8jc1csyarpneuwkksm]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1010]","timestamp":"2025-03-21T22:09:04.786Z"}
{"level":"debug","message":"Executing query [m8jc1ct0q4wdevvxbf]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:09:04.788Z"}
{"level":"debug","message":"Executing query [m8jc1ct2j3xtgxbki6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:04.790Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:04.791Z"}
{"level":"debug","message":"Executing query [m8jc1cw53340myvqa4e]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:04.902Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:04.913Z"}
{"level":"debug","message":"Executing query [m8jc1cwivp68pa7eghp]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:04.914Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:09:04.916Z"}
{"level":"debug","message":"Executing query [m8jc1cwkvu4hc9ihri]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:09:04.916Z"}
{"level":"debug","message":"Executing query [m8jc1cwljpqv61yvs4]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:09:04.917Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:09:04.917Z"}
{"level":"debug","message":"Executing query [m8jc1cwmfvn40c3izcw]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:04.918Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:09:04.920Z"}
{"level":"debug","message":"Executing query [m8jc1cwro65cdzxmi6e]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:09:04.923Z"}
{"level":"debug","message":"Executing query [m8jc1cwugvtde09sdvg]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:09:04.926Z"}
{"level":"debug","message":"Executing query [m8jc1cwwo5sfhnaox9i]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:04.928Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:05.050Z"}
{"level":"debug","message":"Executing query [m8jc1d0dz76wc0p1td]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:09:05.053Z"}
{"level":"debug","message":"Executing query [m8jc1d0fmn4x3i1mtcd]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:09:05.055Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jc1d0fmn4x3i1mtcd]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:09:05.056Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:05.058Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:09:05.139Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:09:05.140Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:09:05.142Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:09:05.142Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:09:05.143Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:09:05.143Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:09:55.917Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:56.037Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:09:56.054Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:56.096Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:15.058Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:15.073Z"}
{"level":"debug","message":"Executing query [m8jc2v564dxlc83r8cs]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:15.210Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:15.223Z"}
{"level":"debug","message":"Executing query [m8jc2v5lko047old5g]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:15.225Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:10:15.228Z"}
{"level":"debug","message":"Executing query [m8jc2v5oeotrkwitjqo]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:15.229Z"}
{"level":"debug","message":"Executing query [m8jc2v5qufbevsoj0x]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:15.230Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:10:15.232Z"}
{"level":"debug","message":"Executing query [m8jc2v5w8ogfmxrpur5]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742595015209\"]","timestamp":"2025-03-21T22:10:15.236Z"}
{"level":"debug","message":"Executing query [m8jc2v608rlfaanxhzu]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:10:15.240Z"}
{"level":"debug","message":"Executing query [m8jc2v64tlvhs6wbe3i]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:10:15.244Z"}
{"level":"debug","message":"Executing query [m8jc2v67lnby9h60q3]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:10:15.247Z"}
{"level":"debug","message":"Executing query [m8jc2v69lfhra10e6q9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:15.249Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:15.250Z"}
{"level":"debug","message":"Executing query [m8jc2v9ibeaygzc7mtl]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:15.366Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:15.379Z"}
{"level":"debug","message":"Executing query [m8jc2v9wxlhmritsm1]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:15.380Z"}
{"level":"debug","message":"Executing query [m8jc2v9y2dexsgblly]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:15.382Z"}
{"level":"debug","message":"Executing query [m8jc2v9zf3e4eplk5j4]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:15.383Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:10:15.384Z"}
{"level":"debug","message":"Executing query [m8jc2va9sx7di1awhak]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:10:15.393Z"}
{"level":"debug","message":"Executing query [m8jc2vad7ws4lhnxmi6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:15.397Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:15.398Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:10:15.611Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:15.653Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:10:15.668Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:15.698Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:10:16.324Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:16.332Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:10:16.334Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:16.995Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:10:16.997Z"}
{"level":"debug","message":"Executing query [m8jc2wmhhjxszhw9xc]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:17.129Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:17.138Z"}
{"level":"debug","message":"Executing query [m8jc2wmrngixbagczv]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:17.139Z"}
{"level":"debug","message":"Executing query [m8jc2wmtqw4lthowxho]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595017128\"]","timestamp":"2025-03-21T22:10:17.141Z"}
{"level":"debug","message":"Executing query [m8jc2wmvgmwtxmadewt]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742595017128\",\"TEST-OFI-FORENSE-1742595017128\",8805,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742595017128\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:17.143Z"}
{"level":"debug","message":"Executing query [m8jc2wn1tcjl783f31o]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.149Z"}
{"level":"debug","message":"Executing query [m8jc2wn53q81y1var2f]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595017128\"]","timestamp":"2025-03-21T22:10:17.153Z"}
{"level":"debug","message":"Executing query [m8jc2wnbvpttvl741fn]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",25]","timestamp":"2025-03-21T22:10:17.159Z"}
{"level":"debug","message":"Executing query [m8jc2wnfo61k12xwu3t]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.163Z"}
{"level":"debug","message":"Executing query [m8jc2wnhhtkbfmqunww]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.165Z"}
{"level":"debug","message":"Executing query [m8jc2wnjnk4g0km6ro]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.167Z"}
{"level":"debug","message":"Executing query [m8jc2wnm17xsznw7urm]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.170Z"}
{"level":"debug","message":"Executing query [m8jc2wno20aym5tkspa]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.172Z"}
{"level":"debug","message":"Executing query [m8jc2wnqc4tuqntobia]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742595017174\",\"TEST-SP-OFI-FORENSE-1742595017174\",2930,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:10:17.174Z"}
{"level":"debug","message":"Executing query [m8jc2wnu7gpdlsapmvw]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595017174\"]","timestamp":"2025-03-21T22:10:17.178Z"}
{"level":"debug","message":"Executing query [m8jc2wnvdfw865fdkxs]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595017174\"]","timestamp":"2025-03-21T22:10:17.179Z"}
{"level":"debug","message":"Executing query [m8jc2wnykutoi0mpp6e]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:17.182Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:17.184Z"}
{"level":"debug","message":"Executing query [m8jc2wqqcei2dhkv2x7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:17.282Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:17.291Z"}
{"level":"debug","message":"Executing query [m8jc2wr1qn9boiyc43m]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:17.293Z"}
{"level":"debug","message":"Executing query [m8jc2wr3j5fkncol8vi]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595017282\"]","timestamp":"2025-03-21T22:10:17.295Z"}
{"level":"debug","message":"Executing query [m8jc2wr52ko7oxrrr58]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742595017282\",\"TEST-OFICIO-1742595017282\",3899,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:17.297Z"}
{"level":"debug","message":"Executing query [m8jc2wr9uoqww30enl]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.301Z"}
{"level":"debug","message":"Executing query [m8jc2wrbl3iyw914nng]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595017282\"]","timestamp":"2025-03-21T22:10:17.303Z"}
{"level":"debug","message":"Executing query [m8jc2wrdru57653wh4k]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",25]","timestamp":"2025-03-21T22:10:17.305Z"}
{"level":"debug","message":"Executing query [m8jc2wrgcel16zj1c1l]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.308Z"}
{"level":"debug","message":"Executing query [m8jc2wriz1eap5pyw1e]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.310Z"}
{"level":"debug","message":"Executing query [m8jc2wrlpq1787gadv]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.313Z"}
{"level":"debug","message":"Executing query [m8jc2wrn1wgdwxe0qst]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.315Z"}
{"level":"debug","message":"Executing query [m8jc2wrq1wtd4s3q9ea]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.318Z"}
{"level":"debug","message":"Executing query [m8jc2wrr2c7pfpc9qi8]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742595017319\",\"TEST-SP-OFICIO-1742595017319\",6796,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:10:17.319Z"}
{"level":"debug","message":"Executing query [m8jc2wruhivmxakwdup]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595017319\"]","timestamp":"2025-03-21T22:10:17.322Z"}
{"level":"debug","message":"Executing query [m8jc2wrw5fgtdm258dl]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595017319\"]","timestamp":"2025-03-21T22:10:17.324Z"}
{"level":"debug","message":"Executing query [m8jc2wrzwfmnpcy4vhj]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:17.327Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:17.328Z"}
{"level":"debug","message":"Executing query [m8jc2wuvr2uwwtijtw]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:17.431Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:17.445Z"}
{"level":"debug","message":"Executing query [m8jc2wvbhzvt0uu9m6d]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595017430\"]","timestamp":"2025-03-21T22:10:17.447Z"}
{"level":"debug","message":"Executing query [m8jc2wvd1ssdfy64j8e]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595017430\"]","timestamp":"2025-03-21T22:10:17.449Z"}
{"level":"debug","message":"Executing query [m8jc2wvfsmejpqzhzwk]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742595017430\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:17.451Z"}
{"level":"debug","message":"Executing query [m8jc2wvi73n22gtsjoe]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1011]","timestamp":"2025-03-21T22:10:17.455Z"}
{"level":"debug","message":"Executing query [m8jc2wvlf5jhci0gvyg]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595017430\"]","timestamp":"2025-03-21T22:10:17.457Z"}
{"level":"debug","message":"Executing query [m8jc2wvnhm09dhv6u7r]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1011]","timestamp":"2025-03-21T22:10:17.459Z"}
{"level":"debug","message":"Executing query [m8jc2wvqma6bgwciwk8]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1011]","timestamp":"2025-03-21T22:10:17.463Z"}
{"level":"debug","message":"Executing query [m8jc2wvs0shnmiwpkqze]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1011]","timestamp":"2025-03-21T22:10:17.464Z"}
{"level":"debug","message":"Executing query [m8jc2wvvrygz26ocfle]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1011]","timestamp":"2025-03-21T22:10:17.467Z"}
{"level":"debug","message":"Executing query [m8jc2wvxnnb39jfoxzb]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1011]","timestamp":"2025-03-21T22:10:17.469Z"}
{"level":"debug","message":"Executing query [m8jc2wvz9z3n510yz1]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1011]","timestamp":"2025-03-21T22:10:17.471Z"}
{"level":"debug","message":"Executing query [m8jc2ww2tfwejacvuio]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1011]","timestamp":"2025-03-21T22:10:17.474Z"}
{"level":"debug","message":"Executing query [m8jc2ww3jxsp1mfyp6c]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:10:17.475Z"}
{"level":"debug","message":"Executing query [m8jc2ww6v6t8y4ikozg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:17.478Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:17.479Z"}
{"level":"debug","message":"Executing query [m8jc2wywkx9d1f2ei7h]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:17.576Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:17.587Z"}
{"level":"debug","message":"Executing query [m8jc2wz8zlnefvdzuod]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595017576\"]","timestamp":"2025-03-21T22:10:17.588Z"}
{"level":"debug","message":"Executing query [m8jc2wza0o3zq8lg5bac]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742595017576\",true]","timestamp":"2025-03-21T22:10:17.590Z"}
{"level":"debug","message":"Executing query [m8jc2wzfvf4h85vpka]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.595Z"}
{"level":"debug","message":"Executing query [m8jc2wzh2jmchcyn2g6]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595017576\"]","timestamp":"2025-03-21T22:10:17.597Z"}
{"level":"debug","message":"Executing query [m8jc2wzk2beuwdp0v7b]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",13]","timestamp":"2025-03-21T22:10:17.600Z"}
{"level":"debug","message":"Executing query [m8jc2wzn2ubcrw4x0ro]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.603Z"}
{"level":"debug","message":"Executing query [m8jc2wzpmjlxvpk87j]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.605Z"}
{"level":"debug","message":"Executing query [m8jc2wzs0n13lp08xa8a]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.608Z"}
{"level":"debug","message":"Executing query [m8jc2wzuifpwt4l7gqj]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.610Z"}
{"level":"debug","message":"Executing query [m8jc2wzwz9hky0w6ylj]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.612Z"}
{"level":"debug","message":"Executing query [m8jc2wzzget10bi2zww]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.615Z"}
{"level":"debug","message":"Executing query [m8jc2x01jhrnsqz95g8]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:10:17.617Z"}
{"level":"debug","message":"Executing query [m8jc2x0231zz68iz0dg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:17.618Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:17.619Z"}
{"level":"debug","message":"Executing query [m8jc2x2tamy34ks3gp9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:17.717Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:17.728Z"}
{"level":"debug","message":"Executing query [m8jc2x3529y74cn6tkd]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:17.729Z"}
{"level":"debug","message":"Executing query [m8jc2x37f57xegbwzog]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595017716\"]","timestamp":"2025-03-21T22:10:17.731Z"}
{"level":"debug","message":"Executing query [m8jc2x393qenqqhgant]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742595017716\",\"TEST-OFI-QUIMICA-1742595017716\",9483,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:17.733Z"}
{"level":"debug","message":"Executing query [m8jc2x3dnla8e2k7y4]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.737Z"}
{"level":"debug","message":"Executing query [m8jc2x3fxezwbgkcgtf]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595017716\"]","timestamp":"2025-03-21T22:10:17.739Z"}
{"level":"debug","message":"Executing query [m8jc2x3gct5ub2ppndi]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",13]","timestamp":"2025-03-21T22:10:17.740Z"}
{"level":"debug","message":"Executing query [m8jc2x3kx05ifg1krbg]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.744Z"}
{"level":"debug","message":"Executing query [m8jc2x3m02txvlbmrtgq]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.746Z"}
{"level":"debug","message":"Executing query [m8jc2x3q6t8znq4pnsl]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.750Z"}
{"level":"debug","message":"Executing query [m8jc2x3tv5dv599tjck]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.753Z"}
{"level":"debug","message":"Executing query [m8jc2x3xv5q5hwea6sh]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.757Z"}
{"level":"debug","message":"Executing query [m8jc2x400kg4hqa3dpvo]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:17.760Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:17.761Z"}
{"level":"debug","message":"Executing query [m8jc2x6raji6f33iexk]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:17.859Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:17.869Z"}
{"level":"debug","message":"Executing query [m8jc2x72gjddq09o6io]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:10:17.870Z"}
{"level":"debug","message":"Executing query [m8jc2x74bu965hpdyli]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:10:17.872Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:10:17.873Z"}
{"level":"debug","message":"Executing query [m8jc2x759qvid2p27qb]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:17.873Z"}
{"level":"debug","message":"Executing query [m8jc2x76i8a47u9pa5]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:17.874Z"}
{"level":"debug","message":"Executing query [m8jc2x787u2dako8df9]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:17.876Z"}
{"level":"debug","message":"Executing query [m8jc2x796gzbvh3lpvk]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:10:17.877Z"}
{"level":"debug","message":"Executing query [m8jc2x7evezpyin69wi]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[14]","timestamp":"2025-03-21T22:10:17.882Z"}
{"level":"debug","message":"Executing query [m8jc2x7haw0z6mmpwwo]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:17.885Z"}
{"level":"debug","message":"Executing query [m8jc2x7ijdrt6bnnxb9]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",14]","timestamp":"2025-03-21T22:10:17.886Z"}
{"level":"debug","message":"Executing query [m8jc2x7lclxjg3znujk]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[14]","timestamp":"2025-03-21T22:10:17.889Z"}
{"level":"debug","message":"Executing query [m8jc2x7osu2ied5qlj]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[14]","timestamp":"2025-03-21T22:10:17.892Z"}
{"level":"debug","message":"Executing query [m8jc2x7qjsdpixrledg]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[14]","timestamp":"2025-03-21T22:10:17.894Z"}
{"level":"debug","message":"Executing query [m8jc2x7s5shamfzthpq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:17.896Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:17.898Z"}
{"level":"debug","message":"Executing query [m8jc2xafeylkxt4dr07]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:17.991Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:18.003Z"}
{"level":"debug","message":"Executing query [m8jc2xask4l13exsbd]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:18.004Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:10:18.006Z"}
{"level":"debug","message":"Executing query [m8jc2xau78rjj9ztopb]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:10:18.006Z"}
{"level":"debug","message":"Executing query [m8jc2xavl7yuch4vn7d]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:10:18.007Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:10:18.008Z"}
{"level":"debug","message":"Executing query [m8jc2xax4z8pi9zprsq]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:18.009Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:10:18.010Z"}
{"level":"debug","message":"Executing query [m8jc2xb2w2k7bgv16e]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:10:18.014Z"}
{"level":"debug","message":"Executing query [m8jc2xb4ybbrcohn4sg]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:10:18.016Z"}
{"level":"debug","message":"Executing query [m8jc2xb521swi4pltlv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:18.017Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:18.122Z"}
{"level":"debug","message":"Executing query [m8jc2xe5jylkdn8y6m]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:10:18.126Z"}
{"level":"debug","message":"Executing query [m8jc2xe7zlib2o803a]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:10:18.127Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jc2xe7zlib2o803a]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:10:18.129Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:18.130Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:10:18.206Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:10:18.207Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:10:18.207Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:10:18.208Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:10:18.208Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:10:18.208Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:47.932Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:47.949Z"}
{"level":"debug","message":"Executing query [m8jc3kjgvnuofzk9sq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:48.125Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:48.140Z"}
{"level":"debug","message":"Executing query [m8jc3kjyf86rm6kxgkj]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:48.142Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:10:48.144Z"}
{"level":"debug","message":"Executing query [m8jc3kk153zl2n4aeu]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:48.145Z"}
{"level":"debug","message":"Executing query [m8jc3kk3igrwogti3e]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:48.147Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:10:48.149Z"}
{"level":"debug","message":"Executing query [m8jc3kk9lktijqsqks]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742595048124\"]","timestamp":"2025-03-21T22:10:48.153Z"}
{"level":"debug","message":"Executing query [m8jc3kket1rrsss627d]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:10:48.158Z"}
{"level":"debug","message":"Executing query [m8jc3kkitr550u60188]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:10:48.163Z"}
{"level":"debug","message":"Executing query [m8jc3kklxl0n1nrtnf]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:10:48.165Z"}
{"level":"debug","message":"Executing query [m8jc3kkmfvqrlecsgm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:48.166Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:48.168Z"}
{"level":"debug","message":"Executing query [m8jc3ko2qqnmek2fvtm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:48.291Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:48.304Z"}
{"level":"debug","message":"Executing query [m8jc3koitjfgi5gqg5]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:48.306Z"}
{"level":"debug","message":"Executing query [m8jc3kojsqfrsjnlqu]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:48.307Z"}
{"level":"debug","message":"Executing query [m8jc3kolkhe5kx0jkwq]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:48.309Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:10:48.310Z"}
{"level":"debug","message":"Executing query [m8jc3kov6wqdv52gxx4]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:10:48.319Z"}
{"level":"debug","message":"Executing query [m8jc3kp0292ln611s6l]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:48.324Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:48.325Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:49.031Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:10:49.033Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:10:49.745Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:49.754Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:10:49.756Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:10:49.999Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:50.053Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:10:50.079Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:50.114Z"}
{"level":"debug","message":"Executing query [m8jc3m5zh883s4g7m7q]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:50.231Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:50.241Z"}
{"level":"debug","message":"Executing query [m8jc3m6ae0hhqnio81j]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:50.242Z"}
{"level":"debug","message":"Executing query [m8jc3m6d9hzlrkl02o]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595050230\"]","timestamp":"2025-03-21T22:10:50.245Z"}
{"level":"debug","message":"Executing query [m8jc3m6fdgmjhoy0mtf]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742595050230\",\"TEST-OFI-FORENSE-1742595050230\",5055,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742595050230\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:50.247Z"}
{"level":"debug","message":"Executing query [m8jc3m6lb0tgayu8s3]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.253Z"}
{"level":"debug","message":"Executing query [m8jc3m6n5vxx8unhh0d]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595050230\"]","timestamp":"2025-03-21T22:10:50.255Z"}
{"level":"debug","message":"Executing query [m8jc3m6pfwhimydbqjl]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",27]","timestamp":"2025-03-21T22:10:50.257Z"}
{"level":"debug","message":"Executing query [m8jc3m6t7k2wldbhrei]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.261Z"}
{"level":"debug","message":"Executing query [m8jc3m6wtaygdkjfnyn]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.264Z"}
{"level":"debug","message":"Executing query [m8jc3m6zkp9mvdu2dt]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.267Z"}
{"level":"debug","message":"Executing query [m8jc3m71zg1tsepqvui]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.269Z"}
{"level":"debug","message":"Executing query [m8jc3m74au6oddyczh]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.272Z"}
{"level":"debug","message":"Executing query [m8jc3m765jrhwigj3yl]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742595050274\",\"TEST-SP-OFI-FORENSE-1742595050274\",9104,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:10:50.274Z"}
{"level":"debug","message":"Executing query [m8jc3m7981huk2g2qxg]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595050274\"]","timestamp":"2025-03-21T22:10:50.277Z"}
{"level":"debug","message":"Executing query [m8jc3m7avg7fxhnyiq]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595050274\"]","timestamp":"2025-03-21T22:10:50.278Z"}
{"level":"debug","message":"Executing query [m8jc3m7e32br22aeqtu]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:50.282Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:50.283Z"}
{"level":"debug","message":"Executing query [m8jc3madvx3javy9xae]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:50.389Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:50.402Z"}
{"level":"debug","message":"Executing query [m8jc3mas31t6t1e9qew]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595050388\"]","timestamp":"2025-03-21T22:10:50.404Z"}
{"level":"debug","message":"Executing query [m8jc3mautxcaep1lcs]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595050388\"]","timestamp":"2025-03-21T22:10:50.406Z"}
{"level":"debug","message":"Executing query [m8jc3mavdb2rekrvsig]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742595050388\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:50.407Z"}
{"level":"debug","message":"Executing query [m8jc3mb0vvpnq576um]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1012]","timestamp":"2025-03-21T22:10:50.412Z"}
{"level":"debug","message":"Executing query [m8jc3mb2spufadr6yjt]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595050388\"]","timestamp":"2025-03-21T22:10:50.415Z"}
{"level":"debug","message":"Executing query [m8jc3mb55bl01v0p7gb]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1012]","timestamp":"2025-03-21T22:10:50.417Z"}
{"level":"debug","message":"Executing query [m8jc3mb9nevr4kcqrl9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1012]","timestamp":"2025-03-21T22:10:50.421Z"}
{"level":"debug","message":"Executing query [m8jc3mba53cnjh6xwz]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1012]","timestamp":"2025-03-21T22:10:50.422Z"}
{"level":"debug","message":"Executing query [m8jc3mbd6mdue01t1t]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1012]","timestamp":"2025-03-21T22:10:50.425Z"}
{"level":"debug","message":"Executing query [m8jc3mbffehplhiy15b]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1012]","timestamp":"2025-03-21T22:10:50.427Z"}
{"level":"debug","message":"Executing query [m8jc3mbg6rxx9m4ztnw]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1012]","timestamp":"2025-03-21T22:10:50.428Z"}
{"level":"debug","message":"Executing query [m8jc3mbky3ulx4ts3f]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1012]","timestamp":"2025-03-21T22:10:50.432Z"}
{"level":"debug","message":"Executing query [m8jc3mbl1cnr33o85qf]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:10:50.433Z"}
{"level":"debug","message":"Executing query [m8jc3mbnssi34mj13ko]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:50.435Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:50.436Z"}
{"level":"debug","message":"Executing query [m8jc3menqpbrg8ebgb]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:50.543Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:50.553Z"}
{"level":"debug","message":"Executing query [m8jc3meyr2w46ivyqy8]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:50.554Z"}
{"level":"debug","message":"Executing query [m8jc3mf15cetboziq1n]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595050543\"]","timestamp":"2025-03-21T22:10:50.557Z"}
{"level":"debug","message":"Executing query [m8jc3mf3ay5fh3yhbt]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742595050543\",\"TEST-OFICIO-1742595050543\",7254,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:50.559Z"}
{"level":"debug","message":"Executing query [m8jc3mf8pco490css4m]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.564Z"}
{"level":"debug","message":"Executing query [m8jc3mfa81qvhbnlj4m]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595050543\"]","timestamp":"2025-03-21T22:10:50.566Z"}
{"level":"debug","message":"Executing query [m8jc3mfdw7ncz1enh1a]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",27]","timestamp":"2025-03-21T22:10:50.569Z"}
{"level":"debug","message":"Executing query [m8jc3mfh2v645v0mmix]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.574Z"}
{"level":"debug","message":"Executing query [m8jc3mfkmz9ias9vvw]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.576Z"}
{"level":"debug","message":"Executing query [m8jc3mfp02a8a5pek1p5]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.581Z"}
{"level":"debug","message":"Executing query [m8jc3mfs7uag5bqankk]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.584Z"}
{"level":"debug","message":"Executing query [m8jc3mfxraajfqmnc6]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.589Z"}
{"level":"debug","message":"Executing query [m8jc3mg1j1vbn0np9w]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742595050593\",\"TEST-SP-OFICIO-1742595050593\",1815,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:10:50.593Z"}
{"level":"debug","message":"Executing query [m8jc3mg573ilm87148r]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595050593\"]","timestamp":"2025-03-21T22:10:50.597Z"}
{"level":"debug","message":"Executing query [m8jc3mg7if2b9hl4c2]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595050593\"]","timestamp":"2025-03-21T22:10:50.599Z"}
{"level":"debug","message":"Executing query [m8jc3mgaoxegrbshqw]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:50.602Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:50.604Z"}
{"level":"debug","message":"Executing query [m8jc3mjd5ypvi9oifd5]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:50.713Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:50.727Z"}
{"level":"debug","message":"Executing query [m8jc3mjte9bih7wa4up]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595050712\"]","timestamp":"2025-03-21T22:10:50.729Z"}
{"level":"debug","message":"Executing query [m8jc3mjwt94o43kesqk]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742595050712\",true]","timestamp":"2025-03-21T22:10:50.732Z"}
{"level":"debug","message":"Executing query [m8jc3mk16pk6m7ojl1x]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.737Z"}
{"level":"debug","message":"Executing query [m8jc3mk3d5bh6v7uuv6]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595050712\"]","timestamp":"2025-03-21T22:10:50.739Z"}
{"level":"debug","message":"Executing query [m8jc3mk5vjvz9w2lvip]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",14]","timestamp":"2025-03-21T22:10:50.741Z"}
{"level":"debug","message":"Executing query [m8jc3mk8cx7r75ro9ot]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.744Z"}
{"level":"debug","message":"Executing query [m8jc3mkaozru8cpu8fh]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.746Z"}
{"level":"debug","message":"Executing query [m8jc3mkep0cqcduknwk]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.750Z"}
{"level":"debug","message":"Executing query [m8jc3mkgriuzx7vlz6g]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.752Z"}
{"level":"debug","message":"Executing query [m8jc3mkivvb2rjuqeih]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.754Z"}
{"level":"debug","message":"Executing query [m8jc3mklfqe66bamyyq]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.757Z"}
{"level":"debug","message":"Executing query [m8jc3mkn9zooiqt204k]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:10:50.760Z"}
{"level":"debug","message":"Executing query [m8jc3mkpvo6jzsikcp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:50.761Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:50.762Z"}
{"level":"debug","message":"Executing query [m8jc3mnn9o12s9bw36h]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:50.867Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:50.878Z"}
{"level":"debug","message":"Executing query [m8jc3mnz7m63vgz763]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:50.879Z"}
{"level":"debug","message":"Executing query [m8jc3mo17zkgszhpvgg]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595050866\"]","timestamp":"2025-03-21T22:10:50.881Z"}
{"level":"debug","message":"Executing query [m8jc3mo2e09tlfpc4ii]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742595050866\",\"TEST-OFI-QUIMICA-1742595050866\",8856,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:50.882Z"}
{"level":"debug","message":"Executing query [m8jc3mob3he1c73fne3]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.891Z"}
{"level":"debug","message":"Executing query [m8jc3moej9fiebpc1a]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595050866\"]","timestamp":"2025-03-21T22:10:50.894Z"}
{"level":"debug","message":"Executing query [m8jc3moge5ehzzik1oc]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",14]","timestamp":"2025-03-21T22:10:50.896Z"}
{"level":"debug","message":"Executing query [m8jc3moly46mw9dka5]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.901Z"}
{"level":"debug","message":"Executing query [m8jc3monob39l9w0m9]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.903Z"}
{"level":"debug","message":"Executing query [m8jc3mosrmrztcix06p]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.908Z"}
{"level":"debug","message":"Executing query [m8jc3movrhkxmt7ybx]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.911Z"}
{"level":"debug","message":"Executing query [m8jc3mox32gbv8s4lze]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.914Z"}
{"level":"debug","message":"Executing query [m8jc3mozwwhhn9a1y7]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:50.915Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:50.917Z"}
{"level":"debug","message":"Executing query [m8jc3ms0s2vp5zmkq1t]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:51.024Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:51.039Z"}
{"level":"debug","message":"Executing query [m8jc3msgr3omfbj15yg]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:10:51.040Z"}
{"level":"debug","message":"Executing query [m8jc3msijytf0v1wm0f]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:10:51.042Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:10:51.044Z"}
{"level":"debug","message":"Executing query [m8jc3mskv45d9l4eftl]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:51.045Z"}
{"level":"debug","message":"Executing query [m8jc3msm2gqg5nfnr86]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:51.046Z"}
{"level":"debug","message":"Executing query [m8jc3msnoh3yf50vw9]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:51.047Z"}
{"level":"debug","message":"Executing query [m8jc3msnsyitz3mp8o]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:10:51.047Z"}
{"level":"debug","message":"Executing query [m8jc3mstvi9si0tdb8h]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[15]","timestamp":"2025-03-21T22:10:51.053Z"}
{"level":"debug","message":"Executing query [m8jc3msv4mgsqlxopv9]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:51.055Z"}
{"level":"debug","message":"Executing query [m8jc3msz05x8eqmnaeua]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",15]","timestamp":"2025-03-21T22:10:51.059Z"}
{"level":"debug","message":"Executing query [m8jc3mt2p7jywv8x29f]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[15]","timestamp":"2025-03-21T22:10:51.062Z"}
{"level":"debug","message":"Executing query [m8jc3mt5n9yea5g7jh]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[15]","timestamp":"2025-03-21T22:10:51.065Z"}
{"level":"debug","message":"Executing query [m8jc3mt8swgq1q1p3pj]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[15]","timestamp":"2025-03-21T22:10:51.068Z"}
{"level":"debug","message":"Executing query [m8jc3mtbahbmdc4ehtu]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:51.071Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:51.072Z"}
{"level":"debug","message":"Executing query [m8jc3mw844wdqt9ziop]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:51.176Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:51.186Z"}
{"level":"debug","message":"Executing query [m8jc3mwjcxadnv75l4b]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:51.187Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:10:51.190Z"}
{"level":"debug","message":"Executing query [m8jc3mwmzkr7v2pk2y]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:10:51.190Z"}
{"level":"debug","message":"Executing query [m8jc3mwn8d8zo190o4o]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:10:51.191Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:10:51.192Z"}
{"level":"debug","message":"Executing query [m8jc3mwo2y74ebcrqh2]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:51.192Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:10:51.193Z"}
{"level":"debug","message":"Executing query [m8jc3mwt8v8v9ijc5bn]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:10:51.197Z"}
{"level":"debug","message":"Executing query [m8jc3mww09uf81v0xdgu]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:10:51.200Z"}
{"level":"debug","message":"Executing query [m8jc3mwxudnglofxkpb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:51.201Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:51.323Z"}
{"level":"debug","message":"Executing query [m8jc3n0d26w83y2gatgh]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:10:51.325Z"}
{"level":"debug","message":"Executing query [m8jc3n0gvrybuykii09]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:10:51.328Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jc3n0gvrybuykii09]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:10:51.331Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:51.332Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:10:51.415Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:10:51.416Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:10:51.417Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:10:51.418Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:10:51.418Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:10:51.418Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:56.168Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:56.183Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-21T22:12:56.303Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-21T22:12:56.423Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:12:57.203Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:57.212Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:12:57.214Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:57.923Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:12:57.926Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:12:58.166Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:58.203Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:12:58.217Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:58.255Z"}
{"level":"debug","message":"Executing query [m8jc6d1sf5c0ddipls6]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:12:58.384Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:58.395Z"}
{"level":"debug","message":"Executing query [m8jc6d26sjz6s0jvzpl]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:12:58.398Z"}
{"level":"debug","message":"Executing query [m8jc6d291jv7e9lfi1b]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595178384\"]","timestamp":"2025-03-21T22:12:58.401Z"}
{"level":"debug","message":"Executing query [m8jc6d2cigze2s5s42]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742595178384\",\"TEST-OFI-FORENSE-1742595178384\",3952,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742595178384\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:12:58.404Z"}
{"level":"debug","message":"Executing query [m8jc6d2kygqhx0es7f]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.412Z"}
{"level":"debug","message":"Executing query [m8jc6d2n09zwwnvxidrp]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595178384\"]","timestamp":"2025-03-21T22:12:58.415Z"}
{"level":"debug","message":"Executing query [m8jc6d2p0kwk57kiwxoh]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",29]","timestamp":"2025-03-21T22:12:58.417Z"}
{"level":"debug","message":"Executing query [m8jc6d2sz37d9c1z4c]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.420Z"}
{"level":"debug","message":"Executing query [m8jc6d2ubp7k8bi1m7s]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.422Z"}
{"level":"debug","message":"Executing query [m8jc6d2ymf22523zwmh]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.426Z"}
{"level":"debug","message":"Executing query [m8jc6d30wjoqx7l4q9n]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.428Z"}
{"level":"debug","message":"Executing query [m8jc6d339y2pnokbbl]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.431Z"}
{"level":"debug","message":"Executing query [m8jc6d36y46ygxd9d8]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742595178434\",\"TEST-SP-OFI-FORENSE-1742595178434\",3484,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:12:58.434Z"}
{"level":"debug","message":"Executing query [m8jc6d38e8r0gok98jb]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595178434\"]","timestamp":"2025-03-21T22:12:58.437Z"}
{"level":"debug","message":"Executing query [m8jc6d3b2rl2o4p0ay2]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595178434\"]","timestamp":"2025-03-21T22:12:58.439Z"}
{"level":"debug","message":"Executing query [m8jc6d3es6sxpsh92j]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:12:58.442Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:58.443Z"}
{"level":"debug","message":"Executing query [m8jc6d6ky7j71rskzv9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:12:58.557Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:58.567Z"}
{"level":"debug","message":"Executing query [m8jc6d6wrpcc6lav7rg]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:12:58.568Z"}
{"level":"debug","message":"Executing query [m8jc6d6zit8zambmvrg]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595178555\"]","timestamp":"2025-03-21T22:12:58.571Z"}
{"level":"debug","message":"Executing query [m8jc6d70vh306n7qzo]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742595178555\",\"TEST-OFICIO-1742595178555\",5294,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:12:58.573Z"}
{"level":"debug","message":"Executing query [m8jc6d75guao2r0u4ia]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.577Z"}
{"level":"debug","message":"Executing query [m8jc6d787khgtm3hl8y]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595178555\"]","timestamp":"2025-03-21T22:12:58.580Z"}
{"level":"debug","message":"Executing query [m8jc6d7ag5w4t210b5v]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",29]","timestamp":"2025-03-21T22:12:58.582Z"}
{"level":"debug","message":"Executing query [m8jc6d7dkf7h1h902fe]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.585Z"}
{"level":"debug","message":"Executing query [m8jc6d7fmdvq2rvcs2q]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.587Z"}
{"level":"debug","message":"Executing query [m8jc6d7icjo0hdgimco]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.590Z"}
{"level":"debug","message":"Executing query [m8jc6d7le0lsbpg4orm]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.593Z"}
{"level":"debug","message":"Executing query [m8jc6d7n7t778xs1i3n]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.595Z"}
{"level":"debug","message":"Executing query [m8jc6d7pa79buqnf1l]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742595178597\",\"TEST-SP-OFICIO-1742595178597\",3968,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:12:58.597Z"}
{"level":"debug","message":"Executing query [m8jc6d7tbir25guo3t8]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595178597\"]","timestamp":"2025-03-21T22:12:58.601Z"}
{"level":"debug","message":"Executing query [m8jc6d7u18jeimxi3zf]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595178597\"]","timestamp":"2025-03-21T22:12:58.602Z"}
{"level":"debug","message":"Executing query [m8jc6d7xmw7mdc524v]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:12:58.605Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:58.607Z"}
{"level":"debug","message":"Executing query [m8jc6db36egsexmemg7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:12:58.719Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:58.734Z"}
{"level":"debug","message":"Executing query [m8jc6dbkahu03895rt]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:12:58.736Z"}
{"level":"debug","message":"Executing query [m8jc6dbmro0emj0xcvb]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:12:58.738Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:12:58.739Z"}
{"level":"debug","message":"Executing query [m8jc6dboilngnnjjh9k]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:12:58.740Z"}
{"level":"debug","message":"Executing query [m8jc6dbprjk43b7opue]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:12:58.741Z"}
{"level":"debug","message":"Executing query [m8jc6dbqosoc8rqikt]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:12:58.742Z"}
{"level":"debug","message":"Executing query [m8jc6dbqb2bmhk18ymi]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:12:58.742Z"}
{"level":"debug","message":"Executing query [m8jc6dbvgx1hraz9cgv]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[16]","timestamp":"2025-03-21T22:12:58.747Z"}
{"level":"debug","message":"Executing query [m8jc6dbxbhepkl2luqe]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:12:58.749Z"}
{"level":"debug","message":"Executing query [m8jc6dc0uhz0q5a2cmb]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",16]","timestamp":"2025-03-21T22:12:58.752Z"}
{"level":"debug","message":"Executing query [m8jc6dc2ds2xx2g2bz]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[16]","timestamp":"2025-03-21T22:12:58.754Z"}
{"level":"debug","message":"Executing query [m8jc6dc4urd8jr2em6s]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[16]","timestamp":"2025-03-21T22:12:58.756Z"}
{"level":"debug","message":"Executing query [m8jc6dc9sq7h8221kec]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[16]","timestamp":"2025-03-21T22:12:58.761Z"}
{"level":"debug","message":"Executing query [m8jc6dcase6iiwps7jg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:12:58.762Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:58.763Z"}
{"level":"debug","message":"Executing query [m8jc6dffwouh7kjd66n]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:12:58.875Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:58.886Z"}
{"level":"debug","message":"Executing query [m8jc6dfs2aplrffd04l]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595178874\"]","timestamp":"2025-03-21T22:12:58.888Z"}
{"level":"debug","message":"Executing query [m8jc6dfu0rcwzlqc0bn]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742595178874\",true]","timestamp":"2025-03-21T22:12:58.890Z"}
{"level":"debug","message":"Executing query [m8jc6dg070bk950fw66]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-21T22:12:58.896Z"}
{"level":"debug","message":"Executing query [m8jc6dg30cfkeymltc5g]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595178874\"]","timestamp":"2025-03-21T22:12:58.899Z"}
{"level":"debug","message":"Executing query [m8jc6dg4l9ufsbwby9b]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",15]","timestamp":"2025-03-21T22:12:58.900Z"}
{"level":"debug","message":"Executing query [m8jc6dg8z51rfy42o5n]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-21T22:12:58.904Z"}
{"level":"debug","message":"Executing query [m8jc6dgaly4tjttxwmj]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-21T22:12:58.906Z"}
{"level":"debug","message":"Executing query [m8jc6dgca0cfr5sirum]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-21T22:12:58.908Z"}
{"level":"debug","message":"Executing query [m8jc6dgezako26lryps]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-21T22:12:58.910Z"}
{"level":"debug","message":"Executing query [m8jc6dgg3t1l92573zr]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-21T22:12:58.912Z"}
{"level":"debug","message":"Executing query [m8jc6dgjwvjqtz9zudm]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-21T22:12:58.915Z"}
{"level":"debug","message":"Executing query [m8jc6dgkix811xv9jmb]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:12:58.916Z"}
{"level":"debug","message":"Executing query [m8jc6dgmnmmfc2rquk]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:12:58.919Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:58.920Z"}
{"level":"debug","message":"Executing query [m8jc6djkv3e68q0cep8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:12:59.024Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:59.038Z"}
{"level":"debug","message":"Executing query [m8jc6dk0dgvynesz0wg]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:12:59.040Z"}
{"level":"debug","message":"Executing query [m8jc6dk2ec30r6mp98d]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595179024\"]","timestamp":"2025-03-21T22:12:59.042Z"}
{"level":"debug","message":"Executing query [m8jc6dk4v8n7awp8pnf]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742595179024\",\"TEST-OFI-QUIMICA-1742595179024\",8890,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:12:59.044Z"}
{"level":"debug","message":"Executing query [m8jc6dk9n3uvrw8edf]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[15]","timestamp":"2025-03-21T22:12:59.049Z"}
{"level":"debug","message":"Executing query [m8jc6dkc9khx0e3c1k]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595179024\"]","timestamp":"2025-03-21T22:12:59.052Z"}
{"level":"debug","message":"Executing query [m8jc6dkeifho4csuw8a]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",15]","timestamp":"2025-03-21T22:12:59.054Z"}
{"level":"debug","message":"Executing query [m8jc6dkhd91mmou607b]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[15]","timestamp":"2025-03-21T22:12:59.057Z"}
{"level":"debug","message":"Executing query [m8jc6dkjtgdmlf4gks]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[15]","timestamp":"2025-03-21T22:12:59.059Z"}
{"level":"debug","message":"Executing query [m8jc6dkln7au7ttviqr]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[15]","timestamp":"2025-03-21T22:12:59.061Z"}
{"level":"debug","message":"Executing query [m8jc6dkncn493dk4j3q]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[15]","timestamp":"2025-03-21T22:12:59.063Z"}
{"level":"debug","message":"Executing query [m8jc6dkqydk8l4xxm5a]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[15]","timestamp":"2025-03-21T22:12:59.066Z"}
{"level":"debug","message":"Executing query [m8jc6dksr1egj8vq5o]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:12:59.068Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:59.069Z"}
{"level":"debug","message":"Executing query [m8jc6dno29usx9uesmf]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:12:59.173Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:59.183Z"}
{"level":"debug","message":"Executing query [m8jc6do1rakkcjzr1gc]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595179172\"]","timestamp":"2025-03-21T22:12:59.185Z"}
{"level":"debug","message":"Executing query [m8jc6do2368vr1pzqdn]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595179172\"]","timestamp":"2025-03-21T22:12:59.186Z"}
{"level":"debug","message":"Executing query [m8jc6do4ttl1hm8p2f]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742595179172\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:12:59.188Z"}
{"level":"debug","message":"Executing query [m8jc6doa9h50jymrbf4]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-21T22:12:59.194Z"}
{"level":"debug","message":"Executing query [m8jc6dodyp5be2s8hrn]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595179172\"]","timestamp":"2025-03-21T22:12:59.197Z"}
{"level":"debug","message":"Executing query [m8jc6dofwk0etrgwkp8]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1013]","timestamp":"2025-03-21T22:12:59.199Z"}
{"level":"debug","message":"Executing query [m8jc6doi0alriko4a74m]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-21T22:12:59.202Z"}
{"level":"debug","message":"Executing query [m8jc6dokj1a86cl5tf]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-21T22:12:59.204Z"}
{"level":"debug","message":"Executing query [m8jc6donluwv9ym84b9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-21T22:12:59.207Z"}
{"level":"debug","message":"Executing query [m8jc6dopjc397mip6oh]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-21T22:12:59.209Z"}
{"level":"debug","message":"Executing query [m8jc6dorvpms5b18tl]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-21T22:12:59.211Z"}
{"level":"debug","message":"Executing query [m8jc6doty5kr86ovqd]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-21T22:12:59.213Z"}
{"level":"debug","message":"Executing query [m8jc6dovs1fma7rszhq]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:12:59.215Z"}
{"level":"debug","message":"Executing query [m8jc6doxhtyznb3gi3o]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:12:59.217Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:59.218Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:59.337Z"}
{"level":"debug","message":"Executing query [m8jc6dscjc7ag1ni95n]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:12:59.340Z"}
{"level":"debug","message":"Executing query [m8jc6dsec8an5e1dwea]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:12:59.342Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jc6dsec8an5e1dwea]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:12:59.345Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:59.347Z"}
{"level":"debug","message":"Executing query [m8jc6dvgav10o9w1to8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:12:59.452Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:59.463Z"}
{"level":"debug","message":"Executing query [m8jc6dvstbvmlhyjxz]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:12:59.464Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:12:59.466Z"}
{"level":"debug","message":"Executing query [m8jc6dvvy1ikux8gkr]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:12:59.467Z"}
{"level":"debug","message":"Executing query [m8jc6dvw55ttfo5u1x7]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:12:59.468Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:12:59.469Z"}
{"level":"debug","message":"Executing query [m8jc6dvypgic5yplrja]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:12:59.470Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:12:59.471Z"}
{"level":"debug","message":"Executing query [m8jc6dw4cm0nlvhix4l]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:12:59.476Z"}
{"level":"debug","message":"Executing query [m8jc6dw6qq6oio2bgp]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:12:59.478Z"}
{"level":"debug","message":"Executing query [m8jc6dw8k0ysqn2lfb9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:12:59.480Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:12:59.562Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:12:59.563Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:12:59.564Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:12:59.564Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:12:59.565Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:12:59.565Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-21T22:13:33.063Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:35.001Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:13:35.003Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:35.012Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:35.760Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:13:35.763Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:13:36.004Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:36.035Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:13:36.049Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:36.083Z"}
{"level":"debug","message":"Executing query [m8jc767yhct8peegsgq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:13:36.190Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:36.202Z"}
{"level":"debug","message":"Executing query [m8jc768cr9f3v6cc8kf]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:13:36.204Z"}
{"level":"debug","message":"Executing query [m8jc768f0aw62fnmo94m]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595216189\"]","timestamp":"2025-03-21T22:13:36.207Z"}
{"level":"debug","message":"Executing query [m8jc768hds50qx08j9v]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742595216189\",\"TEST-OFI-FORENSE-1742595216189\",7754,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742595216189\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:13:36.209Z"}
{"level":"debug","message":"Executing query [m8jc768ly3mprzjmm3]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.213Z"}
{"level":"debug","message":"Executing query [m8jc768pqae87ezxya9]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595216189\"]","timestamp":"2025-03-21T22:13:36.217Z"}
{"level":"debug","message":"Executing query [m8jc768rt6xoactgzb]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",31]","timestamp":"2025-03-21T22:13:36.219Z"}
{"level":"debug","message":"Executing query [m8jc768uf28wn4cowfe]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.222Z"}
{"level":"debug","message":"Executing query [m8jc768xbbrhfhbtu0p]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.225Z"}
{"level":"debug","message":"Executing query [m8jc76917cd5n50opcf]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.229Z"}
{"level":"debug","message":"Executing query [m8jc7693153iyitf0k7j]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.231Z"}
{"level":"debug","message":"Executing query [m8jc7696scw0nkozos]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.234Z"}
{"level":"debug","message":"Executing query [m8jc7699stdabiym04a]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742595216237\",\"TEST-SP-OFI-FORENSE-1742595216237\",8212,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:13:36.237Z"}
{"level":"debug","message":"Executing query [m8jc769c93hkrtbiz5]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595216237\"]","timestamp":"2025-03-21T22:13:36.240Z"}
{"level":"debug","message":"Executing query [m8jc769dfrtueq36r1o]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595216237\"]","timestamp":"2025-03-21T22:13:36.241Z"}
{"level":"debug","message":"Executing query [m8jc769grqux1vw8txb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:13:36.244Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:36.246Z"}
{"level":"debug","message":"Executing query [m8jc76ciax2u7iheulg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:13:36.355Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:36.365Z"}
{"level":"debug","message":"Executing query [m8jc76cu9p6u3mltjo7]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:13:36.366Z"}
{"level":"debug","message":"Executing query [m8jc76cwo9o87a05vv9]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595216354\"]","timestamp":"2025-03-21T22:13:36.368Z"}
{"level":"debug","message":"Executing query [m8jc76cy3fux8hkay78]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742595216354\",\"TEST-OFICIO-1742595216354\",4344,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:13:36.370Z"}
{"level":"debug","message":"Executing query [m8jc76d27g4jtt5788]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.374Z"}
{"level":"debug","message":"Executing query [m8jc76d5dqxmbhs56k]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595216354\"]","timestamp":"2025-03-21T22:13:36.377Z"}
{"level":"debug","message":"Executing query [m8jc76d7etpulizbwt]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",31]","timestamp":"2025-03-21T22:13:36.379Z"}
{"level":"debug","message":"Executing query [m8jc76da2m0m1pzsgo9]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.382Z"}
{"level":"debug","message":"Executing query [m8jc76dc9fisxmcbtb]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.384Z"}
{"level":"debug","message":"Executing query [m8jc76dftiyuvd60li8]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.387Z"}
{"level":"debug","message":"Executing query [m8jc76dhp57ut3jg8zj]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.389Z"}
{"level":"debug","message":"Executing query [m8jc76dkremwiqo5vme]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.392Z"}
{"level":"debug","message":"Executing query [m8jc76dmh1eyydm792]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742595216394\",\"TEST-SP-OFICIO-1742595216394\",1972,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:13:36.394Z"}
{"level":"debug","message":"Executing query [m8jc76dpsy1jossdcdi]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595216394\"]","timestamp":"2025-03-21T22:13:36.397Z"}
{"level":"debug","message":"Executing query [m8jc76dqutblextc5mp]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595216394\"]","timestamp":"2025-03-21T22:13:36.398Z"}
{"level":"debug","message":"Executing query [m8jc76du7c36galvw2o]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:13:36.402Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:36.404Z"}
{"level":"debug","message":"Executing query [m8jc76gvtansp6w3v7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:13:36.511Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:36.521Z"}
{"level":"debug","message":"Executing query [m8jc76h74w4jxrup95w]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:13:36.523Z"}
{"level":"debug","message":"Executing query [m8jc76h8sl45j5x29vo]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:13:36.524Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:13:36.525Z"}
{"level":"debug","message":"Executing query [m8jc76ha859ouc52ih5]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:13:36.526Z"}
{"level":"debug","message":"Executing query [m8jc76hb8bncynrnjvf]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:13:36.527Z"}
{"level":"debug","message":"Executing query [m8jc76hdborsx2nl9ee]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:13:36.529Z"}
{"level":"debug","message":"Executing query [m8jc76hey7b1r9mwqb]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:13:36.530Z"}
{"level":"debug","message":"Executing query [m8jc76hkaxmokdnvqsc]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[17]","timestamp":"2025-03-21T22:13:36.536Z"}
{"level":"debug","message":"Executing query [m8jc76hpqszfqtzq9t]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:13:36.541Z"}
{"level":"debug","message":"Executing query [m8jc76hrqx0l3j780kr]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",17]","timestamp":"2025-03-21T22:13:36.543Z"}
{"level":"debug","message":"Executing query [m8jc76hurjsxwdwy6d]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[17]","timestamp":"2025-03-21T22:13:36.546Z"}
{"level":"debug","message":"Executing query [m8jc76hwrzicnh5isf9]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[17]","timestamp":"2025-03-21T22:13:36.548Z"}
{"level":"debug","message":"Executing query [m8jc76i07a3gr8mvu1f]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[17]","timestamp":"2025-03-21T22:13:36.552Z"}
{"level":"debug","message":"Executing query [m8jc76i1h60zas7cya9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:13:36.553Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:36.554Z"}
{"level":"debug","message":"Executing query [m8jc76kx8e2lc1eobis]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:13:36.657Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:36.667Z"}
{"level":"debug","message":"Executing query [m8jc76l98v1g7g9v5fh]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595216656\"]","timestamp":"2025-03-21T22:13:36.669Z"}
{"level":"debug","message":"Executing query [m8jc76lb4l72i0itbkw]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742595216656\",true]","timestamp":"2025-03-21T22:13:36.671Z"}
{"level":"debug","message":"Executing query [m8jc76lfg6der6w776e]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.675Z"}
{"level":"debug","message":"Executing query [m8jc76lh6dunvodawk5]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595216656\"]","timestamp":"2025-03-21T22:13:36.677Z"}
{"level":"debug","message":"Executing query [m8jc76lj3czoihnsvgf]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",16]","timestamp":"2025-03-21T22:13:36.679Z"}
{"level":"debug","message":"Executing query [m8jc76lmjjtnqkhpk78]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.682Z"}
{"level":"debug","message":"Executing query [m8jc76lnomhe1dbvbd]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.684Z"}
{"level":"debug","message":"Executing query [m8jc76lr5agfzwgtqdd]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.687Z"}
{"level":"debug","message":"Executing query [m8jc76ltkexnwao4i8m]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.689Z"}
{"level":"debug","message":"Executing query [m8jc76luq7mxjw5ovjq]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.690Z"}
{"level":"debug","message":"Executing query [m8jc76lxnp79uoyin]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.693Z"}
{"level":"debug","message":"Executing query [m8jc76lznq6xxytkd2s]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:13:36.695Z"}
{"level":"debug","message":"Executing query [m8jc76m18huj43pcp33]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:13:36.697Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:36.698Z"}
{"level":"debug","message":"Executing query [m8jc76oxrdpx14rp4cq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:13:36.801Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:36.814Z"}
{"level":"debug","message":"Executing query [m8jc76pc66f2gcf09q]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:13:36.816Z"}
{"level":"debug","message":"Executing query [m8jc76pexx6f90bdyi]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595216801\"]","timestamp":"2025-03-21T22:13:36.818Z"}
{"level":"debug","message":"Executing query [m8jc76pf6aczgxkqh6m]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742595216801\",\"TEST-OFI-QUIMICA-1742595216801\",3441,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:13:36.819Z"}
{"level":"debug","message":"Executing query [m8jc76plx1uthlryur]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.825Z"}
{"level":"debug","message":"Executing query [m8jc76pqdgs7xw839ke]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595216801\"]","timestamp":"2025-03-21T22:13:36.830Z"}
{"level":"debug","message":"Executing query [m8jc76ptra3pnquf7ln]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",16]","timestamp":"2025-03-21T22:13:36.833Z"}
{"level":"debug","message":"Executing query [m8jc76pyhmx99huszij]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.838Z"}
{"level":"debug","message":"Executing query [m8jc76q1gay9xcumpt]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.841Z"}
{"level":"debug","message":"Executing query [m8jc76q5np5fek7q0z]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.845Z"}
{"level":"debug","message":"Executing query [m8jc76q7xeunoo3x7x]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.847Z"}
{"level":"debug","message":"Executing query [m8jc76qbgfvgebg0ccu]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.851Z"}
{"level":"debug","message":"Executing query [m8jc76qdrn12qizftv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:13:36.853Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:36.855Z"}
{"level":"debug","message":"Executing query [m8jc76u0d9ljdgt9a3k]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:13:36.984Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:37.002Z"}
{"level":"debug","message":"Executing query [m8jc76uk6hass6rwaxx]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595216984\"]","timestamp":"2025-03-21T22:13:37.004Z"}
{"level":"debug","message":"Executing query [m8jc76umd20rof77a8c]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595216984\"]","timestamp":"2025-03-21T22:13:37.006Z"}
{"level":"debug","message":"Executing query [m8jc76uoa9wsyflylwr]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742595216984\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:13:37.008Z"}
{"level":"debug","message":"Executing query [m8jc76uug2adkxrec2]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-21T22:13:37.014Z"}
{"level":"debug","message":"Executing query [m8jc76uxs97d9mkkvlc]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595216984\"]","timestamp":"2025-03-21T22:13:37.017Z"}
{"level":"debug","message":"Executing query [m8jc76v0mjaai0ho6x]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1014]","timestamp":"2025-03-21T22:13:37.020Z"}
{"level":"debug","message":"Executing query [m8jc76v328i0clw6enw]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-21T22:13:37.023Z"}
{"level":"debug","message":"Executing query [m8jc76v7g82w50r7nv9]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-21T22:13:37.027Z"}
{"level":"debug","message":"Executing query [m8jc76vai9wh9stsk89]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-21T22:13:37.030Z"}
{"level":"debug","message":"Executing query [m8jc76vd67nk3g6zbss]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-21T22:13:37.033Z"}
{"level":"debug","message":"Executing query [m8jc76vfe18k2xe3ka]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-21T22:13:37.035Z"}
{"level":"debug","message":"Executing query [m8jc76vingfeb0qky7d]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-21T22:13:37.038Z"}
{"level":"debug","message":"Executing query [m8jc76vk52fy9agjemj]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:13:37.040Z"}
{"level":"debug","message":"Executing query [m8jc76vmw1rvzbhw6ej]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:13:37.042Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:37.044Z"}
{"level":"debug","message":"Executing query [m8jc76z3j4g441brmip]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:13:37.167Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:37.178Z"}
{"level":"debug","message":"Executing query [m8jc76zfs8e90zbsxg]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:13:37.179Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:13:37.181Z"}
{"level":"debug","message":"Executing query [m8jc76zhngxjudj3axm]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:13:37.181Z"}
{"level":"debug","message":"Executing query [m8jc76zie8pnut5ycws]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:13:37.182Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:13:37.183Z"}
{"level":"debug","message":"Executing query [m8jc76zkzgwjxq92nd]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:13:37.184Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:13:37.185Z"}
{"level":"debug","message":"Executing query [m8jc76zpymqsadcdv7]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:13:37.189Z"}
{"level":"debug","message":"Executing query [m8jc76zr7vonb4wbk8k]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:13:37.191Z"}
{"level":"debug","message":"Executing query [m8jc76ztsjki8bv38rd]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:13:37.193Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:37.315Z"}
{"level":"debug","message":"Executing query [m8jc773969489crqtsf]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:13:37.317Z"}
{"level":"debug","message":"Executing query [m8jc773cyzz2agc5k4l]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:13:37.320Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jc773cyzz2agc5k4l]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:13:37.321Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:37.323Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-21T22:13:37.404Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:13:37.508Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:13:37.509Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:13:37.510Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:13:37.510Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:13:37.513Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:13:37.513Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-21T22:14:31.519Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-21T22:14:42.543Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-21T22:15:04.816Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:07.111Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:15:07.114Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:07.123Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:08.061Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:15:08.064Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-21T22:15:08.163Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:15:08.420Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:08.459Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:15:08.473Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:08.502Z"}
{"level":"debug","message":"Executing query [m8jc95j7v0dnsdquno]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:15:08.611Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:08.627Z"}
{"level":"debug","message":"Executing query [m8jc95jpgc54bfd65b]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595308611\"]","timestamp":"2025-03-21T22:15:08.629Z"}
{"level":"debug","message":"Executing query [m8jc95jtyptrkx0tg3]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595308611\"]","timestamp":"2025-03-21T22:15:08.633Z"}
{"level":"debug","message":"Executing query [m8jc95ju2q4kqypxij6]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742595308611\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:15:08.634Z"}
{"level":"debug","message":"Executing query [m8jc95jzxh4akdmxvdf]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-21T22:15:08.639Z"}
{"level":"debug","message":"Executing query [m8jc95k2b5d3togdcim]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595308611\"]","timestamp":"2025-03-21T22:15:08.642Z"}
{"level":"debug","message":"Executing query [m8jc95k4x885th3pob]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1015]","timestamp":"2025-03-21T22:15:08.644Z"}
{"level":"debug","message":"Executing query [m8jc95k724vs46prcik]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-21T22:15:08.647Z"}
{"level":"debug","message":"Executing query [m8jc95k9awdjhf8ybyw]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-21T22:15:08.649Z"}
{"level":"debug","message":"Executing query [m8jc95kdycwtz06qv1]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-21T22:15:08.653Z"}
{"level":"debug","message":"Executing query [m8jc95kf13dep7mkt16p]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-21T22:15:08.655Z"}
{"level":"debug","message":"Executing query [m8jc95kgdhpz4lg1nt]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-21T22:15:08.656Z"}
{"level":"debug","message":"Executing query [m8jc95kje4woj60swa7]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-21T22:15:08.659Z"}
{"level":"debug","message":"Executing query [m8jc95kl41x1q1ldrbv]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:15:08.661Z"}
{"level":"debug","message":"Executing query [m8jc95km314k76fxz1f]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:15:08.662Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:08.663Z"}
{"level":"debug","message":"Executing query [m8jc95np5cv1yulin2k]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:15:08.773Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:08.784Z"}
{"level":"debug","message":"Executing query [m8jc95o2m1glfa1o2dn]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:15:08.786Z"}
{"level":"debug","message":"Executing query [m8jc95o37g3kssdxh74]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595308773\"]","timestamp":"2025-03-21T22:15:08.787Z"}
{"level":"debug","message":"Executing query [m8jc95o4u1ozn3awe3]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742595308773\",\"TEST-OFI-FORENSE-1742595308773\",2709,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742595308773\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:15:08.788Z"}
{"level":"debug","message":"Executing query [m8jc95obdjzm0b6z416]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.795Z"}
{"level":"debug","message":"Executing query [m8jc95ofnngwu9xhpwh]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595308773\"]","timestamp":"2025-03-21T22:15:08.799Z"}
{"level":"debug","message":"Executing query [m8jc95ohh1qngkipjzr]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",33]","timestamp":"2025-03-21T22:15:08.801Z"}
{"level":"debug","message":"Executing query [m8jc95on7llrps9ugao]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.807Z"}
{"level":"debug","message":"Executing query [m8jc95op1qot34ta7n9]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.809Z"}
{"level":"debug","message":"Executing query [m8jc95osuupz5d7gf3l]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.813Z"}
{"level":"debug","message":"Executing query [m8jc95ov33ammvxzq6l]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.815Z"}
{"level":"debug","message":"Executing query [m8jc95oytsqfgvtu79s]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.818Z"}
{"level":"debug","message":"Executing query [m8jc95p0hfqs18ihd27]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742595308820\",\"TEST-SP-OFI-FORENSE-1742595308820\",6227,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:15:08.820Z"}
{"level":"debug","message":"Executing query [m8jc95p3kbczcb2vo4k]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595308820\"]","timestamp":"2025-03-21T22:15:08.823Z"}
{"level":"debug","message":"Executing query [m8jc95p664ogbmx3gu9]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595308820\"]","timestamp":"2025-03-21T22:15:08.826Z"}
{"level":"debug","message":"Executing query [m8jc95p9b150wh2m9ja]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:15:08.829Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:08.830Z"}
{"level":"debug","message":"Executing query [m8jc95shec9gp7abkg5]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:15:08.945Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:08.959Z"}
{"level":"debug","message":"Executing query [m8jc95sxxrh0aeu1jz]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:15:08.961Z"}
{"level":"debug","message":"Executing query [m8jc95syem3o097h9he]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595308945\"]","timestamp":"2025-03-21T22:15:08.962Z"}
{"level":"debug","message":"Executing query [m8jc95t0n2u4aqa30in]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742595308945\",\"TEST-OFICIO-1742595308945\",4206,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:15:08.964Z"}
{"level":"debug","message":"Executing query [m8jc95t5i8qv8ikb66]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.969Z"}
{"level":"debug","message":"Executing query [m8jc95t83rr3oln5v8v]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595308945\"]","timestamp":"2025-03-21T22:15:08.972Z"}
{"level":"debug","message":"Executing query [m8jc95tal42d7x7tiiq]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",33]","timestamp":"2025-03-21T22:15:08.974Z"}
{"level":"debug","message":"Executing query [m8jc95texro3vjsc66k]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.978Z"}
{"level":"debug","message":"Executing query [m8jc95tgcdzo5z6qdmc]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.980Z"}
{"level":"debug","message":"Executing query [m8jc95tjmcfr41bof]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.983Z"}
{"level":"debug","message":"Executing query [m8jc95tmdsiwpp70uvw]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.986Z"}
{"level":"debug","message":"Executing query [m8jc95tpaeenmfbsngd]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.989Z"}
{"level":"debug","message":"Executing query [m8jc95tr727gevjz3pd]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742595308991\",\"TEST-SP-OFICIO-1742595308991\",3264,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:15:08.991Z"}
{"level":"debug","message":"Executing query [m8jc95tv8ibyuikw9l4]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595308991\"]","timestamp":"2025-03-21T22:15:08.995Z"}
{"level":"debug","message":"Executing query [m8jc95twc0jvy1u4ehd]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595308991\"]","timestamp":"2025-03-21T22:15:08.996Z"}
{"level":"debug","message":"Executing query [m8jc95u0lk3tfzuv83r]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:15:09.000Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:09.001Z"}
{"level":"debug","message":"Executing query [m8jc95x3jo8woncokrq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:15:09.111Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:09.120Z"}
{"level":"debug","message":"Executing query [m8jc95xenfxr07fcvkp]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:15:09.122Z"}
{"level":"debug","message":"Executing query [m8jc95xgvvdf3yc6dqr]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595309110\"]","timestamp":"2025-03-21T22:15:09.124Z"}
{"level":"debug","message":"Executing query [m8jc95xie3fu5x773gw]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742595309110\",\"TEST-OFI-QUIMICA-1742595309110\",8146,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:15:09.126Z"}
{"level":"debug","message":"Executing query [m8jc95xm7icxbyfow65]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.130Z"}
{"level":"debug","message":"Executing query [m8jc95xpb94nznqnxls]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595309110\"]","timestamp":"2025-03-21T22:15:09.133Z"}
{"level":"debug","message":"Executing query [m8jc95xqe8tvtgqfq1r]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",17]","timestamp":"2025-03-21T22:15:09.134Z"}
{"level":"debug","message":"Executing query [m8jc95xthkk8w43679q]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.137Z"}
{"level":"debug","message":"Executing query [m8jc95xv2qffvup0sog]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.140Z"}
{"level":"debug","message":"Executing query [m8jc95xy4gj04w1heda]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.142Z"}
{"level":"debug","message":"Executing query [m8jc95y1c5zc2wfxlm]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.145Z"}
{"level":"debug","message":"Executing query [m8jc95y39elly8bv1x]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.147Z"}
{"level":"debug","message":"Executing query [m8jc95y8o3aavwimv6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:15:09.152Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:09.153Z"}
{"level":"debug","message":"Executing query [m8jc961htw3kdgkxbfm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:15:09.269Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:09.279Z"}
{"level":"debug","message":"Executing query [m8jc961twt9n82tcnkj]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:15:09.281Z"}
{"level":"debug","message":"Executing query [m8jc961v474kj50f9mp]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:15:09.283Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:15:09.284Z"}
{"level":"debug","message":"Executing query [m8jc961xtehxnzgmi1h]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:15:09.285Z"}
{"level":"debug","message":"Executing query [m8jc961y650amunpcuj]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:15:09.286Z"}
{"level":"debug","message":"Executing query [m8jc961zkrvf9orm9r]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:15:09.287Z"}
{"level":"debug","message":"Executing query [m8jc9620zgbhhgggob]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:15:09.288Z"}
{"level":"debug","message":"Executing query [m8jc9625s9pqr4693ar]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[18]","timestamp":"2025-03-21T22:15:09.293Z"}
{"level":"debug","message":"Executing query [m8jc962619ifrw4px0vi]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:15:09.294Z"}
{"level":"debug","message":"Executing query [m8jc9628n0caabqbf39]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",18]","timestamp":"2025-03-21T22:15:09.296Z"}
{"level":"debug","message":"Executing query [m8jc962banzr9p6j15g]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[18]","timestamp":"2025-03-21T22:15:09.299Z"}
{"level":"debug","message":"Executing query [m8jc962dq0lnbj1rde]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[18]","timestamp":"2025-03-21T22:15:09.301Z"}
{"level":"debug","message":"Executing query [m8jc962g0ohfzco43ep9]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[18]","timestamp":"2025-03-21T22:15:09.304Z"}
{"level":"debug","message":"Executing query [m8jc962itczrq0s863r]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:15:09.306Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:09.307Z"}
{"level":"debug","message":"Executing query [m8jc965ho0bsi97rekh]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:15:09.413Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:09.429Z"}
{"level":"debug","message":"Executing query [m8jc965yhv37dign19t]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:15:09.430Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:15:09.432Z"}
{"level":"debug","message":"Executing query [m8jc9660kyrjwukv0nb]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:15:09.432Z"}
{"level":"debug","message":"Executing query [m8jc966146l4wsmmdc8]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:15:09.433Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:15:09.434Z"}
{"level":"debug","message":"Executing query [m8jc96638dwhn0kq6l]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:15:09.435Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:15:09.437Z"}
{"level":"debug","message":"Executing query [m8jc96696f5b30rkv4m]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:15:09.441Z"}
{"level":"debug","message":"Executing query [m8jc966df2ja4y4s9fi]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:15:09.445Z"}
{"level":"debug","message":"Executing query [m8jc966gwafow5a644]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:15:09.448Z"}
{"level":"debug","message":"Executing query [m8jc96a9oh5laqmkb7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:15:09.585Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:09.596Z"}
{"level":"debug","message":"Executing query [m8jc96amilg71ld94h]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595309584\"]","timestamp":"2025-03-21T22:15:09.598Z"}
{"level":"debug","message":"Executing query [m8jc96ani45ztnoqrti]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742595309584\",true]","timestamp":"2025-03-21T22:15:09.599Z"}
{"level":"debug","message":"Executing query [m8jc96arj86pp4zbqt]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.603Z"}
{"level":"debug","message":"Executing query [m8jc96atqf68hwc588g]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595309584\"]","timestamp":"2025-03-21T22:15:09.606Z"}
{"level":"debug","message":"Executing query [m8jc96avumj5sakoprf]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",17]","timestamp":"2025-03-21T22:15:09.607Z"}
{"level":"debug","message":"Executing query [m8jc96aytbv7qar2jvk]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.610Z"}
{"level":"debug","message":"Executing query [m8jc96azt51xdwogg1p]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.611Z"}
{"level":"debug","message":"Executing query [m8jc96b223gwxh5pqd]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.614Z"}
{"level":"debug","message":"Executing query [m8jc96b48vv4r60rlwn]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.616Z"}
{"level":"debug","message":"Executing query [m8jc96b64oxpyagz8t]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.618Z"}
{"level":"debug","message":"Executing query [m8jc96b8b2gs41mombq]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.621Z"}
{"level":"debug","message":"Executing query [m8jc96ba6bwil21unes]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:15:09.622Z"}
{"level":"debug","message":"Executing query [m8jc96bcu5858xnbauo]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:15:09.624Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:09.625Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:09.749Z"}
{"level":"debug","message":"Executing query [m8jc96ewrr5rg2r55z]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:15:09.752Z"}
{"level":"debug","message":"Executing query [m8jc96ex1j4078xsv6c]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:15:09.753Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jc96ex1j4078xsv6c]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:15:09.756Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:09.757Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:15:09.839Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:15:09.840Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:15:09.842Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:15:09.843Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:15:09.844Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:15:09.844Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:15:23.645Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:23.737Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:15:23.754Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:23.792Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:20.732Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:19:20.738Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:20.748Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:19:20.985Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:21.038Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:19:21.052Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:21.082Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:21.874Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:19:21.876Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-21T22:19:21.970Z"}
{"level":"debug","message":"Executing query [m8jcel4k5xgn0h2ni16]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:19:22.100Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:22.109Z"}
{"level":"debug","message":"Executing query [m8jcel4wvh8owt1ezza]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595562099\"]","timestamp":"2025-03-21T22:19:22.112Z"}
{"level":"debug","message":"Executing query [m8jcel4y65decy593j7]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742595562099\",true]","timestamp":"2025-03-21T22:19:22.114Z"}
{"level":"debug","message":"Executing query [m8jcel54zai0jd5fc8j]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.120Z"}
{"level":"debug","message":"Executing query [m8jcel57992dd4po2uf]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595562099\"]","timestamp":"2025-03-21T22:19:22.123Z"}
{"level":"debug","message":"Executing query [m8jcel5aenr7stuoz7k]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",18]","timestamp":"2025-03-21T22:19:22.126Z"}
{"level":"debug","message":"Executing query [m8jcel5ecgrxvl1s92g]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.130Z"}
{"level":"debug","message":"Executing query [m8jcel5j62ro02ayb4q]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.135Z"}
{"level":"debug","message":"Executing query [m8jcel5mcfpq9s3eybo]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.138Z"}
{"level":"debug","message":"Executing query [m8jcel5o20o9izfpk7ti]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.140Z"}
{"level":"debug","message":"Executing query [m8jcel5qo9wrm5a02r]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.142Z"}
{"level":"debug","message":"Executing query [m8jcel5t7p96zk2i3yk]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.145Z"}
{"level":"debug","message":"Executing query [m8jcel5wrxk3xcbs3yo]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:19:22.148Z"}
{"level":"debug","message":"Executing query [m8jcel5xnkqda992nib]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:19:22.149Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:22.150Z"}
{"level":"debug","message":"Executing query [m8jcel8uvp1p0vr4o6]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:19:22.255Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:22.265Z"}
{"level":"debug","message":"Executing query [m8jcel975e24tu7g1js]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:19:22.267Z"}
{"level":"debug","message":"Executing query [m8jcel98hykrv40lhc]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595562254\"]","timestamp":"2025-03-21T22:19:22.268Z"}
{"level":"debug","message":"Executing query [m8jcel990t1rj7xyx23]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742595562254\",\"TEST-OFICIO-1742595562254\",725,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:19:22.269Z"}
{"level":"debug","message":"Executing query [m8jcel9d42x117xrwxd]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.273Z"}
{"level":"debug","message":"Executing query [m8jcel9g0c271txj9lgr]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595562254\"]","timestamp":"2025-03-21T22:19:22.276Z"}
{"level":"debug","message":"Executing query [m8jcel9iz3huo218jt]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",35]","timestamp":"2025-03-21T22:19:22.279Z"}
{"level":"debug","message":"Executing query [m8jcel9lfchrih4ep2b]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.281Z"}
{"level":"debug","message":"Executing query [m8jcel9nzc7epg15hll]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.283Z"}
{"level":"debug","message":"Executing query [m8jcel9qb010us3uo]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.286Z"}
{"level":"debug","message":"Executing query [m8jcel9r06fc4tinxut]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.287Z"}
{"level":"debug","message":"Executing query [m8jcel9uriglw8ks05o]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.290Z"}
{"level":"debug","message":"Executing query [m8jcel9w40lw6pia93]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742595562292\",\"TEST-SP-OFICIO-1742595562292\",8356,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:19:22.292Z"}
{"level":"debug","message":"Executing query [m8jcel9zwt9wbtf06b]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595562292\"]","timestamp":"2025-03-21T22:19:22.295Z"}
{"level":"debug","message":"Executing query [m8jcela0vgtjwqh9hhk]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595562292\"]","timestamp":"2025-03-21T22:19:22.296Z"}
{"level":"debug","message":"Executing query [m8jcela4thd1syf4w1i]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:19:22.300Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:22.301Z"}
{"level":"debug","message":"Executing query [m8jcelcxts99t92av9s]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:19:22.401Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:22.412Z"}
{"level":"debug","message":"Executing query [m8jceldaiyugtqc5tb]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:19:22.414Z"}
{"level":"debug","message":"Executing query [m8jceldc1vc83n76fmx]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595562401\"]","timestamp":"2025-03-21T22:19:22.416Z"}
{"level":"debug","message":"Executing query [m8jceldenh67g4jymt]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742595562401\",\"TEST-OFI-FORENSE-1742595562401\",1487,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742595562401\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:19:22.418Z"}
{"level":"debug","message":"Executing query [m8jceldlx685hgjwt4]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.425Z"}
{"level":"debug","message":"Executing query [m8jceldndh5tsf908t6]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595562401\"]","timestamp":"2025-03-21T22:19:22.427Z"}
{"level":"debug","message":"Executing query [m8jceldqpodqzwn4k3d]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",35]","timestamp":"2025-03-21T22:19:22.430Z"}
{"level":"debug","message":"Executing query [m8jceldtcz4ejpg6fcs]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.433Z"}
{"level":"debug","message":"Executing query [m8jcelduuxlgtalpq69]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.434Z"}
{"level":"debug","message":"Executing query [m8jceldyk0xk0iy080q]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.438Z"}
{"level":"debug","message":"Executing query [m8jcele0gchcts89z2]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.440Z"}
{"level":"debug","message":"Executing query [m8jcele2e37tc57xqlp]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.443Z"}
{"level":"debug","message":"Executing query [m8jcele5iy934ikrkvs]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742595562445\",\"TEST-SP-OFI-FORENSE-1742595562445\",6683,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:19:22.445Z"}
{"level":"debug","message":"Executing query [m8jcele8k8qsjwh1ura]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595562445\"]","timestamp":"2025-03-21T22:19:22.448Z"}
{"level":"debug","message":"Executing query [m8jcele9tfwfuu7se9b]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595562445\"]","timestamp":"2025-03-21T22:19:22.449Z"}
{"level":"debug","message":"Executing query [m8jcelecow4johxev5]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:19:22.452Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:22.453Z"}
{"level":"debug","message":"Executing query [m8jcelh5lutyc75rf9a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:19:22.553Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:22.562Z"}
{"level":"debug","message":"Executing query [m8jcelhf548kw6xa395]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595562553\"]","timestamp":"2025-03-21T22:19:22.563Z"}
{"level":"debug","message":"Executing query [m8jcelhin9dm8nb0hnr]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595562553\"]","timestamp":"2025-03-21T22:19:22.566Z"}
{"level":"debug","message":"Executing query [m8jcelhjp3r2ohp0j1f]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742595562553\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:19:22.567Z"}
{"level":"debug","message":"Executing query [m8jcelhnu6vzabg5p1r]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-21T22:19:22.571Z"}
{"level":"debug","message":"Executing query [m8jcelhprwe8ohr5ql]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595562553\"]","timestamp":"2025-03-21T22:19:22.573Z"}
{"level":"debug","message":"Executing query [m8jcelhq90byjr4sst]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1016]","timestamp":"2025-03-21T22:19:22.574Z"}
{"level":"debug","message":"Executing query [m8jcelhtqla9jca9r8s]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-21T22:19:22.577Z"}
{"level":"debug","message":"Executing query [m8jcelhukgh8tewtthi]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-21T22:19:22.578Z"}
{"level":"debug","message":"Executing query [m8jcelhwrdafm216bf9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-21T22:19:22.581Z"}
{"level":"debug","message":"Executing query [m8jcelhzcu3o9vo7qrl]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-21T22:19:22.583Z"}
{"level":"debug","message":"Executing query [m8jceli0f08j9pwklb8]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-21T22:19:22.584Z"}
{"level":"debug","message":"Executing query [m8jceli3gaddrn6bsd9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-21T22:19:22.587Z"}
{"level":"debug","message":"Executing query [m8jceli5nv9cqqieu5]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:19:22.589Z"}
{"level":"debug","message":"Executing query [m8jceli66g135po6dw]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:19:22.590Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:22.591Z"}
{"level":"debug","message":"Executing query [m8jcelkz4mtdn3g208s]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:19:22.691Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:22.703Z"}
{"level":"debug","message":"Executing query [m8jcellcsi5fo8a2gi8]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:19:22.704Z"}
{"level":"debug","message":"Executing query [m8jcelled7nn0vkjxwh]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:19:22.706Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:19:22.707Z"}
{"level":"debug","message":"Executing query [m8jcellflzhxrie1z7r]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:19:22.707Z"}
{"level":"debug","message":"Executing query [m8jcellhuj8be9p093n]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:19:22.709Z"}
{"level":"debug","message":"Executing query [m8jcelliejoq44d2nhd]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:19:22.710Z"}
{"level":"debug","message":"Executing query [m8jcelljs4m9v6bqpgq]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:19:22.711Z"}
{"level":"debug","message":"Executing query [m8jcellnpzqumho2fg]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[19]","timestamp":"2025-03-21T22:19:22.715Z"}
{"level":"debug","message":"Executing query [m8jcellokbdmuoyl17]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:19:22.716Z"}
{"level":"debug","message":"Executing query [m8jcellqxsrg58vqag]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",19]","timestamp":"2025-03-21T22:19:22.718Z"}
{"level":"debug","message":"Executing query [m8jcelluicmnfqr26ks]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[19]","timestamp":"2025-03-21T22:19:22.722Z"}
{"level":"debug","message":"Executing query [m8jcellvu8egvkahncj]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[19]","timestamp":"2025-03-21T22:19:22.723Z"}
{"level":"debug","message":"Executing query [m8jcellyseos0l6ifpc]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[19]","timestamp":"2025-03-21T22:19:22.726Z"}
{"level":"debug","message":"Executing query [m8jcelm0r0ui7louf2d]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:19:22.728Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:22.729Z"}
{"level":"debug","message":"Executing query [m8jceloqgagi15u726]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:19:22.826Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:22.835Z"}
{"level":"debug","message":"Executing query [m8jcelp02ez42vqy1ec]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:19:22.836Z"}
{"level":"debug","message":"Executing query [m8jcelp2ca77tha6v7u]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595562825\"]","timestamp":"2025-03-21T22:19:22.838Z"}
{"level":"debug","message":"Executing query [m8jcelp3u2hq0wi9epi]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742595562825\",\"TEST-OFI-QUIMICA-1742595562825\",8457,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:19:22.839Z"}
{"level":"debug","message":"Executing query [m8jcelp8j6zmnbl64j]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.845Z"}
{"level":"debug","message":"Executing query [m8jcelpbqtwp9uaiwl9]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595562825\"]","timestamp":"2025-03-21T22:19:22.847Z"}
{"level":"debug","message":"Executing query [m8jcelpdvdxg157ap7e]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",18]","timestamp":"2025-03-21T22:19:22.849Z"}
{"level":"debug","message":"Executing query [m8jcelpgc7bytsu6jh]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.852Z"}
{"level":"debug","message":"Executing query [m8jcelphlu7qg3kaz2]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.853Z"}
{"level":"debug","message":"Executing query [m8jcelpkcd3diysswav]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.856Z"}
{"level":"debug","message":"Executing query [m8jcelpmnxasnzx7c2g]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.858Z"}
{"level":"debug","message":"Executing query [m8jcelppkp1fxkzby5]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.861Z"}
{"level":"debug","message":"Executing query [m8jcelpriwk8cgubiqp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:19:22.863Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:22.864Z"}
{"level":"debug","message":"Executing query [m8jcelshpc6d3ebqwp]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:19:22.961Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:22.973Z"}
{"level":"debug","message":"Executing query [m8jcelsvrynchem243o]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:19:22.975Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:19:22.977Z"}
{"level":"debug","message":"Executing query [m8jcelsygzwrnk848u5]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:19:22.978Z"}
{"level":"debug","message":"Executing query [m8jcelsze1egbzkvluc]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:19:22.979Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:19:22.981Z"}
{"level":"debug","message":"Executing query [m8jcelt1hjfhuzmhjc9]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:19:22.981Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:19:22.983Z"}
{"level":"debug","message":"Executing query [m8jcelt97wil46pw0kf]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:19:22.989Z"}
{"level":"debug","message":"Executing query [m8jceltd8lr69t53iyx]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:19:22.993Z"}
{"level":"debug","message":"Executing query [m8jceltfqaaz6v76zs]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:19:22.995Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:23.123Z"}
{"level":"debug","message":"Executing query [m8jcelx16l1mgx9kbe]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:19:23.126Z"}
{"level":"debug","message":"Executing query [m8jcelx4h506mp177a6]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:19:23.128Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jcelx4h506mp177a6]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:19:23.129Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:23.131Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-21T22:19:23.207Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:19:23.303Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:19:23.304Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:19:23.305Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:19:23.306Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:19:23.306Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:19:23.306Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:21:04.537Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:21:04.540Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:21:04.575Z"}
{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"level":"error","message":"Error al inicializar la base de datos: Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`mesaparteslog`, CONSTRAINT `fk_mesaparteslog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE RESTRICT ON UPDATE CASCADE)","sql":"INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES ('Mesa de Partes Principal', TRUE, 'MP-PRIN')","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`mesaparteslog`, CONSTRAINT `fk_mesaparteslog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE RESTRICT ON UPDATE CASCADE)","sqlState":"23000","stack":"Error: Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`mesaparteslog`, CONSTRAINT `fk_mesaparteslog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE RESTRICT ON UPDATE CASCADE)\n    at PromiseConnection.query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\promise\\connection.js:29:22)\n    at executeQuery (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\utils\\database-helpers.js:46:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async initializeMesaPartes (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\scripts\\init-database.js:134:7)\n    at async initializeDatabase (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\scripts\\init-database.js:277:7)\n    at async initializeDatabaseAndAdmin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\server.js:201:5)\n    at async startServer (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\server.js:236:5)","timestamp":"2025-03-21T22:21:04.746Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:21:04.750Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:21:04.751Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:21:17.562Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:21:17.648Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:21:17.663Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:21:17.695Z"}
{"level":"info","message":"Shutting down gracefully...","timestamp":"2025-03-21T22:21:23.800Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:22:23.389Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:22:23.393Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:22:23.426Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:22:23.689Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:22:23.692Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:22:23.692Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:22:47.065Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:22:47.069Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:22:47.098Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:22:47.279Z"}
{"error":"Expected property name or '}' in JSON at position 1 (line 1 column 2)","level":"error","message":"Error processing request","method":"POST","path":"/api/auth/login","stack":"SyntaxError: Expected property name or '}' in JSON at position 1 (line 1 column 2)\n    at JSON.parse (<anonymous>)\n    at parse (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\json.js:92:19)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\raw-body\\index.js:238:16)\n    at done (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-21T22:22:50.161Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"POST","path":"/api/auth/login","stack":"TypeError: logSecurityEvent is not a function\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\routes\\index.js:70:5\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\routes\\index.js:31:3\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-03-21T22:22:57.428Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:23:29.078Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:23:29.081Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:23:29.108Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:23:29.276Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:23:29.279Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:23:29.279Z"}
{"error":"logger.warn is not a function","level":"error","message":"Error processing request","method":"POST","path":"/api/auth/login","stack":"TypeError: logger.warn is not a function\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\routes\\index.js:70:12\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\routes\\index.js:31:3\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-03-21T22:23:33.572Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:24:13.364Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:24:13.368Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:24:13.404Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:24:13.571Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:24:13.574Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:24:13.574Z"}
{"level":"info","message":"Shutting down gracefully...","timestamp":"2025-03-21T22:24:36.431Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:24:45.044Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:24:45.047Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:24:45.078Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:24:45.253Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:24:45.256Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:24:45.256Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:25:20.525Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:25:20.529Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:25:20.564Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:25:20.747Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:25:20.751Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:25:20.751Z"}
{"level":"info","message":"Shutting down gracefully...","timestamp":"2025-03-21T22:25:33.588Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:25:39.380Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:25:39.384Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:25:39.415Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:25:39.593Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:25:39.596Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:25:39.596Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:26:04.892Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:26:04.896Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:26:04.923Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:26:05.090Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:26:05.093Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:26:05.093Z"}
{"error":"logger.warn is not a function","level":"error","message":"Error processing request","method":"POST","path":"/api/auth/login","stack":"TypeError: logger.warn is not a function\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\routes\\index.js:70:12\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\routes\\index.js:31:3\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-03-21T22:26:11.508Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:26:38.175Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:26:38.179Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:26:38.205Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:26:38.369Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:26:38.372Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:26:38.372Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:26:48.325Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:26:48.329Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:26:48.361Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:26:48.518Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:26:48.522Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:26:48.522Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:26:58.390Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:26:58.393Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:26:58.419Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:26:58.578Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:26:58.581Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:26:58.581Z"}
{"level":"info","message":"Shutting down gracefully...","timestamp":"2025-03-21T22:27:29.312Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:27:34.691Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:27:34.695Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:27:34.723Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:27:34.899Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:27:34.903Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:27:34.903Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:31:03.472Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:31:03.475Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:31:03.506Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:31:03.682Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:31:03.685Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:31:03.686Z"}
{"error":"Content-Security-Policy received a duplicate directive \"script-src\"","level":"error","message":"Error processing request","method":"GET","path":"/api-docs","stack":"Error: Content-Security-Policy received a duplicate directive \"script-src\"\n    at normalizeDirectives (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\helmet\\index.cjs:45:10)\n    at Function.contentSecurityPolicy (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\helmet\\index.cjs:121:31)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\server.js:132:34\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\server.js:117:3\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-03-21T22:31:38.078Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:32:00.967Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:32:00.970Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:32:01.009Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:32:01.192Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:32:39.792Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:32:39.795Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:32:39.826Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:32:39.988Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:32:39.990Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:32:39.991Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:32:57.829Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:32:57.833Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:32:57.863Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:32:58.048Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:32:58.051Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:32:58.052Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:33:00.614Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:33:00.619Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:33:00.649Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:33:00.814Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:33:00.817Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:33:00.817Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:33:47.319Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:33:47.323Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:33:47.354Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:33:47.502Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:33:47.504Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:33:47.505Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:34:17.828Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:34:17.832Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:34:17.868Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:34:18.002Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:34:18.005Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:34:18.005Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:34:22.543Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:34:22.548Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:34:22.588Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:34:22.766Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:34:22.769Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:34:22.770Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:34:33.206Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:34:33.209Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:34:33.242Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:34:33.385Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:34:33.388Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:34:33.388Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:34:51.953Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:34:51.956Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:34:51.984Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:34:52.110Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:34:52.112Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:34:52.113Z"}
{"level":"info","message":"Shutting down gracefully...","timestamp":"2025-03-21T22:34:55.332Z"}
{"level":"debug","message":"Executing query [m8jcysls4hrtcazp4hb]: \n      SELECT \n        u.IDUsuario, u.CodigoCIP, u.Nombres, u.Apellidos, u.Grado,\n        u.PasswordHash, u.IDArea, u.IDRol, u.UltimoAcceso,\n        u.IntentosFallidos, u.Bloqueado, u.UltimoBloqueo,\n        a.NombreArea, r.NombreRol, r.Permisos\n      FROM Usuario u\n      LEFT JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      LEFT JOIN Rol r ON u.IDRol = r.IDRol\n      WHERE u.CodigoCIP = ?\n    ","params":"[\"12345678\"]","timestamp":"2025-03-21T22:35:04.912Z"}
{"level":"debug","message":"Executing query [m8jcyso05blsav70bt7]: \n      UPDATE Usuario \n      SET IntentosFallidos = 0, UltimoAcceso = NOW() \n      WHERE IDUsuario = ?\n    ","params":"[1]","timestamp":"2025-03-21T22:35:04.992Z"}
{"level":"debug","message":"Executing query [m8jcyso90ausb76q9wts]: \n      INSERT INTO Session (\n        IDUsuario, SessionToken, FechaInicio, \n        UltimoAcceso, Expiracion, IPOrigen\n      ) VALUES (?, ?, NOW(), NOW(), ?, ?)\n    ","params":"[1,\"bdb60f52fc2c1934f1aa6398400ce98eeb3c40b344c91163db4be3630eb2b2eae98660f97372d34c\",\"2025-03-28T22:35:05.001Z\",null]","timestamp":"2025-03-21T22:35:05.001Z"}
{"codigoCIP":"12345678","error":"logSecurityEvent is not a function","level":"error","message":"Error en autenticación","stack":"TypeError: logSecurityEvent is not a function\n    at Object.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\services\\auth\\auth.service.js:167:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\controllers\\auth.controller.js:30:26)","timestamp":"2025-03-21T22:35:05.005Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error en autenticación","stack":"TypeError: logSecurityEvent is not a function\n    at exports.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\controllers\\auth.controller.js:42:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-21T22:35:05.006Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:35:46.888Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:35:46.891Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:35:46.918Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:35:47.053Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:35:47.056Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:35:47.057Z"}
{"level":"debug","message":"Executing query [m8jczxp7r399c95odbk]: \n      SELECT \n        u.IDUsuario, u.CodigoCIP, u.Nombres, u.Apellidos, u.Grado,\n        u.PasswordHash, u.IDArea, u.IDRol, u.UltimoAcceso,\n        u.IntentosFallidos, u.Bloqueado, u.UltimoBloqueo,\n        a.NombreArea, r.NombreRol, r.Permisos\n      FROM Usuario u\n      LEFT JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      LEFT JOIN Rol r ON u.IDRol = r.IDRol\n      WHERE u.CodigoCIP = ?\n    ","params":"[\"12345678\"]","timestamp":"2025-03-21T22:35:58.172Z"}
{"level":"debug","message":"Executing query [m8jczxrav2bmnrucxhh]: \n      UPDATE Usuario \n      SET IntentosFallidos = 0, UltimoAcceso = NOW() \n      WHERE IDUsuario = ?\n    ","params":"[1]","timestamp":"2025-03-21T22:35:58.247Z"}
{"level":"debug","message":"Executing query [m8jczxrkbfobf1nntw5]: \n      INSERT INTO Session (\n        IDUsuario, SessionToken, FechaInicio, \n        UltimoAcceso, Expiracion, IPOrigen\n      ) VALUES (?, ?, NOW(), NOW(), ?, ?)\n    ","params":"[1,\"505a89223d7910c092e1895e88183635e4c759695d99f9793c2e6661b7271948e59237b3b326b004\",\"2025-03-28T22:35:58.256Z\",null]","timestamp":"2025-03-21T22:35:58.256Z"}
{"codigoCIP":"12345678","error":"logSecurityEvent is not a function","level":"error","message":"Error en autenticación","stack":"TypeError: logSecurityEvent is not a function\n    at Object.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\services\\auth\\auth.service.js:167:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\controllers\\auth.controller.js:30:26)","timestamp":"2025-03-21T22:35:58.259Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error en autenticación","stack":"TypeError: logSecurityEvent is not a function\n    at exports.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\controllers\\auth.controller.js:42:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-21T22:35:58.260Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:37:09.948Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:37:09.952Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:37:09.990Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:37:10.167Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:37:10.170Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:37:10.171Z"}
{"level":"debug","message":"Executing query [m8jd1i724tylgy3iidp]: \n      SELECT \n        u.IDUsuario, u.CodigoCIP, u.Nombres, u.Apellidos, u.Grado,\n        u.PasswordHash, u.IDArea, u.IDRol, u.UltimoAcceso,\n        u.IntentosFallidos, u.Bloqueado, u.UltimoBloqueo,\n        a.NombreArea, r.NombreRol, r.Permisos\n      FROM Usuario u\n      LEFT JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      LEFT JOIN Rol r ON u.IDRol = r.IDRol\n      WHERE u.CodigoCIP = ?\n    ","params":"[\"12345678\"]","timestamp":"2025-03-21T22:37:11.390Z"}
{"level":"debug","message":"Executing query [m8jd1i96i1rwgadzjcm]: \n      UPDATE Usuario \n      SET IntentosFallidos = 0, UltimoAcceso = NOW() \n      WHERE IDUsuario = ?\n    ","params":"[1]","timestamp":"2025-03-21T22:37:11.466Z"}
{"level":"debug","message":"Executing query [m8jd1i9d494bytrnob6]: \n      INSERT INTO Session (\n        IDUsuario, SessionToken, FechaInicio, \n        UltimoAcceso, Expiracion, IPOrigen\n      ) VALUES (?, ?, NOW(), NOW(), ?, ?)\n    ","params":"[1,\"d64ed3f3fc21551ac22bf92480a66f70df13ce8cc746200a59a05c6382e12cc04bc47b10ba1dae10\",\"2025-03-28T22:37:11.473Z\",null]","timestamp":"2025-03-21T22:37:11.473Z"}
{"codigoCIP":"12345678","error":"logSecurityEvent is not a function","level":"error","message":"Error en autenticación","stack":"TypeError: logSecurityEvent is not a function\n    at Object.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\services\\auth\\auth.service.js:167:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\controllers\\auth.controller.js:30:26)","timestamp":"2025-03-21T22:37:11.478Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error en autenticación","stack":"TypeError: logSecurityEvent is not a function\n    at exports.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\controllers\\auth.controller.js:42:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-21T22:37:11.479Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:37:55.910Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:37:55.914Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:37:55.950Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:37:58.527Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:37:58.530Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:37:58.560Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:37:58.725Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:37:58.728Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:37:58.728Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:38:25.831Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:38:25.834Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:38:25.864Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:38:26.025Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:38:26.028Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:38:26.028Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:38:53.898Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:39:17.956Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:39:17.960Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:39:17.986Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:39:18.152Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:39:18.155Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:39:18.155Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:39:41.363Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:39:41.366Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:39:41.403Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:39:41.557Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:39:41.560Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:39:41.560Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:40:34.465Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:40:34.469Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:40:34.497Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:40:34.670Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:40:34.673Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:40:34.673Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:40:51.348Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:40:51.352Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:40:51.382Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:40:51.548Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:40:51.551Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:40:51.551Z"}
