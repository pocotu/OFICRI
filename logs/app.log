{"level":"info","message":"Servidor corriendo en puerto 3001","timestamp":"2025-03-21T04:55:39.121Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T04:55:39.163Z"}
{"level":"info","message":"Servidor corriendo en puerto 3001","timestamp":"2025-03-21T04:56:02.423Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T04:56:02.483Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T04:59:50.785Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-21T04:59:50.883Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-21T04:59:50.893Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:85:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:238:16)\n    at done (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-21T04:59:50.911Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:85:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:238:16)\n    at done (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-21T04:59:50.927Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-21T04:59:51.000Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-21T04:59:51.014Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:85:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:238:16)\n    at done (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-21T04:59:51.022Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-21T04:59:51.030Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-21T04:59:51.041Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:39:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\validator.js:228:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\types\\urlencoded.js:85:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\body-parser\\lib\\read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:238:16)\n    at done (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-21T04:59:51.056Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T04:59:51.428Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:00:22.800Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:00:22.896Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:01:22.732Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:01:22.741Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:02:05.878Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:02:05.887Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:04:28.062Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:04:28.073Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:04:29.058Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:04:29.081Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:04:29.949Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:04:29.953Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:06:13.712Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:06:13.721Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:06:14.440Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:06:14.449Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:06:14.592Z"}
{"level":"debug","message":"Executing query [m8ibhz9hbg35vwee8g9]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T05:06:14.597Z"}
{"level":"debug","message":"Executing query [m8ibhz9j64ewixy2d4h]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T05:06:14.599Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8ibhz9j64ewixy2d4h]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T05:06:14.604Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:06:14.606Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T05:06:14.695Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T05:06:14.697Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T05:06:14.698Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T05:06:14.699Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T05:06:14.700Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T05:06:14.700Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:06:15.387Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:06:15.390Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:07:19.441Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:07:19.450Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:07:20.184Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:07:20.193Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:07:20.910Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:07:20.913Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:07:21.071Z"}
{"level":"debug","message":"Executing query [m8ibjek1iyfgv5c2crh]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T05:07:21.074Z"}
{"level":"debug","message":"Executing query [m8ibjek330m2ymaospv]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T05:07:21.075Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8ibjek330m2ymaospv]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T05:07:21.078Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:07:21.080Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T05:07:21.166Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T05:07:21.166Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T05:07:21.167Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T05:07:21.167Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T05:07:21.168Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T05:07:21.168Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:08:01.261Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:08:01.287Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:08:01.967Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:08:01.976Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:08:02.621Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:08:02.623Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:08:02.755Z"}
{"level":"debug","message":"Executing query [m8ibkapzrkn7c7e7cnn]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T05:08:02.759Z"}
{"level":"debug","message":"Executing query [m8ibkaq2uxo0bindgc]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T05:08:02.762Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8ibkaq2uxo0bindgc]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T05:08:02.765Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:08:02.767Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T05:08:02.848Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T05:08:02.849Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T05:08:02.849Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T05:08:02.850Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T05:08:02.851Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T05:08:02.851Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:09:40.561Z"}
{"level":"debug","message":"Executing query [m8ibme6xfzfai3szyi]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T05:09:40.569Z"}
{"level":"debug","message":"Executing query [m8ibme6zsy6pds5gb3]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T05:09:40.571Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8ibme6zsy6pds5gb3]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T05:09:40.575Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:09:40.577Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:09:55.924Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:09:55.959Z"}
{"level":"debug","message":"Executing query [m8ibz8ztd8wxv9cid7r]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 1","params":"[]","timestamp":"2025-03-21T05:19:40.362Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:19:40.392Z"}
{"level":"debug","message":"Executing query [m8ibz90yg2x7dkkxg]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea) VALUES (1, \"Área de Prueba\", \"TEST-AREA\", \"OTRO\")","params":"[]","timestamp":"2025-03-21T05:19:40.402Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`arealog`, CONSTRAINT `fk_arealog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE RESTRICT ON UPDATE CASCADE)","level":"error","message":"Database query error [m8ibz90yg2x7dkkxg]","params":"[]","query":"INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea) VALUES (1, \"Área de Prueba\", \"TEST-AREA\", \"OTRO\")","timestamp":"2025-03-21T05:19:40.418Z"}
{"error":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"message":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`arealog`, CONSTRAINT `fk_arealog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE RESTRICT ON UPDATE CASCADE)","queryId":"m8ibz90yg2x7dkkxg","sql":"INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea) VALUES (1, \"Área de Prueba\", \"TEST-AREA\", \"OTRO\")","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`arealog`, CONSTRAINT `fk_arealog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE RESTRICT ON UPDATE CASCADE)","sqlState":"23000"},"level":"error","message":"Error en la configuración inicial de pruebas de Usuario","timestamp":"2025-03-21T05:19:40.419Z"}
{"level":"debug","message":"Executing query [m8ibz91hcmvrlu0lpvv]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:19:40.421Z"}
{"level":"debug","message":"Executing query [m8ibz91u1qf72plnqeq]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"General\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",1,1]","timestamp":"2025-03-21T05:19:40.434Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuario`, CONSTRAINT `fk_usuario_area` FOREIGN KEY (`IDArea`) REFERENCES `areaespecializada` (`IDArea`) ON DELETE RESTRICT ON UPDATE CASCADE)","level":"error","message":"Database query error [m8ibz91u1qf72plnqeq]","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"General\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",1,1]","query":"INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","timestamp":"2025-03-21T05:19:40.437Z"}
{"level":"debug","message":"Executing query [m8ibz928y3luyjkjzr]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:19:40.448Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:19:40.457Z"}
{"level":"debug","message":"Executing query [m8ic2gez88brn8hgvxe]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:22:09.948Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:22:09.989Z"}
{"level":"info","message":"No se encontraron áreas en la base de datos. Se requiere al menos un área para las pruebas.","timestamp":"2025-03-21T05:22:09.996Z"}
{"level":"debug","message":"Executing query [m8ic2ggexqdm4l355tg]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:22:09.998Z"}
{"level":"debug","message":"Executing query [m8ic2ggig4dtht3juc8]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"General\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",null,null]","timestamp":"2025-03-21T05:22:10.002Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDArea' cannot be null","level":"error","message":"Database query error [m8ic2ggig4dtht3juc8]","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"General\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",null,null]","query":"INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","timestamp":"2025-03-21T05:22:10.004Z"}
{"level":"debug","message":"Executing query [m8ic2ggr9pjvpwdeqf8]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:22:10.011Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:22:10.021Z"}
{"level":"debug","message":"Executing query [m8ic9a1jianouxqgxm]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:27:28.279Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:27:28.311Z"}
{"level":"debug","message":"Executing query [m8ic9a2j7x6cvcij8l]: SELECT IDRol FROM Rol LIMIT 1","params":"[]","timestamp":"2025-03-21T05:27:28.315Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:27:28.320Z"}
{"level":"debug","message":"Executing query [m8ic9a2rrsmyylho04p]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:27:28.323Z"}
{"level":"debug","message":"Executing query [m8ic9a2us1lgsuiyxol]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"General\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:27:28.326Z"}
{"level":"debug","message":"Executing query [m8ic9a33td293ot3cii]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1000]","timestamp":"2025-03-21T05:27:28.335Z"}
{"level":"debug","message":"Executing query [m8ic9a36c3zd50cni3g]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:27:28.338Z"}
{"level":"debug","message":"Executing query [m8ic9a39rclp9x5jukr]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1000]","timestamp":"2025-03-21T05:27:28.341Z"}
{"level":"debug","message":"Executing query [m8ic9a3k130ec7g4as4n]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1000]","timestamp":"2025-03-21T05:27:28.352Z"}
{"level":"debug","message":"Executing query [m8ic9a3npsgr953zr8]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1000]","timestamp":"2025-03-21T05:27:28.355Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","level":"error","message":"Database query error [m8ic9a3npsgr953zr8]","params":"[1000]","query":"DELETE FROM Usuario WHERE IDUsuario = ?","timestamp":"2025-03-21T05:27:28.361Z"}
{"level":"error","message":"Error al eliminar usuario: Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","timestamp":"2025-03-21T05:27:28.362Z"}
{"level":"debug","message":"Executing query [m8ic9a3y8xhy97day66]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1000]","timestamp":"2025-03-21T05:27:28.366Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","level":"error","message":"Database query error [m8ic9a3y8xhy97day66]","params":"[1000]","query":"DELETE FROM Usuario WHERE IDUsuario = ?","timestamp":"2025-03-21T05:27:28.369Z"}
{"error":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"message":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","queryId":"m8ic9a3y8xhy97day66","sql":"DELETE FROM Usuario WHERE IDUsuario = 1000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","sqlState":"23000"},"level":"error","message":"Error al limpiar pruebas de Usuario","timestamp":"2025-03-21T05:27:28.370Z"}
{"level":"debug","message":"Executing query [m8icbqyzcnaf0pt2w3]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:29:23.531Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:29:23.570Z"}
{"level":"debug","message":"Executing query [m8icbr07ezsptpky4s6]: SELECT IDRol FROM Rol LIMIT 1","params":"[]","timestamp":"2025-03-21T05:29:23.575Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:29:23.579Z"}
{"level":"debug","message":"Executing query [m8icbr0d7xlqomk06mu]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:29:23.581Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","level":"error","message":"Database query error [m8icbr0d7xlqomk06mu]","params":"[\"TEST123456\"]","query":"DELETE FROM Usuario WHERE CodigoCIP = ?","timestamp":"2025-03-21T05:29:23.590Z"}
{"level":"error","message":"Error al crear usuario: Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","timestamp":"2025-03-21T05:29:23.591Z"}
{"level":"debug","message":"Executing query [m8icbr0uvocw182xk8]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:29:23.598Z"}
{"level":"error","message":"Error al obtener usuario por CIP: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mnull\u001b[39m\nReceived: \u001b[31m1000\u001b[39m","timestamp":"2025-03-21T05:29:23.603Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:29:23.608Z"}
{"level":"debug","message":"Executing query [m8iccya1nfv3g40tgs]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:30:19.658Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:30:19.706Z"}
{"level":"debug","message":"Executing query [m8iccybjfxj99c6od0e]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:30:19.711Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:30:19.715Z"}
{"level":"debug","message":"Executing query [m8iccybodgzsfp9gb8o]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:19.716Z"}
{"level":"debug","message":"Executing query [m8iccybuq3cy7fzu7ds]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:19.722Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","level":"error","message":"Database query error [m8iccybuq3cy7fzu7ds]","params":"[\"TEST123456\"]","query":"DELETE FROM Usuario WHERE CodigoCIP = ?","timestamp":"2025-03-21T05:30:19.726Z"}
{"level":"debug","message":"Error al limpiar datos previos: Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","timestamp":"2025-03-21T05:30:19.727Z"}
{"level":"debug","message":"Executing query [m8iccyc18mq8dea6d62]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:19.729Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","level":"error","message":"Database query error [m8iccyc18mq8dea6d62]","params":"[\"TEST123456\"]","query":"DELETE FROM Usuario WHERE CodigoCIP = ?","timestamp":"2025-03-21T05:30:19.733Z"}
{"level":"error","message":"Error al crear usuario: Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`usuariolog`, CONSTRAINT `fk_usuariolog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE CASCADE ON UPDATE CASCADE)","timestamp":"2025-03-21T05:30:19.734Z"}
{"level":"debug","message":"Executing query [m8iccycdx9z1zrwjcf9]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:19.741Z"}
{"level":"error","message":"Error al obtener usuario por CIP: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mnull\u001b[39m\nReceived: \u001b[31m1000\u001b[39m","timestamp":"2025-03-21T05:30:19.746Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:30:19.750Z"}
{"level":"debug","message":"Executing query [m8icdquluv1yjxrx6ls]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:30:56.686Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:30:56.729Z"}
{"level":"debug","message":"Executing query [m8icdqvvsgo2iw73bs8]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:30:56.731Z"}
{"level":"debug","message":"Executing query [m8icdqvztot4uz8hu2r]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:30:56.735Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:30:56.737Z"}
{"level":"debug","message":"Executing query [m8icdqw2q7ihorul6a]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:56.738Z"}
{"level":"debug","message":"Executing query [m8icdqw51x8thv2y5iji]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:56.741Z"}
{"level":"debug","message":"Executing query [m8icdqwdstvgl37n4l]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:56.749Z"}
{"level":"debug","message":"Executing query [m8icdqwe93zcbjeapco]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:30:56.750Z"}
{"level":"debug","message":"Executing query [m8icdqwog1l9oia4719]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1001]","timestamp":"2025-03-21T05:30:56.760Z"}
{"level":"debug","message":"Executing query [m8icdqwtexpl215hrxl]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:30:56.765Z"}
{"level":"debug","message":"Executing query [m8icdqwwq9p02q86r]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1001]","timestamp":"2025-03-21T05:30:56.768Z"}
{"level":"debug","message":"Executing query [m8icdqx0wz1xsnnrtz]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1001]","timestamp":"2025-03-21T05:30:56.772Z"}
{"level":"debug","message":"Executing query [m8icdqx31w0nap2nhfe]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1001]","timestamp":"2025-03-21T05:30:56.775Z"}
{"level":"debug","message":"Executing query [m8icdqx6uzt5995sc5]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1001]","timestamp":"2025-03-21T05:30:56.778Z"}
{"level":"debug","message":"Executing query [m8icdqx9tisoiqzgx4]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:30:56.781Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:30:56.783Z"}
{"level":"debug","message":"Executing query [m8iceuwfm855p1c911j]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:31:48.591Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:31:48.636Z"}
{"level":"debug","message":"Executing query [m8iceuxu85mr8eq8nh7]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:31:48.642Z"}
{"level":"debug","message":"Executing query [m8iceuxy7toa1oqu8q6]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T05:31:48.646Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T05:31:48.648Z"}
{"level":"debug","message":"Executing query [m8iceuy18ezlbvbcpx6]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T05:31:48.649Z"}
{"level":"debug","message":"Executing query [m8iceuy3elieu7jh05a]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:31:48.651Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T05:31:48.654Z"}
{"level":"debug","message":"Executing query [m8iceuyg2qigv080dvt]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T05:31:48.664Z"}
{"level":"debug","message":"Executing query [m8iceuyl6bv8cmc9vy6]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T05:31:48.669Z"}
{"level":"debug","message":"Executing query [m8iceuyouvirpzrk32]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[999]","timestamp":"2025-03-21T05:31:48.672Z"}
{"level":"debug","message":"Executing query [m8iceuys0zj4q4vvvcsp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:31:48.676Z"}
{"level":"debug","message":"Executing query [m8icev41251ei1u514u]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:31:48.865Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:31:48.876Z"}
{"level":"debug","message":"Executing query [m8icev4fylxi7tci9rq]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:31:48.879Z"}
{"level":"debug","message":"Executing query [m8icev4hx3ohxe2r0jb]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:31:48.881Z"}
{"level":"debug","message":"Executing query [m8icev4jc232kkwqbfm]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:31:48.883Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:31:48.885Z"}
{"level":"debug","message":"Executing query [m8icev4nbbgszpywcdv]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535108864\"]","timestamp":"2025-03-21T05:31:48.887Z"}
{"level":"debug","message":"Executing query [m8icev4p6ohx6bgm8du]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535108864\",\"TEST-OFI-1742535108864\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:31:48.889Z"}
{"level":"debug","message":"Executing query [m8icev4wmlmxagfiqrn]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1000]","timestamp":"2025-03-21T05:31:48.896Z"}
{"level":"debug","message":"Executing query [m8icev50wabwp11u6vq]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535108864\"]","timestamp":"2025-03-21T05:31:48.900Z"}
{"level":"debug","message":"Executing query [m8icev52oii5rkgk13n]: UPDATE Documento SET Estado = ?, Observaciones = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1000]","timestamp":"2025-03-21T05:31:48.902Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8icev52oii5rkgk13n]","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1000]","query":"UPDATE Documento SET Estado = ?, Observaciones = ? WHERE IDDocumento = ?","timestamp":"2025-03-21T05:31:48.905Z"}
{"level":"debug","message":"Executing query [m8icev58lbxvajwxsp]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:31:48.908Z"}
{"level":"debug","message":"Executing query [m8icev5hwatuig4dwia]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1000]","timestamp":"2025-03-21T05:31:48.917Z"}
{"level":"debug","message":"Executing query [m8icev5mrrysf7q163]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1000]","timestamp":"2025-03-21T05:31:48.922Z"}
{"level":"debug","message":"Executing query [m8icev5pe2xd8qfcwfr]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1000]","timestamp":"2025-03-21T05:31:48.926Z"}
{"level":"debug","message":"Executing query [m8icev5r22yfawbxqtm]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:31:48.927Z"}
{"level":"debug","message":"Executing query [m8icev5t9bdonzvnyfk]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:31:48.929Z"}
{"level":"debug","message":"Executing query [m8icev5vu3vxvb8r8hh]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:31:48.931Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:31:48.933Z"}
{"level":"debug","message":"Executing query [m8iceva276d5xi06saf]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:31:49.083Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:31:49.100Z"}
{"level":"debug","message":"Executing query [m8icevalk51k94utu8c]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535109081\"]","timestamp":"2025-03-21T05:31:49.101Z"}
{"level":"debug","message":"Executing query [m8icevaodp1egmoy4tc]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535109081\"]","timestamp":"2025-03-21T05:31:49.104Z"}
{"level":"debug","message":"Executing query [m8icevaqrabsbwdnbvi]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742535109081\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:31:49.106Z"}
{"level":"debug","message":"Executing query [m8icevavfh626tayls8]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T05:31:49.111Z"}
{"level":"debug","message":"Executing query [m8icevaxtv9tun4iv5c]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535109081\"]","timestamp":"2025-03-21T05:31:49.113Z"}
{"level":"debug","message":"Executing query [m8icevaz9qaftti1cu4]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1000]","timestamp":"2025-03-21T05:31:49.115Z"}
{"level":"debug","message":"Executing query [m8icevb3cppxf66z2kf]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T05:31:49.119Z"}
{"level":"debug","message":"Executing query [m8icevb5c9j0nfprjy4]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T05:31:49.121Z"}
{"level":"debug","message":"Executing query [m8icevb8eyk23s25bfn]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T05:31:49.124Z"}
{"level":"debug","message":"Executing query [m8icevbaxxexc39hqh]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T05:31:49.126Z"}
{"level":"debug","message":"Executing query [m8icevbc11uw269bme1o]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T05:31:49.128Z"}
{"level":"debug","message":"Executing query [m8icevbfsxe9vvg7aw]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T05:31:49.131Z"}
{"level":"debug","message":"Executing query [m8icevbifqz0w0qiqof]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:31:49.134Z"}
{"level":"debug","message":"Executing query [m8icevbjl86ngzf9rue]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:31:49.135Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:31:49.137Z"}
{"level":"debug","message":"Executing query [m8icevf9xroizr3gpw]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:31:49.269Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:31:49.293Z"}
{"level":"debug","message":"Executing query [m8icevg26l6rc8svoss]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:31:49.298Z"}
{"level":"debug","message":"Executing query [m8icevg4hmxu1cgllnf]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:31:49.300Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:31:49.302Z"}
{"level":"debug","message":"Executing query [m8icevg6gyqg5tt805]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:31:49.302Z"}
{"level":"debug","message":"Executing query [m8icevg88v43pc6vitl]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:31:49.304Z"}
{"level":"debug","message":"Executing query [m8icevgat44n6pxc2j]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:31:49.306Z"}
{"level":"debug","message":"Executing query [m8icevgdvvou84ghde]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:31:49.309Z"}
{"level":"debug","message":"Executing query [m8icevgi53zbqkz4sey]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1002]","timestamp":"2025-03-21T05:31:49.315Z"}
{"level":"debug","message":"Executing query [m8icevgm7onve6odoso]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:31:49.318Z"}
{"level":"debug","message":"Executing query [m8icevgph86o0uzu8ta]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1002]","timestamp":"2025-03-21T05:31:49.321Z"}
{"level":"debug","message":"Executing query [m8icevgtf4cgben666o]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1002]","timestamp":"2025-03-21T05:31:49.325Z"}
{"level":"debug","message":"Executing query [m8icevgvqo8a4p0jfmd]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1002]","timestamp":"2025-03-21T05:31:49.327Z"}
{"level":"debug","message":"Executing query [m8icevgy99tthghryv7]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1002]","timestamp":"2025-03-21T05:31:49.330Z"}
{"level":"debug","message":"Executing query [m8icevh12joesltfecz]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:31:49.333Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:31:49.334Z"}
{"level":"debug","message":"Executing query [m8icglpckxvfz56uhnk]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:33:09.985Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:33:10.032Z"}
{"level":"debug","message":"Executing query [m8icglqr26xxljk5hmn]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:33:10.035Z"}
{"level":"debug","message":"Executing query [m8icglqvey37j13aov7]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:33:10.039Z"}
{"level":"debug","message":"Executing query [m8icglqxdikz20pmdot]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:33:10.041Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:33:10.043Z"}
{"level":"debug","message":"Executing query [m8icglr3zbjh1atu449]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535189981\"]","timestamp":"2025-03-21T05:33:10.047Z"}
{"level":"debug","message":"Executing query [m8icglr595giy7bchga]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535189981\",\"TEST-OFI-1742535189981\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:33:10.049Z"}
{"level":"debug","message":"Executing query [m8icglrfiswriauu4sm]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1001]","timestamp":"2025-03-21T05:33:10.059Z"}
{"level":"debug","message":"Executing query [m8icglrjxkz4864bbm]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535189981\"]","timestamp":"2025-03-21T05:33:10.064Z"}
{"level":"debug","message":"Executing query [m8icglrquwi5im7f76]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuario = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1001]","timestamp":"2025-03-21T05:33:10.070Z"}
{"code":"ER_BAD_FIELD_ERROR","error":"Unknown column 'IDUsuario' in 'field list'","level":"error","message":"Database query error [m8icglrquwi5im7f76]","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1001]","query":"UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuario = ? WHERE IDDocumento = ?","timestamp":"2025-03-21T05:33:10.072Z"}
{"level":"debug","message":"Executing query [m8icglrwzwlszvj6wus]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:33:10.076Z"}
{"level":"debug","message":"Executing query [m8icglsena1np2sp20l]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1001]","timestamp":"2025-03-21T05:33:10.094Z"}
{"level":"debug","message":"Executing query [m8icglsgtla5uyspnvh]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1001]","timestamp":"2025-03-21T05:33:10.096Z"}
{"level":"debug","message":"Executing query [m8icglskrm0apkup5s]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1001]","timestamp":"2025-03-21T05:33:10.100Z"}
{"level":"debug","message":"Executing query [m8icglsmnt2yrrjce8]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:33:10.102Z"}
{"level":"debug","message":"Executing query [m8icglsoyj8vt3hav5]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:33:10.104Z"}
{"level":"debug","message":"Executing query [m8icglsqb3ulopj2gh]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:33:10.106Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:33:10.108Z"}
{"level":"debug","message":"Executing query [m8ichex7mo3am4up58f]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:33:47.852Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:33:47.899Z"}
{"level":"debug","message":"Executing query [m8icheymh5vcpslavgw]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:33:47.902Z"}
{"level":"debug","message":"Executing query [m8icheypxifiwzwzkch]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:33:47.905Z"}
{"level":"debug","message":"Executing query [m8icheysq8u24mubm1]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:33:47.908Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:33:47.911Z"}
{"level":"debug","message":"Executing query [m8icheyxu1abncqwd0a]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535227848\"]","timestamp":"2025-03-21T05:33:47.913Z"}
{"level":"debug","message":"Executing query [m8ichez00lmjw95oygc]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535227848\",\"TEST-OFI-1742535227848\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:33:47.916Z"}
{"level":"debug","message":"Executing query [m8ichez9vbkclto9tyf]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1002]","timestamp":"2025-03-21T05:33:47.925Z"}
{"level":"debug","message":"Executing query [m8ichezdcy96fyt1od7]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535227848\"]","timestamp":"2025-03-21T05:33:47.929Z"}
{"level":"debug","message":"Executing query [m8ichezgcjdvdh1aplf]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1002]","timestamp":"2025-03-21T05:33:47.932Z"}
{"level":"debug","message":"Executing query [m8ichezmi4lcm9fgi9b]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1002]","timestamp":"2025-03-21T05:33:47.939Z"}
{"level":"debug","message":"Executing query [m8ichezq6x9hxrpyws]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:33:47.942Z"}
{"level":"debug","message":"Executing query [m8ichf0akfuf8bhs7n]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1002]","timestamp":"2025-03-21T05:33:47.962Z"}
{"level":"debug","message":"Executing query [m8ichf0c7igf1sgiry5]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1002]","timestamp":"2025-03-21T05:33:47.964Z"}
{"level":"debug","message":"Executing query [m8ichf0gjkc0kxldwjc]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1002]","timestamp":"2025-03-21T05:33:47.968Z"}
{"level":"debug","message":"Executing query [m8ichf0ipawkwmo9rcr]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:33:47.970Z"}
{"level":"debug","message":"Executing query [m8ichf0lo685qzzr0x]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:33:47.973Z"}
{"level":"debug","message":"Executing query [m8ichf0nxn5rdomyogf]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:33:47.975Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:33:47.977Z"}
{"level":"debug","message":"Executing query [m8ichq8suek1d1q3k3a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:02.525Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:02.574Z"}
{"level":"debug","message":"Executing query [m8ichqa9kaq4x29pjbi]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:02.577Z"}
{"level":"debug","message":"Executing query [m8ichqag7mt672ug2cl]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T05:34:02.584Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T05:34:02.588Z"}
{"level":"debug","message":"Executing query [m8ichqall4jfxv2k4v8]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T05:34:02.589Z"}
{"level":"debug","message":"Executing query [m8ichqanz7wteuu2ygn]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:02.591Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T05:34:02.593Z"}
{"level":"debug","message":"Executing query [m8ichqb0vsovjdy5nx]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T05:34:02.604Z"}
{"level":"debug","message":"Executing query [m8ichqb48xz4o7gxmx6]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T05:34:02.608Z"}
{"level":"debug","message":"Executing query [m8ichqb7jh1um5o8oo]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:02.611Z"}
{"level":"debug","message":"Executing query [m8icib7l65zm883utc7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:29.698Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:29.758Z"}
{"level":"debug","message":"Executing query [m8icib9gtzucbpun6k]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:29.764Z"}
{"level":"debug","message":"Executing query [m8icib9lzao2kqdgx0r]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T05:34:29.769Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T05:34:29.771Z"}
{"level":"debug","message":"Executing query [m8icib9oewexqx73y04]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T05:34:29.772Z"}
{"level":"debug","message":"Executing query [m8icib9qsa66k6xj0d]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:29.774Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T05:34:29.777Z"}
{"level":"debug","message":"Executing query [m8icibagi4r8s0jfqg]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T05:34:29.800Z"}
{"level":"debug","message":"Executing query [m8icibalc3z53qdhq8u]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T05:34:29.805Z"}
{"level":"debug","message":"Executing query [m8icibaoj5clx096sm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:29.808Z"}
{"level":"debug","message":"Executing query [m8icibf5c46mxxk007b]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:29.969Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:29.983Z"}
{"level":"debug","message":"Executing query [m8icibfl6hkm51b4sw]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:29.985Z"}
{"level":"debug","message":"Executing query [m8icibfmwi6p0nvgvkh]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:29.986Z"}
{"level":"debug","message":"Executing query [m8icibfnpq6wjguuytj]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:29.987Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:34:29.988Z"}
{"level":"debug","message":"Executing query [m8icibfpy8njbygx9h]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535269968\"]","timestamp":"2025-03-21T05:34:29.989Z"}
{"level":"debug","message":"Executing query [m8icibfqnn8c1z8p28d]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535269968\",\"TEST-OFI-1742535269968\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:34:29.990Z"}
{"level":"debug","message":"Executing query [m8icibfxdpmnzxyckqt]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1003]","timestamp":"2025-03-21T05:34:29.997Z"}
{"level":"debug","message":"Executing query [m8icibg00hlpotmjwqxc]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535269968\"]","timestamp":"2025-03-21T05:34:30.000Z"}
{"level":"debug","message":"Executing query [m8icibg28m04tdm96t6]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1003]","timestamp":"2025-03-21T05:34:30.003Z"}
{"level":"debug","message":"Executing query [m8icibgabbxyl7av6br]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.010Z"}
{"level":"debug","message":"Executing query [m8icibgedrbon144qbs]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:34:30.014Z"}
{"level":"debug","message":"Executing query [m8icibgit67r4m6c7pj]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.018Z"}
{"level":"debug","message":"Executing query [m8icibgk5ty1zn82fhq]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.020Z"}
{"level":"debug","message":"Executing query [m8icibgnvktdx6lj2ic]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.023Z"}
{"level":"debug","message":"Executing query [m8icibgok248snkkx0r]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:34:30.024Z"}
{"level":"debug","message":"Executing query [m8icibgqz3fmps66ea]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:34:30.026Z"}
{"level":"debug","message":"Executing query [m8icibgt7cge7ptqk28]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:30.029Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:30.031Z"}
{"level":"debug","message":"Executing query [m8icibldhjv53e2rhpr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:30.193Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:30.212Z"}
{"level":"debug","message":"Executing query [m8iciblynqpahj7zbe]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:34:30.214Z"}
{"level":"debug","message":"Executing query [m8icibm0gvac7t9uyk]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:34:30.216Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:34:30.219Z"}
{"level":"debug","message":"Executing query [m8icibm4xahtpq9przs]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:30.220Z"}
{"level":"debug","message":"Executing query [m8icibm6ljg73kcu9e]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:30.222Z"}
{"level":"debug","message":"Executing query [m8icibm769bkfew8i6f]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:30.223Z"}
{"level":"debug","message":"Executing query [m8icibm9zfnwxoyrz7]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:34:30.225Z"}
{"level":"debug","message":"Executing query [m8icibmhd9ddw84119]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.233Z"}
{"level":"debug","message":"Executing query [m8icibmm4ern7z7dv9m]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:30.238Z"}
{"level":"debug","message":"Executing query [m8icibmoz6nj8zxbn9]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1003]","timestamp":"2025-03-21T05:34:30.240Z"}
{"level":"debug","message":"Executing query [m8icibmt28gssxjmpck]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.245Z"}
{"level":"debug","message":"Executing query [m8icibmxt671cgw7e2d]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.249Z"}
{"level":"debug","message":"Executing query [m8icibn0hzf1wd5v1n]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1003]","timestamp":"2025-03-21T05:34:30.253Z"}
{"level":"debug","message":"Executing query [m8icibn2vjf7cbikxy]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:30.254Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:30.256Z"}
{"level":"debug","message":"Executing query [m8icibr631binudo9e4]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:30.402Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:30.423Z"}
{"level":"debug","message":"Executing query [m8icibrtd03m0mi5xfa]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535270401\"]","timestamp":"2025-03-21T05:34:30.425Z"}
{"level":"debug","message":"Executing query [m8icibrwc70hxyrcoeb]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535270401\"]","timestamp":"2025-03-21T05:34:30.428Z"}
{"level":"debug","message":"Executing query [m8icibrxc15h0wfxubt]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742535270401\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:34:30.429Z"}
{"level":"debug","message":"Executing query [m8icibs5znh0vyjtu2n]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T05:34:30.437Z"}
{"level":"debug","message":"Executing query [m8icibs711z3n9my176f]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535270401\"]","timestamp":"2025-03-21T05:34:30.439Z"}
{"level":"debug","message":"Executing query [m8icibs9av7hds3syhr]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1001]","timestamp":"2025-03-21T05:34:30.441Z"}
{"level":"debug","message":"Executing query [m8icibsddfm8qfz76gf]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T05:34:30.445Z"}
{"level":"debug","message":"Executing query [m8icibsf3chsj7soxmh]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T05:34:30.447Z"}
{"level":"debug","message":"Executing query [m8icibsjn3kobiz6ws]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T05:34:30.451Z"}
{"level":"debug","message":"Executing query [m8icibslqcm7863dwkj]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T05:34:30.453Z"}
{"level":"debug","message":"Executing query [m8icibsmwwodo1iark]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T05:34:30.454Z"}
{"level":"debug","message":"Executing query [m8icibsp41q69v6mhfd]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T05:34:30.457Z"}
{"level":"debug","message":"Executing query [m8icibsrgl5z73g0tbw]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:34:30.459Z"}
{"level":"debug","message":"Executing query [m8icibstnkwyg10p6t]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:30.461Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:30.462Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:45.081Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:45.121Z"}
{"level":"debug","message":"Executing query [m8icin8p17vc1jzpjy2]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:45.289Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:45.306Z"}
{"level":"debug","message":"Executing query [m8icin98yau93kz533]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:45.308Z"}
{"level":"debug","message":"Executing query [m8icin9czk8ar6u1av]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T05:34:45.312Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T05:34:45.315Z"}
{"level":"debug","message":"Executing query [m8icin9g9semdoxwywt]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T05:34:45.316Z"}
{"level":"debug","message":"Executing query [m8icin9kxbitfygwq]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:45.320Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T05:34:45.322Z"}
{"level":"debug","message":"Executing query [m8icin9rojab4ouz5t]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T05:34:45.327Z"}
{"level":"debug","message":"Executing query [m8icin9wx6qybwcecfa]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T05:34:45.332Z"}
{"level":"debug","message":"Executing query [m8icin9ztu39jjb7ar]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:45.335Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:46.200Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:46.223Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:47.190Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:34:47.193Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:47.351Z"}
{"level":"debug","message":"Executing query [m8iciou3kvb4qo9md8p]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T05:34:47.355Z"}
{"level":"debug","message":"Executing query [m8iciou8id81gwthyj]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T05:34:47.360Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8iciou8id81gwthyj]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T05:34:47.363Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:47.365Z"}
{"level":"debug","message":"Executing query [m8icioxyaaeoscyyxhq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:47.494Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:47.505Z"}
{"level":"debug","message":"Executing query [m8icioyago54h2onbs]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:34:47.506Z"}
{"level":"debug","message":"Executing query [m8icioydpzxwzyik2i8]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:34:47.509Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:34:47.510Z"}
{"level":"debug","message":"Executing query [m8icioyfkmruelmoxef]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:47.511Z"}
{"level":"debug","message":"Executing query [m8icioyhl3q323adidc]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:47.513Z"}
{"level":"debug","message":"Executing query [m8icioyjkcih1u2jkjo]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:47.515Z"}
{"level":"debug","message":"Executing query [m8icioyluh4k9w6xxa8]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:34:47.517Z"}
{"level":"debug","message":"Executing query [m8icioytf24e28ygy2]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.525Z"}
{"level":"debug","message":"Executing query [m8icioyw57fpp5tnoj]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:34:47.528Z"}
{"level":"debug","message":"Executing query [m8icioyznp53uaztvn]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1004]","timestamp":"2025-03-21T05:34:47.531Z"}
{"level":"debug","message":"Executing query [m8icioz3uf1gpvxug6r]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.535Z"}
{"level":"debug","message":"Executing query [m8icioz6g82kr8tipja]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.538Z"}
{"level":"debug","message":"Executing query [m8iciozaqlji2zxzioe]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.542Z"}
{"level":"debug","message":"Executing query [m8iciozchrltguikqt]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:47.544Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:47.546Z"}
{"level":"debug","message":"Executing query [m8icip3jxs1i71o3d5r]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:47.695Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:47.709Z"}
{"level":"debug","message":"Executing query [m8icip3z4lnyzopfrhl]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:47.711Z"}
{"level":"debug","message":"Executing query [m8icip426lq2342v5jk]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:47.714Z"}
{"level":"debug","message":"Executing query [m8icip457ttz7hqlkbg]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:34:47.717Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:34:47.719Z"}
{"level":"debug","message":"Executing query [m8icip48xqf6jpiupq]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535287694\"]","timestamp":"2025-03-21T05:34:47.720Z"}
{"level":"debug","message":"Executing query [m8icip495fdedoricd5]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535287694\",\"TEST-OFI-1742535287694\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:34:47.721Z"}
{"level":"debug","message":"Executing query [m8icip4da37htmzkwc6]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.725Z"}
{"level":"debug","message":"Executing query [m8icip4jsiq2q5etej]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535287694\"]","timestamp":"2025-03-21T05:34:47.731Z"}
{"level":"debug","message":"Executing query [m8icip4m3khrql1carz]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1004]","timestamp":"2025-03-21T05:34:47.734Z"}
{"level":"debug","message":"Executing query [m8icip4rrtnpdbqfgvq]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.739Z"}
{"level":"debug","message":"Executing query [m8icip4v16rmoi72sbo]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:34:47.743Z"}
{"level":"debug","message":"Executing query [m8icip514x9jweqmm56]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.749Z"}
{"level":"debug","message":"Executing query [m8icip53ix7qvy87kdk]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.751Z"}
{"level":"debug","message":"Executing query [m8icip57aka0ulte435]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1004]","timestamp":"2025-03-21T05:34:47.755Z"}
{"level":"debug","message":"Executing query [m8icip5asy2h7zhp1hf]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:34:47.758Z"}
{"level":"debug","message":"Executing query [m8icip5gi8jpp7d0bc]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:34:47.764Z"}
{"level":"debug","message":"Executing query [m8icip5jd8xhygj5uae]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:47.767Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:47.769Z"}
{"level":"debug","message":"Executing query [m8icipa1z8f1cdpvtn]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:34:47.929Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:34:47.941Z"}
{"level":"debug","message":"Executing query [m8icipagtej5uiohsm]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535287928\"]","timestamp":"2025-03-21T05:34:47.944Z"}
{"level":"debug","message":"Executing query [m8icipajw8mtw60jtl]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535287928\"]","timestamp":"2025-03-21T05:34:47.947Z"}
{"level":"debug","message":"Executing query [m8icipak1pcxqg6eb7gi]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742535287928\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:34:47.948Z"}
{"level":"debug","message":"Executing query [m8icipart67vkbk0ckl]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T05:34:47.955Z"}
{"level":"debug","message":"Executing query [m8icipawbaua7ff02d]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535287928\"]","timestamp":"2025-03-21T05:34:47.960Z"}
{"level":"debug","message":"Executing query [m8icipazpjq30qu1e6]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1002]","timestamp":"2025-03-21T05:34:47.963Z"}
{"level":"debug","message":"Executing query [m8icipb4d6rxxrc2oga]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T05:34:47.968Z"}
{"level":"debug","message":"Executing query [m8icipb7mzv365k8qcd]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T05:34:47.971Z"}
{"level":"debug","message":"Executing query [m8icipbe44comm441vn]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T05:34:47.978Z"}
{"level":"debug","message":"Executing query [m8icipbgchnb8q4lq7]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T05:34:47.980Z"}
{"level":"debug","message":"Executing query [m8icipbkqhy60cm5sgl]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T05:34:47.984Z"}
{"level":"debug","message":"Executing query [m8icipboe9zrmbe1m5v]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T05:34:47.988Z"}
{"level":"debug","message":"Executing query [m8icipbq9k8kpb9bbz5]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:34:47.990Z"}
{"level":"debug","message":"Executing query [m8icipbsov7bntyj0v]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:34:47.992Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:34:47.993Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T05:34:48.101Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T05:34:48.102Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T05:34:48.103Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T05:34:48.104Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T05:34:48.105Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T05:34:48.105Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T05:35:47.585Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T05:35:47.595Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T05:35:47.596Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T05:35:47.597Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T05:35:47.598Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T05:35:47.598Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Executing query [m8icjzgqab5348pzv7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:35:47.786Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:35:47.845Z"}
{"level":"debug","message":"Executing query [m8icjzhx7sy0pux1wze]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:35:47.830Z"}
{"level":"debug","message":"Executing query [m8icjzikppgbikc70x]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:35:47.852Z"}
{"level":"debug","message":"Executing query [m8icjzipkrrvxemnso]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:35:47.857Z"}
{"level":"debug","message":"Executing query [m8icjziu7ja7k0t15js]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:35:47.862Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:35:47.865Z"}
{"level":"debug","message":"Executing query [m8icjzjcq9lk14fhhz]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535347780\"]","timestamp":"2025-03-21T05:35:47.880Z"}
{"level":"debug","message":"Executing query [m8icjziu7l32z5s27qv]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:35:47.863Z"}
{"level":"debug","message":"Executing query [m8icjzivjxy12ehv3n]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:35:47.864Z"}
{"level":"debug","message":"Executing query [m8icjzjh9l13weqr34u]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535347780\",\"TEST-OFI-1742535347780\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:35:47.885Z"}
{"level":"debug","message":"Executing query [m8icjzjqxtdp39xtt3h]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1005]","timestamp":"2025-03-21T05:35:47.894Z"}
{"level":"debug","message":"Executing query [m8icjzjx3dnjykdyfz3]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535347780\"]","timestamp":"2025-03-21T05:35:47.901Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:35:47.900Z"}
{"level":"debug","message":"Executing query [m8icjzk11324vqd1frbo]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1005]","timestamp":"2025-03-21T05:35:47.905Z"}
{"level":"debug","message":"Executing query [m8icjzkb1lk4jvhnxtb]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1005]","timestamp":"2025-03-21T05:35:47.915Z"}
{"level":"debug","message":"Executing query [m8icjzk68hqzsix80f3]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535347826\"]","timestamp":"2025-03-21T05:35:47.910Z"}
{"level":"debug","message":"Executing query [m8icjzkjfn395vjam8d]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:35:47.923Z"}
{"level":"debug","message":"Executing query [m8icjzkqdwb0zt05eg]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535347826\"]","timestamp":"2025-03-21T05:35:47.930Z"}
{"level":"debug","message":"Executing query [m8icjzksbmdb5hevrxc]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742535347826\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:35:47.932Z"}
{"level":"debug","message":"Executing query [m8icjzl1py8kic22na]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T05:35:47.942Z"}
{"level":"debug","message":"Executing query [m8icjzl7uw9e9fvdkvo]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535347826\"]","timestamp":"2025-03-21T05:35:47.947Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:35:47.955Z"}
{"level":"debug","message":"Executing query [m8icjzlixugqs3bcjtg]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1003]","timestamp":"2025-03-21T05:35:47.959Z"}
{"level":"debug","message":"Executing query [m8icjzlnnyjbhu4ibnq]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T05:35:47.963Z"}
{"level":"debug","message":"Executing query [m8icjzlnzgibaj8l63h]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:35:47.963Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:35:47.963Z"}
{"level":"debug","message":"Executing query [m8icjzlrabdlgvam2at]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T05:35:47.967Z"}
{"level":"debug","message":"Executing query [m8icjzlt0t3p1470bxbf]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T05:35:47.969Z"}
{"level":"debug","message":"Executing query [m8icjzlv6r8dzoktuj3]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:35:47.971Z"}
{"level":"debug","message":"Executing query [m8icjzlw14utwkh916sj]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T05:35:47.972Z"}
{"level":"debug","message":"Executing query [m8icjzlwk9ulxbc608a]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T05:35:47.972Z"}
{"level":"debug","message":"Executing query [m8icjzlyxzgu205xqk]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:35:47.975Z"}
{"level":"debug","message":"Executing query [m8icjzm2ct76f7f1ob]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:35:47.978Z"}
{"level":"info","message":"Usando Mesa ID: 999, Áreas ID: 999/1003, Usuarios ID: 998/999, Documento ID: 1005","timestamp":"2025-03-21T05:35:47.979Z"}
{"level":"debug","message":"Executing query [m8icjzlzddlbdpainjm]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T05:35:47.975Z"}
{"level":"debug","message":"Executing query [m8icjzm5c96ea5hxmw]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T05:35:47.981Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:35:47.982Z"}
{"level":"debug","message":"Executing query [m8icjzm7c90xb1hwcyw]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:35:47.983Z"}
{"level":"debug","message":"Executing query [m8icjzm9os3dcfxcmv8]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:35:47.985Z"}
{"level":"debug","message":"Executing query [m8icjzmb3wszfmw7i93]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T05:35:47.987Z"}
{"level":"debug","message":"Executing query [m8icjzmdoiaq21uak6]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:35:47.989Z"}
{"level":"debug","message":"Executing query [m8icjzmgkojnyd1h6d]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:35:47.992Z"}
{"level":"debug","message":"Executing query [m8icjzmj5podpcox0do]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1005]","timestamp":"2025-03-21T05:35:47.995Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:35:47.990Z"}
{"level":"debug","message":"Executing query [m8icjzmi01fv6kcaau47]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[1005,999,1003]","timestamp":"2025-03-21T05:35:47.994Z"}
{"level":"debug","message":"Executing query [m8icjzmmiecpj8kdn3f]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1005]","timestamp":"2025-03-21T05:35:47.998Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:35:47.995Z"}
{"level":"debug","message":"Executing query [m8icjzmn1j4tdx7lp4u]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1005,999,999,1003,998,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-21T05:35:47.999Z"}
{"level":"debug","message":"Executing query [m8icjzmtuvkcnq3z8wa]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T05:35:48.005Z"}
{"level":"debug","message":"Executing query [m8icjzmvg26q2gtobtq]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:35:48.007Z"}
{"level":"debug","message":"Executing query [m8icjzn113iz6s798gm]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-21T05:35:48.013Z"}
{"level":"debug","message":"Executing query [m8icjzmxlh21vbsyd8p]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:35:48.009Z"}
{"level":"debug","message":"Executing query [m8icjzn6izyg8orxzf]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T05:35:48.018Z"}
{"level":"debug","message":"Executing query [m8icjzn9mdbf2hqpgp]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-21 05:35:48\",999,1]","timestamp":"2025-03-21T05:35:48.021Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8icjzn6izyg8orxzf]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T05:35:48.023Z"}
{"level":"debug","message":"Executing query [m8icjznb134ndqgvsjjd]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1005]","timestamp":"2025-03-21T05:35:48.023Z"}
{"level":"debug","message":"Executing query [m8icjzngyv3hwbtvqz]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-21T05:35:48.028Z"}
{"level":"debug","message":"Executing query [m8icjznh3b1apdptlt3]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:35:48.029Z"}
{"level":"debug","message":"Executing query [m8icjznl7fvvnbknmyc]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T05:35:48.033Z"}
{"level":"debug","message":"Executing query [m8icjznpm0fn75k99]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[1003]","timestamp":"2025-03-21T05:35:48.037Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:35:48.028Z"}
{"level":"debug","message":"Executing query [m8icjznr5nf2sbsts4j]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1005]","timestamp":"2025-03-21T05:35:48.039Z"}
{"level":"debug","message":"Executing query [m8icjznsd679y2xy327]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-21T05:35:48.040Z"}
{"level":"debug","message":"Executing query [m8icjzntgubs24bn9in]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1005]","timestamp":"2025-03-21T05:35:48.041Z"}
{"level":"debug","message":"Executing query [m8icjznvzp6d6pis8q]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:35:48.043Z"}
{"level":"debug","message":"Executing query [m8icjznv3xxri380suy]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1005]","timestamp":"2025-03-21T05:35:48.044Z"}
{"level":"debug","message":"Executing query [m8icjznybitnbx7e9ou]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:35:48.046Z"}
{"level":"debug","message":"Executing query [m8icjznyou7zljd5hz]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-21T05:35:48.046Z"}
{"level":"debug","message":"Executing query [m8icjzo168sm37lwcss]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:35:48.049Z"}
{"level":"debug","message":"Executing query [m8icjzo1hxk1350n4c9]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1005]","timestamp":"2025-03-21T05:35:48.049Z"}
{"level":"debug","message":"Executing query [m8icjzoh1c0yookvxn8]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1005]","timestamp":"2025-03-21T05:35:48.066Z"}
{"level":"debug","message":"Executing query [m8icjzo1m853a1yk23h]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1005]","timestamp":"2025-03-21T05:35:48.049Z"}
{"level":"debug","message":"Executing query [m8icjzo2j9j9oudrhwn]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:35:48.050Z"}
{"level":"debug","message":"Executing query [m8icjzok0b6afbmxkild]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:35:48.068Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:35:48.052Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:35:48.070Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:35:50.839Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:35:50.838Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:35:50.856Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T05:35:50.843Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:35:50.885Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:35:50.949Z"}
{"level":"debug","message":"Executing query [m8ics4ep3e5yqsu3g4e]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.442Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.504Z"}
{"level":"debug","message":"Executing query [m8ics4gk8hp8wl70y5]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.508Z"}
{"level":"debug","message":"Executing query [m8ics4gwg72mk95kdwq]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.520Z"}
{"level":"debug","message":"Executing query [m8ics4h0u0p4enqmf6]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.524Z"}
{"level":"debug","message":"Executing query [m8ics4ggjazsfoeiwu]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.506Z"}
{"level":"debug","message":"Executing query [m8ics4h24nttmihmt5d]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.526Z"}
{"level":"debug","message":"Executing query [m8ics4h4dp1qti48nbq]: INSERT INTO Documento (\n            IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n            NroRegistro, NumeroOficioDocumento, FechaDocumento, \n            OrigenDocumento, Estado, Observaciones\n          ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-ARCHIVO-1742535727528\",\"TEST-OFI-ARCHIVO-1742535727528\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento para pruebas de archivo\"]","timestamp":"2025-03-21T05:42:07.528Z"}
{"level":"debug","message":"Executing query [m8ics4goc97kdar16pc]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.513Z"}
{"level":"debug","message":"Executing query [m8ics4gwm7z5uh750p]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.521Z"}
{"level":"info","message":"Documento de prueba creado con ID: 1006","timestamp":"2025-03-21T05:42:07.535Z"}
{"level":"debug","message":"Executing query [m8ics4h5a5cayi3s9ev]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.531Z"}
{"level":"debug","message":"Executing query [m8ics4hpgbo4gdn4nj]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/documento_1742535727438.pdf\"]","timestamp":"2025-03-21T05:42:07.549Z"}
{"level":"debug","message":"Executing query [m8ics4hub5dj689o6id]: INSERT INTO DocumentoArchivo (\n          IDDocumento, TipoArchivo, RutaArchivo, FechaSubida, Observaciones\n        ) VALUES (?, ?, ?, CURRENT_TIMESTAMP, ?)","params":"[1006,\"PDF\",\"/uploads/test/documento_1742535727438.pdf\",\"Archivo creado para pruebas automatizadas\"]","timestamp":"2025-03-21T05:42:07.554Z"}
{"level":"debug","message":"Executing query [m8ics4i4x5qbvgplw7k]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.564Z"}
{"level":"debug","message":"Executing query [m8ics4hlx2mcezf4xhd]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742535727523\"]","timestamp":"2025-03-21T05:42:07.546Z"}
{"level":"debug","message":"Executing query [m8ics4i9qjohri9fgq]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[1006]","timestamp":"2025-03-21T05:42:07.569Z"}
{"level":"debug","message":"Executing query [m8ics4ihzioblz8ypff]: UPDATE DocumentoArchivo SET Observaciones = ? WHERE IDArchivo = ?","params":"[\"Observaciones actualizadas para pruebas\",1]","timestamp":"2025-03-21T05:42:07.577Z"}
{"level":"debug","message":"Executing query [m8ics4hpjw9pircjn1a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.552Z"}
{"level":"debug","message":"Executing query [m8ics4inptvn82ptdff]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.584Z"}
{"level":"debug","message":"Executing query [m8ics4ir6tgq3k3nchx]: DELETE FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.587Z"}
{"level":"debug","message":"Executing query [m8ics4iwrtgiifuq4e]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.592Z"}
{"level":"debug","message":"Executing query [m8ics4iyhkhrfv9jer]: CALL sp_subir_archivo_documento(?, ?, ?, ?)","params":"[1006,\"IMAGEN\",\"/uploads/test/imagen_1742535727594.jpg\",\"Archivo creado usando el procedimiento almacenado\"]","timestamp":"2025-03-21T05:42:07.594Z"}
{"level":"debug","message":"Executing query [m8ics4j4sa6akz4rgtj]: SELECT * FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742535727594.jpg\"]","timestamp":"2025-03-21T05:42:07.600Z"}
{"level":"debug","message":"Executing query [m8ics4j6gvi1rgozg7b]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742535727594.jpg\"]","timestamp":"2025-03-21T05:42:07.602Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.591Z"}
{"level":"debug","message":"Executing query [m8ics4j3jbi65e3b3fl]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.599Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.601Z"}
{"level":"debug","message":"Executing query [m8ics4imemnoqhym86r]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.591Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.598Z"}
{"level":"debug","message":"Executing query [m8ics4j6f254bbeob15]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.603Z"}
{"level":"debug","message":"Executing query [m8ics4janqpss7qw5r]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.606Z"}
{"level":"debug","message":"Executing query [m8ics4j9r3gsymxyet]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.605Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.608Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.612Z"}
{"level":"debug","message":"Executing query [m8ics4jo9lypljmb01a]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742535727523\",true]","timestamp":"2025-03-21T05:42:07.620Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.618Z"}
{"level":"debug","message":"Executing query [m8ics4jtb4k04kioqc7]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.625Z"}
{"code":"ER_NO_REFERENCED_ROW_2","error":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`mesaparteslog`, CONSTRAINT `fk_mesaparteslog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE RESTRICT ON UPDATE CASCADE)","level":"error","message":"Database query error [m8ics4jo9lypljmb01a]","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742535727523\",true]","query":"INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","timestamp":"2025-03-21T05:42:07.627Z"}
{"level":"debug","message":"Executing query [m8ics4jwky5jn7qpyq]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742535727515\"]","timestamp":"2025-03-21T05:42:07.628Z"}
{"level":"debug","message":"Executing query [m8ics4jw0h0zoxa5myo]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742535727500\"]","timestamp":"2025-03-21T05:42:07.628Z"}
{"level":"debug","message":"Executing query [m8ics4jyzl0ui55xc3s]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.630Z"}
{"level":"debug","message":"Executing query [m8ics4k1es8vpue22q4]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-FORENSE-1742535727515\",\"TEST-OFI-FORENSE-1742535727515\",7911,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742535727515\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:42:07.633Z"}
{"level":"debug","message":"Executing query [m8ics4k1sm4i1a5x5w]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742535727509\"]","timestamp":"2025-03-21T05:42:07.633Z"}
{"level":"debug","message":"Executing query [m8ics4k1u50ioafgmum]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.633Z"}
{"level":"debug","message":"Executing query [m8ics4k3ok151jh9o6o]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-QUIMICA-1742535727500\",\"TEST-OFI-QUIMICA-1742535727500\",5530,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:42:07.636Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:42:07.636Z"}
{"level":"debug","message":"Executing query [m8ics4k4bygo7rrzaj]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742535727523\"]","timestamp":"2025-03-21T05:42:07.636Z"}
{"level":"debug","message":"Executing query [m8ics4k9p6zvxe5b3c]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-DOSAJE-1742535727509\",\"TEST-OFICIO-1742535727509\",9323,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:42:07.642Z"}
{"level":"debug","message":"Executing query [m8ics4kbh4gnejh9oh]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.643Z"}
{"level":"debug","message":"Executing query [m8ics4kc9g7q360msxa]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.644Z"}
{"level":"debug","message":"Executing query [m8ics4kdnuusyhviqe]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:42:07.645Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.647Z"}
{"level":"debug","message":"Executing query [m8ics4khfgmbiwdo82g]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742535727515\"]","timestamp":"2025-03-21T05:42:07.649Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.652Z"}
{"level":"debug","message":"Executing query [m8ics4klht1hccgi2r5]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742535727500\"]","timestamp":"2025-03-21T05:42:07.653Z"}
{"level":"debug","message":"Executing query [m8ics4kmgvdrfuggpkq]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.654Z"}
{"level":"debug","message":"Executing query [m8ics4kncyivl6c9s4r]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",1]","timestamp":"2025-03-21T05:42:07.656Z"}
{"level":"debug","message":"Executing query [m8ics4kpf9x0ck95pzn]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:42:07.657Z"}
{"level":"debug","message":"Executing query [m8ics4kpqe63slwb52r]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",1]","timestamp":"2025-03-21T05:42:07.657Z"}
{"level":"debug","message":"Executing query [m8ics4ktz3iko8z7j9l]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.661Z"}
{"level":"debug","message":"Executing query [m8ics4ktbnyk6nhmapq]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742535727509\"]","timestamp":"2025-03-21T05:42:07.662Z"}
{"level":"debug","message":"Executing query [m8ics4kuesnhwf3utpo]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:42:07.662Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:42:07.666Z"}
{"level":"debug","message":"Executing query [m8ics4ky10g3ehv5dugg]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.666Z"}
{"level":"debug","message":"Executing query [m8ics4kzww8hgs20ohn]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.667Z"}
{"level":"debug","message":"Executing query [m8ics4kzmiawrszp0go]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:42:07.667Z"}
{"level":"debug","message":"Executing query [m8ics4l19qttix0iet]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:42:07.669Z"}
{"level":"debug","message":"Executing query [m8ics4l2wm29ihah6be]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",1]","timestamp":"2025-03-21T05:42:07.670Z"}
{"level":"debug","message":"Executing query [m8ics4l3p6va679ox1p]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.671Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.669Z"}
{"level":"debug","message":"Executing query [m8ics4l5td1dqm3lm1p]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.673Z"}
{"level":"debug","message":"Executing query [m8ics4l8v15c2lmvge]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.677Z"}
{"level":"debug","message":"Executing query [m8ics4l96hdcipt9d5]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.677Z"}
{"level":"debug","message":"Executing query [m8ics4l77ynk4defkjb]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.675Z"}
{"level":"debug","message":"Executing query [m8ics4lc2xgkg7yests]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.680Z"}
{"level":"debug","message":"Executing query [m8ics4lcl4wn3gmahx]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.680Z"}
{"level":"debug","message":"Executing query [m8ics4lj8o34qlvlcri]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.687Z"}
{"level":"debug","message":"Executing query [m8ics4lkfbw3o2rdbav]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.689Z"}
{"level":"debug","message":"Executing query [m8ics4l65b077k0d37p]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535727520\"]","timestamp":"2025-03-21T05:42:07.674Z"}
{"level":"debug","message":"Executing query [m8ics4lg4una1sewrix]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535727520\",\"TEST-OFI-1742535727520\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:42:07.684Z"}
{"level":"debug","message":"Executing query [m8ics4llbe5igaa9x9v]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.689Z"}
{"level":"debug","message":"Executing query [m8ics4lmlgf2z12uydd]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-FORENSE-1742535727690\",\"TEST-SP-OFI-FORENSE-1742535727690\",1765,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T05:42:07.690Z"}
{"level":"debug","message":"Executing query [m8ics4ln2n69dwut17j]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.691Z"}
{"level":"debug","message":"Executing query [m8ics4lpj54yf79b1c]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.693Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.694Z"}
{"level":"debug","message":"Executing query [m8ics4lro4cwd5q88xn]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:42:07.695Z"}
{"level":"debug","message":"Executing query [m8ics4ltx4sucssrlkh]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:42:07.697Z"}
{"level":"debug","message":"Executing query [m8ics4ltvhvqwrtu54p]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742535727690\"]","timestamp":"2025-03-21T05:42:07.697Z"}
{"level":"debug","message":"Executing query [m8ics4lv15p77s0zjwb]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742535727690\"]","timestamp":"2025-03-21T05:42:07.699Z"}
{"level":"debug","message":"Executing query [m8ics4lub2dg1q2l8p7]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T05:42:07.698Z"}
{"level":"debug","message":"Executing query [m8ics4lx0ndo8bumuuio]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-DOSAJE-1742535727701\",\"TEST-SP-OFICIO-1742535727701\",81,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T05:42:07.701Z"}
{"level":"debug","message":"Executing query [m8ics4m1kxp9tm3f0qh]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1007]","timestamp":"2025-03-21T05:42:07.705Z"}
{"level":"debug","message":"Executing query [m8ics4m2b34cbpvsdvi]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.706Z"}
{"level":"debug","message":"Executing query [m8ics4m31ykqz0ay9tp]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742535727701\"]","timestamp":"2025-03-21T05:42:07.707Z"}
{"level":"debug","message":"Executing query [m8ics4ls3rpny0m60jr]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.696Z"}
{"level":"debug","message":"Executing query [m8ics4m2ill3qukdxzq]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T05:42:07.706Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.709Z"}
{"level":"debug","message":"Executing query [m8ics4m52jfcpdewen3]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1006]","timestamp":"2025-03-21T05:42:07.709Z"}
{"level":"debug","message":"Executing query [m8ics4m524m7lj6agps]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742535727701\"]","timestamp":"2025-03-21T05:42:07.709Z"}
{"level":"debug","message":"Executing query [m8ics4madfnfn0hux5r]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.714Z"}
{"level":"debug","message":"Executing query [m8ics4mc50olohvy75]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:42:07.716Z"}
{"level":"debug","message":"Executing query [m8ics4mgolo1j39jnwe]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1006]","timestamp":"2025-03-21T05:42:07.720Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.721Z"}
{"level":"debug","message":"Executing query [m8ics4m8ansde3vs7x6]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535727520\"]","timestamp":"2025-03-21T05:42:07.712Z"}
{"level":"debug","message":"Executing query [m8ics4mms6twgl68r57]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1006]","timestamp":"2025-03-21T05:42:07.726Z"}
{"level":"debug","message":"Executing query [m8ics4mld7662nlfwj6]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1007]","timestamp":"2025-03-21T05:42:07.725Z"}
{"level":"debug","message":"Executing query [m8ics4mo775na7xiftd]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1006]","timestamp":"2025-03-21T05:42:07.729Z"}
{"level":"debug","message":"Executing query [m8ics4mqa26kvk2jcab]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1007]","timestamp":"2025-03-21T05:42:07.730Z"}
{"level":"debug","message":"Executing query [m8ics4msyvh66chrce]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1006]","timestamp":"2025-03-21T05:42:07.732Z"}
{"level":"debug","message":"Executing query [m8ics4m2rn8in806zu]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:07.708Z"}
{"level":"debug","message":"Executing query [m8ics4mthiui09v32m4]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:42:07.733Z"}
{"level":"debug","message":"Executing query [m8ics4mv60thilj76gk]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.735Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.736Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:07.769Z"}
{"level":"debug","message":"Executing query [m8ics4nvnj4rsjr6f4j]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535727701\"]","timestamp":"2025-03-21T05:42:07.771Z"}
{"level":"debug","message":"Executing query [m8ics4o4ym1vr0ehjeq]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1007]","timestamp":"2025-03-21T05:42:07.780Z"}
{"level":"debug","message":"Executing query [m8ics4o6thyskt5kzhb]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1007]","timestamp":"2025-03-21T05:42:07.783Z"}
{"level":"debug","message":"Executing query [m8ics4o91lzwuwmn9vg]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535727701\"]","timestamp":"2025-03-21T05:42:07.785Z"}
{"level":"debug","message":"Executing query [m8ics4oavnar3mg3mua]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1007]","timestamp":"2025-03-21T05:42:07.786Z"}
{"level":"debug","message":"Executing query [m8ics4oaodae5pyfya9]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742535727701\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:42:07.787Z"}
{"level":"debug","message":"Executing query [m8ics4ocxc599e38m9]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:42:07.788Z"}
{"level":"debug","message":"Executing query [m8ics4od47bzmdxrawg]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:42:07.789Z"}
{"level":"debug","message":"Executing query [m8ics4oecr7p6fxytv5]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.790Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.791Z"}
{"level":"debug","message":"Executing query [m8ics4og9fwf7yxcx8e]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T05:42:07.792Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T05:42:07.709Z"}
{"level":"debug","message":"Executing query [m8ics4m5m96mbarq7l]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T05:42:07.709Z"}
{"level":"debug","message":"Executing query [m8ics4m8ie3vc9klz9e]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:07.712Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T05:42:07.720Z"}
{"level":"debug","message":"Executing query [m8ics4oha0aoizn8zkl]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T05:42:07.793Z"}
{"level":"debug","message":"Executing query [m8ics4ojeo1rywicmdi]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535727701\"]","timestamp":"2025-03-21T05:42:07.795Z"}
{"level":"debug","message":"Executing query [m8ics4opr2oaakuum7g]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1004]","timestamp":"2025-03-21T05:42:07.801Z"}
{"level":"debug","message":"Executing query [m8ics4opl2izmghoo3s]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T05:42:07.802Z"}
{"level":"debug","message":"Executing query [m8ics4orioi0ohtwzo]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1006]","timestamp":"2025-03-21T05:42:07.803Z"}
{"level":"debug","message":"Executing query [m8ics4oscg5fnux3b9f]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T05:42:07.804Z"}
{"level":"debug","message":"Executing query [m8ics4ourcpwcvefm1f]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.806Z"}
{"level":"debug","message":"Executing query [m8ics4ouiqeq84mej18]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T05:42:07.807Z"}
{"level":"debug","message":"Executing query [m8ics4oytofnru7hvk]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T05:42:07.810Z"}
{"level":"debug","message":"Executing query [m8ics4p0rqjsiudgwuh]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T05:42:07.813Z"}
{"level":"debug","message":"Executing query [m8ics4p2vm9n8bxwsv]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T05:42:07.814Z"}
{"level":"debug","message":"Executing query [m8ics4p67wrv32o4o7t]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T05:42:07.818Z"}
{"level":"debug","message":"Executing query [m8ics4p7dh0yolc50ce]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:42:07.819Z"}
{"level":"debug","message":"Executing query [m8ics4p8hqxzkzdz0jo]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:07.820Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:07.821Z"}
{"level":"debug","message":"Executing query [m8icsjriku4f5itra2g]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:27.343Z"}
{"level":"debug","message":"Executing query [m8icsjro3q82mio3x1z]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:27.348Z"}
{"level":"debug","message":"Executing query [m8icsjrurs41uke87on]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:27.356Z"}
{"level":"debug","message":"Executing query [m8icsjryscke5vi3wlr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:42:27.359Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:27.398Z"}
{"level":"debug","message":"Executing query [m8icsjt4p0z3er9reno]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:27.400Z"}
{"level":"debug","message":"Executing query [m8icsjtdd0sllm5vztv]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:27.409Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:27.411Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:27.411Z"}
{"level":"debug","message":"Executing query [m8icsjtid49nndgxwvs]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:27.415Z"}
{"level":"debug","message":"Executing query [m8icsjtlprd69sh1ape]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742535747340\"]","timestamp":"2025-03-21T05:42:27.417Z"}
{"level":"debug","message":"Executing query [m8icsjtll2ckv6uq98j]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:27.417Z"}
{"level":"debug","message":"Executing query [m8icsjtotjmgjtirzm]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:27.420Z"}
{"level":"debug","message":"Executing query [m8icsjtonj6moggmbv]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-FORENSE-1742535747340\",\"TEST-OFI-FORENSE-1742535747340\",18,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742535747340\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:42:27.420Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:42:27.414Z"}
{"level":"debug","message":"Executing query [m8icsjtnhi29jlabcrp]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:27.419Z"}
{"level":"debug","message":"Executing query [m8icsjtqu3kg727e1m]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:42:27.423Z"}
{"level":"debug","message":"Executing query [m8icsjtu94zxk5f11i4]: INSERT INTO Documento (\n            IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n            NroRegistro, NumeroOficioDocumento, FechaDocumento, \n            OrigenDocumento, Estado, Observaciones\n          ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-ARCHIVO-1742535747426\",\"TEST-OFI-ARCHIVO-1742535747426\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento para pruebas de archivo\"]","timestamp":"2025-03-21T05:42:27.426Z"}
{"level":"info","message":"Documento de prueba creado con ID: 1008","timestamp":"2025-03-21T05:42:27.431Z"}
{"level":"debug","message":"Executing query [m8icsjtzkgz5ym0hw48]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.431Z"}
{"level":"debug","message":"Executing query [m8icsju3bvtq45dr1br]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742535747349\"]","timestamp":"2025-03-21T05:42:27.436Z"}
{"level":"debug","message":"Executing query [m8icsju5fm58694xloe]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742535747340\"]","timestamp":"2025-03-21T05:42:27.437Z"}
{"level":"debug","message":"Executing query [m8icsju68zvyxvngozw]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742535747351\"]","timestamp":"2025-03-21T05:42:27.438Z"}
{"level":"debug","message":"Executing query [m8icsju9s99uq8k8iad]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-DOSAJE-1742535747349\",\"TEST-OFICIO-1742535747349\",605,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:42:27.441Z"}
{"level":"debug","message":"Executing query [m8icsjua4k4t7340kz]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-QUIMICA-1742535747351\",\"TEST-OFI-QUIMICA-1742535747351\",4098,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:42:27.442Z"}
{"level":"debug","message":"Executing query [m8icsju827sv8jgck4u]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",3]","timestamp":"2025-03-21T05:42:27.441Z"}
{"level":"debug","message":"Executing query [m8icsjucdjzhw8sb0mw]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/documento_1742535747345.pdf\"]","timestamp":"2025-03-21T05:42:27.444Z"}
{"level":"debug","message":"Executing query [m8icsjue6rvkw8ch4xj]: INSERT INTO DocumentoArchivo (\n          IDDocumento, TipoArchivo, RutaArchivo, FechaSubida, Observaciones\n        ) VALUES (?, ?, ?, CURRENT_TIMESTAMP, ?)","params":"[1008,\"PDF\",\"/uploads/test/documento_1742535747345.pdf\",\"Archivo creado para pruebas automatizadas\"]","timestamp":"2025-03-21T05:42:27.446Z"}
{"level":"debug","message":"Executing query [m8icsjufzaqmzxxr1i]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.447Z"}
{"level":"debug","message":"Executing query [m8icsjuipo98g1d6tvp]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.451Z"}
{"level":"debug","message":"Executing query [m8icsjul0yzer8c5eqfj]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T05:42:27.453Z"}
{"level":"debug","message":"Executing query [m8icsjuk5inojs12ppr]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.452Z"}
{"level":"debug","message":"Executing query [m8icsjuoyv8vk6je7ui]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.456Z"}
{"level":"debug","message":"Executing query [m8icsjuqzrbbejo81zi]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742535747349\"]","timestamp":"2025-03-21T05:42:27.458Z"}
{"level":"debug","message":"Executing query [m8icsjusarcphk1wufk]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742535747351\"]","timestamp":"2025-03-21T05:42:27.460Z"}
{"level":"debug","message":"Executing query [m8icsjusk98f795mugr]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.460Z"}
{"level":"debug","message":"Executing query [m8icsjuu9sc0857wd9j]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",3]","timestamp":"2025-03-21T05:42:27.462Z"}
{"level":"debug","message":"Executing query [m8icsjuu8l306wwlik4]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[1008]","timestamp":"2025-03-21T05:42:27.462Z"}
{"level":"debug","message":"Executing query [m8icsjuw7nlm5jji9w4]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.464Z"}
{"level":"debug","message":"Executing query [m8icsjux3lla3c0qpp5]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",2]","timestamp":"2025-03-21T05:42:27.465Z"}
{"level":"debug","message":"Executing query [m8icsjuykoryhqxkmmg]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.466Z"}
{"level":"debug","message":"Executing query [m8icsjuyqgyd1xa17lm]: UPDATE DocumentoArchivo SET Observaciones = ? WHERE IDArchivo = ?","params":"[\"Observaciones actualizadas para pruebas\",3]","timestamp":"2025-03-21T05:42:27.466Z"}
{"level":"debug","message":"Executing query [m8icsjv3mfgxcxg9e1g]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.471Z"}
{"level":"debug","message":"Executing query [m8icsjv3csf5809tp2o]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T05:42:27.471Z"}
{"level":"debug","message":"Executing query [m8icsjuzy65zmv6gog]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.467Z"}
{"level":"debug","message":"Executing query [m8icsjv3jbqggy9gae]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-FORENSE-1742535747471\",\"TEST-SP-OFI-FORENSE-1742535747471\",59,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T05:42:27.471Z"}
{"level":"debug","message":"Executing query [m8icsjv43t7paftier7]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.472Z"}
{"level":"debug","message":"Executing query [m8icsjv79v9riiczqzb]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T05:42:27.475Z"}
{"level":"debug","message":"Executing query [m8icsjv8na8iem90ikb]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.476Z"}
{"level":"debug","message":"Executing query [m8icsjv76b3kv7pk949]: DELETE FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.475Z"}
{"level":"debug","message":"Executing query [m8icsjv7lmivlrju8v]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742535747471\"]","timestamp":"2025-03-21T05:42:27.476Z"}
{"level":"debug","message":"Executing query [m8icsjva5qx7ib3b6c]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742535747471\"]","timestamp":"2025-03-21T05:42:27.478Z"}
{"level":"debug","message":"Executing query [m8icsjvbt6hc3zbq989]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.479Z"}
{"level":"debug","message":"Executing query [m8icsjvcl1z0no9afls]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T05:42:27.480Z"}
{"level":"debug","message":"Executing query [m8icsjvd5g4ip1x909k]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.481Z"}
{"level":"debug","message":"Executing query [m8icsjvgvz3haqblf2]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T05:42:27.484Z"}
{"level":"debug","message":"Executing query [m8icsjvh5jrbff56b1q]: CALL sp_subir_archivo_documento(?, ?, ?, ?)","params":"[1008,\"IMAGEN\",\"/uploads/test/imagen_1742535747485.jpg\",\"Archivo creado usando el procedimiento almacenado\"]","timestamp":"2025-03-21T05:42:27.485Z"}
{"level":"debug","message":"Executing query [m8icsjvg1ftvj4iitl4]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T05:42:27.484Z"}
{"level":"debug","message":"Executing query [m8icsjvfh5ijsodlnm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:27.483Z"}
{"level":"debug","message":"Executing query [m8icsjvk6fcojy0nx4r]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-DOSAJE-1742535747488\",\"TEST-SP-OFICIO-1742535747488\",1601,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T05:42:27.488Z"}
{"level":"debug","message":"Executing query [m8icsjvqtrjr67v74ll]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T05:42:27.494Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:27.486Z"}
{"level":"debug","message":"Executing query [m8icsjvrlmd7vtbql2c]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742535747488\"]","timestamp":"2025-03-21T05:42:27.495Z"}
{"level":"debug","message":"Executing query [m8icsjvr45xn6opm00a]: SELECT * FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742535747485.jpg\"]","timestamp":"2025-03-21T05:42:27.495Z"}
{"level":"debug","message":"Executing query [m8icsjvub7h6howbkv6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:27.498Z"}
{"level":"debug","message":"Executing query [m8icsjvtz16gnkw8ksn]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742535747485.jpg\"]","timestamp":"2025-03-21T05:42:27.497Z"}
{"level":"debug","message":"Executing query [m8icsjvuh1lzaiw7pse]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742535747488\"]","timestamp":"2025-03-21T05:42:27.498Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:27.500Z"}
{"level":"debug","message":"Executing query [m8icsjvx63bfy1d633k]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:27.501Z"}
{"level":"debug","message":"Executing query [m8icsjvz4f6sous9vyq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:42:27.503Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:27.503Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:42:27.505Z"}
{"level":"debug","message":"Executing query [m8ictv3eg8jv08oz1l6]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:28.683Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:28.724Z"}
{"level":"debug","message":"Executing query [m8ictv4pxj013n10w9]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742535808680\"]","timestamp":"2025-03-21T05:43:28.730Z"}
{"level":"debug","message":"Executing query [m8ictv4scgnokj093ao]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742535808680\",true]","timestamp":"2025-03-21T05:43:28.732Z"}
{"level":"debug","message":"Executing query [m8ictv53d4fecfajcof]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1001]","timestamp":"2025-03-21T05:43:28.743Z"}
{"level":"debug","message":"Executing query [m8ictv59soa7ogkohiq]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742535808680\"]","timestamp":"2025-03-21T05:43:28.749Z"}
{"level":"debug","message":"Executing query [m8ictv5cxe4do70u28p]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",1001]","timestamp":"2025-03-21T05:43:28.752Z"}
{"level":"debug","message":"Executing query [m8ictv5gsvlv09wwij]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1001]","timestamp":"2025-03-21T05:43:28.756Z"}
{"level":"debug","message":"Executing query [m8ictv5k8ekfw6c9bel]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[1001]","timestamp":"2025-03-21T05:43:28.760Z"}
{"level":"debug","message":"Executing query [m8ictv5oe9fy89z4g3q]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1001]","timestamp":"2025-03-21T05:43:28.764Z"}
{"level":"debug","message":"Executing query [m8ictv5q6odduhzelil]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[1001]","timestamp":"2025-03-21T05:43:28.766Z"}
{"level":"debug","message":"Executing query [m8ictv5tra35us3tvwk]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1001]","timestamp":"2025-03-21T05:43:28.770Z"}
{"level":"debug","message":"Executing query [m8ictv5z8hmgaxexcwr]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1001]","timestamp":"2025-03-21T05:43:28.775Z"}
{"level":"debug","message":"Executing query [m8ictv61x09bj2mrj1]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:43:28.777Z"}
{"level":"debug","message":"Executing query [m8ictv62kezkepvyr4]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:28.778Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:28.780Z"}
{"level":"debug","message":"Executing query [m8icu7g0nq4v2abreys]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.688Z"}
{"level":"debug","message":"Executing query [m8icu7gfge16uloa41]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.704Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.747Z"}
{"level":"debug","message":"Executing query [m8icu7hrwdctroiwv3l]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T05:43:44.751Z"}
{"level":"debug","message":"Executing query [m8icu7hzpqgef62vuei]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T05:43:44.759Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T05:43:44.762Z"}
{"level":"debug","message":"Executing query [m8icu7i2eohbqo6uft6]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:43:44.762Z"}
{"level":"debug","message":"Executing query [m8icu7i6xkm3wk9pa79]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:43:44.766Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.761Z"}
{"level":"debug","message":"Executing query [m8icu7i6ni0eoz172hq]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.766Z"}
{"level":"debug","message":"Executing query [m8icu7ifgzxy10nr4cn]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.775Z"}
{"level":"debug","message":"Executing query [m8icu7iooryy9fmqz6]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:43:44.784Z"}
{"level":"debug","message":"Executing query [m8icu7iqc0c1yr7cmhh]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T05:43:44.786Z"}
{"level":"debug","message":"Executing query [m8icu7ip5mhxzoz0lxl]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.785Z"}
{"level":"debug","message":"Executing query [m8icu7icyxp09ftynq8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.773Z"}
{"level":"debug","message":"Executing query [m8icu7j0g6zswasqsjl]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1007]","timestamp":"2025-03-21T05:43:44.796Z"}
{"level":"debug","message":"Executing query [m8icu7igcaxxr1i95fh]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.781Z"}
{"level":"debug","message":"Executing query [m8icu7j4jsjj2rzjry]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T05:43:44.800Z"}
{"level":"debug","message":"Executing query [m8icu7j86etirdcp65c]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1007]","timestamp":"2025-03-21T05:43:44.804Z"}
{"level":"debug","message":"Executing query [m8icu7iqropdgqwon1q]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.788Z"}
{"level":"debug","message":"Executing query [m8icu7jfbxc4d616kcf]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1007]","timestamp":"2025-03-21T05:43:44.811Z"}
{"level":"debug","message":"Executing query [m8icu7ixhtdtxg0m0ue]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.794Z"}
{"level":"debug","message":"Executing query [m8icu7itorderwijks]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.792Z"}
{"level":"debug","message":"Executing query [m8icu7jjkrq9ym679xe]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1007]","timestamp":"2025-03-21T05:43:44.815Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T05:43:44.788Z"}
{"level":"debug","message":"Executing query [m8icu7jdgiyi3mr0yqm]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535824697\"]","timestamp":"2025-03-21T05:43:44.811Z"}
{"level":"debug","message":"Executing query [m8icu7jj4msq3p54m57]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742535824697\",\"TEST-OFI-1742535824697\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T05:43:44.816Z"}
{"level":"debug","message":"Executing query [m8icu7jouwg3x2eodk]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1007]","timestamp":"2025-03-21T05:43:44.820Z"}
{"level":"debug","message":"Executing query [m8icu7j0dgyd6dhhbo]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.797Z"}
{"level":"debug","message":"Executing query [m8icu7jqdevononq2rs]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:44.822Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:44.825Z"}
{"level":"debug","message":"Executing query [m8icu7ju9mu5e9jdvjp]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1009]","timestamp":"2025-03-21T05:43:44.826Z"}
{"level":"debug","message":"Executing query [m8icu7k0ax9eh1y3vs]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742535824697\"]","timestamp":"2025-03-21T05:43:44.832Z"}
{"level":"debug","message":"Executing query [m8icu7k8tx0yhrk74w]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1009]","timestamp":"2025-03-21T05:43:44.840Z"}
{"level":"debug","message":"Executing query [m8icu7kix09ceiff7i]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1009]","timestamp":"2025-03-21T05:43:44.850Z"}
{"level":"debug","message":"Executing query [m8icu7klkynlfnoe11c]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T05:43:44.853Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.854Z"}
{"level":"debug","message":"Executing query [m8icu7kph5spkwlvwc]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.857Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.864Z"}
{"level":"debug","message":"Executing query [m8icu7kyscjak0l98n]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.866Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.870Z"}
{"level":"debug","message":"Executing query [m8icu7l5t3w5eyxtp0j]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535824785\"]","timestamp":"2025-03-21T05:43:44.873Z"}
{"level":"debug","message":"Executing query [m8icu7l7eeljfesxyqk]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742535824768\"]","timestamp":"2025-03-21T05:43:44.875Z"}
{"level":"debug","message":"Executing query [m8icu7l630ebyh1gqxb]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T05:43:44.874Z"}
{"level":"debug","message":"Executing query [m8icu7lbgy7a117rx1u]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-FORENSE-1742535824768\",\"TEST-OFI-FORENSE-1742535824768\",1520,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742535824768\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:43:44.879Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T05:43:44.879Z"}
{"level":"debug","message":"Executing query [m8icu7lcrwltok5a9zn]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T05:43:44.880Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.870Z"}
{"level":"debug","message":"Executing query [m8icu7la86fvjfj5ao7]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.879Z"}
{"level":"debug","message":"Executing query [m8icu7lfrsdpwicewaf]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.883Z"}
{"level":"debug","message":"Executing query [m8icu7lkz5dako4q1u]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.889Z"}
{"level":"debug","message":"Executing query [m8icu7lkptnifkq30h8]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.888Z"}
{"level":"debug","message":"Executing query [m8icu7ln6ke1q20q8h8]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.891Z"}
{"level":"debug","message":"Executing query [m8icu7lq9bnao7b4io8]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535824785\"]","timestamp":"2025-03-21T05:43:44.894Z"}
{"level":"debug","message":"Executing query [m8icu7l9356ef5ctaug]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T05:43:44.879Z"}
{"level":"debug","message":"Executing query [m8icu7lqslvq88jxbjj]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.894Z"}
{"level":"debug","message":"Executing query [m8icu7ls2xdc544dgav]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742535824785\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:43:44.897Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.875Z"}
{"level":"debug","message":"Executing query [m8icu7lqsnp3d49z28d]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742535824781\"]","timestamp":"2025-03-21T05:43:44.894Z"}
{"level":"debug","message":"Executing query [m8icu7lqpusn2c0dohj]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742535824768\"]","timestamp":"2025-03-21T05:43:44.894Z"}
{"level":"debug","message":"Executing query [m8icu7lwwe3spmmzpb]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742535824781\",true]","timestamp":"2025-03-21T05:43:44.900Z"}
{"level":"debug","message":"Executing query [m8icu7m03zv644nmbkb]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",5]","timestamp":"2025-03-21T05:43:44.904Z"}
{"level":"debug","message":"Executing query [m8icu7m6vzhubdh09nf]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T05:43:44.910Z"}
{"level":"debug","message":"Executing query [m8icu7m6ueu01fc0exs]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.910Z"}
{"level":"debug","message":"Executing query [m8icu7m916vnwolqq61]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1002]","timestamp":"2025-03-21T05:43:44.913Z"}
{"level":"debug","message":"Executing query [m8icu7max8vj500zpin]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.914Z"}
{"level":"debug","message":"Executing query [m8icu7mc85wyl2p8fw]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742535824785\"]","timestamp":"2025-03-21T05:43:44.916Z"}
{"level":"debug","message":"Executing query [m8icu7mdj1xyuvfuqwf]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1009]","timestamp":"2025-03-21T05:43:44.917Z"}
{"level":"debug","message":"Executing query [m8icu7metoo635wtc1]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.918Z"}
{"level":"debug","message":"Executing query [m8icu7mf4p5chltw5ud]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1009]","timestamp":"2025-03-21T05:43:44.919Z"}
{"level":"debug","message":"Executing query [m8icu7mf5hcc9ehkx4t]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1005]","timestamp":"2025-03-21T05:43:44.919Z"}
{"level":"debug","message":"Executing query [m8icu7mg89p6q04h1oa]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742535824781\"]","timestamp":"2025-03-21T05:43:44.920Z"}
{"level":"debug","message":"Executing query [m8icu7mgsvq6l63wzi]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.921Z"}
{"level":"debug","message":"Executing query [m8icu7mki8z198ibme]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",1002]","timestamp":"2025-03-21T05:43:44.924Z"}
{"level":"debug","message":"Executing query [m8icu7mjedr7wxe3imw]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T05:43:44.923Z"}
{"level":"debug","message":"Executing query [m8icu7mlajw8dc9ds4e]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.925Z"}
{"level":"debug","message":"Executing query [m8icu7mlmeta6q4xtis]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1009]","timestamp":"2025-03-21T05:43:44.925Z"}
{"level":"debug","message":"Executing query [m8icu7mi3wnlzyxr006]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/documento_1742535824788.pdf\"]","timestamp":"2025-03-21T05:43:44.923Z"}
{"level":"debug","message":"Executing query [m8icu7mndycko5hvw9b]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T05:43:44.927Z"}
{"level":"debug","message":"Executing query [m8icu7mns5nphy2pfgc]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-FORENSE-1742535824927\",\"TEST-SP-OFI-FORENSE-1742535824927\",5208,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T05:43:44.927Z"}
{"level":"debug","message":"Executing query [m8icu7mopf5wb8a29rs]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T05:43:44.928Z"}
{"level":"debug","message":"Executing query [m8icu7mof9f7940kzzu]: INSERT INTO DocumentoArchivo (\n          IDDocumento, TipoArchivo, RutaArchivo, FechaSubida, Observaciones\n        ) VALUES (?, ?, ?, CURRENT_TIMESTAMP, ?)","params":"[1008,\"PDF\",\"/uploads/test/documento_1742535824788.pdf\",\"Archivo creado para pruebas automatizadas\"]","timestamp":"2025-03-21T05:43:44.928Z"}
{"level":"debug","message":"Executing query [m8icu7mp70dcelz9l1j]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1002]","timestamp":"2025-03-21T05:43:44.929Z"}
{"level":"debug","message":"Executing query [m8icu7mqitrl7e19xxe]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T05:43:44.930Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.882Z"}
{"level":"debug","message":"Executing query [m8icu7lj2awl6ch5pnf]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.887Z"}
{"level":"debug","message":"Executing query [m8icu7mj5rp4a064ba]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742535824791\"]","timestamp":"2025-03-21T05:43:44.923Z"}
{"level":"debug","message":"Executing query [m8icu7moq8a1zduhae]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-DOSAJE-1742535824791\",\"TEST-OFICIO-1742535824791\",7318,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:43:44.929Z"}
{"level":"debug","message":"Executing query [m8icu7ms3g50nn7x498]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:44.932Z"}
{"level":"debug","message":"Executing query [m8icu7mtndg2cl9kyc]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742535824927\"]","timestamp":"2025-03-21T05:43:44.934Z"}
{"level":"debug","message":"Executing query [m8icu7mtsr2fa8r473h]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[1002]","timestamp":"2025-03-21T05:43:44.933Z"}
{"level":"debug","message":"Executing query [m8icu7mw9ybvwat0404]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T05:43:44.936Z"}
{"level":"debug","message":"Executing query [m8icu7mwe2bx4jtpdhu]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742535824927\"]","timestamp":"2025-03-21T05:43:44.936Z"}
{"level":"debug","message":"Executing query [m8icu7mz36y908ax1t]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T05:43:44.939Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:44.935Z"}
{"level":"debug","message":"Executing query [m8icu7n06grsebywkye]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.940Z"}
{"level":"debug","message":"Executing query [m8icu7mywpiyfv0m1kb]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1002]","timestamp":"2025-03-21T05:43:44.938Z"}
{"level":"debug","message":"Executing query [m8icu7n0zb5qzzvkhqs]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.940Z"}
{"level":"debug","message":"Executing query [m8icu7n1k5ud8vim63i]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:44.941Z"}
{"level":"debug","message":"Executing query [m8icu7n7rkpmjg610y7]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742535824791\"]","timestamp":"2025-03-21T05:43:44.948Z"}
{"level":"debug","message":"Executing query [m8icu7nefqlrxdkk0ta]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",5]","timestamp":"2025-03-21T05:43:44.955Z"}
{"level":"debug","message":"Executing query [m8icu7nf9kzpasyonkn]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T05:43:44.955Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:44.945Z"}
{"level":"debug","message":"Executing query [m8icu7n6wk5i98wecim]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[1008]","timestamp":"2025-03-21T05:43:44.947Z"}
{"level":"debug","message":"Executing query [m8icu7ncq2haqec27st]: UPDATE DocumentoArchivo SET Observaciones = ? WHERE IDArchivo = ?","params":"[\"Observaciones actualizadas para pruebas\",5]","timestamp":"2025-03-21T05:43:44.952Z"}
{"level":"debug","message":"Executing query [m8icu7nho7rx7f4go1i]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[1002]","timestamp":"2025-03-21T05:43:44.957Z"}
{"level":"debug","message":"Executing query [m8icu7nk09uva73bsonv]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.960Z"}
{"level":"debug","message":"Executing query [m8icu7nju31jfeibh]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1002]","timestamp":"2025-03-21T05:43:44.960Z"}
{"level":"debug","message":"Executing query [m8icu7nlbv4ijohtymp]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T05:43:44.961Z"}
{"level":"debug","message":"Executing query [m8icu7nlyeg85if451a]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.961Z"}
{"level":"debug","message":"Executing query [m8icu7nn771wdgm3c4i]: DELETE FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.963Z"}
{"level":"debug","message":"Executing query [m8icu7nnwjaq41treun]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:43:44.963Z"}
{"level":"debug","message":"Executing query [m8icu7nnt4xmedoztgo]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1002]","timestamp":"2025-03-21T05:43:44.964Z"}
{"level":"debug","message":"Executing query [m8icu7np9bt41sbcxww]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:44.965Z"}
{"level":"debug","message":"Executing query [m8icu7nphv47fuvw2nh]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.966Z"}
{"level":"debug","message":"Executing query [m8icu7nq2nssftorflr]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T05:43:44.966Z"}
{"level":"debug","message":"Executing query [m8icu7nr4api6cm991x]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.967Z"}
{"level":"debug","message":"Executing query [m8icu7nstjf0u868lz9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:44.968Z"}
{"level":"debug","message":"Executing query [m8icu7nt8rvujwr18w]: CALL sp_subir_archivo_documento(?, ?, ?, ?)","params":"[1008,\"IMAGEN\",\"/uploads/test/imagen_1742535824969.jpg\",\"Archivo creado usando el procedimiento almacenado\"]","timestamp":"2025-03-21T05:43:44.969Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:44.967Z"}
{"level":"debug","message":"Executing query [m8icu7nvyrark1dcxje]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.971Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:44.971Z"}
{"level":"debug","message":"Executing query [m8icu7nx24859ccu3xh]: SELECT * FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742535824969.jpg\"]","timestamp":"2025-03-21T05:43:44.973Z"}
{"level":"debug","message":"Executing query [m8icu7nzhxdz6bjntp9]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.975Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T05:43:44.970Z"}
{"level":"debug","message":"Executing query [m8icu7o1rgpnm9nlt2]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742535824969.jpg\"]","timestamp":"2025-03-21T05:43:44.977Z"}
{"level":"debug","message":"Executing query [m8icu7o6ksewll10r9l]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T05:43:44.982Z"}
{"level":"debug","message":"Executing query [m8icu7o3ij3lfwvs1rl]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T05:43:44.980Z"}
{"level":"debug","message":"Executing query [m8icu7o71ndo5io1uc8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:44.983Z"}
{"level":"debug","message":"Executing query [m8icu7o8e3qaj2r1pj]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-DOSAJE-1742535824984\",\"TEST-SP-OFICIO-1742535824984\",1371,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T05:43:44.984Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:44.985Z"}
{"level":"debug","message":"Executing query [m8icu7obrzzd3h7fyr]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742535824984\"]","timestamp":"2025-03-21T05:43:44.987Z"}
{"level":"debug","message":"Executing query [m8icu7odiovk6zfc3fc]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742535824984\"]","timestamp":"2025-03-21T05:43:44.989Z"}
{"level":"debug","message":"Executing query [m8icu7ogfldievu508u]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:44.993Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:44.994Z"}
{"level":"debug","message":"Executing query [m8icu7ol3dx74lguhza]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742535824873\"]","timestamp":"2025-03-21T05:43:44.997Z"}
{"level":"debug","message":"Executing query [m8icu7omvrehu7yitzb]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-QUIMICA-1742535824873\",\"TEST-OFI-QUIMICA-1742535824873\",319,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T05:43:44.999Z"}
{"level":"debug","message":"Executing query [m8icu7oty4xnksldwr8]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T05:43:45.005Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T05:43:44.888Z"}
{"level":"debug","message":"Executing query [m8icu7ot9vox6h5yws9]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T05:43:45.006Z"}
{"level":"debug","message":"Executing query [m8icu7p1ddx1w57u0nc]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742535824873\"]","timestamp":"2025-03-21T05:43:45.013Z"}
{"level":"debug","message":"Executing query [m8icu7p4ga7yhemrkc9]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T05:43:45.016Z"}
{"level":"debug","message":"Executing query [m8icu7p5n4dibazb70s]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",3]","timestamp":"2025-03-21T05:43:45.017Z"}
{"level":"debug","message":"Executing query [m8icu7p70jvtwohabc69]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1008]","timestamp":"2025-03-21T05:43:45.019Z"}
{"level":"debug","message":"Executing query [m8icu7p8rzqiomz7t]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T05:43:45.020Z"}
{"level":"debug","message":"Executing query [m8icu7pbxcplfp3g1wp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:45.023Z"}
{"level":"debug","message":"Executing query [m8icu7pb4dh7hjkpse2]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T05:43:45.023Z"}
{"level":"debug","message":"Executing query [m8icu7pdbeqwb34qbub]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T05:43:45.026Z"}
{"level":"debug","message":"Executing query [m8icu7pfsp2dri032c]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T05:43:45.027Z"}
{"level":"debug","message":"Executing query [m8icu7pjcs8o3po98f5]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T05:43:45.031Z"}
{"level":"debug","message":"Executing query [m8icu7pkbjamswjnuzo]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T05:43:45.032Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T05:43:45.034Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T20:04:45.348Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:45.390Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T20:04:45.394Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:46.067Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:46.097Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:46.754Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:46.768Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:47.422Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T20:04:47.424Z"}
{"level":"debug","message":"Executing query [m8j7lirbf37rc9rzjne]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:47.543Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:47.555Z"}
{"level":"debug","message":"Executing query [m8j7lirpamuvmju4k5q]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:47.557Z"}
{"level":"debug","message":"Executing query [m8j7lisjwwszme49y1g]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T20:04:47.587Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T20:04:47.611Z"}
{"level":"debug","message":"Executing query [m8j7lit8glsfz40giy]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T20:04:47.612Z"}
{"level":"debug","message":"Executing query [m8j7litdgl7zrbuihir]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:47.617Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T20:04:47.622Z"}
{"level":"debug","message":"Executing query [m8j7litned6v9shn4wq]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T20:04:47.627Z"}
{"level":"debug","message":"Executing query [m8j7litt2f4pyps3b9o]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T20:04:47.633Z"}
{"level":"debug","message":"Executing query [m8j7litw3wr4tu1j646]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:47.636Z"}
{"level":"debug","message":"Executing query [m8j7liwsyljzncnolu]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:47.740Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:47.750Z"}
{"level":"debug","message":"Executing query [m8j7lix4jmkh771nzd]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:47.752Z"}
{"level":"debug","message":"Executing query [m8j7lix6ez8w1tmil65]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:47.754Z"}
{"level":"debug","message":"Executing query [m8j7lix740rmlwyygbk]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:47.755Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 999, Área ID: 999 y Usuario ID: 998 para las pruebas de Documento","timestamp":"2025-03-21T20:04:47.757Z"}
{"level":"debug","message":"Executing query [m8j7lixax04886qxcv]: DELETE FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742587487739\"]","timestamp":"2025-03-21T20:04:47.758Z"}
{"level":"debug","message":"Executing query [m8j7lixejd7y8wdhsq]: INSERT INTO Documento (\n          IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n          NroRegistro, NumeroOficioDocumento, FechaDocumento, \n          OrigenDocumento, Estado, Observaciones, Procedencia, Contenido\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-1742587487739\",\"TEST-OFI-1742587487739\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento creado para pruebas automatizadas\",\"Testing Automation\",\"Contenido de prueba para documento automatizado\"]","timestamp":"2025-03-21T20:04:47.762Z"}
{"level":"debug","message":"Executing query [m8j7lixnr122o8ty25]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1010]","timestamp":"2025-03-21T20:04:47.771Z"}
{"level":"debug","message":"Executing query [m8j7lixqorrqx6jizc]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742587487739\"]","timestamp":"2025-03-21T20:04:47.774Z"}
{"level":"debug","message":"Executing query [m8j7lixsggoqy9spjb]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",998,1010]","timestamp":"2025-03-21T20:04:47.776Z"}
{"level":"debug","message":"Executing query [m8j7lixxsvjiqghzdk]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1010]","timestamp":"2025-03-21T20:04:47.781Z"}
{"level":"debug","message":"Executing query [m8j7liy0nwfb4dwe6s]: SELECT IDArea FROM AreaEspecializada WHERE IDArea != ? LIMIT 1","params":"[999]","timestamp":"2025-03-21T20:04:47.784Z"}
{"level":"debug","message":"Executing query [m8j7liy3k99vzqiabxb]: SELECT COUNT(*) as count FROM Derivacion WHERE IDDocumento = ?","params":"[1010]","timestamp":"2025-03-21T20:04:47.787Z"}
{"level":"debug","message":"Executing query [m8j7liy61s8jqm6gszz]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1010]","timestamp":"2025-03-21T20:04:47.790Z"}
{"level":"debug","message":"Executing query [m8j7liyah8qaiok4bvn]: SELECT * FROM Documento WHERE IDDocumento = ?","params":"[1010]","timestamp":"2025-03-21T20:04:47.794Z"}
{"level":"debug","message":"Executing query [m8j7liyc6srg14da05b]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T20:04:47.796Z"}
{"level":"debug","message":"Executing query [m8j7liyeh204cgy4jfs]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T20:04:47.798Z"}
{"level":"debug","message":"Executing query [m8j7liyf6gzr94dqw83]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:47.799Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:47.800Z"}
{"level":"debug","message":"Executing query [m8j7lj1d87so8dhgjm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:47.905Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:47.916Z"}
{"level":"debug","message":"Executing query [m8j7lj1pmolocdau6nc]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:47.917Z"}
{"level":"debug","message":"Executing query [m8j7lj1rod170yhieyp]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742587487904\"]","timestamp":"2025-03-21T20:04:47.919Z"}
{"level":"debug","message":"Executing query [m8j7lj1wz4z2n2e6w7b]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-DOSAJE-1742587487904\",\"TEST-OFICIO-1742587487904\",9220,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T20:04:47.924Z"}
{"level":"debug","message":"Executing query [m8j7lj24ojuhc7zyu7]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T20:04:47.932Z"}
{"level":"debug","message":"Executing query [m8j7lj27gq3ebovr3o]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742587487904\"]","timestamp":"2025-03-21T20:04:47.935Z"}
{"level":"debug","message":"Executing query [m8j7lj28amcs0j266om]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",7]","timestamp":"2025-03-21T20:04:47.936Z"}
{"level":"debug","message":"Executing query [m8j7lj2b2do79jmyxvv]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T20:04:47.939Z"}
{"level":"debug","message":"Executing query [m8j7lj2ed3jyaeqbo0o]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T20:04:47.942Z"}
{"level":"debug","message":"Executing query [m8j7lj2g37aesj8ablx]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T20:04:47.945Z"}
{"level":"debug","message":"Executing query [m8j7lj2ijt98cc3haz]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T20:04:47.946Z"}
{"level":"debug","message":"Executing query [m8j7lj2lxoiq9mb5s5g]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T20:04:47.949Z"}
{"level":"debug","message":"Executing query [m8j7lj2nao0xpbeoo7]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-DOSAJE-1742587487951\",\"TEST-SP-OFICIO-1742587487951\",4164,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T20:04:47.951Z"}
{"level":"debug","message":"Executing query [m8j7lj30mf9d5676d8f]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742587487951\"]","timestamp":"2025-03-21T20:04:47.964Z"}
{"level":"debug","message":"Executing query [m8j7lj32bsb7qfc7hgv]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742587487951\"]","timestamp":"2025-03-21T20:04:47.966Z"}
{"level":"debug","message":"Executing query [m8j7lj363y5icofvkmr]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:47.970Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:47.972Z"}
{"level":"debug","message":"Executing query [m8j7lj646bxqw7xqlo9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:48.077Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:48.086Z"}
{"level":"debug","message":"Executing query [m8j7lj6fr6b8eplakxs]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:48.087Z"}
{"level":"debug","message":"Executing query [m8j7lj6h5drq744fmmj]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:48.089Z"}
{"level":"debug","message":"Executing query [m8j7lj6hbfles5k2avc]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:48.089Z"}
{"level":"debug","message":"Executing query [m8j7lj6in2yc6z6d019]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:48.090Z"}
{"level":"debug","message":"Executing query [m8j7lj6k0amawzem2jnf]: INSERT INTO Documento (\n            IDMesaPartes, IDAreaActual, IDUsuarioCreador, \n            NroRegistro, NumeroOficioDocumento, FechaDocumento, \n            OrigenDocumento, Estado, Observaciones\n          ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,999,998,\"TEST-REG-ARCHIVO-1742587488092\",\"TEST-OFI-ARCHIVO-1742587488092\",\"2025-03-21\",\"EXTERNO\",\"REGISTRADO\",\"Documento para pruebas de archivo\"]","timestamp":"2025-03-21T20:04:48.092Z"}
{"level":"info","message":"Documento de prueba creado con ID: 1011","timestamp":"2025-03-21T20:04:48.095Z"}
{"level":"debug","message":"Executing query [m8j7lj6o0jplcaoytq5q]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/documento_1742587488076.pdf\"]","timestamp":"2025-03-21T20:04:48.096Z"}
{"level":"debug","message":"Executing query [m8j7lj6s9m4i71700tc]: INSERT INTO DocumentoArchivo (\n          IDDocumento, TipoArchivo, RutaArchivo, FechaSubida, Observaciones\n        ) VALUES (?, ?, ?, CURRENT_TIMESTAMP, ?)","params":"[1011,\"PDF\",\"/uploads/test/documento_1742587488076.pdf\",\"Archivo creado para pruebas automatizadas\"]","timestamp":"2025-03-21T20:04:48.100Z"}
{"level":"debug","message":"Executing query [m8j7lj6wlapga3jo8lg]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.104Z"}
{"level":"debug","message":"Executing query [m8j7lj6y8ptnif0i9dm]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[1011]","timestamp":"2025-03-21T20:04:48.106Z"}
{"level":"debug","message":"Executing query [m8j7lj70oo8byhbd9mq]: UPDATE DocumentoArchivo SET Observaciones = ? WHERE IDArchivo = ?","params":"[\"Observaciones actualizadas para pruebas\",7]","timestamp":"2025-03-21T20:04:48.108Z"}
{"level":"debug","message":"Executing query [m8j7lj73tc7tcr26ebf]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.111Z"}
{"level":"debug","message":"Executing query [m8j7lj76nh0cy0h40q]: DELETE FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.114Z"}
{"level":"debug","message":"Executing query [m8j7lj78dviyseeo08t]: SELECT * FROM DocumentoArchivo WHERE IDArchivo = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.116Z"}
{"level":"debug","message":"Executing query [m8j7lj7a1x1s37p9qiah]: CALL sp_subir_archivo_documento(?, ?, ?, ?)","params":"[1011,\"IMAGEN\",\"/uploads/test/imagen_1742587488118.jpg\",\"Archivo creado usando el procedimiento almacenado\"]","timestamp":"2025-03-21T20:04:48.118Z"}
{"level":"debug","message":"Executing query [m8j7lj7eauu2x778hv9]: SELECT * FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742587488118.jpg\"]","timestamp":"2025-03-21T20:04:48.122Z"}
{"level":"debug","message":"Executing query [m8j7lj7fza54jrcfugn]: DELETE FROM DocumentoArchivo WHERE RutaArchivo = ?","params":"[\"/uploads/test/imagen_1742587488118.jpg\"]","timestamp":"2025-03-21T20:04:48.123Z"}
{"level":"debug","message":"Executing query [m8j7lj7jt2g0b9bept]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:48.127Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:48.128Z"}
{"level":"debug","message":"Executing query [m8j7ljaeicpw8j3mye]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:48.230Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:48.242Z"}
{"level":"debug","message":"Executing query [m8j7ljarfwf1nmmc0sc]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742587488229\"]","timestamp":"2025-03-21T20:04:48.243Z"}
{"level":"debug","message":"Executing query [m8j7ljatepvyvg8bjlu]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742587488229\"]","timestamp":"2025-03-21T20:04:48.246Z"}
{"level":"debug","message":"Executing query [m8j7ljav7s1te73dxtd]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742587488229\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T20:04:48.247Z"}
{"level":"debug","message":"Executing query [m8j7ljb2wvfdlai3l9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T20:04:48.254Z"}
{"level":"debug","message":"Executing query [m8j7ljb4yx24pjh36cj]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742587488229\"]","timestamp":"2025-03-21T20:04:48.256Z"}
{"level":"debug","message":"Executing query [m8j7ljb7n81b76b7ta]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1006]","timestamp":"2025-03-21T20:04:48.259Z"}
{"level":"debug","message":"Executing query [m8j7ljbah8zijly25fp]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T20:04:48.262Z"}
{"level":"debug","message":"Executing query [m8j7ljbc3hfbakfdwmx]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T20:04:48.264Z"}
{"level":"debug","message":"Executing query [m8j7ljbfqrshkmpx1rk]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T20:04:48.267Z"}
{"level":"debug","message":"Executing query [m8j7ljbh614qwb11sre]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T20:04:48.269Z"}
{"level":"debug","message":"Executing query [m8j7ljbifbfimwx1h3v]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T20:04:48.270Z"}
{"level":"debug","message":"Executing query [m8j7ljbov5358vrkfb]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T20:04:48.276Z"}
{"level":"debug","message":"Executing query [m8j7ljbp010609h81jjbo]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T20:04:48.277Z"}
{"level":"debug","message":"Executing query [m8j7ljbr2ful66oaee]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:48.279Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:48.281Z"}
{"level":"debug","message":"Executing query [m8j7ljemu3nqibh6ot8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:48.382Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:48.393Z"}
{"level":"debug","message":"Executing query [m8j7ljeyvy4pdd6oey]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:48.394Z"}
{"level":"debug","message":"Executing query [m8j7ljf0y9ei1zap5]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742587488381\"]","timestamp":"2025-03-21T20:04:48.396Z"}
{"level":"debug","message":"Executing query [m8j7ljf4iozquk2c41e]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-QUIMICA-1742587488381\",\"TEST-OFI-QUIMICA-1742587488381\",7642,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T20:04:48.401Z"}
{"level":"debug","message":"Executing query [m8j7ljfac5996darsbl]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T20:04:48.406Z"}
{"level":"debug","message":"Executing query [m8j7ljfcsmmc3ufyzb]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742587488381\"]","timestamp":"2025-03-21T20:04:48.408Z"}
{"level":"debug","message":"Executing query [m8j7ljfel24u6xypewh]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",4]","timestamp":"2025-03-21T20:04:48.410Z"}
{"level":"debug","message":"Executing query [m8j7ljfhfk1j2ggplco]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T20:04:48.413Z"}
{"level":"debug","message":"Executing query [m8j7ljfjgmj602x51xb]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T20:04:48.415Z"}
{"level":"debug","message":"Executing query [m8j7ljfmajcmkljo1jb]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T20:04:48.418Z"}
{"level":"debug","message":"Executing query [m8j7ljfo5r48kd3r8h]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T20:04:48.420Z"}
{"level":"debug","message":"Executing query [m8j7ljfr2qok4v9asfa]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T20:04:48.423Z"}
{"level":"debug","message":"Executing query [m8j7ljft4v4o7me5zsj]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:48.425Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:48.427Z"}
{"level":"debug","message":"Executing query [m8j7ljip6l414njuhcj]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:48.530Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:48.541Z"}
{"level":"debug","message":"Executing query [m8j7ljj2j7vttykdja]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T20:04:48.542Z"}
{"level":"debug","message":"Executing query [m8j7ljj4uqfytfjh4yb]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742587488529\"]","timestamp":"2025-03-21T20:04:48.545Z"}
{"level":"debug","message":"Executing query [m8j7ljj9stt5binqfc]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-FORENSE-1742587488529\",\"TEST-OFI-FORENSE-1742587488529\",7968,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742587488529\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T20:04:48.549Z"}
{"level":"debug","message":"Executing query [m8j7ljje33x2lf59r7r]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.554Z"}
{"level":"debug","message":"Executing query [m8j7ljjg7l9sfp9sog]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742587488529\"]","timestamp":"2025-03-21T20:04:48.556Z"}
{"level":"debug","message":"Executing query [m8j7ljjif0kyub1uh4e]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",7]","timestamp":"2025-03-21T20:04:48.558Z"}
{"level":"debug","message":"Executing query [m8j7ljjlprey7ktxq7k]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.561Z"}
{"level":"debug","message":"Executing query [m8j7ljjnqlu2rr49zy]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.563Z"}
{"level":"debug","message":"Executing query [m8j7ljjqeoecuopos57]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.566Z"}
{"level":"debug","message":"Executing query [m8j7ljjrrekpbn1zju]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.567Z"}
{"level":"debug","message":"Executing query [m8j7ljjumu42igrrbb]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T20:04:48.570Z"}
{"level":"debug","message":"Executing query [m8j7ljjx6d527d4196]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-FORENSE-1742587488573\",\"TEST-SP-OFI-FORENSE-1742587488573\",8742,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T20:04:48.573Z"}
{"level":"debug","message":"Executing query [m8j7ljk0jjl0xxymjy]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742587488573\"]","timestamp":"2025-03-21T20:04:48.576Z"}
{"level":"debug","message":"Executing query [m8j7ljk2g93f7rq692i]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742587488573\"]","timestamp":"2025-03-21T20:04:48.578Z"}
{"level":"debug","message":"Executing query [m8j7ljk5cjgsna3jedb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:48.581Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:48.583Z"}
{"level":"debug","message":"Executing query [m8j7ljmyag19r4xpuwa]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:48.682Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:48.691Z"}
{"level":"debug","message":"Executing query [m8j7ljn94dpzjb57qbi]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742587488681\"]","timestamp":"2025-03-21T20:04:48.693Z"}
{"level":"debug","message":"Executing query [m8j7ljnby7z9ckjrzae]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742587488681\",true]","timestamp":"2025-03-21T20:04:48.695Z"}
{"level":"debug","message":"Executing query [m8j7ljnl5ijjdh6aq9v]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1003]","timestamp":"2025-03-21T20:04:48.705Z"}
{"level":"debug","message":"Executing query [m8j7ljnnsrngv09okqs]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742587488681\"]","timestamp":"2025-03-21T20:04:48.707Z"}
{"level":"debug","message":"Executing query [m8j7ljno0tslqk1z237j]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",1003]","timestamp":"2025-03-21T20:04:48.708Z"}
{"level":"debug","message":"Executing query [m8j7ljns4eggl749ynb]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1003]","timestamp":"2025-03-21T20:04:48.712Z"}
{"level":"debug","message":"Executing query [m8j7ljnumwbzhtihyd]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[1003]","timestamp":"2025-03-21T20:04:48.714Z"}
{"level":"debug","message":"Executing query [m8j7ljnxdn8oflm81ic]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1003]","timestamp":"2025-03-21T20:04:48.717Z"}
{"level":"debug","message":"Executing query [m8j7ljnz5irl4cr0kyr]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[1003]","timestamp":"2025-03-21T20:04:48.719Z"}
{"level":"debug","message":"Executing query [m8j7ljo0ubo41e67hwh]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1003]","timestamp":"2025-03-21T20:04:48.720Z"}
{"level":"debug","message":"Executing query [m8j7ljo474ifpavke6r]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1003]","timestamp":"2025-03-21T20:04:48.724Z"}
{"level":"debug","message":"Executing query [m8j7ljo5uk882yph5p8]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T20:04:48.725Z"}
{"level":"debug","message":"Executing query [m8j7ljo73a49urwzyzq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:48.727Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:48.727Z"}
{"level":"debug","message":"Executing query [m8j7ljqwgr60crcz1fm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T20:04:48.824Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:48.836Z"}
{"level":"debug","message":"Executing query [m8j7ljraick7vpusmd]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T20:04:48.838Z"}
{"level":"debug","message":"Executing query [m8j7ljrb2il8lh81uv9]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T20:04:48.839Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T20:04:48.846Z"}
{"level":"debug","message":"Executing query [m8j7ljrinjjwxmdsz7a]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T20:04:48.846Z"}
{"level":"debug","message":"Executing query [m8j7ljrm8kr6f9kk3uk]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T20:04:48.850Z"}
{"level":"debug","message":"Executing query [m8j7ljrnsfoh7eqnyt]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T20:04:48.851Z"}
{"level":"debug","message":"Executing query [m8j7ljrosjkjocjygsi]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, PasswordHash, Salt, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",\"testSalt123\",999,999]","timestamp":"2025-03-21T20:04:48.852Z"}
{"level":"debug","message":"Executing query [m8j7ljrs9vnqj64yjm]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1008]","timestamp":"2025-03-21T20:04:48.856Z"}
{"level":"debug","message":"Executing query [m8j7ljruiavqimg1lxm]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T20:04:48.858Z"}
{"level":"debug","message":"Executing query [m8j7ljrwk5dtru4wul]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1008]","timestamp":"2025-03-21T20:04:48.860Z"}
{"level":"debug","message":"Executing query [m8j7ljs0triynl0rl3]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1008]","timestamp":"2025-03-21T20:04:48.864Z"}
{"level":"debug","message":"Executing query [m8j7ljs2fx7mikhz7vv]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1008]","timestamp":"2025-03-21T20:04:48.866Z"}
{"level":"debug","message":"Executing query [m8j7ljs772ijy1ea9bu]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1008]","timestamp":"2025-03-21T20:04:48.871Z"}
{"level":"debug","message":"Executing query [m8j7ljs9kcrvokpvox]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T20:04:48.873Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:48.874Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T20:04:48.980Z"}
{"level":"debug","message":"Executing query [m8j7ljvcmqg1h01vj7]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T20:04:48.984Z"}
{"level":"debug","message":"Executing query [m8j7ljve40oj5u9wxbu]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T20:04:48.986Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8j7ljve40oj5u9wxbu]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T20:04:48.988Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T20:04:48.990Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T20:04:49.070Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T20:04:49.071Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T20:04:49.071Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T20:04:49.071Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T20:04:49.072Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T20:04:49.072Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:02.242Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:02.287Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:02.955Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:02.964Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T21:48:03.675Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:03.684Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:48:03.686Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:04.367Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:48:04.369Z"}
{"level":"debug","message":"Executing query [m8jbaccpxwvz661kgnq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:04.489Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:04.499Z"}
{"level":"debug","message":"Executing query [m8jbacd2ivc97uep5in]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:04.502Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:48:04.506Z"}
{"level":"debug","message":"Executing query [m8jbacd627myi3v4a8v]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T21:48:04.506Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-21T21:48:04.508Z"}
{"level":"debug","message":"Executing query [m8jbacd92ckfxnpa0d]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T21:48:04.509Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T21:48:04.510Z"}
{"level":"debug","message":"Executing query [m8jbacdbelqjs2mxkg]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:04.511Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:48:04.513Z"}
{"level":"debug","message":"Executing query [m8jbacdh1f80yzte59j]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T21:48:04.517Z"}
{"level":"debug","message":"Executing query [m8jbacdljj33auc07j]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-21T21:48:04.521Z"}
{"level":"debug","message":"Executing query [m8jbacdoxdkr2b0za59]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:04.524Z"}
{"level":"debug","message":"Executing query [m8jbacgib2v6iaro8bn]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:04.626Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:04.636Z"}
{"level":"debug","message":"Executing query [m8jbacgturdpo7stj9f]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:04.638Z"}
{"level":"debug","message":"Executing query [m8jbacgv3u152rg7hzo]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742593684626\"]","timestamp":"2025-03-21T21:48:04.639Z"}
{"level":"debug","message":"Executing query [m8jbacgyikyw3t7lfvg]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742593684626\",\"TEST-OFICIO-1742593684626\",4916,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:48:04.642Z"}
{"level":"debug","message":"Executing query [m8jbach3xv18s8xhxd]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.647Z"}
{"level":"debug","message":"Executing query [m8jbach7lidxq7nwe98]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742593684626\"]","timestamp":"2025-03-21T21:48:04.651Z"}
{"level":"debug","message":"Executing query [m8jbachbzpvx4u8dsb]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",1]","timestamp":"2025-03-21T21:48:04.655Z"}
{"level":"debug","message":"Executing query [m8jbachf5jdbvjusxae]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.659Z"}
{"level":"debug","message":"Executing query [m8jbachht6wx63nfnan]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.661Z"}
{"level":"debug","message":"Executing query [m8jbachkxgqlls2sqa]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.664Z"}
{"level":"debug","message":"Executing query [m8jbachmtzjds9l3ke]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.666Z"}
{"level":"debug","message":"Executing query [m8jbachpcp6xyvkb1t]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.669Z"}
{"level":"debug","message":"Executing query [m8jbachsb5wxamkzh8k]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742593684672\",\"TEST-SP-OFICIO-1742593684672\",764,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T21:48:04.672Z"}
{"level":"debug","message":"Executing query [m8jbachxloy5afoij2]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742593684672\"]","timestamp":"2025-03-21T21:48:04.677Z"}
{"level":"debug","message":"Executing query [m8jbachzpfaezb9rcd9]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742593684672\"]","timestamp":"2025-03-21T21:48:04.679Z"}
{"level":"debug","message":"Executing query [m8jbaci23joohgqe0mg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:04.682Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:04.683Z"}
{"level":"debug","message":"Executing query [m8jbaclb2m2ltlsuov9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:04.799Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:04.809Z"}
{"level":"debug","message":"Executing query [m8jbaclmvxk0hescrrh]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:04.811Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:48:04.812Z"}
{"level":"debug","message":"Executing query [m8jbaclo0p9vqi4tdfu]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:04.812Z"}
{"level":"debug","message":"Executing query [m8jbaclp2zn24pjo9b]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:04.813Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:48:04.814Z"}
{"level":"debug","message":"Executing query [m8jbaclufmgag9gwhjd]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742593684799\"]","timestamp":"2025-03-21T21:48:04.818Z"}
{"level":"debug","message":"Executing query [m8jbaclygymbyodnt9g]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T21:48:04.822Z"}
{"level":"debug","message":"Executing query [m8jbacm1ikekxwnzxz]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T21:48:04.825Z"}
{"level":"debug","message":"Executing query [m8jbacm3x157f9jfx48]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T21:48:04.827Z"}
{"level":"debug","message":"Executing query [m8jbacm44syb2j37c3l]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:04.828Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:04.830Z"}
{"level":"debug","message":"Executing query [m8jbacp6xs8n6xzj6s]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:04.938Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:04.949Z"}
{"level":"debug","message":"Executing query [m8jbacpj79a534524rx]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:04.951Z"}
{"level":"debug","message":"Executing query [m8jbacplas6gq3fi0lr]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742593684937\"]","timestamp":"2025-03-21T21:48:04.953Z"}
{"level":"debug","message":"Executing query [m8jbacpnomei8qxhrzh]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742593684937\",\"TEST-OFI-FORENSE-1742593684937\",735,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742593684937\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:48:04.955Z"}
{"level":"debug","message":"Executing query [m8jbacpuux2unvyozyk]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.962Z"}
{"level":"debug","message":"Executing query [m8jbacpwfwnpvjneq8s]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742593684937\"]","timestamp":"2025-03-21T21:48:04.965Z"}
{"level":"debug","message":"Executing query [m8jbacpy2sls79q4a2o]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",1]","timestamp":"2025-03-21T21:48:04.966Z"}
{"level":"debug","message":"Executing query [m8jbacq149wpgwyctza]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.969Z"}
{"level":"debug","message":"Executing query [m8jbacq3n6ojlz2cx6]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.971Z"}
{"level":"debug","message":"Executing query [m8jbacq66fvanc1gmkp]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.974Z"}
{"level":"debug","message":"Executing query [m8jbacq8dlr92o5buaj]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.976Z"}
{"level":"debug","message":"Executing query [m8jbacqa1tstmtip7eb]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-21T21:48:04.978Z"}
{"level":"debug","message":"Executing query [m8jbacqcrjveeql4ghr]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742593684980\",\"TEST-SP-OFI-FORENSE-1742593684980\",69,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T21:48:04.980Z"}
{"level":"debug","message":"Executing query [m8jbacqgfxh9t853t2b]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742593684980\"]","timestamp":"2025-03-21T21:48:04.984Z"}
{"level":"debug","message":"Executing query [m8jbacqhnfsrf4z7lio]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742593684980\"]","timestamp":"2025-03-21T21:48:04.985Z"}
{"level":"debug","message":"Executing query [m8jbacqltk9lo8s1oh]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:04.989Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:04.990Z"}
{"level":"debug","message":"Executing query [m8jbactd5cvxnwjbx0c]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:05.089Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:05.098Z"}
{"level":"debug","message":"Executing query [m8jbacto0ttk4fcjq7j8]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:05.100Z"}
{"level":"debug","message":"Executing query [m8jbactq92gpa22rmdk]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:05.102Z"}
{"level":"debug","message":"Executing query [m8jbactr46d4glhj9g8]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:05.103Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T21:48:05.104Z"}
{"level":"debug","message":"Executing query [m8jbactwbm82cb4aj8]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T21:48:05.108Z"}
{"level":"debug","message":"Executing query [m8jbacu0q9xkw03tl6l]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:05.112Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:05.113Z"}
{"level":"debug","message":"Executing query [m8jbacwsuyx5cihrj0g]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:05.212Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:05.223Z"}
{"level":"debug","message":"Executing query [m8jbacx41g0835mk4h9]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742593685211\"]","timestamp":"2025-03-21T21:48:05.224Z"}
{"level":"debug","message":"Executing query [m8jbacx6gyh0a4vuyjq]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742593685211\"]","timestamp":"2025-03-21T21:48:05.226Z"}
{"level":"debug","message":"Executing query [m8jbacx8dx4dil15ci]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742593685211\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:48:05.228Z"}
{"level":"debug","message":"Executing query [m8jbacxdiiwoyik0pip]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.233Z"}
{"level":"debug","message":"Executing query [m8jbacxfye0q9l9mfc9]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742593685211\"]","timestamp":"2025-03-21T21:48:05.235Z"}
{"level":"debug","message":"Executing query [m8jbacxhiownsqeipo]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",2]","timestamp":"2025-03-21T21:48:05.237Z"}
{"level":"debug","message":"Executing query [m8jbacxl5nczq6owb2h]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.241Z"}
{"level":"debug","message":"Executing query [m8jbacxm0ch9dlzhuqfo]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.242Z"}
{"level":"debug","message":"Executing query [m8jbacxqd4ce4r2yf7]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.246Z"}
{"level":"debug","message":"Executing query [m8jbacxr1w4q9503i27h]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.247Z"}
{"level":"debug","message":"Executing query [m8jbacxspgyfx56q63]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.248Z"}
{"level":"debug","message":"Executing query [m8jbacxxl0dwo01kqhj]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.253Z"}
{"level":"debug","message":"Executing query [m8jbacxyhk2wehjd4y9]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:48:05.254Z"}
{"level":"debug","message":"Executing query [m8jbacy0l0dsbnwmzph]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:05.256Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:05.258Z"}
{"level":"debug","message":"Executing query [m8jbad1h31tu46zj97v]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:05.381Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:05.392Z"}
{"level":"debug","message":"Executing query [m8jbad1uwgpnz4eoywh]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T21:48:05.394Z"}
{"level":"debug","message":"Executing query [m8jbad1wel91w2vy7xm]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T21:48:05.396Z"}
{"level":"debug","message":"Executing query [m8jbad1xk5slq4fji1]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive, Descripcion) VALUES (?, ?, ?, ?, ?, ?)","params":"[999,\"Área de Prueba\",\"TEST-AREA\",\"PRUEBA\",1,\"Área creada para pruebas\"]","timestamp":"2025-03-21T21:48:05.397Z"}
{"level":"debug","message":"Executing query [m8jbad21ouyvvcdqswc]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[999,\"Rol de Prueba\",\"Rol creado para pruebas\",1,255]","timestamp":"2025-03-21T21:48:05.401Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T21:48:05.403Z"}
{"level":"debug","message":"Executing query [m8jbad23k86pjqqu6v]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:48:05.403Z"}
{"level":"debug","message":"Executing query [m8jbad25sgcopsqwsgr]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:48:05.405Z"}
{"level":"debug","message":"Executing query [m8jbad277769qgj9uwe]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:48:05.407Z"}
{"level":"debug","message":"Executing query [m8jbad28vruclusl0x]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T21:48:05.408Z"}
{"level":"debug","message":"Executing query [m8jbad2cyyl5592t9q]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.412Z"}
{"level":"debug","message":"Executing query [m8jbad2f1hrj7dvfc4n]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:48:05.415Z"}
{"level":"debug","message":"Executing query [m8jbad2gorcjyly0p9s]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",2]","timestamp":"2025-03-21T21:48:05.416Z"}
{"level":"debug","message":"Executing query [m8jbad2jvwttjl4d0m]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.419Z"}
{"level":"debug","message":"Executing query [m8jbad2lj4if6rxbwr]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.421Z"}
{"level":"debug","message":"Executing query [m8jbad2ou4bqjcuzsyi]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[2]","timestamp":"2025-03-21T21:48:05.424Z"}
{"level":"debug","message":"Executing query [m8jbad2p466fz1xj4ea]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:05.425Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:05.426Z"}
{"level":"debug","message":"Executing query [m8jbad5espoklz68fe]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:05.522Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:05.531Z"}
{"level":"debug","message":"Executing query [m8jbad5pju4w0k2edt]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:48:05.533Z"}
{"level":"debug","message":"Executing query [m8jbad5q4y2ck5ay7t]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742593685521\"]","timestamp":"2025-03-21T21:48:05.534Z"}
{"level":"debug","message":"Executing query [m8jbad5sp14u8ho8epg]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742593685521\",\"TEST-OFI-QUIMICA-1742593685521\",9681,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:48:05.536Z"}
{"level":"debug","message":"Executing query [m8jbad5z88vqal03nly]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.543Z"}
{"level":"debug","message":"Executing query [m8jbad6148etavdj45j]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742593685521\"]","timestamp":"2025-03-21T21:48:05.545Z"}
{"level":"debug","message":"Executing query [m8jbad63w4p9j8o353m]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",1]","timestamp":"2025-03-21T21:48:05.547Z"}
{"level":"debug","message":"Executing query [m8jbad67z2c901hk9ah]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.551Z"}
{"level":"debug","message":"Executing query [m8jbad69zno55irt4ea]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.553Z"}
{"level":"debug","message":"Executing query [m8jbad6cjohkj1lx8yk]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.556Z"}
{"level":"debug","message":"Executing query [m8jbad6f6igwedtdmoc]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.559Z"}
{"level":"debug","message":"Executing query [m8jbad6igvmaci0xc9]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.562Z"}
{"level":"debug","message":"Executing query [m8jbad6k0uotx80xo99o]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:05.564Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:05.566Z"}
{"level":"debug","message":"Executing query [m8jbad99rh7phtsvvtg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:48:05.661Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:05.673Z"}
{"level":"debug","message":"Executing query [m8jbad9n5kx8qyvi1iw]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742593685660\"]","timestamp":"2025-03-21T21:48:05.675Z"}
{"level":"debug","message":"Executing query [m8jbad9ob8iy1hjjn5p]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742593685660\",true]","timestamp":"2025-03-21T21:48:05.676Z"}
{"level":"debug","message":"Executing query [m8jbad9s8iygr633t4h]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.680Z"}
{"level":"debug","message":"Executing query [m8jbad9v7rrizr1r9k]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742593685660\"]","timestamp":"2025-03-21T21:48:05.683Z"}
{"level":"debug","message":"Executing query [m8jbad9xg73z1k7lttk]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",1]","timestamp":"2025-03-21T21:48:05.685Z"}
{"level":"debug","message":"Executing query [m8jbada0almjg1d1d1r]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.688Z"}
{"level":"debug","message":"Executing query [m8jbada20muog8rz19se]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.690Z"}
{"level":"debug","message":"Executing query [m8jbada4cuszwtwwo8o]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.692Z"}
{"level":"debug","message":"Executing query [m8jbada6wz5qg28sdka]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.694Z"}
{"level":"debug","message":"Executing query [m8jbada75n5yajcodjq]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.695Z"}
{"level":"debug","message":"Executing query [m8jbada9btxyxj6pqll]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-21T21:48:05.697Z"}
{"level":"debug","message":"Executing query [m8jbadaachpvsnc3cg]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:48:05.698Z"}
{"level":"debug","message":"Executing query [m8jbadab1vv4efb59s1]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:48:05.699Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:05.700Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:48:05.811Z"}
{"level":"debug","message":"Executing query [m8jbaddi2tz4u5f9lgq]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T21:48:05.814Z"}
{"level":"debug","message":"Executing query [m8jbaddkw5oyrt4r7wo]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T21:48:05.816Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbaddkw5oyrt4r7wo]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T21:48:05.817Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:48:05.818Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T21:48:05.897Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T21:48:05.899Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T21:48:05.899Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T21:48:05.900Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T21:48:05.900Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T21:48:05.900Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:44.903Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:44.939Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:45.706Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:45.717Z"}
{"level":"debug","message":"Executing query [m8jbhnr7q9sppy5lzfm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:45.859Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:45.875Z"}
{"level":"debug","message":"Executing query [m8jbhnrqurycoiabltg]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:45.878Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:53:45.882Z"}
{"level":"debug","message":"Executing query [m8jbhnrvptpac9ub6ah]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:45.883Z"}
{"level":"debug","message":"Executing query [m8jbhnrxquk6tbtpq1]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:45.885Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:53:45.887Z"}
{"level":"debug","message":"Executing query [m8jbhns3jtqi6y5hp3]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594025858\"]","timestamp":"2025-03-21T21:53:45.891Z"}
{"level":"debug","message":"Executing query [m8jbhns91dhml4z99h]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T21:53:45.897Z"}
{"level":"debug","message":"Executing query [m8jbhnsdc3vuwrujcgu]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T21:53:45.902Z"}
{"level":"debug","message":"Executing query [m8jbhnsgfsuaxgcffeg]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T21:53:45.904Z"}
{"level":"debug","message":"Executing query [m8jbhnsim6d24wq7jx]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:45.906Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:45.908Z"}
{"level":"debug","message":"Executing query [m8jbhnw0yhj5gxsof0a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:46.032Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:46.046Z"}
{"level":"debug","message":"Executing query [m8jbhnwg0drltlpw3bs]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:46.048Z"}
{"level":"debug","message":"Executing query [m8jbhnwhusv33bbekoq]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:46.049Z"}
{"level":"debug","message":"Executing query [m8jbhnwiwzbue4q9h]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:46.050Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T21:53:46.052Z"}
{"level":"debug","message":"Executing query [m8jbhnwozpkqx8e71hs]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T21:53:46.056Z"}
{"level":"debug","message":"Executing query [m8jbhnwtfsadypjrbs]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:46.061Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:46.062Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:46.814Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T21:53:46.817Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:46.828Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:47.534Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:53:47.536Z"}
{"level":"debug","message":"Executing query [m8jbhp55pjsjg8usijm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:47.657Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:47.666Z"}
{"level":"debug","message":"Executing query [m8jbhp5f8sdbwykymrb]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T21:53:47.667Z"}
{"level":"debug","message":"Executing query [m8jbhp5gef2qc01ufu9]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T21:53:47.668Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T21:53:47.670Z"}
{"level":"debug","message":"Executing query [m8jbhp5itqqjfozs8dq]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:53:47.670Z"}
{"level":"debug","message":"Executing query [m8jbhp5jguuezt25s06]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:53:47.671Z"}
{"level":"debug","message":"Executing query [m8jbhp5lr43yoplf73]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:53:47.673Z"}
{"level":"debug","message":"Executing query [m8jbhp5mx5znrg20oc]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T21:53:47.674Z"}
{"level":"debug","message":"Executing query [m8jbhp5shxjtvwc4mql]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.680Z"}
{"level":"debug","message":"Executing query [m8jbhp5uaak2fdsotgw]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:53:47.682Z"}
{"level":"debug","message":"Executing query [m8jbhp5xs4lbqfau39]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",3]","timestamp":"2025-03-21T21:53:47.685Z"}
{"level":"debug","message":"Executing query [m8jbhp60jj9dl29nyi9]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.688Z"}
{"level":"debug","message":"Executing query [m8jbhp62thtxf9nnpg]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.690Z"}
{"level":"debug","message":"Executing query [m8jbhp661u6h05ji86]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.694Z"}
{"level":"debug","message":"Executing query [m8jbhp678wren6ld51r]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:47.695Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:47.696Z"}
{"level":"debug","message":"Executing query [m8jbhp97u7f6cfjfx5p]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:47.803Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:47.816Z"}
{"level":"debug","message":"Executing query [m8jbhp9lmg78o3h8eg8]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:47.817Z"}
{"level":"debug","message":"Executing query [m8jbhp9nj1whkb1knwr]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594027803\"]","timestamp":"2025-03-21T21:53:47.819Z"}
{"level":"debug","message":"Executing query [m8jbhp9pi78xbbpm2b]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594027803\",\"TEST-OFICIO-1742594027803\",2151,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:53:47.821Z"}
{"level":"debug","message":"Executing query [m8jbhp9vwm8u05jeri]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.827Z"}
{"level":"debug","message":"Executing query [m8jbhp9yilhn6ty0qdn]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594027803\"]","timestamp":"2025-03-21T21:53:47.830Z"}
{"level":"debug","message":"Executing query [m8jbhpa1ydpjba6dkej]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",3]","timestamp":"2025-03-21T21:53:47.833Z"}
{"level":"debug","message":"Executing query [m8jbhpa49swg362i0t]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.836Z"}
{"level":"debug","message":"Executing query [m8jbhpa7v788c87es]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.839Z"}
{"level":"debug","message":"Executing query [m8jbhpaa135vdcef03r]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.842Z"}
{"level":"debug","message":"Executing query [m8jbhpacev2nh0trh8o]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.844Z"}
{"level":"debug","message":"Executing query [m8jbhpafkv0tzjoxi6l]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.847Z"}
{"level":"debug","message":"Executing query [m8jbhpagmptc5symrs]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594027848\",\"TEST-SP-OFICIO-1742594027848\",5209,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T21:53:47.848Z"}
{"level":"debug","message":"Executing query [m8jbhpak3333m6hp47a]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594027848\"]","timestamp":"2025-03-21T21:53:47.852Z"}
{"level":"debug","message":"Executing query [m8jbhpamorsxkta4sdb]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594027848\"]","timestamp":"2025-03-21T21:53:47.854Z"}
{"level":"debug","message":"Executing query [m8jbhpaopc7lthl057e]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:47.856Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:47.858Z"}
{"level":"debug","message":"Executing query [m8jbhpdj56apmhu8azg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:47.959Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:47.970Z"}
{"level":"debug","message":"Executing query [m8jbhpdvzpf1ey0nx4g]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:47.971Z"}
{"level":"debug","message":"Executing query [m8jbhpdxovsow7dfejr]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594027958\"]","timestamp":"2025-03-21T21:53:47.973Z"}
{"level":"debug","message":"Executing query [m8jbhpdyi7bjns58yl]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594027958\",\"TEST-OFI-FORENSE-1742594027958\",7022,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594027958\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:53:47.974Z"}
{"level":"debug","message":"Executing query [m8jbhpe3tmga8oiw9s]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.979Z"}
{"level":"debug","message":"Executing query [m8jbhpe5rrwtilomzh9]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594027958\"]","timestamp":"2025-03-21T21:53:47.981Z"}
{"level":"debug","message":"Executing query [m8jbhpe7w070zjyhh9]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",3]","timestamp":"2025-03-21T21:53:47.983Z"}
{"level":"debug","message":"Executing query [m8jbhpebpmze2a10dz]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.987Z"}
{"level":"debug","message":"Executing query [m8jbhpeeecqpkro666]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.990Z"}
{"level":"debug","message":"Executing query [m8jbhpeh8o5noalvhju]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.993Z"}
{"level":"debug","message":"Executing query [m8jbhpeisd7385que5d]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.994Z"}
{"level":"debug","message":"Executing query [m8jbhpemoctec5aff9e]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-21T21:53:47.998Z"}
{"level":"debug","message":"Executing query [m8jbhpenfqxk69ufrab]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594027999\",\"TEST-SP-OFI-FORENSE-1742594027999\",6214,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T21:53:47.999Z"}
{"level":"debug","message":"Executing query [m8jbhpergdq0486ykr7]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594027999\"]","timestamp":"2025-03-21T21:53:48.003Z"}
{"level":"debug","message":"Executing query [m8jbhpetw8gdgvjpemd]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594027999\"]","timestamp":"2025-03-21T21:53:48.005Z"}
{"level":"debug","message":"Executing query [m8jbhpewood1lcmyuyg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:48.008Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:48.009Z"}
{"level":"debug","message":"Executing query [m8jbhphspbpli0hgfij]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:48.112Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:48.125Z"}
{"level":"debug","message":"Executing query [m8jbhpi6z8jt0i5cra8]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594028111\"]","timestamp":"2025-03-21T21:53:48.126Z"}
{"level":"debug","message":"Executing query [m8jbhpi8v6lj1qs98ao]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594028111\"]","timestamp":"2025-03-21T21:53:48.128Z"}
{"level":"debug","message":"Executing query [m8jbhpi96clgyc0mwlo]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594028111\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:53:48.129Z"}
{"level":"debug","message":"Executing query [m8jbhpifvkdbh6t9b1]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T21:53:48.135Z"}
{"level":"debug","message":"Executing query [m8jbhpiiyjtnrz6x4dh]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594028111\"]","timestamp":"2025-03-21T21:53:48.138Z"}
{"level":"debug","message":"Executing query [m8jbhpikdgi12ejbx0m]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1000]","timestamp":"2025-03-21T21:53:48.140Z"}
{"level":"debug","message":"Executing query [m8jbhpin85puuk1wubs]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T21:53:48.143Z"}
{"level":"debug","message":"Executing query [m8jbhpipilvrk932el]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T21:53:48.145Z"}
{"level":"debug","message":"Executing query [m8jbhpiry1ctzxfq2c]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T21:53:48.147Z"}
{"level":"debug","message":"Executing query [m8jbhpitm77of04bbo]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T21:53:48.149Z"}
{"level":"debug","message":"Executing query [m8jbhpivjy3482inrd]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T21:53:48.151Z"}
{"level":"debug","message":"Executing query [m8jbhpiy4b3kxaheaq6]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-21T21:53:48.154Z"}
{"level":"debug","message":"Executing query [m8jbhpizm9ah2vsix2]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:53:48.155Z"}
{"level":"debug","message":"Executing query [m8jbhpj2h936ghj5c1]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:48.158Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:48.159Z"}
{"level":"debug","message":"Executing query [m8jbhplxdvgpex34ms]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:48.261Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:48.271Z"}
{"level":"debug","message":"Executing query [m8jbhpm9qs7zpwuma1]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:48.273Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:53:48.274Z"}
{"level":"debug","message":"Executing query [m8jbhpmaboqkim4yvqb]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T21:53:48.274Z"}
{"level":"debug","message":"Executing query [m8jbhpmbz2wnucq0eu]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T21:53:48.275Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T21:53:48.277Z"}
{"level":"debug","message":"Executing query [m8jbhpmdpba5gxtmmfo]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:48.277Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:53:48.278Z"}
{"level":"debug","message":"Executing query [m8jbhpmi3mo39oow79v]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T21:53:48.282Z"}
{"level":"debug","message":"Executing query [m8jbhpmlpc1ue39sfm]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T21:53:48.285Z"}
{"level":"debug","message":"Executing query [m8jbhpmnhdkf6ddh62d]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:48.287Z"}
{"level":"debug","message":"Executing query [m8jbhppfo0t2plnu3fp]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:48.387Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:48.400Z"}
{"level":"debug","message":"Executing query [m8jbhpptyjw6dsypgn]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:53:48.401Z"}
{"level":"debug","message":"Executing query [m8jbhppvx8viuhqa9rq]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594028386\"]","timestamp":"2025-03-21T21:53:48.403Z"}
{"level":"debug","message":"Executing query [m8jbhppwu3rs54bob3m]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594028386\",\"TEST-OFI-QUIMICA-1742594028386\",8799,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:53:48.404Z"}
{"level":"debug","message":"Executing query [m8jbhpq2tpvfugxjpc]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.410Z"}
{"level":"debug","message":"Executing query [m8jbhpq443nk8zu4d0v]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594028386\"]","timestamp":"2025-03-21T21:53:48.412Z"}
{"level":"debug","message":"Executing query [m8jbhpq7r9cgo9adz1]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",2]","timestamp":"2025-03-21T21:53:48.415Z"}
{"level":"debug","message":"Executing query [m8jbhpqarj6zhb7jp6s]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.418Z"}
{"level":"debug","message":"Executing query [m8jbhpqch8oayaky37b]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.420Z"}
{"level":"debug","message":"Executing query [m8jbhpqfn99nhavc5u9]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.423Z"}
{"level":"debug","message":"Executing query [m8jbhpqha7vl96rshz9]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.425Z"}
{"level":"debug","message":"Executing query [m8jbhpqkjzc4jwuaqmg]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.428Z"}
{"level":"debug","message":"Executing query [m8jbhpqm5h220ox0lin]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:48.430Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:48.431Z"}
{"level":"debug","message":"Executing query [m8jbhpteuhkgpm9wtkg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:53:48.531Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:48.541Z"}
{"level":"debug","message":"Executing query [m8jbhptrrtmvam10z1d]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594028530\"]","timestamp":"2025-03-21T21:53:48.543Z"}
{"level":"debug","message":"Executing query [m8jbhpts9hgxlzggbm8]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594028530\",true]","timestamp":"2025-03-21T21:53:48.544Z"}
{"level":"debug","message":"Executing query [m8jbhptw6gb9wurjf22]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.548Z"}
{"level":"debug","message":"Executing query [m8jbhptyviv9dpilgon]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594028530\"]","timestamp":"2025-03-21T21:53:48.550Z"}
{"level":"debug","message":"Executing query [m8jbhpu0j0bzrmyj07g]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",2]","timestamp":"2025-03-21T21:53:48.552Z"}
{"level":"debug","message":"Executing query [m8jbhpu3a36wih76pmp]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.555Z"}
{"level":"debug","message":"Executing query [m8jbhpu5ksnf6szygjl]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.557Z"}
{"level":"debug","message":"Executing query [m8jbhpu859bix8cf05v]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.560Z"}
{"level":"debug","message":"Executing query [m8jbhpuaie4jw1bl55b]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.562Z"}
{"level":"debug","message":"Executing query [m8jbhpub3ga57rdepjy]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.563Z"}
{"level":"debug","message":"Executing query [m8jbhpuey5t6xiy6pqf]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-21T21:53:48.566Z"}
{"level":"debug","message":"Executing query [m8jbhpugfzflg5mfz5n]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:53:48.568Z"}
{"level":"debug","message":"Executing query [m8jbhpuh4ai1k8evkkv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:53:48.569Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:48.570Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:53:48.684Z"}
{"level":"debug","message":"Executing query [m8jbhpxr35du48ithlr]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T21:53:48.687Z"}
{"level":"debug","message":"Executing query [m8jbhpxt80erc3hlnk]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T21:53:48.689Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbhpxt80erc3hlnk]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T21:53:48.691Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:53:48.692Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T21:53:48.774Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T21:53:48.775Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T21:53:48.776Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T21:53:48.776Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T21:53:48.777Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T21:53:48.777Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:22.143Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:22.181Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:22.912Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:22.922Z"}
{"level":"debug","message":"Executing query [m8jbl11kmt1h8r3okx]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:23.048Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:23.063Z"}
{"level":"debug","message":"Executing query [m8jbl121afhswrzc6x]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:23.065Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:56:23.070Z"}
{"level":"debug","message":"Executing query [m8jbl126cu81s9wtg8m]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:23.071Z"}
{"level":"debug","message":"Executing query [m8jbl128bxj948kfjev]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:23.072Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:56:23.074Z"}
{"level":"debug","message":"Executing query [m8jbl12e25i2hjp5be]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594183047\"]","timestamp":"2025-03-21T21:56:23.078Z"}
{"level":"debug","message":"Executing query [m8jbl12kxm7dj5e7yne]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T21:56:23.084Z"}
{"level":"debug","message":"Executing query [m8jbl12p9qes4u5v3of]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T21:56:23.089Z"}
{"level":"debug","message":"Executing query [m8jbl12rpuc2ir4ggqa]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T21:56:23.091Z"}
{"level":"debug","message":"Executing query [m8jbl12tei98pq2hjuf]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:23.093Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:23.095Z"}
{"level":"debug","message":"Executing query [m8jbl16kt1n40i4ovy]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:23.228Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:23.242Z"}
{"level":"debug","message":"Executing query [m8jbl1703oktgaqrt9m]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:23.244Z"}
{"level":"debug","message":"Executing query [m8jbl171ldfiy9ye2u]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:23.245Z"}
{"level":"debug","message":"Executing query [m8jbl172qrkhbe00er]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:23.246Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T21:56:23.249Z"}
{"level":"debug","message":"Executing query [m8jbl179bp5dwh5xl5g]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T21:56:23.253Z"}
{"level":"debug","message":"Executing query [m8jbl17e8aq37zk5zl]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:23.258Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:23.259Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T21:56:23.964Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:23.973Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:56:23.975Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:24.681Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:56:24.683Z"}
{"level":"debug","message":"Executing query [m8jbl2e9wp2r8qfe34i]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:24.802Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:24.813Z"}
{"level":"debug","message":"Executing query [m8jbl2emjrju0fwuf5]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:24.814Z"}
{"level":"debug","message":"Executing query [m8jbl2eo84pqccawa6k]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594184801\"]","timestamp":"2025-03-21T21:56:24.816Z"}
{"level":"debug","message":"Executing query [m8jbl2eqidiytdxfqm]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594184801\",\"TEST-OFICIO-1742594184801\",9499,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:56:24.818Z"}
{"level":"debug","message":"Executing query [m8jbl2ey5oc9lsvh5ev]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.826Z"}
{"level":"debug","message":"Executing query [m8jbl2f141ip1vlyzup]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594184801\"]","timestamp":"2025-03-21T21:56:24.829Z"}
{"level":"debug","message":"Executing query [m8jbl2f4ixsej2ecz2]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",5]","timestamp":"2025-03-21T21:56:24.832Z"}
{"level":"debug","message":"Executing query [m8jbl2f85uabq0esbn4]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.836Z"}
{"level":"debug","message":"Executing query [m8jbl2fboy4xnmd8yx]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.839Z"}
{"level":"debug","message":"Executing query [m8jbl2fei0c5igrxutm]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.842Z"}
{"level":"debug","message":"Executing query [m8jbl2ff51jrl8mp7n6]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.843Z"}
{"level":"debug","message":"Executing query [m8jbl2fj5zcjvziry1m]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.847Z"}
{"level":"debug","message":"Executing query [m8jbl2flknkm4e0lj6]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594184849\",\"TEST-SP-OFICIO-1742594184849\",6363,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T21:56:24.849Z"}
{"level":"debug","message":"Executing query [m8jbl2fo2lrtap09z0r]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594184849\"]","timestamp":"2025-03-21T21:56:24.852Z"}
{"level":"debug","message":"Executing query [m8jbl2fqy7d108rqgfo]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594184849\"]","timestamp":"2025-03-21T21:56:24.854Z"}
{"level":"debug","message":"Executing query [m8jbl2ft8rew82kakk]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:24.857Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:24.859Z"}
{"level":"debug","message":"Executing query [m8jbl2iumkldx8ksx5]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:24.966Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:24.975Z"}
{"level":"debug","message":"Executing query [m8jbl2j5m09x2fvq9z]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:24.977Z"}
{"level":"debug","message":"Executing query [m8jbl2j7dvzapj94y6]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594184965\"]","timestamp":"2025-03-21T21:56:24.979Z"}
{"level":"debug","message":"Executing query [m8jbl2j8efwpa7mp5zu]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594184965\",\"TEST-OFI-FORENSE-1742594184965\",8651,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594184965\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:56:24.980Z"}
{"level":"debug","message":"Executing query [m8jbl2jd0a4vf4jdby0j]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.985Z"}
{"level":"debug","message":"Executing query [m8jbl2jgas130xn0ni4]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594184965\"]","timestamp":"2025-03-21T21:56:24.988Z"}
{"level":"debug","message":"Executing query [m8jbl2jhrlgi2opbobs]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",5]","timestamp":"2025-03-21T21:56:24.989Z"}
{"level":"debug","message":"Executing query [m8jbl2jl6y640x35afm]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.993Z"}
{"level":"debug","message":"Executing query [m8jbl2jnf7999ecxpy9]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.995Z"}
{"level":"debug","message":"Executing query [m8jbl2jquyckkrsf1ye]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T21:56:24.998Z"}
{"level":"debug","message":"Executing query [m8jbl2jsywk90cb83hm]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T21:56:25.000Z"}
{"level":"debug","message":"Executing query [m8jbl2jvrgkxtgzyw8]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-21T21:56:25.003Z"}
{"level":"debug","message":"Executing query [m8jbl2jxrf0yss8ww4]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594185005\",\"TEST-SP-OFI-FORENSE-1742594185005\",1785,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T21:56:25.005Z"}
{"level":"debug","message":"Executing query [m8jbl2k1pwz9fi3emsi]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594185005\"]","timestamp":"2025-03-21T21:56:25.009Z"}
{"level":"debug","message":"Executing query [m8jbl2k2myweh1pmels]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594185005\"]","timestamp":"2025-03-21T21:56:25.010Z"}
{"level":"debug","message":"Executing query [m8jbl2k60l6cktpgovn]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:25.014Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:25.015Z"}
{"level":"debug","message":"Executing query [m8jbl2n30oal626py1jd]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:25.119Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:25.133Z"}
{"level":"debug","message":"Executing query [m8jbl2njvsjn37vfxa]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594185118\"]","timestamp":"2025-03-21T21:56:25.135Z"}
{"level":"debug","message":"Executing query [m8jbl2nl28x2go6jwxj]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594185118\"]","timestamp":"2025-03-21T21:56:25.137Z"}
{"level":"debug","message":"Executing query [m8jbl2nmnt9dja6b497]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594185118\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:56:25.138Z"}
{"level":"debug","message":"Executing query [m8jbl2nqf2wdbxxy84]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T21:56:25.142Z"}
{"level":"debug","message":"Executing query [m8jbl2ntb4n6qr87jzt]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594185118\"]","timestamp":"2025-03-21T21:56:25.145Z"}
{"level":"debug","message":"Executing query [m8jbl2nv7sy7vzierzw]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1001]","timestamp":"2025-03-21T21:56:25.147Z"}
{"level":"debug","message":"Executing query [m8jbl2nyihalvjr1dc]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T21:56:25.151Z"}
{"level":"debug","message":"Executing query [m8jbl2o1xev3bvmx0v]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T21:56:25.153Z"}
{"level":"debug","message":"Executing query [m8jbl2o3uubfq3c2tl]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T21:56:25.155Z"}
{"level":"debug","message":"Executing query [m8jbl2o6rr48fftw6z]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T21:56:25.158Z"}
{"level":"debug","message":"Executing query [m8jbl2o7j5rek6z54om]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T21:56:25.159Z"}
{"level":"debug","message":"Executing query [m8jbl2oajtdtboj4ixo]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-21T21:56:25.162Z"}
{"level":"debug","message":"Executing query [m8jbl2oc3key4q3p35x]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:56:25.165Z"}
{"level":"debug","message":"Executing query [m8jbl2oe3cxlh1hdkat]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:25.166Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:25.168Z"}
{"level":"debug","message":"Executing query [m8jbl2rivcagntl3b58]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:25.279Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:25.288Z"}
{"level":"debug","message":"Executing query [m8jbl2rvw56w75bp3g]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T21:56:25.291Z"}
{"level":"debug","message":"Executing query [m8jbl2rwgoplxq9qso9]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T21:56:25.292Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T21:56:25.294Z"}
{"level":"debug","message":"Executing query [m8jbl2ryvazzml1ozp]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:56:25.294Z"}
{"level":"debug","message":"Executing query [m8jbl2rzcatow04f25c]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:56:25.295Z"}
{"level":"debug","message":"Executing query [m8jbl2s12404794hjus]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:56:25.297Z"}
{"level":"debug","message":"Executing query [m8jbl2s225flnkgrfm4]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T21:56:25.298Z"}
{"level":"debug","message":"Executing query [m8jbl2s8hvrybqcp05n]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-21T21:56:25.305Z"}
{"level":"debug","message":"Executing query [m8jbl2sbzr8uwy356dm]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:56:25.307Z"}
{"level":"debug","message":"Executing query [m8jbl2sd8m5zq51x1yl]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",4]","timestamp":"2025-03-21T21:56:25.309Z"}
{"level":"debug","message":"Executing query [m8jbl2sgikl0558doth]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-21T21:56:25.312Z"}
{"level":"debug","message":"Executing query [m8jbl2siu3a7r1zwiz]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-21T21:56:25.314Z"}
{"level":"debug","message":"Executing query [m8jbl2sloiwpklmxk1d]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-21T21:56:25.317Z"}
{"level":"debug","message":"Executing query [m8jbl2sn92scpy81eym]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:25.319Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:25.320Z"}
{"level":"debug","message":"Executing query [m8jbl2vloi2l95hhokg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:25.425Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:25.439Z"}
{"level":"debug","message":"Executing query [m8jbl2w0c5y18p2g1sn]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:25.440Z"}
{"level":"debug","message":"Executing query [m8jbl2w2lnhanxgdfx]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594185424\"]","timestamp":"2025-03-21T21:56:25.442Z"}
{"level":"debug","message":"Executing query [m8jbl2w3yizey85u71k]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594185424\",\"TEST-OFI-QUIMICA-1742594185424\",5754,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:56:25.444Z"}
{"level":"debug","message":"Executing query [m8jbl2wam6nf7638xts]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.450Z"}
{"level":"debug","message":"Executing query [m8jbl2wdrkidpra7e]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594185424\"]","timestamp":"2025-03-21T21:56:25.453Z"}
{"level":"debug","message":"Executing query [m8jbl2wfudw12k5tthq]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",3]","timestamp":"2025-03-21T21:56:25.455Z"}
{"level":"debug","message":"Executing query [m8jbl2wjvys2brbi27r]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.459Z"}
{"level":"debug","message":"Executing query [m8jbl2wkdy9yv0in44]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.461Z"}
{"level":"debug","message":"Executing query [m8jbl2wouc7ql8yuzgn]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.464Z"}
{"level":"debug","message":"Executing query [m8jbl2wp2uop83d8rb9]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.465Z"}
{"level":"debug","message":"Executing query [m8jbl2wsc6h11mlbyyv]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.468Z"}
{"level":"debug","message":"Executing query [m8jbl2wut8xilxuwcq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:25.470Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:25.472Z"}
{"level":"debug","message":"Executing query [m8jbl2zqf2sjk44iprn]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:25.575Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:25.585Z"}
{"level":"debug","message":"Executing query [m8jbl302bai638qyd7p]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594185574\"]","timestamp":"2025-03-21T21:56:25.586Z"}
{"level":"debug","message":"Executing query [m8jbl303pwr54vm5cz]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594185574\",true]","timestamp":"2025-03-21T21:56:25.587Z"}
{"level":"debug","message":"Executing query [m8jbl3085055h9kimjw]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.592Z"}
{"level":"debug","message":"Executing query [m8jbl30ac4q5c3ojhav]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594185574\"]","timestamp":"2025-03-21T21:56:25.594Z"}
{"level":"debug","message":"Executing query [m8jbl30d6id4ukq3now]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",3]","timestamp":"2025-03-21T21:56:25.597Z"}
{"level":"debug","message":"Executing query [m8jbl30gu8h8eahoxkb]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.600Z"}
{"level":"debug","message":"Executing query [m8jbl30j0e6gitqunlhb]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.603Z"}
{"level":"debug","message":"Executing query [m8jbl30m38bjs5epzqt]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.606Z"}
{"level":"debug","message":"Executing query [m8jbl30oy48vccccd9]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.608Z"}
{"level":"debug","message":"Executing query [m8jbl30q11j08e20h3fj]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.610Z"}
{"level":"debug","message":"Executing query [m8jbl30stj9dmnkioh]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-21T21:56:25.612Z"}
{"level":"debug","message":"Executing query [m8jbl30u7h45cjsg2av]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:56:25.614Z"}
{"level":"debug","message":"Executing query [m8jbl30v1suiz2tv644j]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:25.615Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:25.616Z"}
{"level":"debug","message":"Executing query [m8jbl33q9g6dv84wk6]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:56:25.719Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:25.732Z"}
{"level":"debug","message":"Executing query [m8jbl346if9t630v9z]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:25.734Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:56:25.736Z"}
{"level":"debug","message":"Executing query [m8jbl348g1ii3vn448k]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T21:56:25.736Z"}
{"level":"debug","message":"Executing query [m8jbl3497g91gqj9jly]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T21:56:25.737Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T21:56:25.738Z"}
{"level":"debug","message":"Executing query [m8jbl34azyw8qajge1e]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T21:56:25.738Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:56:25.739Z"}
{"level":"debug","message":"Executing query [m8jbl34fw0t1ishmsal]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T21:56:25.743Z"}
{"level":"debug","message":"Executing query [m8jbl34hpvwd40r01va]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T21:56:25.745Z"}
{"level":"debug","message":"Executing query [m8jbl34kivbe5dg1d4n]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:56:25.748Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:56:25.865Z"}
{"level":"debug","message":"Executing query [m8jbl37wfq15m289ipc]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T21:56:25.868Z"}
{"level":"debug","message":"Executing query [m8jbl37ye7es4680pyv]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T21:56:25.870Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbl37ye7es4680pyv]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T21:56:25.871Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:56:25.873Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T21:56:25.956Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T21:56:25.957Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T21:56:25.958Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T21:56:25.958Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T21:56:25.959Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T21:56:25.959Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:43.323Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:43.364Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:44.108Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:44.119Z"}
{"level":"debug","message":"Executing query [m8jbmrp370tq5y9jc3n]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:44.247Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:44.263Z"}
{"level":"debug","message":"Executing query [m8jbmrpmbuz0961wcxw]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:44.266Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:57:44.270Z"}
{"level":"debug","message":"Executing query [m8jbmrprh20axpa3qnr]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:44.271Z"}
{"level":"debug","message":"Executing query [m8jbmrpsfcakr4kzomu]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:44.272Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:57:44.274Z"}
{"level":"debug","message":"Executing query [m8jbmrpz3ck78akazak]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594264247\"]","timestamp":"2025-03-21T21:57:44.279Z"}
{"level":"debug","message":"Executing query [m8jbmrq4rti72tg53xe]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T21:57:44.284Z"}
{"level":"debug","message":"Executing query [m8jbmrq7svhthezixe]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T21:57:44.287Z"}
{"level":"debug","message":"Executing query [m8jbmrq9sq1emytuooe]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T21:57:44.289Z"}
{"level":"debug","message":"Executing query [m8jbmrqbv08f04otbhi]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:44.291Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:44.292Z"}
{"level":"debug","message":"Executing query [m8jbmrtm3qiwls2eavz]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:44.411Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:44.425Z"}
{"level":"debug","message":"Executing query [m8jbmru3hir0d2po7u]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:44.427Z"}
{"level":"debug","message":"Executing query [m8jbmru57c34ac5934c]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:44.429Z"}
{"level":"debug","message":"Executing query [m8jbmru6je9eti6wzsj]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:44.430Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T21:57:44.431Z"}
{"level":"debug","message":"Executing query [m8jbmrubsqurd4ytc2]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T21:57:44.435Z"}
{"level":"debug","message":"Executing query [m8jbmrugul51w1g1pjn]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:44.440Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:44.442Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:45.138Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T21:57:45.140Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:45.148Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:45.850Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:57:45.853Z"}
{"level":"debug","message":"Executing query [m8jbmt0zqahlbfqrgzs]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:45.971Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:45.985Z"}
{"level":"debug","message":"Executing query [m8jbmt1ets35j5xhdw]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:45.986Z"}
{"level":"debug","message":"Executing query [m8jbmt1fg60odi5mrbv]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594265970\"]","timestamp":"2025-03-21T21:57:45.987Z"}
{"level":"debug","message":"Executing query [m8jbmt1i4le89ieszxd]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594265970\",\"TEST-OFICIO-1742594265970\",2556,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:57:45.990Z"}
{"level":"debug","message":"Executing query [m8jbmt1pj6ixxk5mor9]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T21:57:45.997Z"}
{"level":"debug","message":"Executing query [m8jbmt1sutsux386fkn]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594265970\"]","timestamp":"2025-03-21T21:57:46.000Z"}
{"level":"debug","message":"Executing query [m8jbmt1usnmovrrma7a]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",7]","timestamp":"2025-03-21T21:57:46.002Z"}
{"level":"debug","message":"Executing query [m8jbmt1yb5lfwcdkv5h]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.006Z"}
{"level":"debug","message":"Executing query [m8jbmt20g69rbczkfi6]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.008Z"}
{"level":"debug","message":"Executing query [m8jbmt23guucaqq248b]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.011Z"}
{"level":"debug","message":"Executing query [m8jbmt2589ue7rvsvf]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.013Z"}
{"level":"debug","message":"Executing query [m8jbmt28ydd8fuir8vt]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.016Z"}
{"level":"debug","message":"Executing query [m8jbmt2b24datvgpfux]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594266019\",\"TEST-SP-OFICIO-1742594266019\",254,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T21:57:46.019Z"}
{"level":"debug","message":"Executing query [m8jbmt2euc9prx6gee]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594266019\"]","timestamp":"2025-03-21T21:57:46.022Z"}
{"level":"debug","message":"Executing query [m8jbmt2hrr276g1z698]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594266019\"]","timestamp":"2025-03-21T21:57:46.025Z"}
{"level":"debug","message":"Executing query [m8jbmt2kgfmco2ycde8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:46.028Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:46.030Z"}
{"level":"debug","message":"Executing query [m8jbmt5jbno8x40urqu]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:46.135Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:46.145Z"}
{"level":"debug","message":"Executing query [m8jbmt5vievo55kvokh]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:46.147Z"}
{"level":"debug","message":"Executing query [m8jbmt5xutf2h6oz4he]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594266134\"]","timestamp":"2025-03-21T21:57:46.149Z"}
{"level":"debug","message":"Executing query [m8jbmt5z51tr9yhibpr]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594266134\",\"TEST-OFI-FORENSE-1742594266134\",1525,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594266134\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:57:46.151Z"}
{"level":"debug","message":"Executing query [m8jbmt627srpyzhsnz8]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.154Z"}
{"level":"debug","message":"Executing query [m8jbmt66yfq4x1v148]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594266134\"]","timestamp":"2025-03-21T21:57:46.158Z"}
{"level":"debug","message":"Executing query [m8jbmt68qhb1z4s3ae]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",7]","timestamp":"2025-03-21T21:57:46.160Z"}
{"level":"debug","message":"Executing query [m8jbmt6b8hsj2rk8s6i]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.163Z"}
{"level":"debug","message":"Executing query [m8jbmt6ds55xttho65b]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.165Z"}
{"level":"debug","message":"Executing query [m8jbmt6fa8ednaqauxj]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.167Z"}
{"level":"debug","message":"Executing query [m8jbmt6hd7n88iz9mcw]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.169Z"}
{"level":"debug","message":"Executing query [m8jbmt6k5fgky83p31i]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-21T21:57:46.172Z"}
{"level":"debug","message":"Executing query [m8jbmt6m6w2s6et1dnr]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594266174\",\"TEST-SP-OFI-FORENSE-1742594266174\",8744,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T21:57:46.174Z"}
{"level":"debug","message":"Executing query [m8jbmt6pfcctwbryny8]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594266174\"]","timestamp":"2025-03-21T21:57:46.177Z"}
{"level":"debug","message":"Executing query [m8jbmt6qhqrd4c82w8i]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594266174\"]","timestamp":"2025-03-21T21:57:46.178Z"}
{"level":"debug","message":"Executing query [m8jbmt6tkgu5rbg6ni8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:46.181Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:46.182Z"}
{"level":"debug","message":"Executing query [m8jbmta4og3di28h56o]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:46.300Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:46.314Z"}
{"level":"debug","message":"Executing query [m8jbmtak19nfce3p18q]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T21:57:46.316Z"}
{"level":"debug","message":"Executing query [m8jbmtalptccgmtxs8d]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T21:57:46.317Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T21:57:46.319Z"}
{"level":"debug","message":"Executing query [m8jbmtaniq19pb8xndc]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:57:46.319Z"}
{"level":"debug","message":"Executing query [m8jbmtaolgt5dchk7lr]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:57:46.320Z"}
{"level":"debug","message":"Executing query [m8jbmtap1w13ge1d03u]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:57:46.321Z"}
{"level":"debug","message":"Executing query [m8jbmtarpfqadhrn36]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T21:57:46.323Z"}
{"level":"debug","message":"Executing query [m8jbmtavz8054p2cek]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-21T21:57:46.327Z"}
{"level":"debug","message":"Executing query [m8jbmtaygwf4dyc2imr]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:57:46.330Z"}
{"level":"debug","message":"Executing query [m8jbmtb03gh4gxstkr3]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",5]","timestamp":"2025-03-21T21:57:46.332Z"}
{"level":"debug","message":"Executing query [m8jbmtb2qxac7jgzjlb]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-21T21:57:46.334Z"}
{"level":"debug","message":"Executing query [m8jbmtb4jj098o42a2h]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-21T21:57:46.336Z"}
{"level":"debug","message":"Executing query [m8jbmtb7qv547gtmsph]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-21T21:57:46.339Z"}
{"level":"debug","message":"Executing query [m8jbmtb8j3d52vt2z5s]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:46.340Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:46.341Z"}
{"level":"debug","message":"Executing query [m8jbmtecivi20p72po]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:46.452Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:46.464Z"}
{"level":"debug","message":"Executing query [m8jbmtept8iehnc3cg]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594266452\"]","timestamp":"2025-03-21T21:57:46.465Z"}
{"level":"debug","message":"Executing query [m8jbmternwddek9cbe9]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594266452\"]","timestamp":"2025-03-21T21:57:46.467Z"}
{"level":"debug","message":"Executing query [m8jbmtesmfg5nyrs3h]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594266452\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:57:46.468Z"}
{"level":"debug","message":"Executing query [m8jbmtexxbj0cryh9q]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T21:57:46.473Z"}
{"level":"debug","message":"Executing query [m8jbmtf0vch6gnlipgg]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594266452\"]","timestamp":"2025-03-21T21:57:46.476Z"}
{"level":"debug","message":"Executing query [m8jbmtf1xb06e64vzzn]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1002]","timestamp":"2025-03-21T21:57:46.477Z"}
{"level":"debug","message":"Executing query [m8jbmtf4gvuqz4emcp]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T21:57:46.480Z"}
{"level":"debug","message":"Executing query [m8jbmtf6pxbqi55cis]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T21:57:46.482Z"}
{"level":"debug","message":"Executing query [m8jbmtf9cdv8nn0p5cv]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T21:57:46.485Z"}
{"level":"debug","message":"Executing query [m8jbmtfaq2lo1tp6e5s]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T21:57:46.486Z"}
{"level":"debug","message":"Executing query [m8jbmtfbn5qsd12u2v]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T21:57:46.487Z"}
{"level":"debug","message":"Executing query [m8jbmtfe7bih7ty132u]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-21T21:57:46.490Z"}
{"level":"debug","message":"Executing query [m8jbmtff7up8d2355de]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:57:46.491Z"}
{"level":"debug","message":"Executing query [m8jbmtfh0a0qukllazgg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:46.493Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:46.493Z"}
{"level":"debug","message":"Executing query [m8jbmtiiik4ye21cvkq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:46.602Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:46.617Z"}
{"level":"debug","message":"Executing query [m8jbmtiykfrh9vptlo]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:46.618Z"}
{"level":"debug","message":"Executing query [m8jbmtj0i34nhkuhcg]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594266602\"]","timestamp":"2025-03-21T21:57:46.620Z"}
{"level":"debug","message":"Executing query [m8jbmtj2kaa6z5z2is]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594266602\",\"TEST-OFI-QUIMICA-1742594266602\",8891,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:57:46.622Z"}
{"level":"debug","message":"Executing query [m8jbmtj51mi44xpcffb]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.625Z"}
{"level":"debug","message":"Executing query [m8jbmtj8hf938xb0u2n]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594266602\"]","timestamp":"2025-03-21T21:57:46.628Z"}
{"level":"debug","message":"Executing query [m8jbmtjat3louxijgac]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",4]","timestamp":"2025-03-21T21:57:46.630Z"}
{"level":"debug","message":"Executing query [m8jbmtjcux9cyxof9dp]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.632Z"}
{"level":"debug","message":"Executing query [m8jbmtjef7t0mzbz8xf]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.634Z"}
{"level":"debug","message":"Executing query [m8jbmtjh3ic8m0lf9tf]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.637Z"}
{"level":"debug","message":"Executing query [m8jbmtjjjjb5na1ujpo]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.639Z"}
{"level":"debug","message":"Executing query [m8jbmtjlwb27dfkazf]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.641Z"}
{"level":"debug","message":"Executing query [m8jbmtjnthe3ey9hlep]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:46.643Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:46.644Z"}
{"level":"debug","message":"Executing query [m8jbmtms2jwoh81ppgi]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:46.756Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:46.768Z"}
{"level":"debug","message":"Executing query [m8jbmtn5fl0dfa08uhs]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594266755\"]","timestamp":"2025-03-21T21:57:46.769Z"}
{"level":"debug","message":"Executing query [m8jbmtn7gjy3bikvh9t]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594266755\",true]","timestamp":"2025-03-21T21:57:46.771Z"}
{"level":"debug","message":"Executing query [m8jbmtncdw8xbkx48zl]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.776Z"}
{"level":"debug","message":"Executing query [m8jbmtne3h92hvp6a38]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594266755\"]","timestamp":"2025-03-21T21:57:46.778Z"}
{"level":"debug","message":"Executing query [m8jbmtnfczwhrxz325]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",4]","timestamp":"2025-03-21T21:57:46.779Z"}
{"level":"debug","message":"Executing query [m8jbmtnj2yg0uvoc5ba]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.783Z"}
{"level":"debug","message":"Executing query [m8jbmtnkcozcec4fwuj]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.784Z"}
{"level":"debug","message":"Executing query [m8jbmtno502naxhvg5k]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.788Z"}
{"level":"debug","message":"Executing query [m8jbmtnp0rrcoad82o9l]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.789Z"}
{"level":"debug","message":"Executing query [m8jbmtnqkj5nsdv4us]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.790Z"}
{"level":"debug","message":"Executing query [m8jbmtnusfznvaa2z3]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-21T21:57:46.794Z"}
{"level":"debug","message":"Executing query [m8jbmtnwh7lhb45b4g9]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:57:46.796Z"}
{"level":"debug","message":"Executing query [m8jbmtnxf9ocnehnrjb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:46.797Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:46.798Z"}
{"level":"debug","message":"Executing query [m8jbmtr0xb8gqvgif8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:57:46.908Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:46.925Z"}
{"level":"debug","message":"Executing query [m8jbmtrj8cd5r7u7y3p]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:46.927Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:57:46.928Z"}
{"level":"debug","message":"Executing query [m8jbmtrl69os3a9qtex]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T21:57:46.929Z"}
{"level":"debug","message":"Executing query [m8jbmtrm03egzogogt8n]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T21:57:46.930Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T21:57:46.930Z"}
{"level":"debug","message":"Executing query [m8jbmtrn5rm42vcelcq]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T21:57:46.931Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:57:46.931Z"}
{"level":"debug","message":"Executing query [m8jbmtrsza8pihsl1wb]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T21:57:46.936Z"}
{"level":"debug","message":"Executing query [m8jbmtru4vdur4kgrli]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T21:57:46.938Z"}
{"level":"debug","message":"Executing query [m8jbmtrwpjfbu480uy]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:57:46.940Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:57:47.066Z"}
{"level":"debug","message":"Executing query [m8jbmtvhaivnq6jbuv7]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T21:57:47.069Z"}
{"level":"debug","message":"Executing query [m8jbmtvknp4seu8qcv]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T21:57:47.072Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbmtvknp4seu8qcv]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T21:57:47.075Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:57:47.077Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T21:57:47.186Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T21:57:47.187Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T21:57:47.187Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T21:57:47.188Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T21:57:47.189Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T21:57:47.189Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:35.559Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:35.598Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:36.391Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:36.404Z"}
{"level":"debug","message":"Executing query [m8jbnw1rivkongz64zk]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:36.544Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:36.558Z"}
{"level":"debug","message":"Executing query [m8jbnw29xxrith79st]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:36.561Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:58:36.563Z"}
{"level":"debug","message":"Executing query [m8jbnw2cxe6pzo4fq6h]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:36.564Z"}
{"level":"debug","message":"Executing query [m8jbnw2ephvw8d3o42e]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:36.566Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:58:36.568Z"}
{"level":"debug","message":"Executing query [m8jbnw2kfdvpny1k2fs]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594316542\"]","timestamp":"2025-03-21T21:58:36.572Z"}
{"level":"debug","message":"Executing query [m8jbnw2oanv6tnv7nxc]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T21:58:36.576Z"}
{"level":"debug","message":"Executing query [m8jbnw2sf0l0g2bsiq]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T21:58:36.580Z"}
{"level":"debug","message":"Executing query [m8jbnw2u3ttf3hdeq4k]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T21:58:36.582Z"}
{"level":"debug","message":"Executing query [m8jbnw2wrckq4etchv9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:36.584Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:36.586Z"}
{"level":"debug","message":"Executing query [m8jbnw6fxshdlbujr2a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:36.711Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:36.726Z"}
{"level":"debug","message":"Executing query [m8jbnw6wrwjgc4pft9h]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:36.728Z"}
{"level":"debug","message":"Executing query [m8jbnw6x64tezx9jalv]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:36.729Z"}
{"level":"debug","message":"Executing query [m8jbnw6y1c656vezx5j]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:36.730Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T21:58:36.732Z"}
{"level":"debug","message":"Executing query [m8jbnw73np3tbfh0ja]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T21:58:36.736Z"}
{"level":"debug","message":"Executing query [m8jbnw78qpddvxngf3b]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:36.740Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:36.742Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:37.438Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T21:58:37.440Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:37.448Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:38.173Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:58:38.176Z"}
{"level":"debug","message":"Executing query [m8jbnxehub5gaol69gd]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:38.298Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:38.310Z"}
{"level":"debug","message":"Executing query [m8jbnxew5fef5uvrhyt]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:38.312Z"}
{"level":"debug","message":"Executing query [m8jbnxey95g7pd0xn6m]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594318297\"]","timestamp":"2025-03-21T21:58:38.314Z"}
{"level":"debug","message":"Executing query [m8jbnxezg59svn19kcc]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594318297\",\"TEST-OFICIO-1742594318297\",2589,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:58:38.315Z"}
{"level":"debug","message":"Executing query [m8jbnxf52qmylv0dbtk]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-21T21:58:38.321Z"}
{"level":"debug","message":"Executing query [m8jbnxf8h7yd86b8jqe]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594318297\"]","timestamp":"2025-03-21T21:58:38.324Z"}
{"level":"debug","message":"Executing query [m8jbnxfa62swvrq7f7r]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",9]","timestamp":"2025-03-21T21:58:38.326Z"}
{"level":"debug","message":"Executing query [m8jbnxfehtoesnwrbf5]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-21T21:58:38.330Z"}
{"level":"debug","message":"Executing query [m8jbnxfh92get1dtig]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-21T21:58:38.333Z"}
{"level":"debug","message":"Executing query [m8jbnxfkt3ur9l07uu8]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-21T21:58:38.336Z"}
{"level":"debug","message":"Executing query [m8jbnxfmghaufws0vw]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-21T21:58:38.338Z"}
{"level":"debug","message":"Executing query [m8jbnxfpjjt9tl0bg0e]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-21T21:58:38.341Z"}
{"level":"debug","message":"Executing query [m8jbnxfrksocveipa8b]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594318343\",\"TEST-SP-OFICIO-1742594318343\",5840,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T21:58:38.343Z"}
{"level":"debug","message":"Executing query [m8jbnxfu47po6nn20nc]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594318343\"]","timestamp":"2025-03-21T21:58:38.346Z"}
{"level":"debug","message":"Executing query [m8jbnxfwl0l1cbkkj8i]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594318343\"]","timestamp":"2025-03-21T21:58:38.348Z"}
{"level":"debug","message":"Executing query [m8jbnxg153mx5tvvmo4]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:38.353Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:38.354Z"}
{"level":"debug","message":"Executing query [m8jbnxj9omyoxykq7pk]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:38.469Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:38.479Z"}
{"level":"debug","message":"Executing query [m8jbnxjl1xn5hrnyxqe]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T21:58:38.481Z"}
{"level":"debug","message":"Executing query [m8jbnxjnrd6pcllp16]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T21:58:38.483Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T21:58:38.485Z"}
{"level":"debug","message":"Executing query [m8jbnxjpyjfrtbw8d9]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:58:38.485Z"}
{"level":"debug","message":"Executing query [m8jbnxjqdpjfosplilo]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:58:38.486Z"}
{"level":"debug","message":"Executing query [m8jbnxjrjvvhmu4n3rf]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:58:38.487Z"}
{"level":"debug","message":"Executing query [m8jbnxjteghyjb62d49]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T21:58:38.489Z"}
{"level":"debug","message":"Executing query [m8jbnxjwygzdsxqin]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-21T21:58:38.492Z"}
{"level":"debug","message":"Executing query [m8jbnxk0kuhof4kzuoe]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:58:38.496Z"}
{"level":"debug","message":"Executing query [m8jbnxk237577bken8x]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",6]","timestamp":"2025-03-21T21:58:38.498Z"}
{"level":"debug","message":"Executing query [m8jbnxk5hdmoamzwg05]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-21T21:58:38.501Z"}
{"level":"debug","message":"Executing query [m8jbnxk8zsemm5ohjtr]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-21T21:58:38.504Z"}
{"level":"debug","message":"Executing query [m8jbnxkas1tzyc9ag1]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-21T21:58:38.507Z"}
{"level":"debug","message":"Executing query [m8jbnxkc311itp57nd4]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:38.508Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:38.510Z"}
{"level":"debug","message":"Executing query [m8jbnxnbppftbse5pe]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:38.615Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:38.629Z"}
{"level":"debug","message":"Executing query [m8jbnxnr0l1g1e4321n]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594318614\"]","timestamp":"2025-03-21T21:58:38.631Z"}
{"level":"debug","message":"Executing query [m8jbnxns7jh8xn0n2qd]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594318614\",true]","timestamp":"2025-03-21T21:58:38.632Z"}
{"level":"debug","message":"Executing query [m8jbnxnxs6d248yjjjr]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.637Z"}
{"level":"debug","message":"Executing query [m8jbnxnz6tcrlopxe02]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594318614\"]","timestamp":"2025-03-21T21:58:38.639Z"}
{"level":"debug","message":"Executing query [m8jbnxo2hiiejfjq00v]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",5]","timestamp":"2025-03-21T21:58:38.642Z"}
{"level":"debug","message":"Executing query [m8jbnxo561rut2ax95d]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.645Z"}
{"level":"debug","message":"Executing query [m8jbnxo7b7nvnxwgaf]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.647Z"}
{"level":"debug","message":"Executing query [m8jbnxoap7pssxx0bih]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.650Z"}
{"level":"debug","message":"Executing query [m8jbnxoct0bz64t6dy]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.652Z"}
{"level":"debug","message":"Executing query [m8jbnxodko4hw97so4]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.653Z"}
{"level":"debug","message":"Executing query [m8jbnxogygm6kr5ez7f]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.656Z"}
{"level":"debug","message":"Executing query [m8jbnxohf8kr2u9cedp]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:58:38.657Z"}
{"level":"debug","message":"Executing query [m8jbnxoiktv3i9vopyi]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:38.658Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:38.659Z"}
{"level":"debug","message":"Executing query [m8jbnxrf7pm07dpgn3e]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:38.763Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:38.774Z"}
{"level":"debug","message":"Executing query [m8jbnxrsa7ee8f4alpj]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:38.776Z"}
{"level":"debug","message":"Executing query [m8jbnxrt7ia3qhdhyxh]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594318763\"]","timestamp":"2025-03-21T21:58:38.777Z"}
{"level":"debug","message":"Executing query [m8jbnxru2c4zo8myl9k]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594318763\",\"TEST-OFI-QUIMICA-1742594318763\",5309,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:58:38.778Z"}
{"level":"debug","message":"Executing query [m8jbnxs1a63jtlw4ar]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.785Z"}
{"level":"debug","message":"Executing query [m8jbnxs51fzuo26jmfj]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594318763\"]","timestamp":"2025-03-21T21:58:38.789Z"}
{"level":"debug","message":"Executing query [m8jbnxs6atea04x2xn5]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",5]","timestamp":"2025-03-21T21:58:38.790Z"}
{"level":"debug","message":"Executing query [m8jbnxsaef53vawsyo]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.794Z"}
{"level":"debug","message":"Executing query [m8jbnxscsuf7o7qphep]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.796Z"}
{"level":"debug","message":"Executing query [m8jbnxsfel7mod0xce8]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.799Z"}
{"level":"debug","message":"Executing query [m8jbnxshqeupwi738m]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.801Z"}
{"level":"debug","message":"Executing query [m8jbnxskonnseq3xka]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-21T21:58:38.804Z"}
{"level":"debug","message":"Executing query [m8jbnxsli1rxpn76lz9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:38.805Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:38.807Z"}
{"level":"debug","message":"Executing query [m8jbnxvixjws0uzfw5s]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:38.910Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:38.924Z"}
{"level":"debug","message":"Executing query [m8jbnxvyklbwyen8cda]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594318909\"]","timestamp":"2025-03-21T21:58:38.926Z"}
{"level":"debug","message":"Executing query [m8jbnxw0qdj5wwu0e1h]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594318909\"]","timestamp":"2025-03-21T21:58:38.928Z"}
{"level":"debug","message":"Executing query [m8jbnxw1vw88r9wljni]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594318909\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:58:38.929Z"}
{"level":"debug","message":"Executing query [m8jbnxw601r58enrwwu5]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T21:58:38.934Z"}
{"level":"debug","message":"Executing query [m8jbnxw9uhi0w5zys2t]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594318909\"]","timestamp":"2025-03-21T21:58:38.937Z"}
{"level":"debug","message":"Executing query [m8jbnxwbad2sg8zfn6]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1003]","timestamp":"2025-03-21T21:58:38.939Z"}
{"level":"debug","message":"Executing query [m8jbnxwfgljyud3ezt5]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T21:58:38.944Z"}
{"level":"debug","message":"Executing query [m8jbnxwijrw3qd5mil]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T21:58:38.946Z"}
{"level":"debug","message":"Executing query [m8jbnxwmueegqty6nub]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T21:58:38.950Z"}
{"level":"debug","message":"Executing query [m8jbnxwo4ns9ciy6soh]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T21:58:38.952Z"}
{"level":"debug","message":"Executing query [m8jbnxwq4xod32uttdr]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T21:58:38.954Z"}
{"level":"debug","message":"Executing query [m8jbnxwtvd6nxnh31p]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-21T21:58:38.957Z"}
{"level":"debug","message":"Executing query [m8jbnxwvyyt1mxzx0ya]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:58:38.959Z"}
{"level":"debug","message":"Executing query [m8jbnxwxfv75elnffr]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:38.961Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:38.962Z"}
{"level":"debug","message":"Executing query [m8jbny01w2xas3ioh2]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:39.073Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:39.083Z"}
{"level":"debug","message":"Executing query [m8jbny0d9whqic56zbt]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:39.085Z"}
{"level":"debug","message":"Executing query [m8jbny0g7wnqtd3a7eq]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594319072\"]","timestamp":"2025-03-21T21:58:39.088Z"}
{"level":"debug","message":"Executing query [m8jbny0hti6bqzisxc]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594319072\",\"TEST-OFI-FORENSE-1742594319072\",7012,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594319072\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:58:39.089Z"}
{"level":"debug","message":"Executing query [m8jbny0nprzhxr43j5]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-21T21:58:39.095Z"}
{"level":"debug","message":"Executing query [m8jbny0plq7qze5t34h]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594319072\"]","timestamp":"2025-03-21T21:58:39.097Z"}
{"level":"debug","message":"Executing query [m8jbny0qc9ci84xgn4h]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",9]","timestamp":"2025-03-21T21:58:39.098Z"}
{"level":"debug","message":"Executing query [m8jbny0ut24xkjfi7lm]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-21T21:58:39.102Z"}
{"level":"debug","message":"Executing query [m8jbny0w4yls7unede]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-21T21:58:39.104Z"}
{"level":"debug","message":"Executing query [m8jbny0zuny2wwgqun]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-21T21:58:39.107Z"}
{"level":"debug","message":"Executing query [m8jbny11tc3ydmflkhh]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-21T21:58:39.109Z"}
{"level":"debug","message":"Executing query [m8jbny13ahz6jt3hlml]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-21T21:58:39.112Z"}
{"level":"debug","message":"Executing query [m8jbny16oiuhtj0vpw]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594319114\",\"TEST-SP-OFI-FORENSE-1742594319114\",3313,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T21:58:39.114Z"}
{"level":"debug","message":"Executing query [m8jbny1askh76zapyah]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594319114\"]","timestamp":"2025-03-21T21:58:39.118Z"}
{"level":"debug","message":"Executing query [m8jbny1bx4k9iiyx92]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594319114\"]","timestamp":"2025-03-21T21:58:39.119Z"}
{"level":"debug","message":"Executing query [m8jbny1fjlg0i3yyl6f]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:39.123Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:39.124Z"}
{"level":"debug","message":"Executing query [m8jbny4h14yhy676j03]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:58:39.233Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:39.248Z"}
{"level":"debug","message":"Executing query [m8jbny4xvxzqavh24ye]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:39.249Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:58:39.250Z"}
{"level":"debug","message":"Executing query [m8jbny4zmwp3c9lxc9l]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T21:58:39.251Z"}
{"level":"debug","message":"Executing query [m8jbny50g3as7vr068u]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T21:58:39.252Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T21:58:39.253Z"}
{"level":"debug","message":"Executing query [m8jbny52n9ay7bmet0o]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T21:58:39.254Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:58:39.254Z"}
{"level":"debug","message":"Executing query [m8jbny58m4jpslmj1y]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T21:58:39.260Z"}
{"level":"debug","message":"Executing query [m8jbny5a8zwlv9ct4kx]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T21:58:39.262Z"}
{"level":"debug","message":"Executing query [m8jbny5c5urds7c6bm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:58:39.264Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:58:39.380Z"}
{"level":"debug","message":"Executing query [m8jbny8ntodsaflo1b]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T21:58:39.383Z"}
{"level":"debug","message":"Executing query [m8jbny8p9fghk9hxkum]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T21:58:39.385Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbny8p9fghk9hxkum]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T21:58:39.386Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:58:39.388Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T21:58:39.470Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T21:58:39.471Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T21:58:39.471Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T21:58:39.471Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T21:58:39.472Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T21:58:39.472Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:03.233Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:03.286Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:04.067Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:04.078Z"}
{"level":"debug","message":"Executing query [m8jbohesempuq4pmz9n]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:04.228Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:04.240Z"}
{"level":"debug","message":"Executing query [m8jbohf6r5q81cq8nrk]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:04.243Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:59:04.246Z"}
{"level":"debug","message":"Executing query [m8jbohfbg9svnk8h2ct]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:04.247Z"}
{"level":"debug","message":"Executing query [m8jbohfcajogzdo677v]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:04.248Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:59:04.249Z"}
{"level":"debug","message":"Executing query [m8jbohfhj5fjp85bbt]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594344227\"]","timestamp":"2025-03-21T21:59:04.253Z"}
{"level":"debug","message":"Executing query [m8jbohfls2sfpd4ccoj]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T21:59:04.257Z"}
{"level":"debug","message":"Executing query [m8jbohfq2n90awjnjaq]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T21:59:04.262Z"}
{"level":"debug","message":"Executing query [m8jbohfsjcjb0p83zlb]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T21:59:04.264Z"}
{"level":"debug","message":"Executing query [m8jbohfvbcgceoy55u]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:04.267Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:04.268Z"}
{"level":"debug","message":"Executing query [m8jbohk2wg0x6fyt68p]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:04.418Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:04.430Z"}
{"level":"debug","message":"Executing query [m8jbohkg5c26elhvvdi]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:04.432Z"}
{"level":"debug","message":"Executing query [m8jbohkib5tfggvtdsb]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:04.434Z"}
{"level":"debug","message":"Executing query [m8jbohkjloh1ttkv9zr]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:04.435Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T21:59:04.436Z"}
{"level":"debug","message":"Executing query [m8jbohkpel9gqbsp0a]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T21:59:04.441Z"}
{"level":"debug","message":"Executing query [m8jbohkuva29mja2bnp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:04.446Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:04.447Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:05.151Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:59:05.154Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T21:59:05.884Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:05.893Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T21:59:05.895Z"}
{"level":"debug","message":"Executing query [m8jboisjoqry63e3ud]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:06.019Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:06.032Z"}
{"level":"debug","message":"Executing query [m8jboisycvms20k3sf]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:06.034Z"}
{"level":"debug","message":"Executing query [m8jboit0nefa25hqoc]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594346018\"]","timestamp":"2025-03-21T21:59:06.036Z"}
{"level":"debug","message":"Executing query [m8jboit2l13751b1qn7]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594346018\",\"TEST-OFICIO-1742594346018\",2086,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:59:06.038Z"}
{"level":"debug","message":"Executing query [m8jboit8alqwpe07m89]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.044Z"}
{"level":"debug","message":"Executing query [m8jboitbt39ltyqr8f]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594346018\"]","timestamp":"2025-03-21T21:59:06.047Z"}
{"level":"debug","message":"Executing query [m8jboitdv8uvia73md]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",11]","timestamp":"2025-03-21T21:59:06.049Z"}
{"level":"debug","message":"Executing query [m8jboitge156vg5ic0f]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.052Z"}
{"level":"debug","message":"Executing query [m8jboitidcywtojk57i]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.054Z"}
{"level":"debug","message":"Executing query [m8jboitl8mxwba7x6pd]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.057Z"}
{"level":"debug","message":"Executing query [m8jboitn7aucgvezpn7]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.059Z"}
{"level":"debug","message":"Executing query [m8jboitqb4l8szl8hku]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.062Z"}
{"level":"debug","message":"Executing query [m8jboittx0v1qi4n3qh]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594346065\",\"TEST-SP-OFICIO-1742594346065\",779,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T21:59:06.065Z"}
{"level":"debug","message":"Executing query [m8jboitwje0ym36gojn]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594346065\"]","timestamp":"2025-03-21T21:59:06.068Z"}
{"level":"debug","message":"Executing query [m8jboitz9zsnco5mbom]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594346065\"]","timestamp":"2025-03-21T21:59:06.071Z"}
{"level":"debug","message":"Executing query [m8jboiu27l9znj36iaa]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:06.074Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:06.076Z"}
{"level":"debug","message":"Executing query [m8jboix6lxdq55reb9i]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:06.186Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:06.198Z"}
{"level":"debug","message":"Executing query [m8jboixkhpxw2isjdgo]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:06.200Z"}
{"level":"debug","message":"Executing query [m8jboixm9i87rw39m5o]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594346186\"]","timestamp":"2025-03-21T21:59:06.202Z"}
{"level":"debug","message":"Executing query [m8jboixo5dt9q20yzxh]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594346186\",\"TEST-OFI-FORENSE-1742594346186\",2208,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594346186\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:59:06.204Z"}
{"level":"debug","message":"Executing query [m8jboixu1petneiidqd]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.210Z"}
{"level":"debug","message":"Executing query [m8jboixxfsxlanmap9e]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594346186\"]","timestamp":"2025-03-21T21:59:06.213Z"}
{"level":"debug","message":"Executing query [m8jboixz7wtpe1me1e5]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",11]","timestamp":"2025-03-21T21:59:06.215Z"}
{"level":"debug","message":"Executing query [m8jboiy3rs2tr4yuv5]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.219Z"}
{"level":"debug","message":"Executing query [m8jboiy5l4x6y15ldga]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.221Z"}
{"level":"debug","message":"Executing query [m8jboiyasj1wlba1da]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.226Z"}
{"level":"debug","message":"Executing query [m8jboiycq6roup2g09k]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.228Z"}
{"level":"debug","message":"Executing query [m8jboiygghkpg7kihqs]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-21T21:59:06.232Z"}
{"level":"debug","message":"Executing query [m8jboiyi6zo4csjy8mj]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594346234\",\"TEST-SP-OFI-FORENSE-1742594346234\",1783,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T21:59:06.234Z"}
{"level":"debug","message":"Executing query [m8jboiymkv0u3jkkk3]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594346234\"]","timestamp":"2025-03-21T21:59:06.238Z"}
{"level":"debug","message":"Executing query [m8jboiyo748lo4e8fd2]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594346234\"]","timestamp":"2025-03-21T21:59:06.240Z"}
{"level":"debug","message":"Executing query [m8jboiyrfrs1i8efdka]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:06.243Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:06.245Z"}
{"level":"debug","message":"Executing query [m8jboj2bliis5y2af4l]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:06.371Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:06.382Z"}
{"level":"debug","message":"Executing query [m8jboj2nhy8u126df9f]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T21:59:06.383Z"}
{"level":"debug","message":"Executing query [m8jboj2pbx9h089l7v9]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T21:59:06.385Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T21:59:06.386Z"}
{"level":"debug","message":"Executing query [m8jboj2q3zlrr5ijg58]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:59:06.386Z"}
{"level":"debug","message":"Executing query [m8jboj2ru4ru61p9itf]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:59:06.387Z"}
{"level":"debug","message":"Executing query [m8jboj2s9viodqbrd08]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:59:06.388Z"}
{"level":"debug","message":"Executing query [m8jboj2t496ymz6lko4]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T21:59:06.389Z"}
{"level":"debug","message":"Executing query [m8jboj380mjs16t3wtm]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-21T21:59:06.405Z"}
{"level":"debug","message":"Executing query [m8jboj3b5jnphsthnav]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T21:59:06.407Z"}
{"level":"debug","message":"Executing query [m8jboj3ej8ufaa8dfnp]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",7]","timestamp":"2025-03-21T21:59:06.410Z"}
{"level":"debug","message":"Executing query [m8jboj3hdrwt1rbkumj]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-21T21:59:06.413Z"}
{"level":"debug","message":"Executing query [m8jboj3jzsp3xzn4d8d]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-21T21:59:06.415Z"}
{"level":"debug","message":"Executing query [m8jboj3nilnfgvp94lc]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-21T21:59:06.419Z"}
{"level":"debug","message":"Executing query [m8jboj3o084z6x76nrck]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:06.420Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:06.422Z"}
{"level":"debug","message":"Executing query [m8jboj6kxq1eqjgehqj]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:06.524Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:06.535Z"}
{"level":"debug","message":"Executing query [m8jboj6xeyarfr3kguq]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594346523\"]","timestamp":"2025-03-21T21:59:06.537Z"}
{"level":"debug","message":"Executing query [m8jboj6ytq534gjdius]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594346523\"]","timestamp":"2025-03-21T21:59:06.538Z"}
{"level":"debug","message":"Executing query [m8jboj6z3bikmwmjpti]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594346523\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:59:06.539Z"}
{"level":"debug","message":"Executing query [m8jboj78o6gjgmto16]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T21:59:06.548Z"}
{"level":"debug","message":"Executing query [m8jboj7by64vsa4jsvm]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594346523\"]","timestamp":"2025-03-21T21:59:06.551Z"}
{"level":"debug","message":"Executing query [m8jboj7d7rfpcgek8zc]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1004]","timestamp":"2025-03-21T21:59:06.553Z"}
{"level":"debug","message":"Executing query [m8jboj7ge3wpr16l5g7]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T21:59:06.556Z"}
{"level":"debug","message":"Executing query [m8jboj7ie3jp50dwh]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T21:59:06.558Z"}
{"level":"debug","message":"Executing query [m8jboj7lezakzg0b2p]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T21:59:06.561Z"}
{"level":"debug","message":"Executing query [m8jboj7m30ld5ly3fka]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T21:59:06.562Z"}
{"level":"debug","message":"Executing query [m8jboj7orws099nxwlk]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T21:59:06.564Z"}
{"level":"debug","message":"Executing query [m8jboj7qa1h5p2sdv2]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-21T21:59:06.566Z"}
{"level":"debug","message":"Executing query [m8jboj7s9o3s6tt04b]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:59:06.568Z"}
{"level":"debug","message":"Executing query [m8jboj7uyf012q5m3wa]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:06.570Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:06.571Z"}
{"level":"debug","message":"Executing query [m8jbojajq6npsswcm5a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:06.667Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:06.677Z"}
{"level":"debug","message":"Executing query [m8jbojau172i6torv0d]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594346666\"]","timestamp":"2025-03-21T21:59:06.678Z"}
{"level":"debug","message":"Executing query [m8jbojawmdg6zg0ad5s]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594346666\",true]","timestamp":"2025-03-21T21:59:06.680Z"}
{"level":"debug","message":"Executing query [m8jbojbdussjm3nvxw]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.697Z"}
{"level":"debug","message":"Executing query [m8jbojbgacv61etjzl]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594346666\"]","timestamp":"2025-03-21T21:59:06.700Z"}
{"level":"debug","message":"Executing query [m8jbojbh7y2sat9ir8o]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",6]","timestamp":"2025-03-21T21:59:06.701Z"}
{"level":"debug","message":"Executing query [m8jbojbkigu274663lj]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.704Z"}
{"level":"debug","message":"Executing query [m8jbojbmp95yrcpdc1d]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.706Z"}
{"level":"debug","message":"Executing query [m8jbojboonutj1vazx]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.708Z"}
{"level":"debug","message":"Executing query [m8jbojbqzij0fpclk4e]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.710Z"}
{"level":"debug","message":"Executing query [m8jbojbromofa3lzpo]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.711Z"}
{"level":"debug","message":"Executing query [m8jbojbt6vlnlqgrpmb]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.713Z"}
{"level":"debug","message":"Executing query [m8jbojbvmzlv6nbs5b]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T21:59:06.715Z"}
{"level":"debug","message":"Executing query [m8jbojbxr5neq1to2k]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:06.717Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:06.718Z"}
{"level":"debug","message":"Executing query [m8jbojepj86psmpqt7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:06.817Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:06.829Z"}
{"level":"debug","message":"Executing query [m8jbojf2m9csbz9205h]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:06.830Z"}
{"level":"debug","message":"Executing query [m8jbojf4h3o2tsorhtb]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594346816\"]","timestamp":"2025-03-21T21:59:06.832Z"}
{"level":"debug","message":"Executing query [m8jbojf53dn70dz0wel]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594346816\",\"TEST-OFI-QUIMICA-1742594346816\",8067,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T21:59:06.833Z"}
{"level":"debug","message":"Executing query [m8jbojf9r1wfwlk9t6l]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.837Z"}
{"level":"debug","message":"Executing query [m8jbojfco9m42ta34fd]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594346816\"]","timestamp":"2025-03-21T21:59:06.840Z"}
{"level":"debug","message":"Executing query [m8jbojfeo0t89wcsqyo]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",6]","timestamp":"2025-03-21T21:59:06.842Z"}
{"level":"debug","message":"Executing query [m8jbojfifd2kiv9xupg]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.846Z"}
{"level":"debug","message":"Executing query [m8jbojfkk3ulq98hz9]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.848Z"}
{"level":"debug","message":"Executing query [m8jbojfnk5oe10kmi0m]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.851Z"}
{"level":"debug","message":"Executing query [m8jbojfpy4jm6sp1se]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.853Z"}
{"level":"debug","message":"Executing query [m8jbojfsqo1mobptmcr]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-21T21:59:06.856Z"}
{"level":"debug","message":"Executing query [m8jbojfudxml2sckwhv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:06.858Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:06.859Z"}
{"level":"debug","message":"Executing query [m8jbojipxuj2zx61p5l]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T21:59:06.961Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:06.971Z"}
{"level":"debug","message":"Executing query [m8jbojj03068mfl6f9c]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:06.972Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T21:59:06.974Z"}
{"level":"debug","message":"Executing query [m8jbojj2vdpfrq4qa7]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T21:59:06.974Z"}
{"level":"debug","message":"Executing query [m8jbojj37yf79epbivf]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T21:59:06.975Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T21:59:06.977Z"}
{"level":"debug","message":"Executing query [m8jbojj58ibo4tofmp9]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T21:59:06.977Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T21:59:06.978Z"}
{"level":"debug","message":"Executing query [m8jbojjb5netd7n29n]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T21:59:06.983Z"}
{"level":"debug","message":"Executing query [m8jbojjdyu2thz2xnv]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T21:59:06.985Z"}
{"level":"debug","message":"Executing query [m8jbojjgh7ieoq4j3ut]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T21:59:06.988Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T21:59:07.105Z"}
{"level":"debug","message":"Executing query [m8jbojms1f5ox34roul]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T21:59:07.108Z"}
{"level":"debug","message":"Executing query [m8jbojmu20sh0cbagmq]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T21:59:07.110Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbojmu20sh0cbagmq]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T21:59:07.111Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T21:59:07.113Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T21:59:07.206Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T21:59:07.206Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T21:59:07.207Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T21:59:07.207Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T21:59:07.208Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T21:59:07.208Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:53.277Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:53.315Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:54.071Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:54.082Z"}
{"level":"debug","message":"Executing query [m8jbqu9y3ccjlxeev4n]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:54.214Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:54.228Z"}
{"level":"debug","message":"Executing query [m8jbquaewor0wa4t93]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:54.230Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:00:54.233Z"}
{"level":"debug","message":"Executing query [m8jbquaiclxy2k4r4v8]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:54.234Z"}
{"level":"debug","message":"Executing query [m8jbquak9bxd82eplt6]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:54.236Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:00:54.237Z"}
{"level":"debug","message":"Executing query [m8jbquaq0zsbxlpas6s9]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594454213\"]","timestamp":"2025-03-21T22:00:54.242Z"}
{"level":"debug","message":"Executing query [m8jbquauxq0mp3fdgeq]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:00:54.246Z"}
{"level":"debug","message":"Executing query [m8jbquaytxmin4wezu]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:00:54.250Z"}
{"level":"debug","message":"Executing query [m8jbqub0ttn3cx7m5v]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:00:54.252Z"}
{"level":"debug","message":"Executing query [m8jbqub3s5e1noxnhcm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:54.255Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:54.256Z"}
{"level":"debug","message":"Executing query [m8jbqueey2jhrdovs3]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:54.374Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:54.393Z"}
{"level":"debug","message":"Executing query [m8jbquezopme3387pf]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:54.395Z"}
{"level":"debug","message":"Executing query [m8jbquf1fvfcpeeho86]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:54.397Z"}
{"level":"debug","message":"Executing query [m8jbquf3e08peua8rm9]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:54.400Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:00:54.402Z"}
{"level":"debug","message":"Executing query [m8jbqufe62v65zwh0nc]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:00:54.410Z"}
{"level":"debug","message":"Executing query [m8jbquflbhre84m1zdc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:54.417Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:54.419Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:00:55.166Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:55.176Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:00:55.178Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:55.911Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:00:55.914Z"}
{"level":"debug","message":"Executing query [m8jbqvop4qqmoididry]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:56.041Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:56.055Z"}
{"level":"debug","message":"Executing query [m8jbqvp4ask7pfugax9]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:00:56.056Z"}
{"level":"debug","message":"Executing query [m8jbqvp6c7nj3mlthqo]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:00:56.058Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:00:56.059Z"}
{"level":"debug","message":"Executing query [m8jbqvp8bm3z0qiora]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:00:56.060Z"}
{"level":"debug","message":"Executing query [m8jbqvp9nf80aeznito]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:00:56.061Z"}
{"level":"debug","message":"Executing query [m8jbqvpag4zbcawdyu7]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:00:56.062Z"}
{"level":"debug","message":"Executing query [m8jbqvpbswho4v62kz]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:00:56.063Z"}
{"level":"debug","message":"Executing query [m8jbqvpf90g799h9vt]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-21T22:00:56.067Z"}
{"level":"debug","message":"Executing query [m8jbqvph5t2mqj07q6h]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:00:56.069Z"}
{"level":"debug","message":"Executing query [m8jbqvpjtsk5jbsriqf]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",8]","timestamp":"2025-03-21T22:00:56.071Z"}
{"level":"debug","message":"Executing query [m8jbqvpna9nxw1o7z4]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-21T22:00:56.075Z"}
{"level":"debug","message":"Executing query [m8jbqvppxtj7zj669lf]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-21T22:00:56.077Z"}
{"level":"debug","message":"Executing query [m8jbqvpsdh0k52m3f18]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-21T22:00:56.080Z"}
{"level":"debug","message":"Executing query [m8jbqvpu0tq8dzjdoa]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:56.082Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:56.083Z"}
{"level":"debug","message":"Executing query [m8jbqvsssv2twl783ej]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:56.188Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:56.199Z"}
{"level":"debug","message":"Executing query [m8jbqvt5hi8aj7xurg]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:56.201Z"}
{"level":"debug","message":"Executing query [m8jbqvt6nm7i6wfhv3b]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594456187\"]","timestamp":"2025-03-21T22:00:56.202Z"}
{"level":"debug","message":"Executing query [m8jbqvt842rr3f54rjc]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594456187\",\"TEST-OFI-FORENSE-1742594456187\",2328,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594456187\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:00:56.204Z"}
{"level":"debug","message":"Executing query [m8jbqvtfi1w20cikpb9]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.211Z"}
{"level":"debug","message":"Executing query [m8jbqvtifu9xkmgcx04]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594456187\"]","timestamp":"2025-03-21T22:00:56.214Z"}
{"level":"debug","message":"Executing query [m8jbqvtklylepwrc12m]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",13]","timestamp":"2025-03-21T22:00:56.216Z"}
{"level":"debug","message":"Executing query [m8jbqvtnouxvtzp7d2]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.219Z"}
{"level":"debug","message":"Executing query [m8jbqvtpw02ql1eaym]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.221Z"}
{"level":"debug","message":"Executing query [m8jbqvttnqiqh1gkby]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.225Z"}
{"level":"debug","message":"Executing query [m8jbqvtvz1qqnxdbplo]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.227Z"}
{"level":"debug","message":"Executing query [m8jbqvtytpv3jvye9m]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.230Z"}
{"level":"debug","message":"Executing query [m8jbqvu0co1tm1jrlnm]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594456232\",\"TEST-SP-OFI-FORENSE-1742594456232\",4771,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:00:56.232Z"}
{"level":"debug","message":"Executing query [m8jbqvu3h36qpg051gt]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594456232\"]","timestamp":"2025-03-21T22:00:56.235Z"}
{"level":"debug","message":"Executing query [m8jbqvu469t32xs5mfw]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594456232\"]","timestamp":"2025-03-21T22:00:56.236Z"}
{"level":"debug","message":"Executing query [m8jbqvu7zb9osath8t7]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:56.240Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:56.241Z"}
{"level":"debug","message":"Executing query [m8jbqvx5cfie4kky7cm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:56.345Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:56.360Z"}
{"level":"debug","message":"Executing query [m8jbqvxlnlp3lz9cjkc]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:56.361Z"}
{"level":"debug","message":"Executing query [m8jbqvxnr8fxsf71ndp]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594456345\"]","timestamp":"2025-03-21T22:00:56.363Z"}
{"level":"debug","message":"Executing query [m8jbqvxp1pgf45chm7u]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594456345\",\"TEST-OFICIO-1742594456345\",811,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:00:56.365Z"}
{"level":"debug","message":"Executing query [m8jbqvxtoybym5l7uhm]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.369Z"}
{"level":"debug","message":"Executing query [m8jbqvxxrqkkqfw14or]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594456345\"]","timestamp":"2025-03-21T22:00:56.373Z"}
{"level":"debug","message":"Executing query [m8jbqvxyexttdrtg0d]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",13]","timestamp":"2025-03-21T22:00:56.374Z"}
{"level":"debug","message":"Executing query [m8jbqvy2dau7irvbdt7]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.378Z"}
{"level":"debug","message":"Executing query [m8jbqvy42bwshe849ho]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.380Z"}
{"level":"debug","message":"Executing query [m8jbqvy71otz67hr9kr]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.383Z"}
{"level":"debug","message":"Executing query [m8jbqvyauco9r26l3x]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.386Z"}
{"level":"debug","message":"Executing query [m8jbqvyc6w2f6uszpwx]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-21T22:00:56.388Z"}
{"level":"debug","message":"Executing query [m8jbqvyfnsoxef9quni]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594456391\",\"TEST-SP-OFICIO-1742594456391\",1504,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:00:56.391Z"}
{"level":"debug","message":"Executing query [m8jbqvyicodvofh7bg]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594456391\"]","timestamp":"2025-03-21T22:00:56.394Z"}
{"level":"debug","message":"Executing query [m8jbqvykrnpwwygce8m]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594456391\"]","timestamp":"2025-03-21T22:00:56.396Z"}
{"level":"debug","message":"Executing query [m8jbqvyncs4ciwgsxod]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:56.399Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:56.400Z"}
{"level":"debug","message":"Executing query [m8jbqw1ki9v024ey8cr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:56.504Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:56.514Z"}
{"level":"debug","message":"Executing query [m8jbqw1vaas0gzbbh2n]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594456503\"]","timestamp":"2025-03-21T22:00:56.515Z"}
{"level":"debug","message":"Executing query [m8jbqw1yw9ds9fmfz5]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594456503\"]","timestamp":"2025-03-21T22:00:56.518Z"}
{"level":"debug","message":"Executing query [m8jbqw1z341p4m4yzwg]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594456503\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:00:56.519Z"}
{"level":"debug","message":"Executing query [m8jbqw250sxkhfr8chba]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T22:00:56.525Z"}
{"level":"debug","message":"Executing query [m8jbqw27blr2hnxayyp]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594456503\"]","timestamp":"2025-03-21T22:00:56.527Z"}
{"level":"debug","message":"Executing query [m8jbqw29a0vdpj7shrm]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1005]","timestamp":"2025-03-21T22:00:56.529Z"}
{"level":"debug","message":"Executing query [m8jbqw2cfxirt78b2tf]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T22:00:56.532Z"}
{"level":"debug","message":"Executing query [m8jbqw2e6o84d4bojsa]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T22:00:56.534Z"}
{"level":"debug","message":"Executing query [m8jbqw2hwbujz6vzy7]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T22:00:56.537Z"}
{"level":"debug","message":"Executing query [m8jbqw2jnk8ul8yaihq]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T22:00:56.539Z"}
{"level":"debug","message":"Executing query [m8jbqw2k7hmothtk6lb]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T22:00:56.540Z"}
{"level":"debug","message":"Executing query [m8jbqw2nmt5ocionrfj]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-21T22:00:56.543Z"}
{"level":"debug","message":"Executing query [m8jbqw2pni4l1nsa6q]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:00:56.545Z"}
{"level":"debug","message":"Executing query [m8jbqw2r68v7q66z9a4]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:56.547Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:56.548Z"}
{"level":"debug","message":"Executing query [m8jbqw5ps5o0ipcx47k]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:56.653Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:56.668Z"}
{"level":"debug","message":"Executing query [m8jbqw66riq2g9d4ct]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594456653\"]","timestamp":"2025-03-21T22:00:56.670Z"}
{"level":"debug","message":"Executing query [m8jbqw68o1a5qesyvdr]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594456653\",true]","timestamp":"2025-03-21T22:00:56.672Z"}
{"level":"debug","message":"Executing query [m8jbqw6cgjwdnyrq1jq]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.676Z"}
{"level":"debug","message":"Executing query [m8jbqw6f1fm40gg26ah]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594456653\"]","timestamp":"2025-03-21T22:00:56.679Z"}
{"level":"debug","message":"Executing query [m8jbqw6hfix0lkb2w8m]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",7]","timestamp":"2025-03-21T22:00:56.681Z"}
{"level":"debug","message":"Executing query [m8jbqw6lgcyo470t61o]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.685Z"}
{"level":"debug","message":"Executing query [m8jbqw6no28ncgvs5ls]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.687Z"}
{"level":"debug","message":"Executing query [m8jbqw6qowwubtmmfmo]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.690Z"}
{"level":"debug","message":"Executing query [m8jbqw6tn14iwgsyc4j]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.693Z"}
{"level":"debug","message":"Executing query [m8jbqw6uxqycbw7ga0n]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.694Z"}
{"level":"debug","message":"Executing query [m8jbqw6y6yrjncscu6u]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.698Z"}
{"level":"debug","message":"Executing query [m8jbqw707u7razdpzjs]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:00:56.700Z"}
{"level":"debug","message":"Executing query [m8jbqw72nani7kzwx2n]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:56.702Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:56.703Z"}
{"level":"debug","message":"Executing query [m8jbqwa8mrwcofbfssi]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:56.816Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:56.827Z"}
{"level":"debug","message":"Executing query [m8jbqwall3uj1ud107]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:56.829Z"}
{"level":"debug","message":"Executing query [m8jbqwanjxu612d7xx]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594456815\"]","timestamp":"2025-03-21T22:00:56.831Z"}
{"level":"debug","message":"Executing query [m8jbqwap7h7ky6i81r]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594456815\",\"TEST-OFI-QUIMICA-1742594456815\",9828,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:00:56.833Z"}
{"level":"debug","message":"Executing query [m8jbqwatf5prnilc61g]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.838Z"}
{"level":"debug","message":"Executing query [m8jbqwawodi2gjxyqg8]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594456815\"]","timestamp":"2025-03-21T22:00:56.840Z"}
{"level":"debug","message":"Executing query [m8jbqwayxltuvg2i0y]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",7]","timestamp":"2025-03-21T22:00:56.842Z"}
{"level":"debug","message":"Executing query [m8jbqwb1l0mhqx68gc9]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.846Z"}
{"level":"debug","message":"Executing query [m8jbqwb423ldl7rxhog]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.848Z"}
{"level":"debug","message":"Executing query [m8jbqwb8jh3xn8disar]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.852Z"}
{"level":"debug","message":"Executing query [m8jbqwbaqnzb9xrx5vk]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.854Z"}
{"level":"debug","message":"Executing query [m8jbqwbd9tq653shf0v]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-21T22:00:56.857Z"}
{"level":"debug","message":"Executing query [m8jbqwbfsuh4m05mfx8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:56.859Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:56.861Z"}
{"level":"debug","message":"Executing query [m8jbqwfaw8ck4fyjlxm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:00:56.998Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:57.022Z"}
{"level":"debug","message":"Executing query [m8jbqwg2hftwr4ie6be]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:57.026Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:00:57.028Z"}
{"level":"debug","message":"Executing query [m8jbqwg5arhayi70j9m]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:00:57.029Z"}
{"level":"debug","message":"Executing query [m8jbqwg8k9zq6cdujid]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:00:57.032Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:00:57.034Z"}
{"level":"debug","message":"Executing query [m8jbqwgawiex2ojc5u]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:00:57.034Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:00:57.036Z"}
{"level":"debug","message":"Executing query [m8jbqwglku3s0z8c74]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:00:57.045Z"}
{"level":"debug","message":"Executing query [m8jbqwgo86vpaj4a5jl]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:00:57.048Z"}
{"level":"debug","message":"Executing query [m8jbqwgrm4azf6tbbv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:00:57.051Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:00:57.174Z"}
{"level":"debug","message":"Executing query [m8jbqwkau54xe0139d]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:00:57.178Z"}
{"level":"debug","message":"Executing query [m8jbqwkcpuet0n1sjg]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:00:57.180Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbqwkcpuet0n1sjg]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:00:57.181Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:00:57.183Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:00:57.268Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:00:57.269Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:00:57.270Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:00:57.270Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:00:57.271Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:00:57.271Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:04:57.377Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:04:57.433Z"}
{"authTokenExists":false,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":false,"timestamp":"2025-03-21T22:04:57.450Z"}
{"level":"info","message":"Omitiendo prueba de refresh token, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:04:57.452Z"}
{"level":"info","message":"Omitiendo prueba de verificación, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:04:57.454Z"}
{"level":"info","message":"Omitiendo prueba de logout, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:04:57.455Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:04:57.456Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:04:58.204Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:04:58.214Z"}
{"level":"debug","message":"Executing query [m8jbw2ngbhedihe3vs]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:04:58.348Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:04:58.363Z"}
{"level":"debug","message":"Executing query [m8jbw2nxfferbszxng4]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:04:58.365Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:04:58.367Z"}
{"level":"debug","message":"Executing query [m8jbw2o0wj9ygjkg05]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:04:58.368Z"}
{"level":"debug","message":"Executing query [m8jbw2o2hb06gb8byu]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:04:58.370Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:04:58.371Z"}
{"level":"debug","message":"Executing query [m8jbw2o8q3yqei3m9qq]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594698348\"]","timestamp":"2025-03-21T22:04:58.376Z"}
{"level":"debug","message":"Executing query [m8jbw2ocmmih9v82wx]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:04:58.380Z"}
{"level":"debug","message":"Executing query [m8jbw2ofrhbivyiqb5i]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:04:58.383Z"}
{"level":"debug","message":"Executing query [m8jbw2oigoxyfkd1z5]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:04:58.386Z"}
{"level":"debug","message":"Executing query [m8jbw2oj02ipfantt166]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:04:58.387Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:04:58.390Z"}
{"level":"debug","message":"Executing query [m8jbw2rz485vq63ugnf]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:04:58.511Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:04:58.525Z"}
{"level":"debug","message":"Executing query [m8jbw2seh3qlqxft32f]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:04:58.526Z"}
{"level":"debug","message":"Executing query [m8jbw2sgg59no8dc6lr]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:04:58.528Z"}
{"level":"debug","message":"Executing query [m8jbw2si5idxmeudase]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:04:58.530Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:04:58.531Z"}
{"level":"debug","message":"Executing query [m8jbw2ssn8yal2qjz0r]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:04:58.540Z"}
{"level":"debug","message":"Executing query [m8jbw2sxs5r0vwl9e4i]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:04:58.545Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:04:58.546Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:04:59.286Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:04:59.295Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:04:59.297Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:00.033Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:05:00.037Z"}
{"level":"debug","message":"Executing query [m8jbw41veojqrzkbcgu]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:05:00.163Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:00.177Z"}
{"level":"debug","message":"Executing query [m8jbw42blbm63ax21yc]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:05:00.179Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:05:00.181Z"}
{"level":"debug","message":"Executing query [m8jbw42dgapw4t7nje]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:05:00.181Z"}
{"level":"debug","message":"Executing query [m8jbw42ee0o3snqq9y]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:05:00.182Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:05:00.184Z"}
{"level":"debug","message":"Executing query [m8jbw42ggzm1hqkzl6v]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:05:00.184Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:05:00.185Z"}
{"level":"debug","message":"Executing query [m8jbw42mqsy0f04re6]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:05:00.190Z"}
{"level":"debug","message":"Executing query [m8jbw42p8idofuk9iqm]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:05:00.193Z"}
{"level":"debug","message":"Executing query [m8jbw42shh2nqf2xos]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:05:00.196Z"}
{"level":"debug","message":"Executing query [m8jbw45z3436tb1rx6d]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:05:00.311Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:00.321Z"}
{"level":"debug","message":"Executing query [m8jbw46au6o614ndxr]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:05:00.322Z"}
{"level":"debug","message":"Executing query [m8jbw46c0tmandvmaice]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594700310\"]","timestamp":"2025-03-21T22:05:00.324Z"}
{"level":"debug","message":"Executing query [m8jbw46dplozjn6z3s]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594700310\",\"TEST-OFICIO-1742594700310\",8132,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:05:00.325Z"}
{"level":"debug","message":"Executing query [m8jbw46jnljl7v412wc]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.331Z"}
{"level":"debug","message":"Executing query [m8jbw46l0cl70llsxa2g]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594700310\"]","timestamp":"2025-03-21T22:05:00.333Z"}
{"level":"debug","message":"Executing query [m8jbw46n70v9jgxtye5]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",15]","timestamp":"2025-03-21T22:05:00.335Z"}
{"level":"debug","message":"Executing query [m8jbw46qbkqmmx5oefm]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.338Z"}
{"level":"debug","message":"Executing query [m8jbw46s7xjm9e2yc9c]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.340Z"}
{"level":"debug","message":"Executing query [m8jbw46v7fa4d76ixch]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.343Z"}
{"level":"debug","message":"Executing query [m8jbw46x6h97l0o3yfr]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.346Z"}
{"level":"debug","message":"Executing query [m8jbw470zga9k91r1q8]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.348Z"}
{"level":"debug","message":"Executing query [m8jbw473e2kler3ocj]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594700351\",\"TEST-SP-OFICIO-1742594700351\",1639,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:05:00.351Z"}
{"level":"debug","message":"Executing query [m8jbw476icw50a00w7]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594700351\"]","timestamp":"2025-03-21T22:05:00.354Z"}
{"level":"debug","message":"Executing query [m8jbw478cix5vgnhlt]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594700351\"]","timestamp":"2025-03-21T22:05:00.356Z"}
{"level":"debug","message":"Executing query [m8jbw47blyrujvmcgni]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:05:00.359Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:00.360Z"}
{"level":"debug","message":"Executing query [m8jbw4a1yb1sv77i1x]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:05:00.457Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:00.469Z"}
{"level":"debug","message":"Executing query [m8jbw4aeodon83cud4s]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:05:00.470Z"}
{"level":"debug","message":"Executing query [m8jbw4ag6kw15mkyz4x]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594700456\"]","timestamp":"2025-03-21T22:05:00.472Z"}
{"level":"debug","message":"Executing query [m8jbw4aik9r9it2f31d]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594700456\",\"TEST-OFI-FORENSE-1742594700456\",1861,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594700456\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:05:00.474Z"}
{"level":"debug","message":"Executing query [m8jbw4anl1jgcodd7ud]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.479Z"}
{"level":"debug","message":"Executing query [m8jbw4aq8mw5op21zer]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594700456\"]","timestamp":"2025-03-21T22:05:00.482Z"}
{"level":"debug","message":"Executing query [m8jbw4as8p5vocd3oks]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",15]","timestamp":"2025-03-21T22:05:00.484Z"}
{"level":"debug","message":"Executing query [m8jbw4avpp20bm1tow]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.487Z"}
{"level":"debug","message":"Executing query [m8jbw4axwezdapaakkr]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.489Z"}
{"level":"debug","message":"Executing query [m8jbw4b0udbw237jqr]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.492Z"}
{"level":"debug","message":"Executing query [m8jbw4b2m1807m472km]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.494Z"}
{"level":"debug","message":"Executing query [m8jbw4b5g3d74d6aqn9]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-21T22:05:00.497Z"}
{"level":"debug","message":"Executing query [m8jbw4b637v9vs7rd74]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594700498\",\"TEST-SP-OFI-FORENSE-1742594700498\",9641,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:05:00.498Z"}
{"level":"debug","message":"Executing query [m8jbw4bq8nqamzbzywp]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594700498\"]","timestamp":"2025-03-21T22:05:00.518Z"}
{"level":"debug","message":"Executing query [m8jbw4brngj5zjzabsc]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594700498\"]","timestamp":"2025-03-21T22:05:00.519Z"}
{"level":"debug","message":"Executing query [m8jbw4bvucuwx7kes8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:05:00.523Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:00.524Z"}
{"level":"debug","message":"Executing query [m8jbw4esos6hcarto3a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:05:00.628Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:00.636Z"}
{"level":"debug","message":"Executing query [m8jbw4f2fknze9yriqr]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:05:00.638Z"}
{"level":"debug","message":"Executing query [m8jbw4f3975usm1yt97]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:05:00.639Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:05:00.640Z"}
{"level":"debug","message":"Executing query [m8jbw4f56ckobddgrix]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:05:00.641Z"}
{"level":"debug","message":"Executing query [m8jbw4f75lcwe1p5joa]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:05:00.643Z"}
{"level":"debug","message":"Executing query [m8jbw4f88hp8al9q0m4]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:05:00.644Z"}
{"level":"debug","message":"Executing query [m8jbw4f80aud2isjykqf]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:05:00.644Z"}
{"level":"debug","message":"Executing query [m8jbw4fe7k7lb2cyivf]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[9]","timestamp":"2025-03-21T22:05:00.650Z"}
{"level":"debug","message":"Executing query [m8jbw4fhzlb9afj2vsf]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:05:00.653Z"}
{"level":"debug","message":"Executing query [m8jbw4fjhp05o2t88af]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",9]","timestamp":"2025-03-21T22:05:00.655Z"}
{"level":"debug","message":"Executing query [m8jbw4fnkjk5nf0ecse]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[9]","timestamp":"2025-03-21T22:05:00.659Z"}
{"level":"debug","message":"Executing query [m8jbw4fp9z4yakqugjs]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[9]","timestamp":"2025-03-21T22:05:00.661Z"}
{"level":"debug","message":"Executing query [m8jbw4fu6ni5abc7k5r]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[9]","timestamp":"2025-03-21T22:05:00.666Z"}
{"level":"debug","message":"Executing query [m8jbw4fvkm2r3z6h1qc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:05:00.667Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:00.668Z"}
{"level":"debug","message":"Executing query [m8jbw4ipx2ppde76nr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:05:00.769Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:00.782Z"}
{"level":"debug","message":"Executing query [m8jbw4j3uq0cx7jf2we]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:05:00.783Z"}
{"level":"debug","message":"Executing query [m8jbw4j5s49v28u7fbs]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594700768\"]","timestamp":"2025-03-21T22:05:00.785Z"}
{"level":"debug","message":"Executing query [m8jbw4j6eqe4kxcw9bv]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594700768\",\"TEST-OFI-QUIMICA-1742594700768\",1218,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:05:00.786Z"}
{"level":"debug","message":"Executing query [m8jbw4ja0ph4rsatne1b]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.790Z"}
{"level":"debug","message":"Executing query [m8jbw4jcyejj4rx9oxl]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594700768\"]","timestamp":"2025-03-21T22:05:00.792Z"}
{"level":"debug","message":"Executing query [m8jbw4je1q9r0rr8ve3]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",8]","timestamp":"2025-03-21T22:05:00.794Z"}
{"level":"debug","message":"Executing query [m8jbw4jiq0gt3yz6nt9]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.798Z"}
{"level":"debug","message":"Executing query [m8jbw4jlzoz0c66qho]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.801Z"}
{"level":"debug","message":"Executing query [m8jbw4jp5k1ihfjidfm]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.805Z"}
{"level":"debug","message":"Executing query [m8jbw4jr1hasvfvk2nv]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.807Z"}
{"level":"debug","message":"Executing query [m8jbw4jvc3c51exb3zp]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.812Z"}
{"level":"debug","message":"Executing query [m8jbw4jxmcwtiheg4p8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:05:00.813Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:00.815Z"}
{"level":"debug","message":"Executing query [m8jbw4mqum6stofgqwh]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:05:00.914Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:00.924Z"}
{"level":"debug","message":"Executing query [m8jbw4n1dlnjkvx5omt]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594700913\"]","timestamp":"2025-03-21T22:05:00.925Z"}
{"level":"debug","message":"Executing query [m8jbw4n23rtto7bmbdi]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594700913\",true]","timestamp":"2025-03-21T22:05:00.926Z"}
{"level":"debug","message":"Executing query [m8jbw4n7jud5eg5777p]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.931Z"}
{"level":"debug","message":"Executing query [m8jbw4n92gltmfk2dku]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594700913\"]","timestamp":"2025-03-21T22:05:00.933Z"}
{"level":"debug","message":"Executing query [m8jbw4nbeld14s92igf]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",8]","timestamp":"2025-03-21T22:05:00.935Z"}
{"level":"debug","message":"Executing query [m8jbw4nd4zgxeinmk4n]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.937Z"}
{"level":"debug","message":"Executing query [m8jbw4nfvn03fvddcac]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.939Z"}
{"level":"debug","message":"Executing query [m8jbw4nieomnuhscj6h]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.942Z"}
{"level":"debug","message":"Executing query [m8jbw4nl0tyo3wg68r1r]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.945Z"}
{"level":"debug","message":"Executing query [m8jbw4nm39c0t0uvvfq]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.946Z"}
{"level":"debug","message":"Executing query [m8jbw4npnc4ve52qmza]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-21T22:05:00.949Z"}
{"level":"debug","message":"Executing query [m8jbw4nqmwbb4w6a4v]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:05:00.950Z"}
{"level":"debug","message":"Executing query [m8jbw4nsa85flk3qdt]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:05:00.952Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:00.954Z"}
{"level":"debug","message":"Executing query [m8jbw4qqwydxrjrsmap]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:05:01.058Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:01.071Z"}
{"level":"debug","message":"Executing query [m8jbw4r5p4kru74nvr]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594701057\"]","timestamp":"2025-03-21T22:05:01.073Z"}
{"level":"debug","message":"Executing query [m8jbw4r6i4xgdgtrw1o]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594701057\"]","timestamp":"2025-03-21T22:05:01.074Z"}
{"level":"debug","message":"Executing query [m8jbw4r7r9kkdpsaocs]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594701057\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:05:01.075Z"}
{"level":"debug","message":"Executing query [m8jbw4re6fbztx8iq4m]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T22:05:01.082Z"}
{"level":"debug","message":"Executing query [m8jbw4rh40vtkhj7amn]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594701057\"]","timestamp":"2025-03-21T22:05:01.085Z"}
{"level":"debug","message":"Executing query [m8jbw4rj5lz1nc2209t]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1006]","timestamp":"2025-03-21T22:05:01.087Z"}
{"level":"debug","message":"Executing query [m8jbw4rmpsjy04504oo]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T22:05:01.090Z"}
{"level":"debug","message":"Executing query [m8jbw4rotprxkozt81b]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T22:05:01.092Z"}
{"level":"debug","message":"Executing query [m8jbw4rr2tlt7hbufs8]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T22:05:01.095Z"}
{"level":"debug","message":"Executing query [m8jbw4rtt03dsets91k]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T22:05:01.098Z"}
{"level":"debug","message":"Executing query [m8jbw4rvtwd4yq81y7r]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T22:05:01.099Z"}
{"level":"debug","message":"Executing query [m8jbw4rypmk4grc6v2]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-21T22:05:01.102Z"}
{"level":"debug","message":"Executing query [m8jbw4s063749jtugzi]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:05:01.104Z"}
{"level":"debug","message":"Executing query [m8jbw4s2zqblj4jfj9o]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:05:01.106Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:01.107Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:05:01.225Z"}
{"level":"debug","message":"Executing query [m8jbw4vg83rwlx4qrlt]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:05:01.228Z"}
{"level":"debug","message":"Executing query [m8jbw4vhizht6mbim1]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:05:01.229Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbw4vhizht6mbim1]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:05:01.231Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:05:01.233Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:05:01.314Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:05:01.315Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:05:01.316Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:05:01.316Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:05:01.317Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:05:01.317Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:06:29.585Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:29.639Z"}
{"authTokenExists":false,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":false,"timestamp":"2025-03-21T22:06:29.656Z"}
{"level":"info","message":"Omitiendo prueba de refresh token, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:06:29.657Z"}
{"level":"info","message":"Omitiendo prueba de verificación, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:06:29.658Z"}
{"level":"info","message":"Omitiendo prueba de logout, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:06:29.661Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:29.663Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:30.408Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:30.420Z"}
{"level":"debug","message":"Executing query [m8jby1sk7in5h6e713n]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:30.548Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:30.562Z"}
{"level":"debug","message":"Executing query [m8jby1t0y54gqbc32ze]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:30.564Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:06:30.567Z"}
{"level":"debug","message":"Executing query [m8jby1t4kw2bkuek2tq]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:30.568Z"}
{"level":"debug","message":"Executing query [m8jby1t5ocpq2sfgr0f]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:30.569Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:06:30.571Z"}
{"level":"debug","message":"Executing query [m8jby1tbn6qma9kkrm]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594790547\"]","timestamp":"2025-03-21T22:06:30.575Z"}
{"level":"debug","message":"Executing query [m8jby1tf4ngn0kyp2kd]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:06:30.579Z"}
{"level":"debug","message":"Executing query [m8jby1tjbu6epxq22ms]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:06:30.583Z"}
{"level":"debug","message":"Executing query [m8jby1tmcn5ajb4xyog]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:06:30.586Z"}
{"level":"debug","message":"Executing query [m8jby1tod5z3vw01hb6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:30.588Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:30.589Z"}
{"level":"debug","message":"Executing query [m8jby1wznq9y0ba2qw]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:30.707Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:30.720Z"}
{"level":"debug","message":"Executing query [m8jby1xdewtkvyo6g2l]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:30.721Z"}
{"level":"debug","message":"Executing query [m8jby1xge6z48jlmrja]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:30.724Z"}
{"level":"debug","message":"Executing query [m8jby1xh83ruc4b0bs]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:30.725Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:06:30.727Z"}
{"level":"debug","message":"Executing query [m8jby1xtfqlo9a7mz1c]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:06:30.737Z"}
{"level":"debug","message":"Executing query [m8jby1xxj1sqewoyjy]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:30.741Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:30.742Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:06:31.489Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:31.497Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:06:31.499Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:32.217Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:06:32.219Z"}
{"level":"debug","message":"Executing query [m8jby36l3a75jehsmz3]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:32.349Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:32.363Z"}
{"level":"debug","message":"Executing query [m8jby370n62gfswh0ep]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:32.364Z"}
{"level":"debug","message":"Executing query [m8jby372ksxgk1lvhvi]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594792348\"]","timestamp":"2025-03-21T22:06:32.366Z"}
{"level":"debug","message":"Executing query [m8jby37466sphnsod6n]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594792348\",\"TEST-OFI-FORENSE-1742594792348\",9785,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594792348\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:06:32.368Z"}
{"level":"debug","message":"Executing query [m8jby37dkk9xx2e8mzj]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.377Z"}
{"level":"debug","message":"Executing query [m8jby37hm6m3l1qxa]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594792348\"]","timestamp":"2025-03-21T22:06:32.381Z"}
{"level":"debug","message":"Executing query [m8jby37lxbas0zjel9]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",17]","timestamp":"2025-03-21T22:06:32.385Z"}
{"level":"debug","message":"Executing query [m8jby37rk03z06iod6q]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.391Z"}
{"level":"debug","message":"Executing query [m8jby37u82d53tt646d]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.394Z"}
{"level":"debug","message":"Executing query [m8jby37zkiltve464df]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.399Z"}
{"level":"debug","message":"Executing query [m8jby3812uvy52vng2b]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.401Z"}
{"level":"debug","message":"Executing query [m8jby386afq3kioyd1o]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.406Z"}
{"level":"debug","message":"Executing query [m8jby388fm84ptcgodk]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594792408\",\"TEST-SP-OFI-FORENSE-1742594792408\",3725,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:06:32.408Z"}
{"level":"debug","message":"Executing query [m8jby38dapv8j41wz1]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594792408\"]","timestamp":"2025-03-21T22:06:32.413Z"}
{"level":"debug","message":"Executing query [m8jby38fu9ivz9ss9xf]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594792408\"]","timestamp":"2025-03-21T22:06:32.415Z"}
{"level":"debug","message":"Executing query [m8jby38j8kkmzc4muol]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:32.419Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:32.421Z"}
{"level":"debug","message":"Executing query [m8jby3bva6ta61ts4l9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:32.539Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:32.549Z"}
{"level":"debug","message":"Executing query [m8jby3c62vibgi59wex]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:32.551Z"}
{"level":"debug","message":"Executing query [m8jby3c82frl5flk45t]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594792538\"]","timestamp":"2025-03-21T22:06:32.552Z"}
{"level":"debug","message":"Executing query [m8jby3c9zacswxitz3m]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594792538\",\"TEST-OFICIO-1742594792538\",5800,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:06:32.553Z"}
{"level":"debug","message":"Executing query [m8jby3cdeuldxl6nwza]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.557Z"}
{"level":"debug","message":"Executing query [m8jby3cgakl0a1c3isp]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594792538\"]","timestamp":"2025-03-21T22:06:32.560Z"}
{"level":"debug","message":"Executing query [m8jby3ci319er4l0q0o]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",17]","timestamp":"2025-03-21T22:06:32.562Z"}
{"level":"debug","message":"Executing query [m8jby3cmp3371zzw0ic]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.566Z"}
{"level":"debug","message":"Executing query [m8jby3co4s46ows7ggq]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.568Z"}
{"level":"debug","message":"Executing query [m8jby3cri1c8ko4c0ll]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.571Z"}
{"level":"debug","message":"Executing query [m8jby3cty7j1mj19v]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.573Z"}
{"level":"debug","message":"Executing query [m8jby3cvgf6x62hr70f]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-21T22:06:32.575Z"}
{"level":"debug","message":"Executing query [m8jby3cyhsxvp3v8afp]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594792578\",\"TEST-SP-OFICIO-1742594792578\",1003,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:06:32.578Z"}
{"level":"debug","message":"Executing query [m8jby3d1tc403a6i7he]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594792578\"]","timestamp":"2025-03-21T22:06:32.581Z"}
{"level":"debug","message":"Executing query [m8jby3d3hrchwxcso06]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594792578\"]","timestamp":"2025-03-21T22:06:32.583Z"}
{"level":"debug","message":"Executing query [m8jby3d70bjrtegog0wd]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:32.587Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:32.588Z"}
{"level":"debug","message":"Executing query [m8jby3gf9t8l7mxfc14]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:32.703Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:32.714Z"}
{"level":"debug","message":"Executing query [m8jby3gryznjzcghx1]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594792702\"]","timestamp":"2025-03-21T22:06:32.715Z"}
{"level":"debug","message":"Executing query [m8jby3gtmj8sub2dl6p]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594792702\"]","timestamp":"2025-03-21T22:06:32.717Z"}
{"level":"debug","message":"Executing query [m8jby3gua4uz51n1ro9]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594792702\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:06:32.718Z"}
{"level":"debug","message":"Executing query [m8jby3h0ibo4calduv]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-21T22:06:32.724Z"}
{"level":"debug","message":"Executing query [m8jby3h2io7ig4hdybn]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594792702\"]","timestamp":"2025-03-21T22:06:32.726Z"}
{"level":"debug","message":"Executing query [m8jby3h3uaad9ohyj4]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1007]","timestamp":"2025-03-21T22:06:32.728Z"}
{"level":"debug","message":"Executing query [m8jby3h7t0km7dfaoup]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-21T22:06:32.731Z"}
{"level":"debug","message":"Executing query [m8jby3h9tvqzewrudgj]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-21T22:06:32.733Z"}
{"level":"debug","message":"Executing query [m8jby3hbkh2fauoy9ln]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-21T22:06:32.735Z"}
{"level":"debug","message":"Executing query [m8jby3hefkhrq1ez8lw]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-21T22:06:32.738Z"}
{"level":"debug","message":"Executing query [m8jby3hfaomm5vlbtd7]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-21T22:06:32.739Z"}
{"level":"debug","message":"Executing query [m8jby3hi24zccy2533e]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-21T22:06:32.742Z"}
{"level":"debug","message":"Executing query [m8jby3hj6zlfgemjb13]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:06:32.743Z"}
{"level":"debug","message":"Executing query [m8jby3hll0if5d04px]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:32.745Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:32.746Z"}
{"level":"debug","message":"Executing query [m8jby3kew8cady6jv6]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:32.846Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:32.855Z"}
{"level":"debug","message":"Executing query [m8jby3koy0swf8aos4m]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:32.856Z"}
{"level":"debug","message":"Executing query [m8jby3kqdmcznxvlq3s]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594792845\"]","timestamp":"2025-03-21T22:06:32.858Z"}
{"level":"debug","message":"Executing query [m8jby3krvm5rrq7fhwo]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594792845\",\"TEST-OFI-QUIMICA-1742594792845\",4247,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:06:32.859Z"}
{"level":"debug","message":"Executing query [m8jby3kvg27u6pqfbj6]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-21T22:06:32.863Z"}
{"level":"debug","message":"Executing query [m8jby3kxcz8bq5sdqdd]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594792845\"]","timestamp":"2025-03-21T22:06:32.865Z"}
{"level":"debug","message":"Executing query [m8jby3kzxw5ib1qjpar]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",9]","timestamp":"2025-03-21T22:06:32.867Z"}
{"level":"debug","message":"Executing query [m8jby3l3ce0njrm83q8]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-21T22:06:32.871Z"}
{"level":"debug","message":"Executing query [m8jby3l5jnxf0xpr4s]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-21T22:06:32.873Z"}
{"level":"debug","message":"Executing query [m8jby3l8btqqmjts8y8]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-21T22:06:32.876Z"}
{"level":"debug","message":"Executing query [m8jby3lasxrt7ajcywq]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-21T22:06:32.878Z"}
{"level":"debug","message":"Executing query [m8jby3lcjm6k2768p2j]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-21T22:06:32.880Z"}
{"level":"debug","message":"Executing query [m8jby3le5vspoe4hne6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:32.882Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:32.883Z"}
{"level":"debug","message":"Executing query [m8jby3o44e62ml4eag8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:32.980Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:32.992Z"}
{"level":"debug","message":"Executing query [m8jby3ohre1nrdvfy3q]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:32.993Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:06:32.994Z"}
{"level":"debug","message":"Executing query [m8jby3ojsdxezwg7czo]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:06:32.995Z"}
{"level":"debug","message":"Executing query [m8jby3ok8ra7p8b88o4]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:06:32.996Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:06:32.997Z"}
{"level":"debug","message":"Executing query [m8jby3olafa1i5bkbdw]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:06:32.997Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:06:32.998Z"}
{"level":"debug","message":"Executing query [m8jby3oqbtj88nvou3c]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:06:33.002Z"}
{"level":"debug","message":"Executing query [m8jby3ot0j26vv7gcpld]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:06:33.005Z"}
{"level":"debug","message":"Executing query [m8jby3ouee2gihzw9k]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:33.006Z"}
{"level":"debug","message":"Executing query [m8jby3ro7pm5o1oexz5]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:33.109Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:33.118Z"}
{"level":"debug","message":"Executing query [m8jby3rzytt907d7499]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:06:33.119Z"}
{"level":"debug","message":"Executing query [m8jby3s0ylytibk8fvp]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:06:33.120Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:06:33.121Z"}
{"level":"debug","message":"Executing query [m8jby3s2zovv5euv68k]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:06:33.122Z"}
{"level":"debug","message":"Executing query [m8jby3s3jg0kqfwy4vo]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:06:33.123Z"}
{"level":"debug","message":"Executing query [m8jby3s4d0dz38ksh5u]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:06:33.124Z"}
{"level":"debug","message":"Executing query [m8jby3s46xhe22c59js]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:06:33.124Z"}
{"level":"debug","message":"Executing query [m8jby3s8cei0pd8pojh]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[10]","timestamp":"2025-03-21T22:06:33.128Z"}
{"level":"debug","message":"Executing query [m8jby3sa3kr9an3h0q6]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:06:33.130Z"}
{"level":"debug","message":"Executing query [m8jby3scxw1qbfqyig]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",10]","timestamp":"2025-03-21T22:06:33.132Z"}
{"level":"debug","message":"Executing query [m8jby3sfn96osqjvjv]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[10]","timestamp":"2025-03-21T22:06:33.135Z"}
{"level":"debug","message":"Executing query [m8jby3sh9w87ivetr9a]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[10]","timestamp":"2025-03-21T22:06:33.137Z"}
{"level":"debug","message":"Executing query [m8jby3sjlrtu1fpylve]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[10]","timestamp":"2025-03-21T22:06:33.139Z"}
{"level":"debug","message":"Executing query [m8jby3sl4288hw7zyly]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:33.141Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:33.143Z"}
{"level":"debug","message":"Executing query [m8jby3vcffc9hfh17uc]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:06:33.240Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:33.253Z"}
{"level":"debug","message":"Executing query [m8jby3vqx0lkuk59v3]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594793240\"]","timestamp":"2025-03-21T22:06:33.254Z"}
{"level":"debug","message":"Executing query [m8jby3vrslk2e51ahj]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594793240\",true]","timestamp":"2025-03-21T22:06:33.255Z"}
{"level":"debug","message":"Executing query [m8jby3vwmqopzx2ditk]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-21T22:06:33.260Z"}
{"level":"debug","message":"Executing query [m8jby3vyc3svgzknpi8]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594793240\"]","timestamp":"2025-03-21T22:06:33.262Z"}
{"level":"debug","message":"Executing query [m8jby3w1dd1u3ikssba]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",9]","timestamp":"2025-03-21T22:06:33.265Z"}
{"level":"debug","message":"Executing query [m8jby3w49k8nuewl9fr]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-21T22:06:33.268Z"}
{"level":"debug","message":"Executing query [m8jby3w6wqsjgrgq9pk]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-21T22:06:33.270Z"}
{"level":"debug","message":"Executing query [m8jby3w9ucz74tq7zv]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-21T22:06:33.273Z"}
{"level":"debug","message":"Executing query [m8jby3wbghfg38lhnxc]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-21T22:06:33.275Z"}
{"level":"debug","message":"Executing query [m8jby3wcivgu8547yn]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-21T22:06:33.276Z"}
{"level":"debug","message":"Executing query [m8jby3wfnob2b9w9b8a]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-21T22:06:33.280Z"}
{"level":"debug","message":"Executing query [m8jby3whpt2sdnd1iu]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:06:33.281Z"}
{"level":"debug","message":"Executing query [m8jby3wjpao1a775r9h]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:06:33.283Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:33.284Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:06:33.393Z"}
{"level":"debug","message":"Executing query [m8jby3znusqqqxud6yo]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:06:33.395Z"}
{"level":"debug","message":"Executing query [m8jby3zpvbsar0rqxus]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:06:33.397Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jby3zpvbsar0rqxus]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:06:33.398Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:06:33.400Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:06:33.481Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:06:33.482Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:06:33.482Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:06:33.483Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:06:33.483Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:06:33.483Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:07:06.759Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:06.821Z"}
{"authTokenExists":false,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":false,"timestamp":"2025-03-21T22:07:06.842Z"}
{"level":"info","message":"Omitiendo prueba de refresh token, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:07:06.844Z"}
{"level":"info","message":"Omitiendo prueba de verificación, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:07:06.845Z"}
{"level":"info","message":"Omitiendo prueba de logout, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:07:06.847Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:06.849Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:07.645Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:07.656Z"}
{"level":"debug","message":"Executing query [m8jbyuj8gw8rimpkkx]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:07.796Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:07.812Z"}
{"level":"debug","message":"Executing query [m8jbyujqt66b5vus1i]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:07.814Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:07:07.817Z"}
{"level":"debug","message":"Executing query [m8jbyujurpsuej6vsv8]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:07.818Z"}
{"level":"debug","message":"Executing query [m8jbyujvl0ovsuh547o]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:07.819Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:07:07.820Z"}
{"level":"debug","message":"Executing query [m8jbyuk051zhi56i2yx]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594827795\"]","timestamp":"2025-03-21T22:07:07.824Z"}
{"level":"debug","message":"Executing query [m8jbyuk5sl0dmra4nif]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:07:07.829Z"}
{"level":"debug","message":"Executing query [m8jbyuk8taypijzkpwc]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:07:07.832Z"}
{"level":"debug","message":"Executing query [m8jbyuka97c8sskxb5b]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:07:07.834Z"}
{"level":"debug","message":"Executing query [m8jbyukd2mwz1l9n6wh]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:07.837Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:07.839Z"}
{"level":"debug","message":"Executing query [m8jbyuo5jytq6vrqq0m]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:07.973Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:07.986Z"}
{"level":"debug","message":"Executing query [m8jbyuolkcwd4vz8ip]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:07.989Z"}
{"level":"debug","message":"Executing query [m8jbyuon29cjx4b4h4t]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:07.991Z"}
{"level":"debug","message":"Executing query [m8jbyuooc0kngzvj2i5]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:07.992Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:07:07.993Z"}
{"level":"debug","message":"Executing query [m8jbyuozxj6zbmzr6u]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:07:08.003Z"}
{"level":"debug","message":"Executing query [m8jbyup4ei6yvksoc9h]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:08.008Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:08.010Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:07:08.757Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:08.768Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:07:08.770Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:09.595Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:07:09.599Z"}
{"level":"debug","message":"Executing query [m8jbyw1a59607nui1xl]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:09.742Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:09.756Z"}
{"level":"debug","message":"Executing query [m8jbyw1qck16j3sxfj6]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:09.758Z"}
{"level":"debug","message":"Executing query [m8jbyw1s56qc7xpjw96]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594829741\"]","timestamp":"2025-03-21T22:07:09.760Z"}
{"level":"debug","message":"Executing query [m8jbyw1ux2pl7onjaw]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594829741\",\"TEST-OFI-FORENSE-1742594829741\",5791,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594829741\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:09.762Z"}
{"level":"debug","message":"Executing query [m8jbyw20qevfepo8y4l]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.768Z"}
{"level":"debug","message":"Executing query [m8jbyw24krddt1ysjd]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594829741\"]","timestamp":"2025-03-21T22:07:09.772Z"}
{"level":"debug","message":"Executing query [m8jbyw27y66b5i4du2h]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",19]","timestamp":"2025-03-21T22:07:09.775Z"}
{"level":"debug","message":"Executing query [m8jbyw2a9vi7vttjw7o]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.778Z"}
{"level":"debug","message":"Executing query [m8jbyw2ef1z8su0uo7v]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.782Z"}
{"level":"debug","message":"Executing query [m8jbyw2h5rdhj2qlt8]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.785Z"}
{"level":"debug","message":"Executing query [m8jbyw2ki3wdup1f20s]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.788Z"}
{"level":"debug","message":"Executing query [m8jbyw2np5x185f0t18]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.791Z"}
{"level":"debug","message":"Executing query [m8jbyw2ptqx7eqkrm1a]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594829793\",\"TEST-SP-OFI-FORENSE-1742594829793\",4316,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:07:09.793Z"}
{"level":"debug","message":"Executing query [m8jbyw2t8w9g8lop7bu]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594829793\"]","timestamp":"2025-03-21T22:07:09.797Z"}
{"level":"debug","message":"Executing query [m8jbyw2vkcq556ie3i]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594829793\"]","timestamp":"2025-03-21T22:07:09.799Z"}
{"level":"debug","message":"Executing query [m8jbyw2zs14r5prfqe8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:09.803Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:09.805Z"}
{"level":"debug","message":"Executing query [m8jbyw6g23s9d1114j6]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:09.928Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:09.937Z"}
{"level":"debug","message":"Executing query [m8jbyw6s88r3g9h3in4]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:09.940Z"}
{"level":"debug","message":"Executing query [m8jbyw6ticfybwo03zh]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594829927\"]","timestamp":"2025-03-21T22:07:09.941Z"}
{"level":"debug","message":"Executing query [m8jbyw6um97ez4l2vws]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594829927\",\"TEST-OFICIO-1742594829927\",3212,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:09.943Z"}
{"level":"debug","message":"Executing query [m8jbyw7077elf0g9d8d]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.948Z"}
{"level":"debug","message":"Executing query [m8jbyw73ziu7s2jpter]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594829927\"]","timestamp":"2025-03-21T22:07:09.951Z"}
{"level":"debug","message":"Executing query [m8jbyw766kzt74pw609]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",19]","timestamp":"2025-03-21T22:07:09.954Z"}
{"level":"debug","message":"Executing query [m8jbyw7979vodgi6lax]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.958Z"}
{"level":"debug","message":"Executing query [m8jbyw7ci25rohrkhwq]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.960Z"}
{"level":"debug","message":"Executing query [m8jbyw7fqnnaydndq]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.963Z"}
{"level":"debug","message":"Executing query [m8jbyw7h5yz6gfw2eci]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.965Z"}
{"level":"debug","message":"Executing query [m8jbyw7ml2eh6gv6tkj]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-21T22:07:09.970Z"}
{"level":"debug","message":"Executing query [m8jbyw7olp29w4333o]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594829972\",\"TEST-SP-OFICIO-1742594829972\",9901,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:07:09.972Z"}
{"level":"debug","message":"Executing query [m8jbyw7rkj54tf9mjxm]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594829972\"]","timestamp":"2025-03-21T22:07:09.975Z"}
{"level":"debug","message":"Executing query [m8jbyw7tsvvl67fdhhq]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594829972\"]","timestamp":"2025-03-21T22:07:09.977Z"}
{"level":"debug","message":"Executing query [m8jbyw7xnv0eu157hmb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:09.981Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:09.983Z"}
{"level":"debug","message":"Executing query [m8jbywb9tjvrgyg905]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:10.101Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:10.117Z"}
{"level":"debug","message":"Executing query [m8jbywbqai0ru0m57fg]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594830100\"]","timestamp":"2025-03-21T22:07:10.118Z"}
{"level":"debug","message":"Executing query [m8jbywbtenaor3npx1l]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594830100\"]","timestamp":"2025-03-21T22:07:10.121Z"}
{"level":"debug","message":"Executing query [m8jbywbvtkktpnofs1]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594830100\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:10.123Z"}
{"level":"debug","message":"Executing query [m8jbywc2zzr8aqkmf9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1008]","timestamp":"2025-03-21T22:07:10.130Z"}
{"level":"debug","message":"Executing query [m8jbywc47qdkqe0d4xn]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594830100\"]","timestamp":"2025-03-21T22:07:10.132Z"}
{"level":"debug","message":"Executing query [m8jbywc73evjrwwi1cu]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1008]","timestamp":"2025-03-21T22:07:10.135Z"}
{"level":"debug","message":"Executing query [m8jbywca2d4d9tvpwdh]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1008]","timestamp":"2025-03-21T22:07:10.138Z"}
{"level":"debug","message":"Executing query [m8jbywcdrsaoq0c1lsk]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1008]","timestamp":"2025-03-21T22:07:10.141Z"}
{"level":"debug","message":"Executing query [m8jbywcg73enbdox293]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1008]","timestamp":"2025-03-21T22:07:10.144Z"}
{"level":"debug","message":"Executing query [m8jbywci10g5nzorlrt]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1008]","timestamp":"2025-03-21T22:07:10.146Z"}
{"level":"debug","message":"Executing query [m8jbywckxruzm1t7tje]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1008]","timestamp":"2025-03-21T22:07:10.149Z"}
{"level":"debug","message":"Executing query [m8jbywconemwd9u4r49]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1008]","timestamp":"2025-03-21T22:07:10.152Z"}
{"level":"debug","message":"Executing query [m8jbywcqpwpk5ksgd2b]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:07:10.154Z"}
{"level":"debug","message":"Executing query [m8jbywcseu2jcxfc6oc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:10.156Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:10.158Z"}
{"level":"debug","message":"Executing query [m8jbywgbyhp43ascg4i]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:10.283Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:10.294Z"}
{"level":"debug","message":"Executing query [m8jbywgo9usb3b690q]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594830282\"]","timestamp":"2025-03-21T22:07:10.296Z"}
{"level":"debug","message":"Executing query [m8jbywgq5dzsa6smmol]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594830282\",true]","timestamp":"2025-03-21T22:07:10.298Z"}
{"level":"debug","message":"Executing query [m8jbywgve4jay0vyabw]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.303Z"}
{"level":"debug","message":"Executing query [m8jbywgxa10zbt5ix55]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594830282\"]","timestamp":"2025-03-21T22:07:10.305Z"}
{"level":"debug","message":"Executing query [m8jbywh038zunnhq9a9]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",10]","timestamp":"2025-03-21T22:07:10.308Z"}
{"level":"debug","message":"Executing query [m8jbywh3hz3xj9i0fe]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.311Z"}
{"level":"debug","message":"Executing query [m8jbywh51clsq2es0k4]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.313Z"}
{"level":"debug","message":"Executing query [m8jbywhamv8wqapxlzr]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.318Z"}
{"level":"debug","message":"Executing query [m8jbywhcxozy4lxviu]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.320Z"}
{"level":"debug","message":"Executing query [m8jbywhf3nt0j65zqp8]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.323Z"}
{"level":"debug","message":"Executing query [m8jbywhjckiwej9mhzv]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.327Z"}
{"level":"debug","message":"Executing query [m8jbywhmemmb0bcgnf8]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:07:10.330Z"}
{"level":"debug","message":"Executing query [m8jbywho1mzpvjw88z7]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:10.332Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:10.334Z"}
{"level":"debug","message":"Executing query [m8jbywl6f2oq2al5f0f]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:10.458Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:10.472Z"}
{"level":"debug","message":"Executing query [m8jbywlm3gl6kixlijq]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:10.474Z"}
{"level":"debug","message":"Executing query [m8jbywlovzwraik5jq]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594830458\"]","timestamp":"2025-03-21T22:07:10.476Z"}
{"level":"debug","message":"Executing query [m8jbywlpsjju8mknjx]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594830458\",\"TEST-OFI-QUIMICA-1742594830458\",2067,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:10.478Z"}
{"level":"debug","message":"Executing query [m8jbywlua0cy8fnkmj]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.482Z"}
{"level":"debug","message":"Executing query [m8jbywlxm7ccu2mo4rg]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594830458\"]","timestamp":"2025-03-21T22:07:10.485Z"}
{"level":"debug","message":"Executing query [m8jbywlypp2fokd6tra]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",10]","timestamp":"2025-03-21T22:07:10.486Z"}
{"level":"debug","message":"Executing query [m8jbywm3w4a3xhs3cml]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.491Z"}
{"level":"debug","message":"Executing query [m8jbywm5p0ren91j0g]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.493Z"}
{"level":"debug","message":"Executing query [m8jbywm9330fiphoz8i]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.497Z"}
{"level":"debug","message":"Executing query [m8jbywmbreta4t2k85j]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.499Z"}
{"level":"debug","message":"Executing query [m8jbywmf0d11t8b6rgo]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-21T22:07:10.503Z"}
{"level":"debug","message":"Executing query [m8jbywmh1nylltc6krb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:10.505Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:10.506Z"}
{"level":"debug","message":"Executing query [m8jbywq5y66ktl2p66]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:10.637Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:10.648Z"}
{"level":"debug","message":"Executing query [m8jbywqh28fet5qah5r]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:07:10.649Z"}
{"level":"debug","message":"Executing query [m8jbywqjce2br5hls7s]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:07:10.651Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:07:10.652Z"}
{"level":"debug","message":"Executing query [m8jbywqkl4s7erlgs6]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:10.652Z"}
{"level":"debug","message":"Executing query [m8jbywqlr35o0ys7xr]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:10.653Z"}
{"level":"debug","message":"Executing query [m8jbywqnie5lggehpn]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:10.655Z"}
{"level":"debug","message":"Executing query [m8jbywqocvhqpy7jibs]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:07:10.656Z"}
{"level":"debug","message":"Executing query [m8jbywqvpsjnrnptvxe]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[11]","timestamp":"2025-03-21T22:07:10.663Z"}
{"level":"debug","message":"Executing query [m8jbywqy6ri4ib5advu]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:10.666Z"}
{"level":"debug","message":"Executing query [m8jbywr0rp7a3aou4wk]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",11]","timestamp":"2025-03-21T22:07:10.668Z"}
{"level":"debug","message":"Executing query [m8jbywr3vj8n11d7q9]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[11]","timestamp":"2025-03-21T22:07:10.671Z"}
{"level":"debug","message":"Executing query [m8jbywr50li8nuutsu9]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[11]","timestamp":"2025-03-21T22:07:10.673Z"}
{"level":"debug","message":"Executing query [m8jbywr9ukjxk3uakj]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[11]","timestamp":"2025-03-21T22:07:10.677Z"}
{"level":"debug","message":"Executing query [m8jbywrbr1807juoma]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:10.679Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:10.680Z"}
{"level":"debug","message":"Executing query [m8jbywun2g65zd2bfq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:10.799Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:10.813Z"}
{"level":"debug","message":"Executing query [m8jbywv3mk17btcpbs]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:10.815Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:07:10.816Z"}
{"level":"debug","message":"Executing query [m8jbywv5f46c0agmcxj]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:07:10.817Z"}
{"level":"debug","message":"Executing query [m8jbywv6vq75m8f6rue]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:07:10.818Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:07:10.818Z"}
{"level":"debug","message":"Executing query [m8jbywv7kpal8k7yhyg]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:10.819Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:07:10.820Z"}
{"level":"debug","message":"Executing query [m8jbywvdy8ai6drz8p9]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:07:10.825Z"}
{"level":"debug","message":"Executing query [m8jbywvfdttnvv0k7re]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:07:10.827Z"}
{"level":"debug","message":"Executing query [m8jbywvigdpkz4qvo8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:10.830Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:10.943Z"}
{"level":"debug","message":"Executing query [m8jbywyrojo8amie2a]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:07:10.947Z"}
{"level":"debug","message":"Executing query [m8jbywytvqztn2yk3di]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:07:10.949Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbywytvqztn2yk3di]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:07:10.950Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:10.952Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:07:11.034Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:07:11.034Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:07:11.035Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:07:11.036Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:07:11.037Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:07:11.037Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:07:36.660Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:36.734Z"}
{"level":"error","message":"Error al procesar login válido:","timestamp":"2025-03-21T22:07:36.767Z"}
{"level":"info","message":"Omitiendo prueba de refresh token, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:07:36.768Z"}
{"level":"info","message":"Omitiendo prueba de verificación, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:07:36.769Z"}
{"level":"info","message":"Omitiendo prueba de logout, no se pudo obtener token en prueba anterior","timestamp":"2025-03-21T22:07:36.770Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:36.772Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:37.523Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:37.534Z"}
{"level":"debug","message":"Executing query [m8jbzhkw3zmm7d58rsi]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:37.664Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:37.678Z"}
{"level":"debug","message":"Executing query [m8jbzhlc6xodpozr14m]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:37.680Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:07:37.684Z"}
{"level":"debug","message":"Executing query [m8jbzhlhk06u8zoyal]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:37.685Z"}
{"level":"debug","message":"Executing query [m8jbzhlicet43dfsprn]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:37.686Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:07:37.687Z"}
{"level":"debug","message":"Executing query [m8jbzhlo8xb71v51uao]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594857663\"]","timestamp":"2025-03-21T22:07:37.692Z"}
{"level":"debug","message":"Executing query [m8jbzhlsd97olnb5lot]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:07:37.696Z"}
{"level":"debug","message":"Executing query [m8jbzhlwi3fgsf31hd9]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:07:37.700Z"}
{"level":"debug","message":"Executing query [m8jbzhly6obivdfsayh]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:07:37.702Z"}
{"level":"debug","message":"Executing query [m8jbzhm15ra0hmyzcf3]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:37.705Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:37.706Z"}
{"level":"debug","message":"Executing query [m8jbzhpiz375d70dvi9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:37.830Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:37.840Z"}
{"level":"debug","message":"Executing query [m8jbzhpuznmow9myfg8]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:37.842Z"}
{"level":"debug","message":"Executing query [m8jbzhpwzzc51073keo]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:37.844Z"}
{"level":"debug","message":"Executing query [m8jbzhpx2nnuugbey3]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:37.845Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:07:37.846Z"}
{"level":"debug","message":"Executing query [m8jbzhq2rxai3ih7icq]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:07:37.850Z"}
{"level":"debug","message":"Executing query [m8jbzhq6l0ra0wir46]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:37.854Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:37.856Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:38.587Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:07:38.589Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:07:39.317Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:39.325Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:07:39.327Z"}
{"level":"debug","message":"Executing query [m8jbziykqld3ypm6r8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:39.452Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:39.464Z"}
{"level":"debug","message":"Executing query [m8jbziyxl1oejec1stc]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:39.465Z"}
{"level":"debug","message":"Executing query [m8jbziyzou9ui4yvio]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594859451\"]","timestamp":"2025-03-21T22:07:39.467Z"}
{"level":"debug","message":"Executing query [m8jbziz0f4wwdlaned7]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594859451\",\"TEST-OFI-FORENSE-1742594859451\",1942,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594859451\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:39.468Z"}
{"level":"debug","message":"Executing query [m8jbziz6uehwgkgz9na]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.474Z"}
{"level":"debug","message":"Executing query [m8jbziz9twkeq8vlzfk]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594859451\"]","timestamp":"2025-03-21T22:07:39.477Z"}
{"level":"debug","message":"Executing query [m8jbzizbt754fqge5fd]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",21]","timestamp":"2025-03-21T22:07:39.479Z"}
{"level":"debug","message":"Executing query [m8jbzizeybb9vnaqn7l]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.483Z"}
{"level":"debug","message":"Executing query [m8jbzizgac927x8265f]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.484Z"}
{"level":"debug","message":"Executing query [m8jbzizjxu7icm3ez6]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.487Z"}
{"level":"debug","message":"Executing query [m8jbzizmtpe1n2j8bk]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.490Z"}
{"level":"debug","message":"Executing query [m8jbzizoxses86vcymn]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.493Z"}
{"level":"debug","message":"Executing query [m8jbzizre9vx4obv0pt]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594859495\",\"TEST-SP-OFI-FORENSE-1742594859495\",2508,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:07:39.495Z"}
{"level":"debug","message":"Executing query [m8jbzizvuivan94mkca]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594859495\"]","timestamp":"2025-03-21T22:07:39.499Z"}
{"level":"debug","message":"Executing query [m8jbzizxjx8gn31mra]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594859495\"]","timestamp":"2025-03-21T22:07:39.501Z"}
{"level":"debug","message":"Executing query [m8jbzj00oei5bugy2ma]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:39.505Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:39.506Z"}
{"level":"debug","message":"Executing query [m8jbzj307t4x3hpq2vo]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:39.613Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:39.623Z"}
{"level":"debug","message":"Executing query [m8jbzj3cj8ukceql2o]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:39.624Z"}
{"level":"debug","message":"Executing query [m8jbzj3ek65z3f5fg5i]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594859611\"]","timestamp":"2025-03-21T22:07:39.626Z"}
{"level":"debug","message":"Executing query [m8jbzj3gj6cm7tpezqb]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594859611\",\"TEST-OFICIO-1742594859611\",3103,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:39.628Z"}
{"level":"debug","message":"Executing query [m8jbzj3k9tylnat1mad]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.632Z"}
{"level":"debug","message":"Executing query [m8jbzj3ntpvqat08kb]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594859611\"]","timestamp":"2025-03-21T22:07:39.635Z"}
{"level":"debug","message":"Executing query [m8jbzj3p2izjwkn8hcx]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",21]","timestamp":"2025-03-21T22:07:39.637Z"}
{"level":"debug","message":"Executing query [m8jbzj3tt9xodqx22xp]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.641Z"}
{"level":"debug","message":"Executing query [m8jbzj3v0znenzhx7ekn]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.643Z"}
{"level":"debug","message":"Executing query [m8jbzj3yqma6mromjf9]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.646Z"}
{"level":"debug","message":"Executing query [m8jbzj40qpry9fifab9]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.648Z"}
{"level":"debug","message":"Executing query [m8jbzj43rcbzs2uo29n]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-21T22:07:39.651Z"}
{"level":"debug","message":"Executing query [m8jbzj48btl1vnaoxvi]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594859656\",\"TEST-SP-OFICIO-1742594859656\",3931,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:07:39.656Z"}
{"level":"debug","message":"Executing query [m8jbzj4b4xbqtgdxdpu]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594859656\"]","timestamp":"2025-03-21T22:07:39.659Z"}
{"level":"debug","message":"Executing query [m8jbzj4dds6gw9rzaje]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594859656\"]","timestamp":"2025-03-21T22:07:39.661Z"}
{"level":"debug","message":"Executing query [m8jbzj4ga2bnmgu4xf]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:39.664Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:39.665Z"}
{"level":"debug","message":"Executing query [m8jbzj7ih8j10v4iuil]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:39.774Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:39.783Z"}
{"level":"debug","message":"Executing query [m8jbzj7tbz314db2qc8]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594859773\"]","timestamp":"2025-03-21T22:07:39.785Z"}
{"level":"debug","message":"Executing query [m8jbzj7v377hnbiudm7]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594859773\",true]","timestamp":"2025-03-21T22:07:39.787Z"}
{"level":"debug","message":"Executing query [m8jbzj82dj0vq496flh]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-21T22:07:39.794Z"}
{"level":"debug","message":"Executing query [m8jbzj84exb60v83bd8]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594859773\"]","timestamp":"2025-03-21T22:07:39.796Z"}
{"level":"debug","message":"Executing query [m8jbzj85z36u13uy9da]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",11]","timestamp":"2025-03-21T22:07:39.797Z"}
{"level":"debug","message":"Executing query [m8jbzj89q2vlf15lqb]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-21T22:07:39.801Z"}
{"level":"debug","message":"Executing query [m8jbzj8aea5i6iukg5o]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-21T22:07:39.802Z"}
{"level":"debug","message":"Executing query [m8jbzj8dam2fear63bs]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-21T22:07:39.805Z"}
{"level":"debug","message":"Executing query [m8jbzj8gd3d4apcag3b]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-21T22:07:39.808Z"}
{"level":"debug","message":"Executing query [m8jbzj8hywsmoghhnm9]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-21T22:07:39.809Z"}
{"level":"debug","message":"Executing query [m8jbzj8khnlt93dmfce]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-21T22:07:39.812Z"}
{"level":"debug","message":"Executing query [m8jbzj8mucv6c59657d]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:07:39.814Z"}
{"level":"debug","message":"Executing query [m8jbzj8okhx4a9if9bt]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:39.816Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:39.817Z"}
{"level":"debug","message":"Executing query [m8jbzjbos24d3l1heg8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:39.924Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:39.937Z"}
{"level":"debug","message":"Executing query [m8jbzjc3zo9wn4mfbj]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:07:39.939Z"}
{"level":"debug","message":"Executing query [m8jbzjc5atcq7zmrgve]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:07:39.941Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:07:39.942Z"}
{"level":"debug","message":"Executing query [m8jbzjc7vi7bk6rvjg]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:39.943Z"}
{"level":"debug","message":"Executing query [m8jbzjc7kyh835u9kil]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:39.943Z"}
{"level":"debug","message":"Executing query [m8jbzjc91jj79w16cyb]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:39.945Z"}
{"level":"debug","message":"Executing query [m8jbzjcarzfmv4xi0t]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:07:39.946Z"}
{"level":"debug","message":"Executing query [m8jbzjcesu50vn3l1c]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[12]","timestamp":"2025-03-21T22:07:39.950Z"}
{"level":"debug","message":"Executing query [m8jbzjchc3utdjy2y6e]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:07:39.954Z"}
{"level":"debug","message":"Executing query [m8jbzjcjzhs71wgdwc]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",12]","timestamp":"2025-03-21T22:07:39.955Z"}
{"level":"debug","message":"Executing query [m8jbzjcnmm5xw9v519]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[12]","timestamp":"2025-03-21T22:07:39.959Z"}
{"level":"debug","message":"Executing query [m8jbzjcplpdqq1d1ha]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[12]","timestamp":"2025-03-21T22:07:39.961Z"}
{"level":"debug","message":"Executing query [m8jbzjctcq54r7fjyqq]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[12]","timestamp":"2025-03-21T22:07:39.965Z"}
{"level":"debug","message":"Executing query [m8jbzjcv6gmwmxe9tme]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:39.967Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:39.969Z"}
{"level":"debug","message":"Executing query [m8jbzjfs6g6m3t5nkc7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:40.072Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:40.081Z"}
{"level":"debug","message":"Executing query [m8jbzjg3i0ke4ki7gn]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594860071\"]","timestamp":"2025-03-21T22:07:40.083Z"}
{"level":"debug","message":"Executing query [m8jbzjg5teyxmhl7uc]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594860071\"]","timestamp":"2025-03-21T22:07:40.085Z"}
{"level":"debug","message":"Executing query [m8jbzjg6smotwqfq9qj]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594860071\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:40.086Z"}
{"level":"debug","message":"Executing query [m8jbzjgd1w6v3eubc49]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1009]","timestamp":"2025-03-21T22:07:40.093Z"}
{"level":"debug","message":"Executing query [m8jbzjgfl4foevokgk]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594860071\"]","timestamp":"2025-03-21T22:07:40.095Z"}
{"level":"debug","message":"Executing query [m8jbzjghltl4wy8ft9f]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1009]","timestamp":"2025-03-21T22:07:40.097Z"}
{"level":"debug","message":"Executing query [m8jbzjgkg90itxamha]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1009]","timestamp":"2025-03-21T22:07:40.100Z"}
{"level":"debug","message":"Executing query [m8jbzjgm40aspul76ed]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1009]","timestamp":"2025-03-21T22:07:40.102Z"}
{"level":"debug","message":"Executing query [m8jbzjgo9waunc6a8ui]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1009]","timestamp":"2025-03-21T22:07:40.104Z"}
{"level":"debug","message":"Executing query [m8jbzjgq5ghkb4eaky5]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1009]","timestamp":"2025-03-21T22:07:40.106Z"}
{"level":"debug","message":"Executing query [m8jbzjgsakjow1ve2nh]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1009]","timestamp":"2025-03-21T22:07:40.108Z"}
{"level":"debug","message":"Executing query [m8jbzjgvl8z1za0aftb]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1009]","timestamp":"2025-03-21T22:07:40.111Z"}
{"level":"debug","message":"Executing query [m8jbzjgxndn75fxl5o8]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:07:40.113Z"}
{"level":"debug","message":"Executing query [m8jbzjgy7pl4ynyyizp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:40.114Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:40.115Z"}
{"level":"debug","message":"Executing query [m8jbzjjyyqnofxlcve]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:40.222Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:40.236Z"}
{"level":"debug","message":"Executing query [m8jbzjke8kubztg052a]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:40.238Z"}
{"level":"debug","message":"Executing query [m8jbzjkfgktfqgyd1jw]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594860222\"]","timestamp":"2025-03-21T22:07:40.240Z"}
{"level":"debug","message":"Executing query [m8jbzjkgtibqcnoszx]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594860222\",\"TEST-OFI-QUIMICA-1742594860222\",437,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:07:40.240Z"}
{"level":"debug","message":"Executing query [m8jbzjkl6irc9gh2umf]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-21T22:07:40.245Z"}
{"level":"debug","message":"Executing query [m8jbzjknzwrsvruwu5]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594860222\"]","timestamp":"2025-03-21T22:07:40.247Z"}
{"level":"debug","message":"Executing query [m8jbzjkpmlxz1xd0y7]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",11]","timestamp":"2025-03-21T22:07:40.249Z"}
{"level":"debug","message":"Executing query [m8jbzjksq0gjmox6td9]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-21T22:07:40.252Z"}
{"level":"debug","message":"Executing query [m8jbzjkudcrazrqynza]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-21T22:07:40.254Z"}
{"level":"debug","message":"Executing query [m8jbzjkx2mquomf4pb7]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-21T22:07:40.257Z"}
{"level":"debug","message":"Executing query [m8jbzjl0g1zfpdj4dj4]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-21T22:07:40.260Z"}
{"level":"debug","message":"Executing query [m8jbzjl2eli5r0m80f6]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-21T22:07:40.262Z"}
{"level":"debug","message":"Executing query [m8jbzjl4qr5z7ysn0sa]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:40.264Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:40.266Z"}
{"level":"debug","message":"Executing query [m8jbzjo40d5gdp4dsst8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:07:40.372Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:40.383Z"}
{"level":"debug","message":"Executing query [m8jbzjoh363bg881njn]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:40.385Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:07:40.386Z"}
{"level":"debug","message":"Executing query [m8jbzjoicu6snmrr2wr]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:07:40.386Z"}
{"level":"debug","message":"Executing query [m8jbzjoj052rhb4qeyaf]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:07:40.387Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:07:40.388Z"}
{"level":"debug","message":"Executing query [m8jbzjolvvmi9e2qik]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:07:40.389Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:07:40.391Z"}
{"level":"debug","message":"Executing query [m8jbzjos8j7e0wd4k44]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:07:40.396Z"}
{"level":"debug","message":"Executing query [m8jbzjowoie5b1e93v]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:07:40.400Z"}
{"level":"debug","message":"Executing query [m8jbzjoyft3v2289t4w]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:07:40.402Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:07:40.528Z"}
{"level":"debug","message":"Executing query [m8jbzjskym2v5eipp9a]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:07:40.532Z"}
{"level":"debug","message":"Executing query [m8jbzjslxaunuo9gvwb]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:07:40.534Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jbzjslxaunuo9gvwb]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:07:40.535Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:07:40.538Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:07:40.623Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:07:40.624Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:07:40.624Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:07:40.625Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:07:40.626Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:07:40.626Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:09:00.083Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:00.175Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:09:00.192Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:00.233Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:02.014Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:02.026Z"}
{"level":"debug","message":"Executing query [m8jc1as16s90fqzwpad]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:02.161Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:02.177Z"}
{"level":"debug","message":"Executing query [m8jc1askm5ailiyolae]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:02.180Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:09:02.183Z"}
{"level":"debug","message":"Executing query [m8jc1aso6rewj0d49bo]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:02.184Z"}
{"level":"debug","message":"Executing query [m8jc1asqodw91mqgf6o]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:02.186Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:09:02.187Z"}
{"level":"debug","message":"Executing query [m8jc1asv3f3qncgjjzy]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742594942160\"]","timestamp":"2025-03-21T22:09:02.191Z"}
{"level":"debug","message":"Executing query [m8jc1aszjo7ro21pub]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:09:02.195Z"}
{"level":"debug","message":"Executing query [m8jc1at3az8wpu0yx2r]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:09:02.199Z"}
{"level":"debug","message":"Executing query [m8jc1at5omdyqphguj]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:09:02.201Z"}
{"level":"debug","message":"Executing query [m8jc1at7why2jr2o4ir]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:02.203Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:02.205Z"}
{"level":"debug","message":"Executing query [m8jc1awnmabgw4vw2zl]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:02.327Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:02.341Z"}
{"level":"debug","message":"Executing query [m8jc1ax2n9y15xbre5]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:02.342Z"}
{"level":"debug","message":"Executing query [m8jc1ax4sr134ju9r4o]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:02.344Z"}
{"level":"debug","message":"Executing query [m8jc1ax5xvdmbi742u]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:02.345Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:09:02.346Z"}
{"level":"debug","message":"Executing query [m8jc1axabtrg8bcouc]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:09:02.350Z"}
{"level":"debug","message":"Executing query [m8jc1axew3urlgebejd]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:02.354Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:02.355Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:03.068Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:09:03.070Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:09:03.795Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:03.807Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:09:03.810Z"}
{"level":"debug","message":"Executing query [m8jc1c63cnmlp2hsbj]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:03.963Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:03.973Z"}
{"level":"debug","message":"Executing query [m8jc1c6g1zv35flwas]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:03.976Z"}
{"level":"debug","message":"Executing query [m8jc1c6hdjmvfj2pzcd]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594943962\"]","timestamp":"2025-03-21T22:09:03.977Z"}
{"level":"debug","message":"Executing query [m8jc1c6i3f3zuhxs9pl]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742594943962\",\"TEST-OFI-FORENSE-1742594943962\",8269,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742594943962\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:09:03.978Z"}
{"level":"debug","message":"Executing query [m8jc1c6onjhy6qri6ki]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-21T22:09:03.984Z"}
{"level":"debug","message":"Executing query [m8jc1c6re6b1aunei3]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742594943962\"]","timestamp":"2025-03-21T22:09:03.987Z"}
{"level":"debug","message":"Executing query [m8jc1c6ucju8zlfuazg]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",23]","timestamp":"2025-03-21T22:09:03.990Z"}
{"level":"debug","message":"Executing query [m8jc1c6y9269ociz9w]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-21T22:09:03.994Z"}
{"level":"debug","message":"Executing query [m8jc1c71jdwi22oh16]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-21T22:09:03.997Z"}
{"level":"debug","message":"Executing query [m8jc1c75xotv99jyemi]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.001Z"}
{"level":"debug","message":"Executing query [m8jc1c77i1btbk7vxk8]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.003Z"}
{"level":"debug","message":"Executing query [m8jc1c7an1q8sq7423m]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.006Z"}
{"level":"debug","message":"Executing query [m8jc1c7ccs1neoo77mw]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742594944008\",\"TEST-SP-OFI-FORENSE-1742594944008\",2638,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:09:04.008Z"}
{"level":"debug","message":"Executing query [m8jc1c7gviklmq2jabm]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594944008\"]","timestamp":"2025-03-21T22:09:04.012Z"}
{"level":"debug","message":"Executing query [m8jc1c7h4edznf0cwi]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742594944008\"]","timestamp":"2025-03-21T22:09:04.013Z"}
{"level":"debug","message":"Executing query [m8jc1c7lrhij8ym43x9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:04.017Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:04.018Z"}
{"level":"debug","message":"Executing query [m8jc1caphnwqiid68q]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:04.129Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:04.143Z"}
{"level":"debug","message":"Executing query [m8jc1cb4bah2j0d2m7n]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:04.144Z"}
{"level":"debug","message":"Executing query [m8jc1cb61eifgo105em]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594944128\"]","timestamp":"2025-03-21T22:09:04.146Z"}
{"level":"debug","message":"Executing query [m8jc1cb60anf1fi8ziq6]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742594944128\",\"TEST-OFICIO-1742594944128\",9389,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:09:04.146Z"}
{"level":"debug","message":"Executing query [m8jc1cbbzl4n1zt6aco]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.151Z"}
{"level":"debug","message":"Executing query [m8jc1cbe4je1ltz5ifv]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742594944128\"]","timestamp":"2025-03-21T22:09:04.154Z"}
{"level":"debug","message":"Executing query [m8jc1cbh6r8yjrprsqw]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",23]","timestamp":"2025-03-21T22:09:04.157Z"}
{"level":"debug","message":"Executing query [m8jc1cbkz42mbarn3x]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.160Z"}
{"level":"debug","message":"Executing query [m8jc1cbms7a49kv8hlp]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.163Z"}
{"level":"debug","message":"Executing query [m8jc1cbposayeof8cba]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.165Z"}
{"level":"debug","message":"Executing query [m8jc1cbri09v70ns7jr]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.167Z"}
{"level":"debug","message":"Executing query [m8jc1cbu8eq0pguu18]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-21T22:09:04.170Z"}
{"level":"debug","message":"Executing query [m8jc1cbvebuf9ruus6]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742594944171\",\"TEST-SP-OFICIO-1742594944171\",3936,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:09:04.171Z"}
{"level":"debug","message":"Executing query [m8jc1cbzfkjn1w4fe2b]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594944171\"]","timestamp":"2025-03-21T22:09:04.175Z"}
{"level":"debug","message":"Executing query [m8jc1cc19q8geqsg00d]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742594944171\"]","timestamp":"2025-03-21T22:09:04.177Z"}
{"level":"debug","message":"Executing query [m8jc1cc4i38qvgt1krf]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:04.180Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:04.181Z"}
{"level":"debug","message":"Executing query [m8jc1cfaj9b754bs1h]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:04.295Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:04.305Z"}
{"level":"debug","message":"Executing query [m8jc1cfm528ipyjjd0s]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:09:04.306Z"}
{"level":"debug","message":"Executing query [m8jc1cfny7oonpylf1a]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:09:04.307Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:09:04.309Z"}
{"level":"debug","message":"Executing query [m8jc1cfq1iknjj8l397]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:09:04.310Z"}
{"level":"debug","message":"Executing query [m8jc1cfrh8z172pmtws]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:09:04.311Z"}
{"level":"debug","message":"Executing query [m8jc1cfsr54gttxn44m]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:09:04.312Z"}
{"level":"debug","message":"Executing query [m8jc1cfs15r3dd5m8nj]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:09:04.312Z"}
{"level":"debug","message":"Executing query [m8jc1cfy95v930qy138]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[13]","timestamp":"2025-03-21T22:09:04.318Z"}
{"level":"debug","message":"Executing query [m8jc1cg0sov7h3ckqi]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:09:04.320Z"}
{"level":"debug","message":"Executing query [m8jc1cg3iqluhy6c69]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",13]","timestamp":"2025-03-21T22:09:04.323Z"}
{"level":"debug","message":"Executing query [m8jc1cg6d9mte01orz]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[13]","timestamp":"2025-03-21T22:09:04.326Z"}
{"level":"debug","message":"Executing query [m8jc1cg77r80by9chqc]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[13]","timestamp":"2025-03-21T22:09:04.327Z"}
{"level":"debug","message":"Executing query [m8jc1cgbpgqqsuixu8]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[13]","timestamp":"2025-03-21T22:09:04.331Z"}
{"level":"debug","message":"Executing query [m8jc1cgcsygonsg5nys]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:04.332Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:04.333Z"}
{"level":"debug","message":"Executing query [m8jc1cjaoi9jdjn5h0h]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:04.439Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:04.454Z"}
{"level":"debug","message":"Executing query [m8jc1cjrvf2s0j35s58]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:04.455Z"}
{"level":"debug","message":"Executing query [m8jc1cjtxpktg1n1a6]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594944438\"]","timestamp":"2025-03-21T22:09:04.457Z"}
{"level":"debug","message":"Executing query [m8jc1cjuk3ofyy08v4g]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742594944438\",\"TEST-OFI-QUIMICA-1742594944438\",1184,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:09:04.458Z"}
{"level":"debug","message":"Executing query [m8jc1cjzd3qazm6tda5]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.463Z"}
{"level":"debug","message":"Executing query [m8jc1ck1rqn2k4yj2n]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742594944438\"]","timestamp":"2025-03-21T22:09:04.465Z"}
{"level":"debug","message":"Executing query [m8jc1ck302azhkwbnrxl]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",12]","timestamp":"2025-03-21T22:09:04.467Z"}
{"level":"debug","message":"Executing query [m8jc1ck72s7286vzzuc]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.471Z"}
{"level":"debug","message":"Executing query [m8jc1ck9jkyr6r04q5s]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.473Z"}
{"level":"debug","message":"Executing query [m8jc1ckb9n3xcn2ndht]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.475Z"}
{"level":"debug","message":"Executing query [m8jc1ckdsudzn710fu9]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.477Z"}
{"level":"debug","message":"Executing query [m8jc1ckg2x6o2pdtlaj]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.480Z"}
{"level":"debug","message":"Executing query [m8jc1ckjqu6l6e6pfbq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:04.483Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:04.484Z"}
{"level":"debug","message":"Executing query [m8jc1cnld1s25s1xlas]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:04.593Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:04.603Z"}
{"level":"debug","message":"Executing query [m8jc1cnxra87ehwh4if]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594944592\"]","timestamp":"2025-03-21T22:09:04.605Z"}
{"level":"debug","message":"Executing query [m8jc1cnyoirzthnc6v]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742594944592\",true]","timestamp":"2025-03-21T22:09:04.606Z"}
{"level":"debug","message":"Executing query [m8jc1co39po65nilmlc]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.611Z"}
{"level":"debug","message":"Executing query [m8jc1co6xnjhjpnuhn]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742594944592\"]","timestamp":"2025-03-21T22:09:04.614Z"}
{"level":"debug","message":"Executing query [m8jc1co86gbjhu9ipkn]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",12]","timestamp":"2025-03-21T22:09:04.616Z"}
{"level":"debug","message":"Executing query [m8jc1cobtj2wy85s40d]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.619Z"}
{"level":"debug","message":"Executing query [m8jc1codcmjmr1sigxi]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.621Z"}
{"level":"debug","message":"Executing query [m8jc1coghwm88ym3wes]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.624Z"}
{"level":"debug","message":"Executing query [m8jc1coh0vg0l7w92o6r]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.625Z"}
{"level":"debug","message":"Executing query [m8jc1coj4qapzy382tb]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.627Z"}
{"level":"debug","message":"Executing query [m8jc1conc77saxabp9c]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-21T22:09:04.631Z"}
{"level":"debug","message":"Executing query [m8jc1cool92wprbmr6]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:09:04.632Z"}
{"level":"debug","message":"Executing query [m8jc1core5d4ok3kgon]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:04.635Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:04.636Z"}
{"level":"debug","message":"Executing query [m8jc1crrxahqhsfvcl]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:04.743Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:04.757Z"}
{"level":"debug","message":"Executing query [m8jc1cs7ffff3brguqb]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594944742\"]","timestamp":"2025-03-21T22:09:04.759Z"}
{"level":"debug","message":"Executing query [m8jc1cs93lhzt9gfql4]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594944742\"]","timestamp":"2025-03-21T22:09:04.761Z"}
{"level":"debug","message":"Executing query [m8jc1csaykjuapac2x]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742594944742\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:09:04.762Z"}
{"level":"debug","message":"Executing query [m8jc1csgjtxjg7g53j9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1010]","timestamp":"2025-03-21T22:09:04.768Z"}
{"level":"debug","message":"Executing query [m8jc1csizty21zyak1l]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742594944742\"]","timestamp":"2025-03-21T22:09:04.770Z"}
{"level":"debug","message":"Executing query [m8jc1csk0bqpga057i8q]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1010]","timestamp":"2025-03-21T22:09:04.772Z"}
{"level":"debug","message":"Executing query [m8jc1csn28yujk85x45]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1010]","timestamp":"2025-03-21T22:09:04.775Z"}
{"level":"debug","message":"Executing query [m8jc1csplhwkjzo0o6]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1010]","timestamp":"2025-03-21T22:09:04.777Z"}
{"level":"debug","message":"Executing query [m8jc1cssxfwzp0k2zf]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1010]","timestamp":"2025-03-21T22:09:04.780Z"}
{"level":"debug","message":"Executing query [m8jc1csuk72idgzt3af]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1010]","timestamp":"2025-03-21T22:09:04.782Z"}
{"level":"debug","message":"Executing query [m8jc1csvnyl3f7yz5hf]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1010]","timestamp":"2025-03-21T22:09:04.783Z"}
{"level":"debug","message":"Executing query [m8jc1csyarpneuwkksm]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1010]","timestamp":"2025-03-21T22:09:04.786Z"}
{"level":"debug","message":"Executing query [m8jc1ct0q4wdevvxbf]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:09:04.788Z"}
{"level":"debug","message":"Executing query [m8jc1ct2j3xtgxbki6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:04.790Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:04.791Z"}
{"level":"debug","message":"Executing query [m8jc1cw53340myvqa4e]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:09:04.902Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:04.913Z"}
{"level":"debug","message":"Executing query [m8jc1cwivp68pa7eghp]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:04.914Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:09:04.916Z"}
{"level":"debug","message":"Executing query [m8jc1cwkvu4hc9ihri]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:09:04.916Z"}
{"level":"debug","message":"Executing query [m8jc1cwljpqv61yvs4]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:09:04.917Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:09:04.917Z"}
{"level":"debug","message":"Executing query [m8jc1cwmfvn40c3izcw]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:09:04.918Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:09:04.920Z"}
{"level":"debug","message":"Executing query [m8jc1cwro65cdzxmi6e]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:09:04.923Z"}
{"level":"debug","message":"Executing query [m8jc1cwugvtde09sdvg]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:09:04.926Z"}
{"level":"debug","message":"Executing query [m8jc1cwwo5sfhnaox9i]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:09:04.928Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:05.050Z"}
{"level":"debug","message":"Executing query [m8jc1d0dz76wc0p1td]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:09:05.053Z"}
{"level":"debug","message":"Executing query [m8jc1d0fmn4x3i1mtcd]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:09:05.055Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jc1d0fmn4x3i1mtcd]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:09:05.056Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:05.058Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:09:05.139Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:09:05.140Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:09:05.142Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:09:05.142Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:09:05.143Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:09:05.143Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:09:55.917Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:09:56.037Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:09:56.054Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:09:56.096Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:15.058Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:15.073Z"}
{"level":"debug","message":"Executing query [m8jc2v564dxlc83r8cs]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:15.210Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:15.223Z"}
{"level":"debug","message":"Executing query [m8jc2v5lko047old5g]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:15.225Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:10:15.228Z"}
{"level":"debug","message":"Executing query [m8jc2v5oeotrkwitjqo]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:15.229Z"}
{"level":"debug","message":"Executing query [m8jc2v5qufbevsoj0x]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:15.230Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:10:15.232Z"}
{"level":"debug","message":"Executing query [m8jc2v5w8ogfmxrpur5]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742595015209\"]","timestamp":"2025-03-21T22:10:15.236Z"}
{"level":"debug","message":"Executing query [m8jc2v608rlfaanxhzu]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:10:15.240Z"}
{"level":"debug","message":"Executing query [m8jc2v64tlvhs6wbe3i]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:10:15.244Z"}
{"level":"debug","message":"Executing query [m8jc2v67lnby9h60q3]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:10:15.247Z"}
{"level":"debug","message":"Executing query [m8jc2v69lfhra10e6q9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:15.249Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:15.250Z"}
{"level":"debug","message":"Executing query [m8jc2v9ibeaygzc7mtl]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:15.366Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:15.379Z"}
{"level":"debug","message":"Executing query [m8jc2v9wxlhmritsm1]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:15.380Z"}
{"level":"debug","message":"Executing query [m8jc2v9y2dexsgblly]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:15.382Z"}
{"level":"debug","message":"Executing query [m8jc2v9zf3e4eplk5j4]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:15.383Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:10:15.384Z"}
{"level":"debug","message":"Executing query [m8jc2va9sx7di1awhak]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:10:15.393Z"}
{"level":"debug","message":"Executing query [m8jc2vad7ws4lhnxmi6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:15.397Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:15.398Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:10:15.611Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:15.653Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:10:15.668Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:15.698Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:10:16.324Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:16.332Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:10:16.334Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:16.995Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:10:16.997Z"}
{"level":"debug","message":"Executing query [m8jc2wmhhjxszhw9xc]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:17.129Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:17.138Z"}
{"level":"debug","message":"Executing query [m8jc2wmrngixbagczv]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:17.139Z"}
{"level":"debug","message":"Executing query [m8jc2wmtqw4lthowxho]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595017128\"]","timestamp":"2025-03-21T22:10:17.141Z"}
{"level":"debug","message":"Executing query [m8jc2wmvgmwtxmadewt]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742595017128\",\"TEST-OFI-FORENSE-1742595017128\",8805,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742595017128\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:17.143Z"}
{"level":"debug","message":"Executing query [m8jc2wn1tcjl783f31o]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.149Z"}
{"level":"debug","message":"Executing query [m8jc2wn53q81y1var2f]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595017128\"]","timestamp":"2025-03-21T22:10:17.153Z"}
{"level":"debug","message":"Executing query [m8jc2wnbvpttvl741fn]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",25]","timestamp":"2025-03-21T22:10:17.159Z"}
{"level":"debug","message":"Executing query [m8jc2wnfo61k12xwu3t]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.163Z"}
{"level":"debug","message":"Executing query [m8jc2wnhhtkbfmqunww]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.165Z"}
{"level":"debug","message":"Executing query [m8jc2wnjnk4g0km6ro]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.167Z"}
{"level":"debug","message":"Executing query [m8jc2wnm17xsznw7urm]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.170Z"}
{"level":"debug","message":"Executing query [m8jc2wno20aym5tkspa]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.172Z"}
{"level":"debug","message":"Executing query [m8jc2wnqc4tuqntobia]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742595017174\",\"TEST-SP-OFI-FORENSE-1742595017174\",2930,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:10:17.174Z"}
{"level":"debug","message":"Executing query [m8jc2wnu7gpdlsapmvw]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595017174\"]","timestamp":"2025-03-21T22:10:17.178Z"}
{"level":"debug","message":"Executing query [m8jc2wnvdfw865fdkxs]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595017174\"]","timestamp":"2025-03-21T22:10:17.179Z"}
{"level":"debug","message":"Executing query [m8jc2wnykutoi0mpp6e]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:17.182Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:17.184Z"}
{"level":"debug","message":"Executing query [m8jc2wqqcei2dhkv2x7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:17.282Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:17.291Z"}
{"level":"debug","message":"Executing query [m8jc2wr1qn9boiyc43m]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:17.293Z"}
{"level":"debug","message":"Executing query [m8jc2wr3j5fkncol8vi]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595017282\"]","timestamp":"2025-03-21T22:10:17.295Z"}
{"level":"debug","message":"Executing query [m8jc2wr52ko7oxrrr58]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742595017282\",\"TEST-OFICIO-1742595017282\",3899,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:17.297Z"}
{"level":"debug","message":"Executing query [m8jc2wr9uoqww30enl]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.301Z"}
{"level":"debug","message":"Executing query [m8jc2wrbl3iyw914nng]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595017282\"]","timestamp":"2025-03-21T22:10:17.303Z"}
{"level":"debug","message":"Executing query [m8jc2wrdru57653wh4k]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",25]","timestamp":"2025-03-21T22:10:17.305Z"}
{"level":"debug","message":"Executing query [m8jc2wrgcel16zj1c1l]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.308Z"}
{"level":"debug","message":"Executing query [m8jc2wriz1eap5pyw1e]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.310Z"}
{"level":"debug","message":"Executing query [m8jc2wrlpq1787gadv]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.313Z"}
{"level":"debug","message":"Executing query [m8jc2wrn1wgdwxe0qst]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.315Z"}
{"level":"debug","message":"Executing query [m8jc2wrq1wtd4s3q9ea]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-21T22:10:17.318Z"}
{"level":"debug","message":"Executing query [m8jc2wrr2c7pfpc9qi8]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742595017319\",\"TEST-SP-OFICIO-1742595017319\",6796,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:10:17.319Z"}
{"level":"debug","message":"Executing query [m8jc2wruhivmxakwdup]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595017319\"]","timestamp":"2025-03-21T22:10:17.322Z"}
{"level":"debug","message":"Executing query [m8jc2wrw5fgtdm258dl]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595017319\"]","timestamp":"2025-03-21T22:10:17.324Z"}
{"level":"debug","message":"Executing query [m8jc2wrzwfmnpcy4vhj]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:17.327Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:17.328Z"}
{"level":"debug","message":"Executing query [m8jc2wuvr2uwwtijtw]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:17.431Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:17.445Z"}
{"level":"debug","message":"Executing query [m8jc2wvbhzvt0uu9m6d]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595017430\"]","timestamp":"2025-03-21T22:10:17.447Z"}
{"level":"debug","message":"Executing query [m8jc2wvd1ssdfy64j8e]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595017430\"]","timestamp":"2025-03-21T22:10:17.449Z"}
{"level":"debug","message":"Executing query [m8jc2wvfsmejpqzhzwk]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742595017430\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:17.451Z"}
{"level":"debug","message":"Executing query [m8jc2wvi73n22gtsjoe]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1011]","timestamp":"2025-03-21T22:10:17.455Z"}
{"level":"debug","message":"Executing query [m8jc2wvlf5jhci0gvyg]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595017430\"]","timestamp":"2025-03-21T22:10:17.457Z"}
{"level":"debug","message":"Executing query [m8jc2wvnhm09dhv6u7r]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1011]","timestamp":"2025-03-21T22:10:17.459Z"}
{"level":"debug","message":"Executing query [m8jc2wvqma6bgwciwk8]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1011]","timestamp":"2025-03-21T22:10:17.463Z"}
{"level":"debug","message":"Executing query [m8jc2wvs0shnmiwpkqze]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1011]","timestamp":"2025-03-21T22:10:17.464Z"}
{"level":"debug","message":"Executing query [m8jc2wvvrygz26ocfle]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1011]","timestamp":"2025-03-21T22:10:17.467Z"}
{"level":"debug","message":"Executing query [m8jc2wvxnnb39jfoxzb]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1011]","timestamp":"2025-03-21T22:10:17.469Z"}
{"level":"debug","message":"Executing query [m8jc2wvz9z3n510yz1]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1011]","timestamp":"2025-03-21T22:10:17.471Z"}
{"level":"debug","message":"Executing query [m8jc2ww2tfwejacvuio]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1011]","timestamp":"2025-03-21T22:10:17.474Z"}
{"level":"debug","message":"Executing query [m8jc2ww3jxsp1mfyp6c]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:10:17.475Z"}
{"level":"debug","message":"Executing query [m8jc2ww6v6t8y4ikozg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:17.478Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:17.479Z"}
{"level":"debug","message":"Executing query [m8jc2wywkx9d1f2ei7h]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:17.576Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:17.587Z"}
{"level":"debug","message":"Executing query [m8jc2wz8zlnefvdzuod]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595017576\"]","timestamp":"2025-03-21T22:10:17.588Z"}
{"level":"debug","message":"Executing query [m8jc2wza0o3zq8lg5bac]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742595017576\",true]","timestamp":"2025-03-21T22:10:17.590Z"}
{"level":"debug","message":"Executing query [m8jc2wzfvf4h85vpka]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.595Z"}
{"level":"debug","message":"Executing query [m8jc2wzh2jmchcyn2g6]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595017576\"]","timestamp":"2025-03-21T22:10:17.597Z"}
{"level":"debug","message":"Executing query [m8jc2wzk2beuwdp0v7b]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",13]","timestamp":"2025-03-21T22:10:17.600Z"}
{"level":"debug","message":"Executing query [m8jc2wzn2ubcrw4x0ro]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.603Z"}
{"level":"debug","message":"Executing query [m8jc2wzpmjlxvpk87j]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.605Z"}
{"level":"debug","message":"Executing query [m8jc2wzs0n13lp08xa8a]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.608Z"}
{"level":"debug","message":"Executing query [m8jc2wzuifpwt4l7gqj]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.610Z"}
{"level":"debug","message":"Executing query [m8jc2wzwz9hky0w6ylj]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.612Z"}
{"level":"debug","message":"Executing query [m8jc2wzzget10bi2zww]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.615Z"}
{"level":"debug","message":"Executing query [m8jc2x01jhrnsqz95g8]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:10:17.617Z"}
{"level":"debug","message":"Executing query [m8jc2x0231zz68iz0dg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:17.618Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:17.619Z"}
{"level":"debug","message":"Executing query [m8jc2x2tamy34ks3gp9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:17.717Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:17.728Z"}
{"level":"debug","message":"Executing query [m8jc2x3529y74cn6tkd]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:17.729Z"}
{"level":"debug","message":"Executing query [m8jc2x37f57xegbwzog]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595017716\"]","timestamp":"2025-03-21T22:10:17.731Z"}
{"level":"debug","message":"Executing query [m8jc2x393qenqqhgant]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742595017716\",\"TEST-OFI-QUIMICA-1742595017716\",9483,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:17.733Z"}
{"level":"debug","message":"Executing query [m8jc2x3dnla8e2k7y4]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.737Z"}
{"level":"debug","message":"Executing query [m8jc2x3fxezwbgkcgtf]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595017716\"]","timestamp":"2025-03-21T22:10:17.739Z"}
{"level":"debug","message":"Executing query [m8jc2x3gct5ub2ppndi]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",13]","timestamp":"2025-03-21T22:10:17.740Z"}
{"level":"debug","message":"Executing query [m8jc2x3kx05ifg1krbg]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.744Z"}
{"level":"debug","message":"Executing query [m8jc2x3m02txvlbmrtgq]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.746Z"}
{"level":"debug","message":"Executing query [m8jc2x3q6t8znq4pnsl]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.750Z"}
{"level":"debug","message":"Executing query [m8jc2x3tv5dv599tjck]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.753Z"}
{"level":"debug","message":"Executing query [m8jc2x3xv5q5hwea6sh]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-21T22:10:17.757Z"}
{"level":"debug","message":"Executing query [m8jc2x400kg4hqa3dpvo]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:17.760Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:17.761Z"}
{"level":"debug","message":"Executing query [m8jc2x6raji6f33iexk]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:17.859Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:17.869Z"}
{"level":"debug","message":"Executing query [m8jc2x72gjddq09o6io]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:10:17.870Z"}
{"level":"debug","message":"Executing query [m8jc2x74bu965hpdyli]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:10:17.872Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:10:17.873Z"}
{"level":"debug","message":"Executing query [m8jc2x759qvid2p27qb]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:17.873Z"}
{"level":"debug","message":"Executing query [m8jc2x76i8a47u9pa5]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:17.874Z"}
{"level":"debug","message":"Executing query [m8jc2x787u2dako8df9]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:17.876Z"}
{"level":"debug","message":"Executing query [m8jc2x796gzbvh3lpvk]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:10:17.877Z"}
{"level":"debug","message":"Executing query [m8jc2x7evezpyin69wi]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[14]","timestamp":"2025-03-21T22:10:17.882Z"}
{"level":"debug","message":"Executing query [m8jc2x7haw0z6mmpwwo]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:17.885Z"}
{"level":"debug","message":"Executing query [m8jc2x7ijdrt6bnnxb9]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",14]","timestamp":"2025-03-21T22:10:17.886Z"}
{"level":"debug","message":"Executing query [m8jc2x7lclxjg3znujk]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[14]","timestamp":"2025-03-21T22:10:17.889Z"}
{"level":"debug","message":"Executing query [m8jc2x7osu2ied5qlj]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[14]","timestamp":"2025-03-21T22:10:17.892Z"}
{"level":"debug","message":"Executing query [m8jc2x7qjsdpixrledg]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[14]","timestamp":"2025-03-21T22:10:17.894Z"}
{"level":"debug","message":"Executing query [m8jc2x7s5shamfzthpq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:17.896Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:17.898Z"}
{"level":"debug","message":"Executing query [m8jc2xafeylkxt4dr07]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:17.991Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:18.003Z"}
{"level":"debug","message":"Executing query [m8jc2xask4l13exsbd]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:18.004Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:10:18.006Z"}
{"level":"debug","message":"Executing query [m8jc2xau78rjj9ztopb]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:10:18.006Z"}
{"level":"debug","message":"Executing query [m8jc2xavl7yuch4vn7d]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:10:18.007Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:10:18.008Z"}
{"level":"debug","message":"Executing query [m8jc2xax4z8pi9zprsq]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:18.009Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:10:18.010Z"}
{"level":"debug","message":"Executing query [m8jc2xb2w2k7bgv16e]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:10:18.014Z"}
{"level":"debug","message":"Executing query [m8jc2xb4ybbrcohn4sg]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:10:18.016Z"}
{"level":"debug","message":"Executing query [m8jc2xb521swi4pltlv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:18.017Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:18.122Z"}
{"level":"debug","message":"Executing query [m8jc2xe5jylkdn8y6m]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:10:18.126Z"}
{"level":"debug","message":"Executing query [m8jc2xe7zlib2o803a]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:10:18.127Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jc2xe7zlib2o803a]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:10:18.129Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:18.130Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:10:18.206Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:10:18.207Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:10:18.207Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:10:18.208Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:10:18.208Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:10:18.208Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:47.932Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:47.949Z"}
{"level":"debug","message":"Executing query [m8jc3kjgvnuofzk9sq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:48.125Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:48.140Z"}
{"level":"debug","message":"Executing query [m8jc3kjyf86rm6kxgkj]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:48.142Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:10:48.144Z"}
{"level":"debug","message":"Executing query [m8jc3kk153zl2n4aeu]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:48.145Z"}
{"level":"debug","message":"Executing query [m8jc3kk3igrwogti3e]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:48.147Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Documento debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:10:48.149Z"}
{"level":"debug","message":"Executing query [m8jc3kk9lktijqsqks]: SELECT * FROM Documento WHERE NroRegistro = ?","params":"[\"TEST-REG-1742595048124\"]","timestamp":"2025-03-21T22:10:48.153Z"}
{"level":"debug","message":"Executing query [m8jc3kket1rrsss627d]: UPDATE Documento SET Estado = ?, Observaciones = ?, IDUsuarioAsignado = ? WHERE IDDocumento = ?","params":"[\"EN_PROCESO\",\"Documento actualizado en pruebas\",1,null]","timestamp":"2025-03-21T22:10:48.158Z"}
{"level":"debug","message":"Executing query [m8jc3kkitr550u60188]: SELECT * FROM Documento WHERE Estado = ? LIMIT 10","params":"[\"REGISTRADO\"]","timestamp":"2025-03-21T22:10:48.163Z"}
{"level":"debug","message":"Executing query [m8jc3kklxl0n1nrtnf]: SELECT * FROM Documento WHERE IDAreaActual = ? LIMIT 10","params":"[1]","timestamp":"2025-03-21T22:10:48.165Z"}
{"level":"debug","message":"Executing query [m8jc3kkmfvqrlecsgm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:48.166Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:48.168Z"}
{"level":"debug","message":"Executing query [m8jc3ko2qqnmek2fvtm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:48.291Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:48.304Z"}
{"level":"debug","message":"Executing query [m8jc3koitjfgi5gqg5]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:48.306Z"}
{"level":"debug","message":"Executing query [m8jc3kojsqfrsjnlqu]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:48.307Z"}
{"level":"debug","message":"Executing query [m8jc3kolkhe5kx0jkwq]: SELECT IDUsuario FROM Usuario LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:48.309Z"}
{"level":"warn","message":"No se encontraron datos necesarios para crear el documento. Se requiere al menos una Mesa de Partes, un Área y un Usuario.","timestamp":"2025-03-21T22:10:48.310Z"}
{"level":"debug","message":"Executing query [m8jc3kov6wqdv52gxx4]: SELECT * FROM DocumentoArchivo WHERE IDDocumento = ?","params":"[null]","timestamp":"2025-03-21T22:10:48.319Z"}
{"level":"debug","message":"Executing query [m8jc3kp0292ln611s6l]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:48.324Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:48.325Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:49.031Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:10:49.033Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:10:49.745Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:49.754Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:10:49.756Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:10:49.999Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:50.053Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:10:50.079Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:50.114Z"}
{"level":"debug","message":"Executing query [m8jc3m5zh883s4g7m7q]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:50.231Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:50.241Z"}
{"level":"debug","message":"Executing query [m8jc3m6ae0hhqnio81j]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:50.242Z"}
{"level":"debug","message":"Executing query [m8jc3m6d9hzlrkl02o]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595050230\"]","timestamp":"2025-03-21T22:10:50.245Z"}
{"level":"debug","message":"Executing query [m8jc3m6fdgmjhoy0mtf]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742595050230\",\"TEST-OFI-FORENSE-1742595050230\",5055,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742595050230\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:50.247Z"}
{"level":"debug","message":"Executing query [m8jc3m6lb0tgayu8s3]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.253Z"}
{"level":"debug","message":"Executing query [m8jc3m6n5vxx8unhh0d]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595050230\"]","timestamp":"2025-03-21T22:10:50.255Z"}
{"level":"debug","message":"Executing query [m8jc3m6pfwhimydbqjl]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",27]","timestamp":"2025-03-21T22:10:50.257Z"}
{"level":"debug","message":"Executing query [m8jc3m6t7k2wldbhrei]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.261Z"}
{"level":"debug","message":"Executing query [m8jc3m6wtaygdkjfnyn]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.264Z"}
{"level":"debug","message":"Executing query [m8jc3m6zkp9mvdu2dt]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.267Z"}
{"level":"debug","message":"Executing query [m8jc3m71zg1tsepqvui]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.269Z"}
{"level":"debug","message":"Executing query [m8jc3m74au6oddyczh]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.272Z"}
{"level":"debug","message":"Executing query [m8jc3m765jrhwigj3yl]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742595050274\",\"TEST-SP-OFI-FORENSE-1742595050274\",9104,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:10:50.274Z"}
{"level":"debug","message":"Executing query [m8jc3m7981huk2g2qxg]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595050274\"]","timestamp":"2025-03-21T22:10:50.277Z"}
{"level":"debug","message":"Executing query [m8jc3m7avg7fxhnyiq]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595050274\"]","timestamp":"2025-03-21T22:10:50.278Z"}
{"level":"debug","message":"Executing query [m8jc3m7e32br22aeqtu]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:50.282Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:50.283Z"}
{"level":"debug","message":"Executing query [m8jc3madvx3javy9xae]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:50.389Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:50.402Z"}
{"level":"debug","message":"Executing query [m8jc3mas31t6t1e9qew]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595050388\"]","timestamp":"2025-03-21T22:10:50.404Z"}
{"level":"debug","message":"Executing query [m8jc3mautxcaep1lcs]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595050388\"]","timestamp":"2025-03-21T22:10:50.406Z"}
{"level":"debug","message":"Executing query [m8jc3mavdb2rekrvsig]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742595050388\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:50.407Z"}
{"level":"debug","message":"Executing query [m8jc3mb0vvpnq576um]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1012]","timestamp":"2025-03-21T22:10:50.412Z"}
{"level":"debug","message":"Executing query [m8jc3mb2spufadr6yjt]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595050388\"]","timestamp":"2025-03-21T22:10:50.415Z"}
{"level":"debug","message":"Executing query [m8jc3mb55bl01v0p7gb]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1012]","timestamp":"2025-03-21T22:10:50.417Z"}
{"level":"debug","message":"Executing query [m8jc3mb9nevr4kcqrl9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1012]","timestamp":"2025-03-21T22:10:50.421Z"}
{"level":"debug","message":"Executing query [m8jc3mba53cnjh6xwz]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1012]","timestamp":"2025-03-21T22:10:50.422Z"}
{"level":"debug","message":"Executing query [m8jc3mbd6mdue01t1t]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1012]","timestamp":"2025-03-21T22:10:50.425Z"}
{"level":"debug","message":"Executing query [m8jc3mbffehplhiy15b]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1012]","timestamp":"2025-03-21T22:10:50.427Z"}
{"level":"debug","message":"Executing query [m8jc3mbg6rxx9m4ztnw]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1012]","timestamp":"2025-03-21T22:10:50.428Z"}
{"level":"debug","message":"Executing query [m8jc3mbky3ulx4ts3f]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1012]","timestamp":"2025-03-21T22:10:50.432Z"}
{"level":"debug","message":"Executing query [m8jc3mbl1cnr33o85qf]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:10:50.433Z"}
{"level":"debug","message":"Executing query [m8jc3mbnssi34mj13ko]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:50.435Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:50.436Z"}
{"level":"debug","message":"Executing query [m8jc3menqpbrg8ebgb]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:50.543Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:50.553Z"}
{"level":"debug","message":"Executing query [m8jc3meyr2w46ivyqy8]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:50.554Z"}
{"level":"debug","message":"Executing query [m8jc3mf15cetboziq1n]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595050543\"]","timestamp":"2025-03-21T22:10:50.557Z"}
{"level":"debug","message":"Executing query [m8jc3mf3ay5fh3yhbt]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742595050543\",\"TEST-OFICIO-1742595050543\",7254,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:50.559Z"}
{"level":"debug","message":"Executing query [m8jc3mf8pco490css4m]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.564Z"}
{"level":"debug","message":"Executing query [m8jc3mfa81qvhbnlj4m]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595050543\"]","timestamp":"2025-03-21T22:10:50.566Z"}
{"level":"debug","message":"Executing query [m8jc3mfdw7ncz1enh1a]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",27]","timestamp":"2025-03-21T22:10:50.569Z"}
{"level":"debug","message":"Executing query [m8jc3mfh2v645v0mmix]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.574Z"}
{"level":"debug","message":"Executing query [m8jc3mfkmz9ias9vvw]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.576Z"}
{"level":"debug","message":"Executing query [m8jc3mfp02a8a5pek1p5]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.581Z"}
{"level":"debug","message":"Executing query [m8jc3mfs7uag5bqankk]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.584Z"}
{"level":"debug","message":"Executing query [m8jc3mfxraajfqmnc6]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-21T22:10:50.589Z"}
{"level":"debug","message":"Executing query [m8jc3mg1j1vbn0np9w]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742595050593\",\"TEST-SP-OFICIO-1742595050593\",1815,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:10:50.593Z"}
{"level":"debug","message":"Executing query [m8jc3mg573ilm87148r]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595050593\"]","timestamp":"2025-03-21T22:10:50.597Z"}
{"level":"debug","message":"Executing query [m8jc3mg7if2b9hl4c2]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595050593\"]","timestamp":"2025-03-21T22:10:50.599Z"}
{"level":"debug","message":"Executing query [m8jc3mgaoxegrbshqw]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:50.602Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:50.604Z"}
{"level":"debug","message":"Executing query [m8jc3mjd5ypvi9oifd5]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:50.713Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:50.727Z"}
{"level":"debug","message":"Executing query [m8jc3mjte9bih7wa4up]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595050712\"]","timestamp":"2025-03-21T22:10:50.729Z"}
{"level":"debug","message":"Executing query [m8jc3mjwt94o43kesqk]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742595050712\",true]","timestamp":"2025-03-21T22:10:50.732Z"}
{"level":"debug","message":"Executing query [m8jc3mk16pk6m7ojl1x]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.737Z"}
{"level":"debug","message":"Executing query [m8jc3mk3d5bh6v7uuv6]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595050712\"]","timestamp":"2025-03-21T22:10:50.739Z"}
{"level":"debug","message":"Executing query [m8jc3mk5vjvz9w2lvip]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",14]","timestamp":"2025-03-21T22:10:50.741Z"}
{"level":"debug","message":"Executing query [m8jc3mk8cx7r75ro9ot]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.744Z"}
{"level":"debug","message":"Executing query [m8jc3mkaozru8cpu8fh]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.746Z"}
{"level":"debug","message":"Executing query [m8jc3mkep0cqcduknwk]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.750Z"}
{"level":"debug","message":"Executing query [m8jc3mkgriuzx7vlz6g]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.752Z"}
{"level":"debug","message":"Executing query [m8jc3mkivvb2rjuqeih]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.754Z"}
{"level":"debug","message":"Executing query [m8jc3mklfqe66bamyyq]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.757Z"}
{"level":"debug","message":"Executing query [m8jc3mkn9zooiqt204k]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:10:50.760Z"}
{"level":"debug","message":"Executing query [m8jc3mkpvo6jzsikcp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:50.761Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:50.762Z"}
{"level":"debug","message":"Executing query [m8jc3mnn9o12s9bw36h]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:50.867Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:50.878Z"}
{"level":"debug","message":"Executing query [m8jc3mnz7m63vgz763]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:50.879Z"}
{"level":"debug","message":"Executing query [m8jc3mo17zkgszhpvgg]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595050866\"]","timestamp":"2025-03-21T22:10:50.881Z"}
{"level":"debug","message":"Executing query [m8jc3mo2e09tlfpc4ii]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742595050866\",\"TEST-OFI-QUIMICA-1742595050866\",8856,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:10:50.882Z"}
{"level":"debug","message":"Executing query [m8jc3mob3he1c73fne3]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.891Z"}
{"level":"debug","message":"Executing query [m8jc3moej9fiebpc1a]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595050866\"]","timestamp":"2025-03-21T22:10:50.894Z"}
{"level":"debug","message":"Executing query [m8jc3moge5ehzzik1oc]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",14]","timestamp":"2025-03-21T22:10:50.896Z"}
{"level":"debug","message":"Executing query [m8jc3moly46mw9dka5]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.901Z"}
{"level":"debug","message":"Executing query [m8jc3monob39l9w0m9]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.903Z"}
{"level":"debug","message":"Executing query [m8jc3mosrmrztcix06p]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.908Z"}
{"level":"debug","message":"Executing query [m8jc3movrhkxmt7ybx]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.911Z"}
{"level":"debug","message":"Executing query [m8jc3mox32gbv8s4lze]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-21T22:10:50.914Z"}
{"level":"debug","message":"Executing query [m8jc3mozwwhhn9a1y7]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:50.915Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:50.917Z"}
{"level":"debug","message":"Executing query [m8jc3ms0s2vp5zmkq1t]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:51.024Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:51.039Z"}
{"level":"debug","message":"Executing query [m8jc3msgr3omfbj15yg]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:10:51.040Z"}
{"level":"debug","message":"Executing query [m8jc3msijytf0v1wm0f]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:10:51.042Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:10:51.044Z"}
{"level":"debug","message":"Executing query [m8jc3mskv45d9l4eftl]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:51.045Z"}
{"level":"debug","message":"Executing query [m8jc3msm2gqg5nfnr86]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:51.046Z"}
{"level":"debug","message":"Executing query [m8jc3msnoh3yf50vw9]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:51.047Z"}
{"level":"debug","message":"Executing query [m8jc3msnsyitz3mp8o]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:10:51.047Z"}
{"level":"debug","message":"Executing query [m8jc3mstvi9si0tdb8h]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[15]","timestamp":"2025-03-21T22:10:51.053Z"}
{"level":"debug","message":"Executing query [m8jc3msv4mgsqlxopv9]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:10:51.055Z"}
{"level":"debug","message":"Executing query [m8jc3msz05x8eqmnaeua]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",15]","timestamp":"2025-03-21T22:10:51.059Z"}
{"level":"debug","message":"Executing query [m8jc3mt2p7jywv8x29f]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[15]","timestamp":"2025-03-21T22:10:51.062Z"}
{"level":"debug","message":"Executing query [m8jc3mt5n9yea5g7jh]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[15]","timestamp":"2025-03-21T22:10:51.065Z"}
{"level":"debug","message":"Executing query [m8jc3mt8swgq1q1p3pj]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[15]","timestamp":"2025-03-21T22:10:51.068Z"}
{"level":"debug","message":"Executing query [m8jc3mtbahbmdc4ehtu]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:51.071Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:51.072Z"}
{"level":"debug","message":"Executing query [m8jc3mw844wdqt9ziop]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:10:51.176Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:51.186Z"}
{"level":"debug","message":"Executing query [m8jc3mwjcxadnv75l4b]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:51.187Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:10:51.190Z"}
{"level":"debug","message":"Executing query [m8jc3mwmzkr7v2pk2y]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:10:51.190Z"}
{"level":"debug","message":"Executing query [m8jc3mwn8d8zo190o4o]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:10:51.191Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:10:51.192Z"}
{"level":"debug","message":"Executing query [m8jc3mwo2y74ebcrqh2]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:10:51.192Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:10:51.193Z"}
{"level":"debug","message":"Executing query [m8jc3mwt8v8v9ijc5bn]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:10:51.197Z"}
{"level":"debug","message":"Executing query [m8jc3mww09uf81v0xdgu]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:10:51.200Z"}
{"level":"debug","message":"Executing query [m8jc3mwxudnglofxkpb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:10:51.201Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:10:51.323Z"}
{"level":"debug","message":"Executing query [m8jc3n0d26w83y2gatgh]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:10:51.325Z"}
{"level":"debug","message":"Executing query [m8jc3n0gvrybuykii09]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:10:51.328Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jc3n0gvrybuykii09]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:10:51.331Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:10:51.332Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:10:51.415Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:10:51.416Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:10:51.417Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:10:51.418Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:10:51.418Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:10:51.418Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:56.168Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:56.183Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-21T22:12:56.303Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-21T22:12:56.423Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:12:57.203Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:57.212Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:12:57.214Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:57.923Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:12:57.926Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:12:58.166Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:58.203Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:12:58.217Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:58.255Z"}
{"level":"debug","message":"Executing query [m8jc6d1sf5c0ddipls6]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:12:58.384Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:58.395Z"}
{"level":"debug","message":"Executing query [m8jc6d26sjz6s0jvzpl]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:12:58.398Z"}
{"level":"debug","message":"Executing query [m8jc6d291jv7e9lfi1b]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595178384\"]","timestamp":"2025-03-21T22:12:58.401Z"}
{"level":"debug","message":"Executing query [m8jc6d2cigze2s5s42]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742595178384\",\"TEST-OFI-FORENSE-1742595178384\",3952,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742595178384\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:12:58.404Z"}
{"level":"debug","message":"Executing query [m8jc6d2kygqhx0es7f]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.412Z"}
{"level":"debug","message":"Executing query [m8jc6d2n09zwwnvxidrp]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595178384\"]","timestamp":"2025-03-21T22:12:58.415Z"}
{"level":"debug","message":"Executing query [m8jc6d2p0kwk57kiwxoh]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",29]","timestamp":"2025-03-21T22:12:58.417Z"}
{"level":"debug","message":"Executing query [m8jc6d2sz37d9c1z4c]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.420Z"}
{"level":"debug","message":"Executing query [m8jc6d2ubp7k8bi1m7s]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.422Z"}
{"level":"debug","message":"Executing query [m8jc6d2ymf22523zwmh]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.426Z"}
{"level":"debug","message":"Executing query [m8jc6d30wjoqx7l4q9n]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.428Z"}
{"level":"debug","message":"Executing query [m8jc6d339y2pnokbbl]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.431Z"}
{"level":"debug","message":"Executing query [m8jc6d36y46ygxd9d8]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742595178434\",\"TEST-SP-OFI-FORENSE-1742595178434\",3484,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:12:58.434Z"}
{"level":"debug","message":"Executing query [m8jc6d38e8r0gok98jb]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595178434\"]","timestamp":"2025-03-21T22:12:58.437Z"}
{"level":"debug","message":"Executing query [m8jc6d3b2rl2o4p0ay2]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595178434\"]","timestamp":"2025-03-21T22:12:58.439Z"}
{"level":"debug","message":"Executing query [m8jc6d3es6sxpsh92j]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:12:58.442Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:58.443Z"}
{"level":"debug","message":"Executing query [m8jc6d6ky7j71rskzv9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:12:58.557Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:58.567Z"}
{"level":"debug","message":"Executing query [m8jc6d6wrpcc6lav7rg]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:12:58.568Z"}
{"level":"debug","message":"Executing query [m8jc6d6zit8zambmvrg]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595178555\"]","timestamp":"2025-03-21T22:12:58.571Z"}
{"level":"debug","message":"Executing query [m8jc6d70vh306n7qzo]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742595178555\",\"TEST-OFICIO-1742595178555\",5294,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:12:58.573Z"}
{"level":"debug","message":"Executing query [m8jc6d75guao2r0u4ia]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.577Z"}
{"level":"debug","message":"Executing query [m8jc6d787khgtm3hl8y]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595178555\"]","timestamp":"2025-03-21T22:12:58.580Z"}
{"level":"debug","message":"Executing query [m8jc6d7ag5w4t210b5v]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",29]","timestamp":"2025-03-21T22:12:58.582Z"}
{"level":"debug","message":"Executing query [m8jc6d7dkf7h1h902fe]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.585Z"}
{"level":"debug","message":"Executing query [m8jc6d7fmdvq2rvcs2q]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.587Z"}
{"level":"debug","message":"Executing query [m8jc6d7icjo0hdgimco]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.590Z"}
{"level":"debug","message":"Executing query [m8jc6d7le0lsbpg4orm]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.593Z"}
{"level":"debug","message":"Executing query [m8jc6d7n7t778xs1i3n]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[29]","timestamp":"2025-03-21T22:12:58.595Z"}
{"level":"debug","message":"Executing query [m8jc6d7pa79buqnf1l]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742595178597\",\"TEST-SP-OFICIO-1742595178597\",3968,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:12:58.597Z"}
{"level":"debug","message":"Executing query [m8jc6d7tbir25guo3t8]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595178597\"]","timestamp":"2025-03-21T22:12:58.601Z"}
{"level":"debug","message":"Executing query [m8jc6d7u18jeimxi3zf]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595178597\"]","timestamp":"2025-03-21T22:12:58.602Z"}
{"level":"debug","message":"Executing query [m8jc6d7xmw7mdc524v]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:12:58.605Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:58.607Z"}
{"level":"debug","message":"Executing query [m8jc6db36egsexmemg7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:12:58.719Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:58.734Z"}
{"level":"debug","message":"Executing query [m8jc6dbkahu03895rt]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:12:58.736Z"}
{"level":"debug","message":"Executing query [m8jc6dbmro0emj0xcvb]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:12:58.738Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:12:58.739Z"}
{"level":"debug","message":"Executing query [m8jc6dboilngnnjjh9k]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:12:58.740Z"}
{"level":"debug","message":"Executing query [m8jc6dbprjk43b7opue]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:12:58.741Z"}
{"level":"debug","message":"Executing query [m8jc6dbqosoc8rqikt]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:12:58.742Z"}
{"level":"debug","message":"Executing query [m8jc6dbqb2bmhk18ymi]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:12:58.742Z"}
{"level":"debug","message":"Executing query [m8jc6dbvgx1hraz9cgv]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[16]","timestamp":"2025-03-21T22:12:58.747Z"}
{"level":"debug","message":"Executing query [m8jc6dbxbhepkl2luqe]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:12:58.749Z"}
{"level":"debug","message":"Executing query [m8jc6dc0uhz0q5a2cmb]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",16]","timestamp":"2025-03-21T22:12:58.752Z"}
{"level":"debug","message":"Executing query [m8jc6dc2ds2xx2g2bz]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[16]","timestamp":"2025-03-21T22:12:58.754Z"}
{"level":"debug","message":"Executing query [m8jc6dc4urd8jr2em6s]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[16]","timestamp":"2025-03-21T22:12:58.756Z"}
{"level":"debug","message":"Executing query [m8jc6dc9sq7h8221kec]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[16]","timestamp":"2025-03-21T22:12:58.761Z"}
{"level":"debug","message":"Executing query [m8jc6dcase6iiwps7jg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:12:58.762Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:58.763Z"}
{"level":"debug","message":"Executing query [m8jc6dffwouh7kjd66n]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:12:58.875Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:58.886Z"}
{"level":"debug","message":"Executing query [m8jc6dfs2aplrffd04l]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595178874\"]","timestamp":"2025-03-21T22:12:58.888Z"}
{"level":"debug","message":"Executing query [m8jc6dfu0rcwzlqc0bn]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742595178874\",true]","timestamp":"2025-03-21T22:12:58.890Z"}
{"level":"debug","message":"Executing query [m8jc6dg070bk950fw66]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-21T22:12:58.896Z"}
{"level":"debug","message":"Executing query [m8jc6dg30cfkeymltc5g]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595178874\"]","timestamp":"2025-03-21T22:12:58.899Z"}
{"level":"debug","message":"Executing query [m8jc6dg4l9ufsbwby9b]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",15]","timestamp":"2025-03-21T22:12:58.900Z"}
{"level":"debug","message":"Executing query [m8jc6dg8z51rfy42o5n]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-21T22:12:58.904Z"}
{"level":"debug","message":"Executing query [m8jc6dgaly4tjttxwmj]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-21T22:12:58.906Z"}
{"level":"debug","message":"Executing query [m8jc6dgca0cfr5sirum]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-21T22:12:58.908Z"}
{"level":"debug","message":"Executing query [m8jc6dgezako26lryps]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-21T22:12:58.910Z"}
{"level":"debug","message":"Executing query [m8jc6dgg3t1l92573zr]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-21T22:12:58.912Z"}
{"level":"debug","message":"Executing query [m8jc6dgjwvjqtz9zudm]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-21T22:12:58.915Z"}
{"level":"debug","message":"Executing query [m8jc6dgkix811xv9jmb]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:12:58.916Z"}
{"level":"debug","message":"Executing query [m8jc6dgmnmmfc2rquk]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:12:58.919Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:58.920Z"}
{"level":"debug","message":"Executing query [m8jc6djkv3e68q0cep8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:12:59.024Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:59.038Z"}
{"level":"debug","message":"Executing query [m8jc6dk0dgvynesz0wg]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:12:59.040Z"}
{"level":"debug","message":"Executing query [m8jc6dk2ec30r6mp98d]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595179024\"]","timestamp":"2025-03-21T22:12:59.042Z"}
{"level":"debug","message":"Executing query [m8jc6dk4v8n7awp8pnf]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742595179024\",\"TEST-OFI-QUIMICA-1742595179024\",8890,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:12:59.044Z"}
{"level":"debug","message":"Executing query [m8jc6dk9n3uvrw8edf]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[15]","timestamp":"2025-03-21T22:12:59.049Z"}
{"level":"debug","message":"Executing query [m8jc6dkc9khx0e3c1k]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595179024\"]","timestamp":"2025-03-21T22:12:59.052Z"}
{"level":"debug","message":"Executing query [m8jc6dkeifho4csuw8a]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",15]","timestamp":"2025-03-21T22:12:59.054Z"}
{"level":"debug","message":"Executing query [m8jc6dkhd91mmou607b]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[15]","timestamp":"2025-03-21T22:12:59.057Z"}
{"level":"debug","message":"Executing query [m8jc6dkjtgdmlf4gks]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[15]","timestamp":"2025-03-21T22:12:59.059Z"}
{"level":"debug","message":"Executing query [m8jc6dkln7au7ttviqr]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[15]","timestamp":"2025-03-21T22:12:59.061Z"}
{"level":"debug","message":"Executing query [m8jc6dkncn493dk4j3q]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[15]","timestamp":"2025-03-21T22:12:59.063Z"}
{"level":"debug","message":"Executing query [m8jc6dkqydk8l4xxm5a]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[15]","timestamp":"2025-03-21T22:12:59.066Z"}
{"level":"debug","message":"Executing query [m8jc6dksr1egj8vq5o]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:12:59.068Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:59.069Z"}
{"level":"debug","message":"Executing query [m8jc6dno29usx9uesmf]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:12:59.173Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:59.183Z"}
{"level":"debug","message":"Executing query [m8jc6do1rakkcjzr1gc]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595179172\"]","timestamp":"2025-03-21T22:12:59.185Z"}
{"level":"debug","message":"Executing query [m8jc6do2368vr1pzqdn]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595179172\"]","timestamp":"2025-03-21T22:12:59.186Z"}
{"level":"debug","message":"Executing query [m8jc6do4ttl1hm8p2f]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742595179172\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:12:59.188Z"}
{"level":"debug","message":"Executing query [m8jc6doa9h50jymrbf4]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-21T22:12:59.194Z"}
{"level":"debug","message":"Executing query [m8jc6dodyp5be2s8hrn]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595179172\"]","timestamp":"2025-03-21T22:12:59.197Z"}
{"level":"debug","message":"Executing query [m8jc6dofwk0etrgwkp8]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1013]","timestamp":"2025-03-21T22:12:59.199Z"}
{"level":"debug","message":"Executing query [m8jc6doi0alriko4a74m]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-21T22:12:59.202Z"}
{"level":"debug","message":"Executing query [m8jc6dokj1a86cl5tf]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-21T22:12:59.204Z"}
{"level":"debug","message":"Executing query [m8jc6donluwv9ym84b9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-21T22:12:59.207Z"}
{"level":"debug","message":"Executing query [m8jc6dopjc397mip6oh]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-21T22:12:59.209Z"}
{"level":"debug","message":"Executing query [m8jc6dorvpms5b18tl]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-21T22:12:59.211Z"}
{"level":"debug","message":"Executing query [m8jc6doty5kr86ovqd]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-21T22:12:59.213Z"}
{"level":"debug","message":"Executing query [m8jc6dovs1fma7rszhq]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:12:59.215Z"}
{"level":"debug","message":"Executing query [m8jc6doxhtyznb3gi3o]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:12:59.217Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:59.218Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:59.337Z"}
{"level":"debug","message":"Executing query [m8jc6dscjc7ag1ni95n]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:12:59.340Z"}
{"level":"debug","message":"Executing query [m8jc6dsec8an5e1dwea]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:12:59.342Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jc6dsec8an5e1dwea]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:12:59.345Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:12:59.347Z"}
{"level":"debug","message":"Executing query [m8jc6dvgav10o9w1to8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:12:59.452Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:12:59.463Z"}
{"level":"debug","message":"Executing query [m8jc6dvstbvmlhyjxz]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:12:59.464Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:12:59.466Z"}
{"level":"debug","message":"Executing query [m8jc6dvvy1ikux8gkr]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:12:59.467Z"}
{"level":"debug","message":"Executing query [m8jc6dvw55ttfo5u1x7]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:12:59.468Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:12:59.469Z"}
{"level":"debug","message":"Executing query [m8jc6dvypgic5yplrja]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:12:59.470Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:12:59.471Z"}
{"level":"debug","message":"Executing query [m8jc6dw4cm0nlvhix4l]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:12:59.476Z"}
{"level":"debug","message":"Executing query [m8jc6dw6qq6oio2bgp]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:12:59.478Z"}
{"level":"debug","message":"Executing query [m8jc6dw8k0ysqn2lfb9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:12:59.480Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:12:59.562Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:12:59.563Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:12:59.564Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:12:59.564Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:12:59.565Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:12:59.565Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-21T22:13:33.063Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:35.001Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:13:35.003Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:35.012Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:35.760Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:13:35.763Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:13:36.004Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:36.035Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:13:36.049Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:36.083Z"}
{"level":"debug","message":"Executing query [m8jc767yhct8peegsgq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:13:36.190Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:36.202Z"}
{"level":"debug","message":"Executing query [m8jc768cr9f3v6cc8kf]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:13:36.204Z"}
{"level":"debug","message":"Executing query [m8jc768f0aw62fnmo94m]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595216189\"]","timestamp":"2025-03-21T22:13:36.207Z"}
{"level":"debug","message":"Executing query [m8jc768hds50qx08j9v]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742595216189\",\"TEST-OFI-FORENSE-1742595216189\",7754,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742595216189\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:13:36.209Z"}
{"level":"debug","message":"Executing query [m8jc768ly3mprzjmm3]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.213Z"}
{"level":"debug","message":"Executing query [m8jc768pqae87ezxya9]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595216189\"]","timestamp":"2025-03-21T22:13:36.217Z"}
{"level":"debug","message":"Executing query [m8jc768rt6xoactgzb]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",31]","timestamp":"2025-03-21T22:13:36.219Z"}
{"level":"debug","message":"Executing query [m8jc768uf28wn4cowfe]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.222Z"}
{"level":"debug","message":"Executing query [m8jc768xbbrhfhbtu0p]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.225Z"}
{"level":"debug","message":"Executing query [m8jc76917cd5n50opcf]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.229Z"}
{"level":"debug","message":"Executing query [m8jc7693153iyitf0k7j]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.231Z"}
{"level":"debug","message":"Executing query [m8jc7696scw0nkozos]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.234Z"}
{"level":"debug","message":"Executing query [m8jc7699stdabiym04a]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742595216237\",\"TEST-SP-OFI-FORENSE-1742595216237\",8212,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:13:36.237Z"}
{"level":"debug","message":"Executing query [m8jc769c93hkrtbiz5]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595216237\"]","timestamp":"2025-03-21T22:13:36.240Z"}
{"level":"debug","message":"Executing query [m8jc769dfrtueq36r1o]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595216237\"]","timestamp":"2025-03-21T22:13:36.241Z"}
{"level":"debug","message":"Executing query [m8jc769grqux1vw8txb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:13:36.244Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:36.246Z"}
{"level":"debug","message":"Executing query [m8jc76ciax2u7iheulg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:13:36.355Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:36.365Z"}
{"level":"debug","message":"Executing query [m8jc76cu9p6u3mltjo7]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:13:36.366Z"}
{"level":"debug","message":"Executing query [m8jc76cwo9o87a05vv9]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595216354\"]","timestamp":"2025-03-21T22:13:36.368Z"}
{"level":"debug","message":"Executing query [m8jc76cy3fux8hkay78]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742595216354\",\"TEST-OFICIO-1742595216354\",4344,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:13:36.370Z"}
{"level":"debug","message":"Executing query [m8jc76d27g4jtt5788]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.374Z"}
{"level":"debug","message":"Executing query [m8jc76d5dqxmbhs56k]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595216354\"]","timestamp":"2025-03-21T22:13:36.377Z"}
{"level":"debug","message":"Executing query [m8jc76d7etpulizbwt]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",31]","timestamp":"2025-03-21T22:13:36.379Z"}
{"level":"debug","message":"Executing query [m8jc76da2m0m1pzsgo9]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.382Z"}
{"level":"debug","message":"Executing query [m8jc76dc9fisxmcbtb]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.384Z"}
{"level":"debug","message":"Executing query [m8jc76dftiyuvd60li8]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.387Z"}
{"level":"debug","message":"Executing query [m8jc76dhp57ut3jg8zj]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.389Z"}
{"level":"debug","message":"Executing query [m8jc76dkremwiqo5vme]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[31]","timestamp":"2025-03-21T22:13:36.392Z"}
{"level":"debug","message":"Executing query [m8jc76dmh1eyydm792]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742595216394\",\"TEST-SP-OFICIO-1742595216394\",1972,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:13:36.394Z"}
{"level":"debug","message":"Executing query [m8jc76dpsy1jossdcdi]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595216394\"]","timestamp":"2025-03-21T22:13:36.397Z"}
{"level":"debug","message":"Executing query [m8jc76dqutblextc5mp]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595216394\"]","timestamp":"2025-03-21T22:13:36.398Z"}
{"level":"debug","message":"Executing query [m8jc76du7c36galvw2o]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:13:36.402Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:36.404Z"}
{"level":"debug","message":"Executing query [m8jc76gvtansp6w3v7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:13:36.511Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:36.521Z"}
{"level":"debug","message":"Executing query [m8jc76h74w4jxrup95w]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:13:36.523Z"}
{"level":"debug","message":"Executing query [m8jc76h8sl45j5x29vo]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:13:36.524Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:13:36.525Z"}
{"level":"debug","message":"Executing query [m8jc76ha859ouc52ih5]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:13:36.526Z"}
{"level":"debug","message":"Executing query [m8jc76hb8bncynrnjvf]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:13:36.527Z"}
{"level":"debug","message":"Executing query [m8jc76hdborsx2nl9ee]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:13:36.529Z"}
{"level":"debug","message":"Executing query [m8jc76hey7b1r9mwqb]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:13:36.530Z"}
{"level":"debug","message":"Executing query [m8jc76hkaxmokdnvqsc]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[17]","timestamp":"2025-03-21T22:13:36.536Z"}
{"level":"debug","message":"Executing query [m8jc76hpqszfqtzq9t]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:13:36.541Z"}
{"level":"debug","message":"Executing query [m8jc76hrqx0l3j780kr]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",17]","timestamp":"2025-03-21T22:13:36.543Z"}
{"level":"debug","message":"Executing query [m8jc76hurjsxwdwy6d]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[17]","timestamp":"2025-03-21T22:13:36.546Z"}
{"level":"debug","message":"Executing query [m8jc76hwrzicnh5isf9]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[17]","timestamp":"2025-03-21T22:13:36.548Z"}
{"level":"debug","message":"Executing query [m8jc76i07a3gr8mvu1f]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[17]","timestamp":"2025-03-21T22:13:36.552Z"}
{"level":"debug","message":"Executing query [m8jc76i1h60zas7cya9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:13:36.553Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:36.554Z"}
{"level":"debug","message":"Executing query [m8jc76kx8e2lc1eobis]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:13:36.657Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:36.667Z"}
{"level":"debug","message":"Executing query [m8jc76l98v1g7g9v5fh]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595216656\"]","timestamp":"2025-03-21T22:13:36.669Z"}
{"level":"debug","message":"Executing query [m8jc76lb4l72i0itbkw]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742595216656\",true]","timestamp":"2025-03-21T22:13:36.671Z"}
{"level":"debug","message":"Executing query [m8jc76lfg6der6w776e]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.675Z"}
{"level":"debug","message":"Executing query [m8jc76lh6dunvodawk5]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595216656\"]","timestamp":"2025-03-21T22:13:36.677Z"}
{"level":"debug","message":"Executing query [m8jc76lj3czoihnsvgf]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",16]","timestamp":"2025-03-21T22:13:36.679Z"}
{"level":"debug","message":"Executing query [m8jc76lmjjtnqkhpk78]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.682Z"}
{"level":"debug","message":"Executing query [m8jc76lnomhe1dbvbd]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.684Z"}
{"level":"debug","message":"Executing query [m8jc76lr5agfzwgtqdd]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.687Z"}
{"level":"debug","message":"Executing query [m8jc76ltkexnwao4i8m]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.689Z"}
{"level":"debug","message":"Executing query [m8jc76luq7mxjw5ovjq]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.690Z"}
{"level":"debug","message":"Executing query [m8jc76lxnp79uoyin]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.693Z"}
{"level":"debug","message":"Executing query [m8jc76lznq6xxytkd2s]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:13:36.695Z"}
{"level":"debug","message":"Executing query [m8jc76m18huj43pcp33]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:13:36.697Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:36.698Z"}
{"level":"debug","message":"Executing query [m8jc76oxrdpx14rp4cq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:13:36.801Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:36.814Z"}
{"level":"debug","message":"Executing query [m8jc76pc66f2gcf09q]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:13:36.816Z"}
{"level":"debug","message":"Executing query [m8jc76pexx6f90bdyi]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595216801\"]","timestamp":"2025-03-21T22:13:36.818Z"}
{"level":"debug","message":"Executing query [m8jc76pf6aczgxkqh6m]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742595216801\",\"TEST-OFI-QUIMICA-1742595216801\",3441,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:13:36.819Z"}
{"level":"debug","message":"Executing query [m8jc76plx1uthlryur]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.825Z"}
{"level":"debug","message":"Executing query [m8jc76pqdgs7xw839ke]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595216801\"]","timestamp":"2025-03-21T22:13:36.830Z"}
{"level":"debug","message":"Executing query [m8jc76ptra3pnquf7ln]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",16]","timestamp":"2025-03-21T22:13:36.833Z"}
{"level":"debug","message":"Executing query [m8jc76pyhmx99huszij]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.838Z"}
{"level":"debug","message":"Executing query [m8jc76q1gay9xcumpt]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.841Z"}
{"level":"debug","message":"Executing query [m8jc76q5np5fek7q0z]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.845Z"}
{"level":"debug","message":"Executing query [m8jc76q7xeunoo3x7x]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.847Z"}
{"level":"debug","message":"Executing query [m8jc76qbgfvgebg0ccu]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[16]","timestamp":"2025-03-21T22:13:36.851Z"}
{"level":"debug","message":"Executing query [m8jc76qdrn12qizftv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:13:36.853Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:36.855Z"}
{"level":"debug","message":"Executing query [m8jc76u0d9ljdgt9a3k]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:13:36.984Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:37.002Z"}
{"level":"debug","message":"Executing query [m8jc76uk6hass6rwaxx]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595216984\"]","timestamp":"2025-03-21T22:13:37.004Z"}
{"level":"debug","message":"Executing query [m8jc76umd20rof77a8c]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595216984\"]","timestamp":"2025-03-21T22:13:37.006Z"}
{"level":"debug","message":"Executing query [m8jc76uoa9wsyflylwr]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742595216984\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:13:37.008Z"}
{"level":"debug","message":"Executing query [m8jc76uug2adkxrec2]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-21T22:13:37.014Z"}
{"level":"debug","message":"Executing query [m8jc76uxs97d9mkkvlc]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595216984\"]","timestamp":"2025-03-21T22:13:37.017Z"}
{"level":"debug","message":"Executing query [m8jc76v0mjaai0ho6x]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1014]","timestamp":"2025-03-21T22:13:37.020Z"}
{"level":"debug","message":"Executing query [m8jc76v328i0clw6enw]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-21T22:13:37.023Z"}
{"level":"debug","message":"Executing query [m8jc76v7g82w50r7nv9]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-21T22:13:37.027Z"}
{"level":"debug","message":"Executing query [m8jc76vai9wh9stsk89]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-21T22:13:37.030Z"}
{"level":"debug","message":"Executing query [m8jc76vd67nk3g6zbss]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-21T22:13:37.033Z"}
{"level":"debug","message":"Executing query [m8jc76vfe18k2xe3ka]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-21T22:13:37.035Z"}
{"level":"debug","message":"Executing query [m8jc76vingfeb0qky7d]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-21T22:13:37.038Z"}
{"level":"debug","message":"Executing query [m8jc76vk52fy9agjemj]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:13:37.040Z"}
{"level":"debug","message":"Executing query [m8jc76vmw1rvzbhw6ej]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:13:37.042Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:37.044Z"}
{"level":"debug","message":"Executing query [m8jc76z3j4g441brmip]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:13:37.167Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:37.178Z"}
{"level":"debug","message":"Executing query [m8jc76zfs8e90zbsxg]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:13:37.179Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:13:37.181Z"}
{"level":"debug","message":"Executing query [m8jc76zhngxjudj3axm]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:13:37.181Z"}
{"level":"debug","message":"Executing query [m8jc76zie8pnut5ycws]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:13:37.182Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:13:37.183Z"}
{"level":"debug","message":"Executing query [m8jc76zkzgwjxq92nd]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:13:37.184Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:13:37.185Z"}
{"level":"debug","message":"Executing query [m8jc76zpymqsadcdv7]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:13:37.189Z"}
{"level":"debug","message":"Executing query [m8jc76zr7vonb4wbk8k]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:13:37.191Z"}
{"level":"debug","message":"Executing query [m8jc76ztsjki8bv38rd]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:13:37.193Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:13:37.315Z"}
{"level":"debug","message":"Executing query [m8jc773969489crqtsf]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:13:37.317Z"}
{"level":"debug","message":"Executing query [m8jc773cyzz2agc5k4l]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:13:37.320Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jc773cyzz2agc5k4l]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:13:37.321Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:13:37.323Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-21T22:13:37.404Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:13:37.508Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:13:37.509Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:13:37.510Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:13:37.510Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:13:37.513Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:13:37.513Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-21T22:14:31.519Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-21T22:14:42.543Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-21T22:15:04.816Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:07.111Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:15:07.114Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:07.123Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:08.061Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:15:08.064Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-21T22:15:08.163Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:15:08.420Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:08.459Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:15:08.473Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:08.502Z"}
{"level":"debug","message":"Executing query [m8jc95j7v0dnsdquno]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:15:08.611Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:08.627Z"}
{"level":"debug","message":"Executing query [m8jc95jpgc54bfd65b]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595308611\"]","timestamp":"2025-03-21T22:15:08.629Z"}
{"level":"debug","message":"Executing query [m8jc95jtyptrkx0tg3]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595308611\"]","timestamp":"2025-03-21T22:15:08.633Z"}
{"level":"debug","message":"Executing query [m8jc95ju2q4kqypxij6]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742595308611\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:15:08.634Z"}
{"level":"debug","message":"Executing query [m8jc95jzxh4akdmxvdf]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-21T22:15:08.639Z"}
{"level":"debug","message":"Executing query [m8jc95k2b5d3togdcim]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595308611\"]","timestamp":"2025-03-21T22:15:08.642Z"}
{"level":"debug","message":"Executing query [m8jc95k4x885th3pob]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1015]","timestamp":"2025-03-21T22:15:08.644Z"}
{"level":"debug","message":"Executing query [m8jc95k724vs46prcik]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-21T22:15:08.647Z"}
{"level":"debug","message":"Executing query [m8jc95k9awdjhf8ybyw]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-21T22:15:08.649Z"}
{"level":"debug","message":"Executing query [m8jc95kdycwtz06qv1]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-21T22:15:08.653Z"}
{"level":"debug","message":"Executing query [m8jc95kf13dep7mkt16p]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-21T22:15:08.655Z"}
{"level":"debug","message":"Executing query [m8jc95kgdhpz4lg1nt]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-21T22:15:08.656Z"}
{"level":"debug","message":"Executing query [m8jc95kje4woj60swa7]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-21T22:15:08.659Z"}
{"level":"debug","message":"Executing query [m8jc95kl41x1q1ldrbv]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:15:08.661Z"}
{"level":"debug","message":"Executing query [m8jc95km314k76fxz1f]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:15:08.662Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:08.663Z"}
{"level":"debug","message":"Executing query [m8jc95np5cv1yulin2k]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:15:08.773Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:08.784Z"}
{"level":"debug","message":"Executing query [m8jc95o2m1glfa1o2dn]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:15:08.786Z"}
{"level":"debug","message":"Executing query [m8jc95o37g3kssdxh74]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595308773\"]","timestamp":"2025-03-21T22:15:08.787Z"}
{"level":"debug","message":"Executing query [m8jc95o4u1ozn3awe3]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742595308773\",\"TEST-OFI-FORENSE-1742595308773\",2709,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742595308773\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:15:08.788Z"}
{"level":"debug","message":"Executing query [m8jc95obdjzm0b6z416]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.795Z"}
{"level":"debug","message":"Executing query [m8jc95ofnngwu9xhpwh]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595308773\"]","timestamp":"2025-03-21T22:15:08.799Z"}
{"level":"debug","message":"Executing query [m8jc95ohh1qngkipjzr]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",33]","timestamp":"2025-03-21T22:15:08.801Z"}
{"level":"debug","message":"Executing query [m8jc95on7llrps9ugao]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.807Z"}
{"level":"debug","message":"Executing query [m8jc95op1qot34ta7n9]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.809Z"}
{"level":"debug","message":"Executing query [m8jc95osuupz5d7gf3l]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.813Z"}
{"level":"debug","message":"Executing query [m8jc95ov33ammvxzq6l]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.815Z"}
{"level":"debug","message":"Executing query [m8jc95oytsqfgvtu79s]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.818Z"}
{"level":"debug","message":"Executing query [m8jc95p0hfqs18ihd27]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742595308820\",\"TEST-SP-OFI-FORENSE-1742595308820\",6227,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:15:08.820Z"}
{"level":"debug","message":"Executing query [m8jc95p3kbczcb2vo4k]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595308820\"]","timestamp":"2025-03-21T22:15:08.823Z"}
{"level":"debug","message":"Executing query [m8jc95p664ogbmx3gu9]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595308820\"]","timestamp":"2025-03-21T22:15:08.826Z"}
{"level":"debug","message":"Executing query [m8jc95p9b150wh2m9ja]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:15:08.829Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:08.830Z"}
{"level":"debug","message":"Executing query [m8jc95shec9gp7abkg5]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:15:08.945Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:08.959Z"}
{"level":"debug","message":"Executing query [m8jc95sxxrh0aeu1jz]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:15:08.961Z"}
{"level":"debug","message":"Executing query [m8jc95syem3o097h9he]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595308945\"]","timestamp":"2025-03-21T22:15:08.962Z"}
{"level":"debug","message":"Executing query [m8jc95t0n2u4aqa30in]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742595308945\",\"TEST-OFICIO-1742595308945\",4206,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:15:08.964Z"}
{"level":"debug","message":"Executing query [m8jc95t5i8qv8ikb66]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.969Z"}
{"level":"debug","message":"Executing query [m8jc95t83rr3oln5v8v]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595308945\"]","timestamp":"2025-03-21T22:15:08.972Z"}
{"level":"debug","message":"Executing query [m8jc95tal42d7x7tiiq]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",33]","timestamp":"2025-03-21T22:15:08.974Z"}
{"level":"debug","message":"Executing query [m8jc95texro3vjsc66k]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.978Z"}
{"level":"debug","message":"Executing query [m8jc95tgcdzo5z6qdmc]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.980Z"}
{"level":"debug","message":"Executing query [m8jc95tjmcfr41bof]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.983Z"}
{"level":"debug","message":"Executing query [m8jc95tmdsiwpp70uvw]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.986Z"}
{"level":"debug","message":"Executing query [m8jc95tpaeenmfbsngd]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[33]","timestamp":"2025-03-21T22:15:08.989Z"}
{"level":"debug","message":"Executing query [m8jc95tr727gevjz3pd]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742595308991\",\"TEST-SP-OFICIO-1742595308991\",3264,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:15:08.991Z"}
{"level":"debug","message":"Executing query [m8jc95tv8ibyuikw9l4]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595308991\"]","timestamp":"2025-03-21T22:15:08.995Z"}
{"level":"debug","message":"Executing query [m8jc95twc0jvy1u4ehd]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595308991\"]","timestamp":"2025-03-21T22:15:08.996Z"}
{"level":"debug","message":"Executing query [m8jc95u0lk3tfzuv83r]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:15:09.000Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:09.001Z"}
{"level":"debug","message":"Executing query [m8jc95x3jo8woncokrq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:15:09.111Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:09.120Z"}
{"level":"debug","message":"Executing query [m8jc95xenfxr07fcvkp]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:15:09.122Z"}
{"level":"debug","message":"Executing query [m8jc95xgvvdf3yc6dqr]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595309110\"]","timestamp":"2025-03-21T22:15:09.124Z"}
{"level":"debug","message":"Executing query [m8jc95xie3fu5x773gw]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742595309110\",\"TEST-OFI-QUIMICA-1742595309110\",8146,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:15:09.126Z"}
{"level":"debug","message":"Executing query [m8jc95xm7icxbyfow65]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.130Z"}
{"level":"debug","message":"Executing query [m8jc95xpb94nznqnxls]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595309110\"]","timestamp":"2025-03-21T22:15:09.133Z"}
{"level":"debug","message":"Executing query [m8jc95xqe8tvtgqfq1r]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",17]","timestamp":"2025-03-21T22:15:09.134Z"}
{"level":"debug","message":"Executing query [m8jc95xthkk8w43679q]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.137Z"}
{"level":"debug","message":"Executing query [m8jc95xv2qffvup0sog]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.140Z"}
{"level":"debug","message":"Executing query [m8jc95xy4gj04w1heda]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.142Z"}
{"level":"debug","message":"Executing query [m8jc95y1c5zc2wfxlm]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.145Z"}
{"level":"debug","message":"Executing query [m8jc95y39elly8bv1x]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.147Z"}
{"level":"debug","message":"Executing query [m8jc95y8o3aavwimv6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:15:09.152Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:09.153Z"}
{"level":"debug","message":"Executing query [m8jc961htw3kdgkxbfm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:15:09.269Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:09.279Z"}
{"level":"debug","message":"Executing query [m8jc961twt9n82tcnkj]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:15:09.281Z"}
{"level":"debug","message":"Executing query [m8jc961v474kj50f9mp]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:15:09.283Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:15:09.284Z"}
{"level":"debug","message":"Executing query [m8jc961xtehxnzgmi1h]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:15:09.285Z"}
{"level":"debug","message":"Executing query [m8jc961y650amunpcuj]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:15:09.286Z"}
{"level":"debug","message":"Executing query [m8jc961zkrvf9orm9r]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:15:09.287Z"}
{"level":"debug","message":"Executing query [m8jc9620zgbhhgggob]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:15:09.288Z"}
{"level":"debug","message":"Executing query [m8jc9625s9pqr4693ar]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[18]","timestamp":"2025-03-21T22:15:09.293Z"}
{"level":"debug","message":"Executing query [m8jc962619ifrw4px0vi]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:15:09.294Z"}
{"level":"debug","message":"Executing query [m8jc9628n0caabqbf39]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",18]","timestamp":"2025-03-21T22:15:09.296Z"}
{"level":"debug","message":"Executing query [m8jc962banzr9p6j15g]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[18]","timestamp":"2025-03-21T22:15:09.299Z"}
{"level":"debug","message":"Executing query [m8jc962dq0lnbj1rde]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[18]","timestamp":"2025-03-21T22:15:09.301Z"}
{"level":"debug","message":"Executing query [m8jc962g0ohfzco43ep9]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[18]","timestamp":"2025-03-21T22:15:09.304Z"}
{"level":"debug","message":"Executing query [m8jc962itczrq0s863r]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:15:09.306Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:09.307Z"}
{"level":"debug","message":"Executing query [m8jc965ho0bsi97rekh]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:15:09.413Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:09.429Z"}
{"level":"debug","message":"Executing query [m8jc965yhv37dign19t]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:15:09.430Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:15:09.432Z"}
{"level":"debug","message":"Executing query [m8jc9660kyrjwukv0nb]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:15:09.432Z"}
{"level":"debug","message":"Executing query [m8jc966146l4wsmmdc8]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:15:09.433Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:15:09.434Z"}
{"level":"debug","message":"Executing query [m8jc96638dwhn0kq6l]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:15:09.435Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:15:09.437Z"}
{"level":"debug","message":"Executing query [m8jc96696f5b30rkv4m]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:15:09.441Z"}
{"level":"debug","message":"Executing query [m8jc966df2ja4y4s9fi]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:15:09.445Z"}
{"level":"debug","message":"Executing query [m8jc966gwafow5a644]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:15:09.448Z"}
{"level":"debug","message":"Executing query [m8jc96a9oh5laqmkb7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:15:09.585Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:09.596Z"}
{"level":"debug","message":"Executing query [m8jc96amilg71ld94h]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595309584\"]","timestamp":"2025-03-21T22:15:09.598Z"}
{"level":"debug","message":"Executing query [m8jc96ani45ztnoqrti]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742595309584\",true]","timestamp":"2025-03-21T22:15:09.599Z"}
{"level":"debug","message":"Executing query [m8jc96arj86pp4zbqt]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.603Z"}
{"level":"debug","message":"Executing query [m8jc96atqf68hwc588g]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595309584\"]","timestamp":"2025-03-21T22:15:09.606Z"}
{"level":"debug","message":"Executing query [m8jc96avumj5sakoprf]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",17]","timestamp":"2025-03-21T22:15:09.607Z"}
{"level":"debug","message":"Executing query [m8jc96aytbv7qar2jvk]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.610Z"}
{"level":"debug","message":"Executing query [m8jc96azt51xdwogg1p]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.611Z"}
{"level":"debug","message":"Executing query [m8jc96b223gwxh5pqd]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.614Z"}
{"level":"debug","message":"Executing query [m8jc96b48vv4r60rlwn]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.616Z"}
{"level":"debug","message":"Executing query [m8jc96b64oxpyagz8t]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.618Z"}
{"level":"debug","message":"Executing query [m8jc96b8b2gs41mombq]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-21T22:15:09.621Z"}
{"level":"debug","message":"Executing query [m8jc96ba6bwil21unes]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:15:09.622Z"}
{"level":"debug","message":"Executing query [m8jc96bcu5858xnbauo]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:15:09.624Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:09.625Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:09.749Z"}
{"level":"debug","message":"Executing query [m8jc96ewrr5rg2r55z]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:15:09.752Z"}
{"level":"debug","message":"Executing query [m8jc96ex1j4078xsv6c]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:15:09.753Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jc96ex1j4078xsv6c]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:15:09.756Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:09.757Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:15:09.839Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:15:09.840Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:15:09.842Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:15:09.843Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:15:09.844Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:15:09.844Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:15:23.645Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:15:23.737Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:15:23.754Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:15:23.792Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:20.732Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-21T22:19:20.738Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:20.748Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:19:20.985Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:21.038Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:19:21.052Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:21.082Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:21.874Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-21T22:19:21.876Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-21T22:19:21.970Z"}
{"level":"debug","message":"Executing query [m8jcel4k5xgn0h2ni16]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:19:22.100Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:22.109Z"}
{"level":"debug","message":"Executing query [m8jcel4wvh8owt1ezza]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595562099\"]","timestamp":"2025-03-21T22:19:22.112Z"}
{"level":"debug","message":"Executing query [m8jcel4y65decy593j7]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742595562099\",true]","timestamp":"2025-03-21T22:19:22.114Z"}
{"level":"debug","message":"Executing query [m8jcel54zai0jd5fc8j]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.120Z"}
{"level":"debug","message":"Executing query [m8jcel57992dd4po2uf]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742595562099\"]","timestamp":"2025-03-21T22:19:22.123Z"}
{"level":"debug","message":"Executing query [m8jcel5aenr7stuoz7k]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",18]","timestamp":"2025-03-21T22:19:22.126Z"}
{"level":"debug","message":"Executing query [m8jcel5ecgrxvl1s92g]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.130Z"}
{"level":"debug","message":"Executing query [m8jcel5j62ro02ayb4q]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.135Z"}
{"level":"debug","message":"Executing query [m8jcel5mcfpq9s3eybo]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.138Z"}
{"level":"debug","message":"Executing query [m8jcel5o20o9izfpk7ti]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.140Z"}
{"level":"debug","message":"Executing query [m8jcel5qo9wrm5a02r]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.142Z"}
{"level":"debug","message":"Executing query [m8jcel5t7p96zk2i3yk]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.145Z"}
{"level":"debug","message":"Executing query [m8jcel5wrxk3xcbs3yo]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:19:22.148Z"}
{"level":"debug","message":"Executing query [m8jcel5xnkqda992nib]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:19:22.149Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:22.150Z"}
{"level":"debug","message":"Executing query [m8jcel8uvp1p0vr4o6]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:19:22.255Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:22.265Z"}
{"level":"debug","message":"Executing query [m8jcel975e24tu7g1js]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:19:22.267Z"}
{"level":"debug","message":"Executing query [m8jcel98hykrv40lhc]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595562254\"]","timestamp":"2025-03-21T22:19:22.268Z"}
{"level":"debug","message":"Executing query [m8jcel990t1rj7xyx23]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742595562254\",\"TEST-OFICIO-1742595562254\",725,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:19:22.269Z"}
{"level":"debug","message":"Executing query [m8jcel9d42x117xrwxd]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.273Z"}
{"level":"debug","message":"Executing query [m8jcel9g0c271txj9lgr]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742595562254\"]","timestamp":"2025-03-21T22:19:22.276Z"}
{"level":"debug","message":"Executing query [m8jcel9iz3huo218jt]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",35]","timestamp":"2025-03-21T22:19:22.279Z"}
{"level":"debug","message":"Executing query [m8jcel9lfchrih4ep2b]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.281Z"}
{"level":"debug","message":"Executing query [m8jcel9nzc7epg15hll]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.283Z"}
{"level":"debug","message":"Executing query [m8jcel9qb010us3uo]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.286Z"}
{"level":"debug","message":"Executing query [m8jcel9r06fc4tinxut]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.287Z"}
{"level":"debug","message":"Executing query [m8jcel9uriglw8ks05o]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.290Z"}
{"level":"debug","message":"Executing query [m8jcel9w40lw6pia93]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742595562292\",\"TEST-SP-OFICIO-1742595562292\",8356,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-21T22:19:22.292Z"}
{"level":"debug","message":"Executing query [m8jcel9zwt9wbtf06b]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595562292\"]","timestamp":"2025-03-21T22:19:22.295Z"}
{"level":"debug","message":"Executing query [m8jcela0vgtjwqh9hhk]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742595562292\"]","timestamp":"2025-03-21T22:19:22.296Z"}
{"level":"debug","message":"Executing query [m8jcela4thd1syf4w1i]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:19:22.300Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:22.301Z"}
{"level":"debug","message":"Executing query [m8jcelcxts99t92av9s]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:19:22.401Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:22.412Z"}
{"level":"debug","message":"Executing query [m8jceldaiyugtqc5tb]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:19:22.414Z"}
{"level":"debug","message":"Executing query [m8jceldc1vc83n76fmx]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595562401\"]","timestamp":"2025-03-21T22:19:22.416Z"}
{"level":"debug","message":"Executing query [m8jceldenh67g4jymt]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742595562401\",\"TEST-OFI-FORENSE-1742595562401\",1487,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742595562401\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:19:22.418Z"}
{"level":"debug","message":"Executing query [m8jceldlx685hgjwt4]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.425Z"}
{"level":"debug","message":"Executing query [m8jceldndh5tsf908t6]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742595562401\"]","timestamp":"2025-03-21T22:19:22.427Z"}
{"level":"debug","message":"Executing query [m8jceldqpodqzwn4k3d]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",35]","timestamp":"2025-03-21T22:19:22.430Z"}
{"level":"debug","message":"Executing query [m8jceldtcz4ejpg6fcs]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.433Z"}
{"level":"debug","message":"Executing query [m8jcelduuxlgtalpq69]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.434Z"}
{"level":"debug","message":"Executing query [m8jceldyk0xk0iy080q]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.438Z"}
{"level":"debug","message":"Executing query [m8jcele0gchcts89z2]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.440Z"}
{"level":"debug","message":"Executing query [m8jcele2e37tc57xqlp]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[35]","timestamp":"2025-03-21T22:19:22.443Z"}
{"level":"debug","message":"Executing query [m8jcele5iy934ikrkvs]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742595562445\",\"TEST-SP-OFI-FORENSE-1742595562445\",6683,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-21T22:19:22.445Z"}
{"level":"debug","message":"Executing query [m8jcele8k8qsjwh1ura]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595562445\"]","timestamp":"2025-03-21T22:19:22.448Z"}
{"level":"debug","message":"Executing query [m8jcele9tfwfuu7se9b]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742595562445\"]","timestamp":"2025-03-21T22:19:22.449Z"}
{"level":"debug","message":"Executing query [m8jcelecow4johxev5]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:19:22.452Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:22.453Z"}
{"level":"debug","message":"Executing query [m8jcelh5lutyc75rf9a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:19:22.553Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:22.562Z"}
{"level":"debug","message":"Executing query [m8jcelhf548kw6xa395]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595562553\"]","timestamp":"2025-03-21T22:19:22.563Z"}
{"level":"debug","message":"Executing query [m8jcelhin9dm8nb0hnr]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595562553\"]","timestamp":"2025-03-21T22:19:22.566Z"}
{"level":"debug","message":"Executing query [m8jcelhjp3r2ohp0j1f]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742595562553\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:19:22.567Z"}
{"level":"debug","message":"Executing query [m8jcelhnu6vzabg5p1r]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-21T22:19:22.571Z"}
{"level":"debug","message":"Executing query [m8jcelhprwe8ohr5ql]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742595562553\"]","timestamp":"2025-03-21T22:19:22.573Z"}
{"level":"debug","message":"Executing query [m8jcelhq90byjr4sst]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1016]","timestamp":"2025-03-21T22:19:22.574Z"}
{"level":"debug","message":"Executing query [m8jcelhtqla9jca9r8s]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-21T22:19:22.577Z"}
{"level":"debug","message":"Executing query [m8jcelhukgh8tewtthi]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-21T22:19:22.578Z"}
{"level":"debug","message":"Executing query [m8jcelhwrdafm216bf9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-21T22:19:22.581Z"}
{"level":"debug","message":"Executing query [m8jcelhzcu3o9vo7qrl]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-21T22:19:22.583Z"}
{"level":"debug","message":"Executing query [m8jceli0f08j9pwklb8]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-21T22:19:22.584Z"}
{"level":"debug","message":"Executing query [m8jceli3gaddrn6bsd9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-21T22:19:22.587Z"}
{"level":"debug","message":"Executing query [m8jceli5nv9cqqieu5]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-21T22:19:22.589Z"}
{"level":"debug","message":"Executing query [m8jceli66g135po6dw]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:19:22.590Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:22.591Z"}
{"level":"debug","message":"Executing query [m8jcelkz4mtdn3g208s]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:19:22.691Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:22.703Z"}
{"level":"debug","message":"Executing query [m8jcellcsi5fo8a2gi8]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-21T22:19:22.704Z"}
{"level":"debug","message":"Executing query [m8jcelled7nn0vkjxwh]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-21T22:19:22.706Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-21T22:19:22.707Z"}
{"level":"debug","message":"Executing query [m8jcellflzhxrie1z7r]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:19:22.707Z"}
{"level":"debug","message":"Executing query [m8jcellhuj8be9p093n]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:19:22.709Z"}
{"level":"debug","message":"Executing query [m8jcelliejoq44d2nhd]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:19:22.710Z"}
{"level":"debug","message":"Executing query [m8jcelljs4m9v6bqpgq]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-21T22:19:22.711Z"}
{"level":"debug","message":"Executing query [m8jcellnpzqumho2fg]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[19]","timestamp":"2025-03-21T22:19:22.715Z"}
{"level":"debug","message":"Executing query [m8jcellokbdmuoyl17]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-21T22:19:22.716Z"}
{"level":"debug","message":"Executing query [m8jcellqxsrg58vqag]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",19]","timestamp":"2025-03-21T22:19:22.718Z"}
{"level":"debug","message":"Executing query [m8jcelluicmnfqr26ks]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[19]","timestamp":"2025-03-21T22:19:22.722Z"}
{"level":"debug","message":"Executing query [m8jcellvu8egvkahncj]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[19]","timestamp":"2025-03-21T22:19:22.723Z"}
{"level":"debug","message":"Executing query [m8jcellyseos0l6ifpc]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[19]","timestamp":"2025-03-21T22:19:22.726Z"}
{"level":"debug","message":"Executing query [m8jcelm0r0ui7louf2d]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:19:22.728Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:22.729Z"}
{"level":"debug","message":"Executing query [m8jceloqgagi15u726]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:19:22.826Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:22.835Z"}
{"level":"debug","message":"Executing query [m8jcelp02ez42vqy1ec]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-21T22:19:22.836Z"}
{"level":"debug","message":"Executing query [m8jcelp2ca77tha6v7u]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595562825\"]","timestamp":"2025-03-21T22:19:22.838Z"}
{"level":"debug","message":"Executing query [m8jcelp3u2hq0wi9epi]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742595562825\",\"TEST-OFI-QUIMICA-1742595562825\",8457,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-21T22:19:22.839Z"}
{"level":"debug","message":"Executing query [m8jcelp8j6zmnbl64j]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.845Z"}
{"level":"debug","message":"Executing query [m8jcelpbqtwp9uaiwl9]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742595562825\"]","timestamp":"2025-03-21T22:19:22.847Z"}
{"level":"debug","message":"Executing query [m8jcelpdvdxg157ap7e]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",18]","timestamp":"2025-03-21T22:19:22.849Z"}
{"level":"debug","message":"Executing query [m8jcelpgc7bytsu6jh]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.852Z"}
{"level":"debug","message":"Executing query [m8jcelphlu7qg3kaz2]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.853Z"}
{"level":"debug","message":"Executing query [m8jcelpkcd3diysswav]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.856Z"}
{"level":"debug","message":"Executing query [m8jcelpmnxasnzx7c2g]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.858Z"}
{"level":"debug","message":"Executing query [m8jcelppkp1fxkzby5]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[18]","timestamp":"2025-03-21T22:19:22.861Z"}
{"level":"debug","message":"Executing query [m8jcelpriwk8cgubiqp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:19:22.863Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:22.864Z"}
{"level":"debug","message":"Executing query [m8jcelshpc6d3ebqwp]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-21T22:19:22.961Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:22.973Z"}
{"level":"debug","message":"Executing query [m8jcelsvrynchem243o]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-21T22:19:22.975Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-21T22:19:22.977Z"}
{"level":"debug","message":"Executing query [m8jcelsygzwrnk848u5]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-21T22:19:22.978Z"}
{"level":"debug","message":"Executing query [m8jcelsze1egbzkvluc]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-21T22:19:22.979Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-21T22:19:22.981Z"}
{"level":"debug","message":"Executing query [m8jcelt1hjfhuzmhjc9]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-21T22:19:22.981Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-21T22:19:22.983Z"}
{"level":"debug","message":"Executing query [m8jcelt97wil46pw0kf]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-21T22:19:22.989Z"}
{"level":"debug","message":"Executing query [m8jceltd8lr69t53iyx]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-21T22:19:22.993Z"}
{"level":"debug","message":"Executing query [m8jceltfqaaz6v76zs]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-21T22:19:22.995Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:19:23.123Z"}
{"level":"debug","message":"Executing query [m8jcelx16l1mgx9kbe]: SELECT 1 as test","params":"[]","timestamp":"2025-03-21T22:19:23.126Z"}
{"level":"debug","message":"Executing query [m8jcelx4h506mp177a6]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-21T22:19:23.128Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jcelx4h506mp177a6]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-21T22:19:23.129Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:19:23.131Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-21T22:19:23.207Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-21T22:19:23.303Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-21T22:19:23.304Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-21T22:19:23.305Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-21T22:19:23.306Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-21T22:19:23.306Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-21T22:19:23.306Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:21:04.537Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:21:04.540Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:21:04.575Z"}
{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"level":"error","message":"Error al inicializar la base de datos: Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`mesaparteslog`, CONSTRAINT `fk_mesaparteslog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE RESTRICT ON UPDATE CASCADE)","sql":"INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES ('Mesa de Partes Principal', TRUE, 'MP-PRIN')","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`mesaparteslog`, CONSTRAINT `fk_mesaparteslog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE RESTRICT ON UPDATE CASCADE)","sqlState":"23000","stack":"Error: Cannot add or update a child row: a foreign key constraint fails (`oficri_sistema`.`mesaparteslog`, CONSTRAINT `fk_mesaparteslog_usuario` FOREIGN KEY (`IDUsuario`) REFERENCES `usuario` (`IDUsuario`) ON DELETE RESTRICT ON UPDATE CASCADE)\n    at PromiseConnection.query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\promise\\connection.js:29:22)\n    at executeQuery (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\utils\\database-helpers.js:46:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async initializeMesaPartes (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\scripts\\init-database.js:134:7)\n    at async initializeDatabase (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\scripts\\init-database.js:277:7)\n    at async initializeDatabaseAndAdmin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\server.js:201:5)\n    at async startServer (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\server.js:236:5)","timestamp":"2025-03-21T22:21:04.746Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:21:04.750Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:21:04.751Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-21T22:21:17.562Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:21:17.648Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-21T22:21:17.663Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-21T22:21:17.695Z"}
{"level":"info","message":"Shutting down gracefully...","timestamp":"2025-03-21T22:21:23.800Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:22:23.389Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:22:23.393Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:22:23.426Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:22:23.689Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:22:23.692Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:22:23.692Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:22:47.065Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:22:47.069Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:22:47.098Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:22:47.279Z"}
{"error":"Expected property name or '}' in JSON at position 1 (line 1 column 2)","level":"error","message":"Error processing request","method":"POST","path":"/api/auth/login","stack":"SyntaxError: Expected property name or '}' in JSON at position 1 (line 1 column 2)\n    at JSON.parse (<anonymous>)\n    at parse (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\json.js:92:19)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\raw-body\\index.js:238:16)\n    at done (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-21T22:22:50.161Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"POST","path":"/api/auth/login","stack":"TypeError: logSecurityEvent is not a function\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\routes\\index.js:70:5\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\routes\\index.js:31:3\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-03-21T22:22:57.428Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:23:29.078Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:23:29.081Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:23:29.108Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:23:29.276Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:23:29.279Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:23:29.279Z"}
{"error":"logger.warn is not a function","level":"error","message":"Error processing request","method":"POST","path":"/api/auth/login","stack":"TypeError: logger.warn is not a function\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\routes\\index.js:70:12\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\routes\\index.js:31:3\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-03-21T22:23:33.572Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:24:13.364Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:24:13.368Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:24:13.404Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:24:13.571Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:24:13.574Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:24:13.574Z"}
{"level":"info","message":"Shutting down gracefully...","timestamp":"2025-03-21T22:24:36.431Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:24:45.044Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:24:45.047Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:24:45.078Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:24:45.253Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:24:45.256Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:24:45.256Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:25:20.525Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:25:20.529Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:25:20.564Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:25:20.747Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:25:20.751Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:25:20.751Z"}
{"level":"info","message":"Shutting down gracefully...","timestamp":"2025-03-21T22:25:33.588Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:25:39.380Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:25:39.384Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:25:39.415Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:25:39.593Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:25:39.596Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:25:39.596Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:26:04.892Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:26:04.896Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:26:04.923Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:26:05.090Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:26:05.093Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:26:05.093Z"}
{"error":"logger.warn is not a function","level":"error","message":"Error processing request","method":"POST","path":"/api/auth/login","stack":"TypeError: logger.warn is not a function\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\routes\\index.js:70:12\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\routes\\index.js:31:3\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-03-21T22:26:11.508Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:26:38.175Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:26:38.179Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:26:38.205Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:26:38.369Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:26:38.372Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:26:38.372Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:26:48.325Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:26:48.329Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:26:48.361Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:26:48.518Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:26:48.522Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:26:48.522Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:26:58.390Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:26:58.393Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:26:58.419Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:26:58.578Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:26:58.581Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:26:58.581Z"}
{"level":"info","message":"Shutting down gracefully...","timestamp":"2025-03-21T22:27:29.312Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:27:34.691Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:27:34.695Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:27:34.723Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:27:34.899Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:27:34.903Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:27:34.903Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:31:03.472Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:31:03.475Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:31:03.506Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:31:03.682Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:31:03.685Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:31:03.686Z"}
{"error":"Content-Security-Policy received a duplicate directive \"script-src\"","level":"error","message":"Error processing request","method":"GET","path":"/api-docs","stack":"Error: Content-Security-Policy received a duplicate directive \"script-src\"\n    at normalizeDirectives (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\helmet\\index.cjs:45:10)\n    at Function.contentSecurityPolicy (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\helmet\\index.cjs:121:31)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\server.js:132:34\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\server.js:117:3\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-03-21T22:31:38.078Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:32:00.967Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:32:00.970Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:32:01.009Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:32:01.192Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:32:39.792Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:32:39.795Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:32:39.826Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:32:39.988Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:32:39.990Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:32:39.991Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:32:57.829Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:32:57.833Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:32:57.863Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:32:58.048Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:32:58.051Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:32:58.052Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:33:00.614Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:33:00.619Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:33:00.649Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:33:00.814Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:33:00.817Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:33:00.817Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:33:47.319Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:33:47.323Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:33:47.354Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:33:47.502Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:33:47.504Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:33:47.505Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:34:17.828Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:34:17.832Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:34:17.868Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:34:18.002Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:34:18.005Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:34:18.005Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:34:22.543Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:34:22.548Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:34:22.588Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:34:22.766Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:34:22.769Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:34:22.770Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:34:33.206Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:34:33.209Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:34:33.242Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:34:33.385Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:34:33.388Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:34:33.388Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:34:51.953Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:34:51.956Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:34:51.984Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:34:52.110Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:34:52.112Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:34:52.113Z"}
{"level":"info","message":"Shutting down gracefully...","timestamp":"2025-03-21T22:34:55.332Z"}
{"level":"debug","message":"Executing query [m8jcysls4hrtcazp4hb]: \n      SELECT \n        u.IDUsuario, u.CodigoCIP, u.Nombres, u.Apellidos, u.Grado,\n        u.PasswordHash, u.IDArea, u.IDRol, u.UltimoAcceso,\n        u.IntentosFallidos, u.Bloqueado, u.UltimoBloqueo,\n        a.NombreArea, r.NombreRol, r.Permisos\n      FROM Usuario u\n      LEFT JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      LEFT JOIN Rol r ON u.IDRol = r.IDRol\n      WHERE u.CodigoCIP = ?\n    ","params":"[\"12345678\"]","timestamp":"2025-03-21T22:35:04.912Z"}
{"level":"debug","message":"Executing query [m8jcyso05blsav70bt7]: \n      UPDATE Usuario \n      SET IntentosFallidos = 0, UltimoAcceso = NOW() \n      WHERE IDUsuario = ?\n    ","params":"[1]","timestamp":"2025-03-21T22:35:04.992Z"}
{"level":"debug","message":"Executing query [m8jcyso90ausb76q9wts]: \n      INSERT INTO Session (\n        IDUsuario, SessionToken, FechaInicio, \n        UltimoAcceso, Expiracion, IPOrigen\n      ) VALUES (?, ?, NOW(), NOW(), ?, ?)\n    ","params":"[1,\"bdb60f52fc2c1934f1aa6398400ce98eeb3c40b344c91163db4be3630eb2b2eae98660f97372d34c\",\"2025-03-28T22:35:05.001Z\",null]","timestamp":"2025-03-21T22:35:05.001Z"}
{"codigoCIP":"12345678","error":"logSecurityEvent is not a function","level":"error","message":"Error en autenticación","stack":"TypeError: logSecurityEvent is not a function\n    at Object.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\services\\auth\\auth.service.js:167:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\controllers\\auth.controller.js:30:26)","timestamp":"2025-03-21T22:35:05.005Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error en autenticación","stack":"TypeError: logSecurityEvent is not a function\n    at exports.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\controllers\\auth.controller.js:42:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-21T22:35:05.006Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:35:46.888Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:35:46.891Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:35:46.918Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:35:47.053Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:35:47.056Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:35:47.057Z"}
{"level":"debug","message":"Executing query [m8jczxp7r399c95odbk]: \n      SELECT \n        u.IDUsuario, u.CodigoCIP, u.Nombres, u.Apellidos, u.Grado,\n        u.PasswordHash, u.IDArea, u.IDRol, u.UltimoAcceso,\n        u.IntentosFallidos, u.Bloqueado, u.UltimoBloqueo,\n        a.NombreArea, r.NombreRol, r.Permisos\n      FROM Usuario u\n      LEFT JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      LEFT JOIN Rol r ON u.IDRol = r.IDRol\n      WHERE u.CodigoCIP = ?\n    ","params":"[\"12345678\"]","timestamp":"2025-03-21T22:35:58.172Z"}
{"level":"debug","message":"Executing query [m8jczxrav2bmnrucxhh]: \n      UPDATE Usuario \n      SET IntentosFallidos = 0, UltimoAcceso = NOW() \n      WHERE IDUsuario = ?\n    ","params":"[1]","timestamp":"2025-03-21T22:35:58.247Z"}
{"level":"debug","message":"Executing query [m8jczxrkbfobf1nntw5]: \n      INSERT INTO Session (\n        IDUsuario, SessionToken, FechaInicio, \n        UltimoAcceso, Expiracion, IPOrigen\n      ) VALUES (?, ?, NOW(), NOW(), ?, ?)\n    ","params":"[1,\"505a89223d7910c092e1895e88183635e4c759695d99f9793c2e6661b7271948e59237b3b326b004\",\"2025-03-28T22:35:58.256Z\",null]","timestamp":"2025-03-21T22:35:58.256Z"}
{"codigoCIP":"12345678","error":"logSecurityEvent is not a function","level":"error","message":"Error en autenticación","stack":"TypeError: logSecurityEvent is not a function\n    at Object.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\services\\auth\\auth.service.js:167:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\controllers\\auth.controller.js:30:26)","timestamp":"2025-03-21T22:35:58.259Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error en autenticación","stack":"TypeError: logSecurityEvent is not a function\n    at exports.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\controllers\\auth.controller.js:42:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-21T22:35:58.260Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:37:09.948Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:37:09.952Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:37:09.990Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:37:10.167Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:37:10.170Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:37:10.171Z"}
{"level":"debug","message":"Executing query [m8jd1i724tylgy3iidp]: \n      SELECT \n        u.IDUsuario, u.CodigoCIP, u.Nombres, u.Apellidos, u.Grado,\n        u.PasswordHash, u.IDArea, u.IDRol, u.UltimoAcceso,\n        u.IntentosFallidos, u.Bloqueado, u.UltimoBloqueo,\n        a.NombreArea, r.NombreRol, r.Permisos\n      FROM Usuario u\n      LEFT JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      LEFT JOIN Rol r ON u.IDRol = r.IDRol\n      WHERE u.CodigoCIP = ?\n    ","params":"[\"12345678\"]","timestamp":"2025-03-21T22:37:11.390Z"}
{"level":"debug","message":"Executing query [m8jd1i96i1rwgadzjcm]: \n      UPDATE Usuario \n      SET IntentosFallidos = 0, UltimoAcceso = NOW() \n      WHERE IDUsuario = ?\n    ","params":"[1]","timestamp":"2025-03-21T22:37:11.466Z"}
{"level":"debug","message":"Executing query [m8jd1i9d494bytrnob6]: \n      INSERT INTO Session (\n        IDUsuario, SessionToken, FechaInicio, \n        UltimoAcceso, Expiracion, IPOrigen\n      ) VALUES (?, ?, NOW(), NOW(), ?, ?)\n    ","params":"[1,\"d64ed3f3fc21551ac22bf92480a66f70df13ce8cc746200a59a05c6382e12cc04bc47b10ba1dae10\",\"2025-03-28T22:37:11.473Z\",null]","timestamp":"2025-03-21T22:37:11.473Z"}
{"codigoCIP":"12345678","error":"logSecurityEvent is not a function","level":"error","message":"Error en autenticación","stack":"TypeError: logSecurityEvent is not a function\n    at Object.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\services\\auth\\auth.service.js:167:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\controllers\\auth.controller.js:30:26)","timestamp":"2025-03-21T22:37:11.478Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error en autenticación","stack":"TypeError: logSecurityEvent is not a function\n    at exports.login (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\controllers\\auth.controller.js:42:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-21T22:37:11.479Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:37:55.910Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:37:55.914Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:37:55.950Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:37:58.527Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:37:58.530Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:37:58.560Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:37:58.725Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:37:58.728Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:37:58.728Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:38:25.831Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:38:25.834Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:38:25.864Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:38:26.025Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:38:26.028Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:38:26.028Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:38:53.898Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:39:17.956Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:39:17.960Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:39:17.986Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:39:18.152Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:39:18.155Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:39:18.155Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:39:41.363Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:39:41.366Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:39:41.403Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:39:41.557Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:39:41.560Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:39:41.560Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:40:34.465Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:40:34.469Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:40:34.497Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:40:34.670Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:40:34.673Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:40:34.673Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-21T22:40:51.348Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-21T22:40:51.352Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-21T22:40:51.382Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-21T22:40:51.548Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-21T22:40:51.551Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-21T22:40:51.551Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:11:29.589Z"}
{"duration":"3ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T03:11:29.745Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T03:11:29.768Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:11:29.785Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T03:11:29.788Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:11:29.991Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T03:11:30.038Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:11:30.091Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T03:11:30.116Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:11:30.157Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:11:30.783Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:11:30.833Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T03:11:30.835Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:11:31.117Z"}
{"level":"debug","message":"Executing query [m8jmuals9tbdoi0732u]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:11:31.120Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:11:31.133Z"}
{"level":"debug","message":"Executing query [m8jmuam964652ww31ml]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742613091119\"]","timestamp":"2025-03-22T03:11:31.137Z"}
{"level":"debug","message":"Executing query [m8jmuamdhkuzvwofkwu]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742613091119\",true]","timestamp":"2025-03-22T03:11:31.141Z"}
{"level":"debug","message":"Executing query [m8jmuamlavztt7ymjdw]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T03:11:31.149Z"}
{"level":"debug","message":"Executing query [m8jmuamqo7e5gmy4lom]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742613091119\"]","timestamp":"2025-03-22T03:11:31.154Z"}
{"level":"debug","message":"Executing query [m8jmuamtg9k51kjkze]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",4]","timestamp":"2025-03-22T03:11:31.157Z"}
{"level":"debug","message":"Executing query [m8jmuamxamv95xwkkqb]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T03:11:31.161Z"}
{"level":"debug","message":"Executing query [m8jmuamz5p1441p5was]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T03:11:31.164Z"}
{"level":"debug","message":"Executing query [m8jmuan43n2sw8uatip]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T03:11:31.168Z"}
{"level":"debug","message":"Executing query [m8jmuan9j0depjdpha]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T03:11:31.173Z"}
{"level":"debug","message":"Executing query [m8jmuancm097v5fw14j]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T03:11:31.176Z"}
{"level":"debug","message":"Executing query [m8jmuanfvp4iescqjv]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T03:11:31.179Z"}
{"level":"debug","message":"Executing query [m8jmuanhic1y0p0atht]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T03:11:31.181Z"}
{"level":"debug","message":"Executing query [m8jmuani0jl0p9quct7i]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:11:31.182Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:11:31.184Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:11:31.286Z"}
{"level":"debug","message":"Executing query [m8jmuaqhhk4unjj8xc]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:11:31.289Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:11:31.299Z"}
{"level":"debug","message":"Executing query [m8jmuaqs24v8tn2uzee]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T03:11:31.300Z"}
{"level":"debug","message":"Executing query [m8jmuaqtot3301wp9ij]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742613091288\"]","timestamp":"2025-03-22T03:11:31.301Z"}
{"level":"debug","message":"Executing query [m8jmuaqvn7yp67vscc]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742613091288\",\"TEST-OFI-FORENSE-1742613091288\",1363,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742613091288\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:11:31.303Z"}
{"level":"debug","message":"Executing query [m8jmuaqzd8euuev1wig]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T03:11:31.307Z"}
{"level":"debug","message":"Executing query [m8jmuar1zcjai2s2ua]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742613091288\"]","timestamp":"2025-03-22T03:11:31.309Z"}
{"level":"debug","message":"Executing query [m8jmuar437hz630nsy2]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",5]","timestamp":"2025-03-22T03:11:31.312Z"}
{"level":"debug","message":"Executing query [m8jmuar7h0ubxb9onnv]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T03:11:31.315Z"}
{"level":"debug","message":"Executing query [m8jmuar97nv1i7g54rp]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T03:11:31.317Z"}
{"level":"debug","message":"Executing query [m8jmuarb7g2d4vw1qq3]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T03:11:31.320Z"}
{"level":"debug","message":"Executing query [m8jmuardx258uokiq3h]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T03:11:31.321Z"}
{"level":"debug","message":"Executing query [m8jmuargilqqgboero]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T03:11:31.324Z"}
{"level":"debug","message":"Executing query [m8jmuariqib7vedhpll]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742613091326\",\"TEST-SP-OFI-FORENSE-1742613091326\",6069,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T03:11:31.326Z"}
{"level":"debug","message":"Executing query [m8jmuarlnwisk6gzhop]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742613091326\"]","timestamp":"2025-03-22T03:11:31.329Z"}
{"level":"debug","message":"Executing query [m8jmuarmplv5uev35q]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742613091326\"]","timestamp":"2025-03-22T03:11:31.330Z"}
{"level":"debug","message":"Executing query [m8jmuarp31yscka0l13]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:11:31.333Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:11:31.334Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:11:31.441Z"}
{"level":"debug","message":"Executing query [m8jmuauszdqnwzwsp0q]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:11:31.444Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:11:31.458Z"}
{"level":"debug","message":"Executing query [m8jmuav8km888dxpprm]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T03:11:31.460Z"}
{"level":"debug","message":"Executing query [m8jmuavatbw1634bazo]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742613091443\"]","timestamp":"2025-03-22T03:11:31.462Z"}
{"level":"debug","message":"Executing query [m8jmuavc0z1cvasge2w]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742613091443\",\"TEST-OFICIO-1742613091443\",718,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:11:31.464Z"}
{"level":"debug","message":"Executing query [m8jmuavi0l9g8sny4yor]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T03:11:31.470Z"}
{"level":"debug","message":"Executing query [m8jmuavlp84crjhr0z]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742613091443\"]","timestamp":"2025-03-22T03:11:31.473Z"}
{"level":"debug","message":"Executing query [m8jmuavn6d30s1ekr5]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",5]","timestamp":"2025-03-22T03:11:31.475Z"}
{"level":"debug","message":"Executing query [m8jmuavrqn71iecrx3q]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T03:11:31.479Z"}
{"level":"debug","message":"Executing query [m8jmuavulvwppu1uoj]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T03:11:31.482Z"}
{"level":"debug","message":"Executing query [m8jmuavxk194t465boi]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T03:11:31.485Z"}
{"level":"debug","message":"Executing query [m8jmuavzv7g2qa8mtwe]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T03:11:31.487Z"}
{"level":"debug","message":"Executing query [m8jmuaw2bv74947kuii]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T03:11:31.490Z"}
{"level":"debug","message":"Executing query [m8jmuaw4s3cr5b57xg]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742613091492\",\"TEST-SP-OFICIO-1742613091492\",5618,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T03:11:31.492Z"}
{"level":"debug","message":"Executing query [m8jmuaw7lbr884xf29k]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742613091492\"]","timestamp":"2025-03-22T03:11:31.495Z"}
{"level":"debug","message":"Executing query [m8jmuaw8s6ngv444b8f]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742613091492\"]","timestamp":"2025-03-22T03:11:31.496Z"}
{"level":"debug","message":"Executing query [m8jmuawcgthpp2k6pjk]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:11:31.500Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:11:31.501Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:11:31.611Z"}
{"level":"debug","message":"Executing query [m8jmuazh1df72na5un9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:11:31.613Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:11:31.623Z"}
{"level":"debug","message":"Executing query [m8jmuazttd3juvzos7]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742613091613\"]","timestamp":"2025-03-22T03:11:31.625Z"}
{"level":"debug","message":"Executing query [m8jmuazv08istr2wumlm]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742613091613\"]","timestamp":"2025-03-22T03:11:31.627Z"}
{"level":"debug","message":"Executing query [m8jmuazw7s0dog94iyr]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742613091613\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:11:31.628Z"}
{"level":"debug","message":"Executing query [m8jmub00sib8dx0hkl]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T03:11:31.632Z"}
{"level":"debug","message":"Executing query [m8jmub039k3t4yhgx8k]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742613091613\"]","timestamp":"2025-03-22T03:11:31.635Z"}
{"level":"debug","message":"Executing query [m8jmub05uprweoe3hed]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1001]","timestamp":"2025-03-22T03:11:31.637Z"}
{"level":"debug","message":"Executing query [m8jmub08u7k4s0i0lq7]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T03:11:31.640Z"}
{"level":"debug","message":"Executing query [m8jmub09j3lcdsc3ej8]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T03:11:31.641Z"}
{"level":"debug","message":"Executing query [m8jmub0ej04j68xhefj]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T03:11:31.646Z"}
{"level":"debug","message":"Executing query [m8jmub0g25fk73l2c7o]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T03:11:31.648Z"}
{"level":"debug","message":"Executing query [m8jmub0ilqmztittcrr]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T03:11:31.650Z"}
{"level":"debug","message":"Executing query [m8jmub0lmab35yh57vl]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T03:11:31.653Z"}
{"level":"debug","message":"Executing query [m8jmub0niq9bonpa6v]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T03:11:31.655Z"}
{"level":"debug","message":"Executing query [m8jmub0pqe8dphj4fr]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:11:31.657Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:11:31.659Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:11:31.764Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:11:32.048Z"}
{"level":"debug","message":"Executing query [m8jmubbmrf3laid9oik]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:11:32.050Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:11:32.060Z"}
{"level":"debug","message":"Executing query [m8jmubbyg4wnpdlxgi]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T03:11:32.062Z"}
{"level":"debug","message":"Executing query [m8jmubbzqt1vnlyzf8]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T03:11:32.063Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T03:11:32.064Z"}
{"level":"debug","message":"Executing query [m8jmubc10fh16gcyu7cn]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:11:32.065Z"}
{"level":"debug","message":"Executing query [m8jmubc2cqsy0zi6fl8]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:11:32.066Z"}
{"level":"debug","message":"Executing query [m8jmubc3an0lhag7cga]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:11:32.067Z"}
{"level":"debug","message":"Executing query [m8jmubc4oacelox85gr]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T03:11:32.068Z"}
{"level":"debug","message":"Executing query [m8jmubcar6sp5ykr3gn]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-22T03:11:32.074Z"}
{"level":"debug","message":"Executing query [m8jmubcblkfcwz7fzds]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:11:32.075Z"}
{"level":"debug","message":"Executing query [m8jmubch3wkdisv1pwu]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",4]","timestamp":"2025-03-22T03:11:32.081Z"}
{"level":"debug","message":"Executing query [m8jmubckpt4sky043ln]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-22T03:11:32.084Z"}
{"level":"debug","message":"Executing query [m8jmubcmpv8m1ghk5v9]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-22T03:11:32.086Z"}
{"level":"debug","message":"Executing query [m8jmubcru4rq7g0plhf]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-22T03:11:32.091Z"}
{"level":"debug","message":"Executing query [m8jmubct1ulz91rg41r]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:11:32.093Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:11:32.094Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:11:32.214Z"}
{"level":"debug","message":"Executing query [m8jmubgatjidpxa53w]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:11:32.218Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:11:32.228Z"}
{"level":"debug","message":"Executing query [m8jmubgme7odoqwv2r]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T03:11:32.230Z"}
{"level":"debug","message":"Executing query [m8jmubgoyoq158buraj]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742613092217\"]","timestamp":"2025-03-22T03:11:32.232Z"}
{"level":"debug","message":"Executing query [m8jmubgqzgwdkf1icdf]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742613092217\",\"TEST-OFI-QUIMICA-1742613092217\",4472,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:11:32.234Z"}
{"level":"debug","message":"Executing query [m8jmubgupv3050bax48]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T03:11:32.238Z"}
{"level":"debug","message":"Executing query [m8jmubgwpa617mb050q]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742613092217\"]","timestamp":"2025-03-22T03:11:32.240Z"}
{"level":"debug","message":"Executing query [m8jmubgyhhen461lwdn]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",3]","timestamp":"2025-03-22T03:11:32.242Z"}
{"level":"debug","message":"Executing query [m8jmubh1gel6mjhkwc7]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T03:11:32.245Z"}
{"level":"debug","message":"Executing query [m8jmubh3ulbbsbbuzvm]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T03:11:32.247Z"}
{"level":"debug","message":"Executing query [m8jmubh5py3vmmso0x]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T03:11:32.249Z"}
{"level":"debug","message":"Executing query [m8jmubh7djflp2bdapc]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T03:11:32.251Z"}
{"level":"debug","message":"Executing query [m8jmubha190ek1o0som]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T03:11:32.254Z"}
{"level":"debug","message":"Executing query [m8jmubhburpc3nggxln]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:11:32.255Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:11:32.257Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:11:32.359Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:11:32.381Z"}
{"level":"debug","message":"Executing query [m8jmubkwymgvwis5her]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T03:11:32.384Z"}
{"level":"debug","message":"Executing query [m8jmubkxsud2ehidiz]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T03:11:32.385Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jmubkxsud2ehidiz]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T03:11:32.389Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:11:32.391Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:11:32.492Z"}
{"level":"debug","message":"Executing query [m8jmubnyr81sw57tnr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:11:32.494Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:11:32.504Z"}
{"level":"debug","message":"Executing query [m8jmubo98p25gty4vcm]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T03:11:32.505Z"}
{"level":"debug","message":"Executing query [m8jmubobj4wbo7k8i4t]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T03:11:32.507Z"}
{"level":"debug","message":"Executing query [m8jmubod744zplc2wgk]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T03:11:32.509Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-22T03:11:32.510Z"}
{"level":"debug","message":"Executing query [m8jmuboeh1vn9zkhqb]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T03:11:32.510Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T03:11:32.512Z"}
{"level":"debug","message":"Executing query [m8jmubokr23bkff5pjg]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T03:11:32.516Z"}
{"level":"debug","message":"Executing query [m8jmubomhot4zv35yer]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[2]","timestamp":"2025-03-22T03:11:32.518Z"}
{"level":"debug","message":"Executing query [m8jmuboonm0zbv2dp6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:11:32.520Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T03:11:32.599Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T03:11:32.718Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T03:11:32.815Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T03:11:32.816Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T03:11:32.817Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T03:11:32.818Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T03:11:32.819Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T03:11:32.819Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:11:46.591Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:11:46.647Z"}
{"level":"debug","message":"Executing query [m8jmuml870al52v1zky]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T03:11:46.652Z"}
{"level":"debug","message":"Executing query [m8jmumlbgn1q5q1xj]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T03:11:46.655Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jmumlbgn1q5q1xj]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T03:11:46.658Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:11:46.660Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:13:19.224Z"}
{"level":"debug","message":"Executing query [m8jmwm1fy5oq40gmxdd]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:13:19.251Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:13:19.281Z"}
{"level":"debug","message":"Executing query [m8jmwm2ce8lt7dhu8at]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T03:13:19.284Z"}
{"level":"debug","message":"Executing query [m8jmwm2fa0nwk0b0n3w]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T03:13:19.287Z"}
{"level":"debug","message":"Executing query [m8jmwm2ghjhhc1gq4ao]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T03:13:19.288Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.permisocontextual' doesn't exist","level":"error","message":"Database query error [m8jmwm2ghjhhc1gq4ao]","params":"[999,999]","query":"DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","timestamp":"2025-03-22T03:13:19.291Z"}
{"level":"error","message":"Error en la configuración de las pruebas: Table 'oficri_sistema.permisocontextual' doesn't exist","timestamp":"2025-03-22T03:13:19.292Z"}
{"level":"debug","message":"Executing query [m8jmwm2sgna790h897p]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:13:19.300Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:13:19.302Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:19:07.875Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:19:08.027Z"}
{"duration":"21ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T03:19:08.031Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T03:19:08.035Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:19:08.046Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:19:08.722Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:19:08.774Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T03:19:08.777Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:19:08.891Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:19:08.907Z"}
{"level":"debug","message":"Executing query [m8jn43u8y6s4ec372ah]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T03:19:08.912Z"}
{"level":"debug","message":"Executing query [m8jn43uagyqhjnl9o9j]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T03:19:08.914Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jn43uagyqhjnl9o9j]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T03:19:08.916Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:19:08.918Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:19:09.026Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:19:09.036Z"}
{"level":"debug","message":"Executing query [m8jn43xqbae6yllkhtm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:19:09.038Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:19:09.051Z"}
{"level":"debug","message":"Executing query [m8jn43y48vcrdtkh5xd]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T03:19:09.052Z"}
{"level":"debug","message":"Executing query [m8jn43y74o7axex9h4b]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T03:19:09.055Z"}
{"level":"debug","message":"Executing query [m8jn43y94hykxz7re3a]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive, Descripcion) VALUES (?, ?, ?, ?, ?, ?)","params":"[999,\"Área de Prueba\",\"TEST-AREA\",\"PRUEBA\",1,\"Área creada para pruebas\"]","timestamp":"2025-03-22T03:19:09.057Z"}
{"level":"debug","message":"Executing query [m8jn43yfad0sr0j1rh8]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[999,\"Rol de Prueba\",\"Rol creado para pruebas\",1,255]","timestamp":"2025-03-22T03:19:09.063Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T03:19:09.067Z"}
{"level":"debug","message":"Executing query [m8jn43yjwmpo9dck7g]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:19:09.067Z"}
{"level":"debug","message":"Executing query [m8jn43ymzteqn2bwd5]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:19:09.070Z"}
{"level":"debug","message":"Executing query [m8jn43yoher98fixrgj]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:19:09.072Z"}
{"level":"debug","message":"Executing query [m8jn43yp4jmg3ogtd2]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T03:19:09.073Z"}
{"level":"debug","message":"Executing query [m8jn43yuykefpndhtad]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.078Z"}
{"level":"debug","message":"Executing query [m8jn43z2obxjo2lg0ub]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:19:09.086Z"}
{"level":"debug","message":"Executing query [m8jn43z4z7pcysrv1j]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1]","timestamp":"2025-03-22T03:19:09.088Z"}
{"level":"debug","message":"Executing query [m8jn43z8sdume43lch9]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.092Z"}
{"level":"debug","message":"Executing query [m8jn43z924fiyw2vgo7]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.093Z"}
{"level":"debug","message":"Executing query [m8jn43zdv2hxczghtfe]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.097Z"}
{"level":"debug","message":"Executing query [m8jn43zfmwlp17bbd5]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:19:09.099Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:19:09.101Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:19:09.282Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T03:19:09.322Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:19:09.375Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T03:19:09.391Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:19:09.433Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:19:09.715Z"}
{"level":"debug","message":"Executing query [m8jn44gnplgtfviuws]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:19:09.719Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:19:09.731Z"}
{"level":"debug","message":"Executing query [m8jn44h142m18ioguid]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T03:19:09.733Z"}
{"level":"debug","message":"Executing query [m8jn44h45lvieam07f8]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742613549718\"]","timestamp":"2025-03-22T03:19:09.736Z"}
{"level":"debug","message":"Executing query [m8jn44h8heswv71nu5l]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-DOSAJE-1742613549718\",\"TEST-OFICIO-1742613549718\",589,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:19:09.740Z"}
{"level":"debug","message":"Executing query [m8jn44hedtb1kqda3cu]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.746Z"}
{"level":"debug","message":"Executing query [m8jn44hhfriv8yjlehc]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742613549718\"]","timestamp":"2025-03-22T03:19:09.749Z"}
{"level":"debug","message":"Executing query [m8jn44hk7i1vknj4oo7]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",1]","timestamp":"2025-03-22T03:19:09.752Z"}
{"level":"debug","message":"Executing query [m8jn44hokqcqj7uubti]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.756Z"}
{"level":"debug","message":"Executing query [m8jn44hq5dd3y1w02wk]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.758Z"}
{"level":"debug","message":"Executing query [m8jn44htivt14rfibw8]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.761Z"}
{"level":"debug","message":"Executing query [m8jn44hwpm3a2b833nd]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.764Z"}
{"level":"debug","message":"Executing query [m8jn44hzr3o6cs2gvw]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.767Z"}
{"level":"debug","message":"Executing query [m8jn44i2fl3qztxcazo]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-DOSAJE-1742613549770\",\"TEST-SP-OFICIO-1742613549770\",7471,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T03:19:09.770Z"}
{"level":"debug","message":"Executing query [m8jn44i5tlfpdqd77eh]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742613549770\"]","timestamp":"2025-03-22T03:19:09.773Z"}
{"level":"debug","message":"Executing query [m8jn44i7uhloh3bsg5e]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742613549770\"]","timestamp":"2025-03-22T03:19:09.775Z"}
{"level":"debug","message":"Executing query [m8jn44icqy97lb9sn5]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:19:09.780Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:19:09.782Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:19:09.880Z"}
{"level":"debug","message":"Executing query [m8jn44l85267sukl10y]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:19:09.884Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:19:09.896Z"}
{"level":"debug","message":"Executing query [m8jn44lmq3qjx543e9g]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742613549883\"]","timestamp":"2025-03-22T03:19:09.898Z"}
{"level":"debug","message":"Executing query [m8jn44lp2ugrhkp3ij9]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742613549883\",true]","timestamp":"2025-03-22T03:19:09.901Z"}
{"level":"debug","message":"Executing query [m8jn44luufygvtzp8ek]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.906Z"}
{"level":"debug","message":"Executing query [m8jn44lw9ufjzoy4z4h]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742613549883\"]","timestamp":"2025-03-22T03:19:09.908Z"}
{"level":"debug","message":"Executing query [m8jn44lyfubon9huex7]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",1]","timestamp":"2025-03-22T03:19:09.910Z"}
{"level":"debug","message":"Executing query [m8jn44m1uljlqumu15]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.913Z"}
{"level":"debug","message":"Executing query [m8jn44m3pnwx4xagpeh]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.915Z"}
{"level":"debug","message":"Executing query [m8jn44m5gqigbtuoqdv]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.917Z"}
{"level":"debug","message":"Executing query [m8jn44m7gdsn28t520s]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.919Z"}
{"level":"debug","message":"Executing query [m8jn44m9wm0uhclqxff]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.921Z"}
{"level":"debug","message":"Executing query [m8jn44mc3b2ncuqbtgy]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-22T03:19:09.924Z"}
{"level":"debug","message":"Executing query [m8jn44mdd2yzkgqcvfn]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T03:19:09.926Z"}
{"level":"debug","message":"Executing query [m8jn44mfn901972rumc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:19:09.927Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:19:09.928Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:19:10.034Z"}
{"level":"debug","message":"Executing query [m8jn44pi3cdv4eina1c]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:19:10.038Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:19:10.048Z"}
{"level":"debug","message":"Executing query [m8jn44pt3ohvetnwzb5]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T03:19:10.049Z"}
{"level":"debug","message":"Executing query [m8jn44pvmliegu9lf8]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742613550037\"]","timestamp":"2025-03-22T03:19:10.051Z"}
{"level":"debug","message":"Executing query [m8jn44py2w3vigyh3qv]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-QUIMICA-1742613550037\",\"TEST-OFI-QUIMICA-1742613550037\",7401,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:19:10.054Z"}
{"level":"debug","message":"Executing query [m8jn44q3ewta8yrftid]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T03:19:10.059Z"}
{"level":"debug","message":"Executing query [m8jn44q7rjjvizy0ft]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742613550037\"]","timestamp":"2025-03-22T03:19:10.063Z"}
{"level":"debug","message":"Executing query [m8jn44q9tk7lhflhy7h]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",1]","timestamp":"2025-03-22T03:19:10.065Z"}
{"level":"debug","message":"Executing query [m8jn44qbl5c1rqhgpo]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T03:19:10.067Z"}
{"level":"debug","message":"Executing query [m8jn44qfk6tdd73hkco]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T03:19:10.071Z"}
{"level":"debug","message":"Executing query [m8jn44qipmfco9u4q8i]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T03:19:10.074Z"}
{"level":"debug","message":"Executing query [m8jn44qktr06wgs6j]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T03:19:10.076Z"}
{"level":"debug","message":"Executing query [m8jn44qnnlhj9rn8gj]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T03:19:10.080Z"}
{"level":"debug","message":"Executing query [m8jn44qp5109nh47mqe]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:19:10.081Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:19:10.082Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:19:10.186Z"}
{"level":"debug","message":"Executing query [m8jn44tpo2lg259tyxj]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:19:10.189Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:19:10.203Z"}
{"level":"debug","message":"Executing query [m8jn44u63k3r27n64uz]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742613550188\"]","timestamp":"2025-03-22T03:19:10.206Z"}
{"level":"debug","message":"Executing query [m8jn44u8caf6h92zfko]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742613550188\"]","timestamp":"2025-03-22T03:19:10.208Z"}
{"level":"debug","message":"Executing query [m8jn44u96z1lux48y05]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742613550188\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:19:10.209Z"}
{"level":"debug","message":"Executing query [m8jn44ueatfpoliqabo]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T03:19:10.214Z"}
{"level":"debug","message":"Executing query [m8jn44ug25mhcs9ozz7]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742613550188\"]","timestamp":"2025-03-22T03:19:10.217Z"}
{"level":"debug","message":"Executing query [m8jn44ukk5125m35re9]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1000]","timestamp":"2025-03-22T03:19:10.220Z"}
{"level":"debug","message":"Executing query [m8jn44uopuhykvwlobh]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T03:19:10.224Z"}
{"level":"debug","message":"Executing query [m8jn44uqrnzinq2y4qh]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T03:19:10.226Z"}
{"level":"debug","message":"Executing query [m8jn44ut5v8d19jqvbs]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T03:19:10.229Z"}
{"level":"debug","message":"Executing query [m8jn44uvvoytsl995n]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T03:19:10.231Z"}
{"level":"debug","message":"Executing query [m8jn44uwgdzwk9nll8h]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T03:19:10.232Z"}
{"level":"debug","message":"Executing query [m8jn44uzokftnn71fz]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T03:19:10.235Z"}
{"level":"debug","message":"Executing query [m8jn44v0n7xnt4uumtp]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T03:19:10.236Z"}
{"level":"debug","message":"Executing query [m8jn44v212jj5c6chom]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:19:10.238Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:19:10.239Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:19:10.344Z"}
{"level":"debug","message":"Executing query [m8jn44y4md6o10f6uv]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:19:10.348Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:19:10.359Z"}
{"level":"debug","message":"Executing query [m8jn44yhgr2tqvyr27p]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T03:19:10.361Z"}
{"level":"debug","message":"Executing query [m8jn44yi8231dz388mx]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742613550347\"]","timestamp":"2025-03-22T03:19:10.362Z"}
{"level":"debug","message":"Executing query [m8jn44yoedm2uao0y84]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-FORENSE-1742613550347\",\"TEST-OFI-FORENSE-1742613550347\",8926,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742613550347\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:19:10.368Z"}
{"level":"debug","message":"Executing query [m8jn44yt6mrupk8kgl8]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T03:19:10.373Z"}
{"level":"debug","message":"Executing query [m8jn44yxuvjpaly0q5o]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742613550347\"]","timestamp":"2025-03-22T03:19:10.377Z"}
{"level":"debug","message":"Executing query [m8jn44z0w1nyrid63y]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",1]","timestamp":"2025-03-22T03:19:10.380Z"}
{"level":"debug","message":"Executing query [m8jn44z4y5kd1rtmvcd]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T03:19:10.384Z"}
{"level":"debug","message":"Executing query [m8jn44z61z9qsw98eqq]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T03:19:10.386Z"}
{"level":"debug","message":"Executing query [m8jn44z9qbyj44wcpz]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T03:19:10.389Z"}
{"level":"debug","message":"Executing query [m8jn44zarwjjgij3r1f]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T03:19:10.390Z"}
{"level":"debug","message":"Executing query [m8jn44zfznfnc03zhf]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T03:19:10.395Z"}
{"level":"debug","message":"Executing query [m8jn44zg860kggaeh1r]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-FORENSE-1742613550396\",\"TEST-SP-OFI-FORENSE-1742613550396\",6651,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T03:19:10.396Z"}
{"level":"debug","message":"Executing query [m8jn44zksakfjeh4fwh]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742613550396\"]","timestamp":"2025-03-22T03:19:10.400Z"}
{"level":"debug","message":"Executing query [m8jn44zldokgwz10bln]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742613550396\"]","timestamp":"2025-03-22T03:19:10.401Z"}
{"level":"debug","message":"Executing query [m8jn44zp0151741j93y6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:19:10.405Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:19:10.407Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:19:10.531Z"}
{"level":"debug","message":"Executing query [m8jn453akwzq2r6p12]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:19:10.534Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:19:10.545Z"}
{"level":"debug","message":"Executing query [m8jn453mhb5fekf9qz9]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T03:19:10.546Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T03:19:10.547Z"}
{"level":"debug","message":"Executing query [m8jn453om8oj2fc1xze]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T03:19:10.548Z"}
{"level":"info","message":"No se encontraron suficientes Áreas. Se requieren al menos dos Áreas para las pruebas de derivación.","timestamp":"2025-03-22T03:19:10.549Z"}
{"level":"debug","message":"Executing query [m8jn453p9a359usi4vq]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T03:19:10.549Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-22T03:19:10.551Z"}
{"level":"debug","message":"Executing query [m8jn453rav85zcir6s]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T03:19:10.551Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T03:19:10.554Z"}
{"level":"debug","message":"Executing query [m8jn453ypzar3dcu1e]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T03:19:10.559Z"}
{"level":"debug","message":"Executing query [m8jn4542syvnupmoxko]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[null]","timestamp":"2025-03-22T03:19:10.562Z"}
{"level":"debug","message":"Executing query [m8jn4544pqtppv34qgd]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:19:10.564Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T03:19:10.640Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T03:19:10.759Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T03:19:10.856Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T03:19:10.857Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T03:19:10.861Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T03:19:10.861Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T03:19:10.862Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T03:19:10.862Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:29:57.297Z"}
{"level":"debug","message":"Executing query [m8jni05i50uguahdd36]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:29:57.318Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:29:57.347Z"}
{"level":"debug","message":"Executing query [m8jni06ecze1aj8paoo]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T03:29:57.350Z"}
{"level":"debug","message":"Executing query [m8jni06hhcd4nlartt9]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T03:29:57.353Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T03:29:57.354Z"}
{"level":"debug","message":"Executing query [m8jni06j97c0lloj2gd]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T03:29:57.355Z"}
{"level":"debug","message":"Executing query [m8jni06ligc9fhh4dj]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T03:29:57.357Z"}
{"level":"debug","message":"Executing query [m8jni06onramw5cjhu]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:29:57.360Z"}
{"level":"debug","message":"Executing query [m8jni06up9w5jacx22g]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[1]","timestamp":"2025-03-22T03:29:57.366Z"}
{"level":"debug","message":"Executing query [m8jni06x8cgrf9pjchq]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[1]","timestamp":"2025-03-22T03:29:57.369Z"}
{"level":"debug","message":"Executing query [m8jni071zxj8aeetbv]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",1]","timestamp":"2025-03-22T03:29:57.373Z"}
{"level":"debug","message":"Executing query [m8jni0748qgm94ebhch]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[1]","timestamp":"2025-03-22T03:29:57.376Z"}
{"level":"debug","message":"Executing query [m8jni076plgtfev9zdo]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[1]","timestamp":"2025-03-22T03:29:57.378Z"}
{"level":"debug","message":"Executing query [m8jni079yopwdydbi4]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[1]","timestamp":"2025-03-22T03:29:57.381Z"}
{"level":"debug","message":"Executing query [m8jni07bsqzpl503a6p]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:29:57.383Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:29:57.384Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:29:57.499Z"}
{"level":"debug","message":"Executing query [m8jni0al6v25dh2y3nr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:29:57.501Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:29:57.514Z"}
{"level":"debug","message":"Executing query [m8jni0b0v1ahve4rfa]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = ?","params":"[888]","timestamp":"2025-03-22T03:29:57.516Z"}
{"level":"debug","message":"Executing query [m8jni0b1w5z61yp2skb]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Área Papelera\",\"TEST-PAPELERA\",\"PRUEBA\",1]","timestamp":"2025-03-22T03:29:57.517Z"}
{"level":"debug","message":"Executing query [m8jni0b4xjhhl0pgm6]: SELECT IDRol FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T03:29:57.520Z"}
{"level":"debug","message":"Executing query [m8jni0b5ieo7jy5gdg9]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Rol Papelera\",\"Rol para pruebas de papelera\",2,4]","timestamp":"2025-03-22T03:29:57.521Z"}
{"level":"debug","message":"Executing query [m8jni0b9j7068mhtdzf]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TESTPAP123\",\"Usuario\",\"Papelera\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","timestamp":"2025-03-22T03:29:57.525Z"}
{"level":"debug","message":"Executing query [m8jni0bbzkevepqq73f]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T03:29:57.527Z"}
{"level":"debug","message":"Executing query [m8jni0bf7etiv9rbt0i]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[2,888,2,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T03:29:57.531Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:29:57.531Z"}
{"level":"info","message":"Creado usuario ID: 2, área ID: 888, rol ID: 888, documento ID: 1 para pruebas de papelera","timestamp":"2025-03-22T03:29:57.536Z"}
{"level":"debug","message":"Executing query [m8jni0bldovhdpfax66]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:29:57.537Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jni0bldovhdpfax66]","params":"[1,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:29:57.540Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:29:57.541Z"}
{"level":"debug","message":"Executing query [m8jni0bs1kr58e38y6mh]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,2,\"RESTAURAR\"]","timestamp":"2025-03-22T03:29:57.544Z"}
{"level":"debug","message":"Executing query [m8jni0btf24b8e0d2gt]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T03:29:57.545Z"}
{"level":"debug","message":"Executing query [m8jni0buwe0bhrbtmdk]: SELECT * FROM DocumentoLog WHERE IDDocumento = ? AND TipoAccion = ?","params":"[1,\"RESTAURAR_PAPELERA\"]","timestamp":"2025-03-22T03:29:57.546Z"}
{"level":"error","message":"Error al restaurar documento de papelera: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveLength\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected length: \u001b[32m1\u001b[39m\nReceived length: \u001b[31m0\u001b[39m\nReceived array:  \u001b[31m[]\u001b[39m","timestamp":"2025-03-22T03:29:57.548Z"}
{"level":"debug","message":"Executing query [m8jni0byj3y37703kbd]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:29:57.550Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jni0byj3y37703kbd]","params":"[1,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:29:57.552Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:29:57.552Z"}
{"level":"debug","message":"Executing query [m8jni0c1f89i0uwbnef]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[2,888,2,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T03:29:57.553Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:29:57.553Z"}
{"level":"debug","message":"Executing query [m8jni0c4xcvb5f33e]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:29:57.556Z"}
{"level":"debug","message":"Executing query [m8jni0c7lhd9h36qel]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[2,\"DOCUMENTO\",2,\"ELIMINAR\"]","timestamp":"2025-03-22T03:29:57.559Z"}
{"level":"debug","message":"Executing query [m8jni0c975ydbcin1ow]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[2]","timestamp":"2025-03-22T03:29:57.562Z"}
{"level":"debug","message":"Executing query [m8jni0cdypokkhhp1t]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T03:29:57.565Z"}
{"level":"debug","message":"Executing query [m8jni0cgsnl5ww7vmqo]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T03:29:57.568Z"}
{"level":"debug","message":"Executing query [m8jni0ck5tll6z6pq6]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[2]","timestamp":"2025-03-22T03:29:57.572Z"}
{"level":"debug","message":"Executing query [m8jni0cniu9pxdqkhc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:29:57.575Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:29:57.576Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:29:59.448Z"}
{"duration":"7ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T03:29:59.574Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T03:29:59.581Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:29:59.589Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T03:29:59.592Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:30:00.241Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:30:00.291Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T03:30:00.292Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:30:00.493Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T03:30:00.538Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:30:00.574Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T03:30:00.588Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:30:00.628Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:30:00.734Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:30:00.743Z"}
{"level":"debug","message":"Executing query [m8jni2sp60iy5u02o6v]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:30:00.745Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:30:00.754Z"}
{"level":"debug","message":"Executing query [m8jni2szmewgae4dqwj]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T03:30:00.755Z"}
{"level":"debug","message":"Executing query [m8jni2t0rm8qlnue0nc]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T03:30:00.757Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T03:30:00.758Z"}
{"level":"debug","message":"Executing query [m8jni2t3bk7wenfjb8t]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:30:00.759Z"}
{"level":"debug","message":"Executing query [m8jni2t4i3gvhkuvekc]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:30:00.760Z"}
{"level":"debug","message":"Executing query [m8jni2t5sxfci8sd2c]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:30:00.761Z"}
{"level":"debug","message":"Executing query [m8jni2t67ydgoxw49p8]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T03:30:00.762Z"}
{"level":"debug","message":"Executing query [m8jni2ta4b7xo9ohasq]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T03:30:00.766Z"}
{"level":"debug","message":"Executing query [m8jni2tcl78rlci9zoi]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:30:00.768Z"}
{"level":"debug","message":"Executing query [m8jni2teitdac912ov]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",3]","timestamp":"2025-03-22T03:30:00.770Z"}
{"level":"debug","message":"Executing query [m8jni2tg77zq9hphmsj]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T03:30:00.772Z"}
{"level":"debug","message":"Executing query [m8jni2tisc542ij08q]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T03:30:00.774Z"}
{"level":"debug","message":"Executing query [m8jni2tkp513rjxucbo]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T03:30:00.776Z"}
{"level":"debug","message":"Executing query [m8jni2tmvxd5s1y4zcd]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:30:00.778Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:30:00.779Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:30:01.066Z"}
{"level":"debug","message":"Executing query [m8jni31phgh2j0bnklc]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:30:01.069Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:30:01.085Z"}
{"level":"debug","message":"Executing query [m8jni327znbin415pue]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T03:30:01.087Z"}
{"level":"debug","message":"Executing query [m8jni32aei4kdyfy21c]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742614201069\"]","timestamp":"2025-03-22T03:30:01.090Z"}
{"level":"debug","message":"Executing query [m8jni32c8w86ewqd4vx]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742614201069\",\"TEST-OFICIO-1742614201069\",3870,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:30:01.092Z"}
{"level":"debug","message":"Executing query [m8jni32h94h6ypkj7nq]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.097Z"}
{"level":"debug","message":"Executing query [m8jni32mscufjgvnrgh]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742614201069\"]","timestamp":"2025-03-22T03:30:01.102Z"}
{"level":"debug","message":"Executing query [m8jni32pgvieszix14h]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",3]","timestamp":"2025-03-22T03:30:01.105Z"}
{"level":"debug","message":"Executing query [m8jni32t6h1frkjn9rf]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.109Z"}
{"level":"debug","message":"Executing query [m8jni32x4pg6s6eguqp]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.113Z"}
{"level":"debug","message":"Executing query [m8jni3319hl6yw8p75k]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.117Z"}
{"level":"debug","message":"Executing query [m8jni3334oevfd5teu7]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.119Z"}
{"level":"debug","message":"Executing query [m8jni336nzvrinf50j]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.122Z"}
{"level":"debug","message":"Executing query [m8jni338lhn06upcqeq]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742614201124\",\"TEST-SP-OFICIO-1742614201124\",5041,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T03:30:01.124Z"}
{"level":"debug","message":"Executing query [m8jni33dl9tz5fetmi]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742614201124\"]","timestamp":"2025-03-22T03:30:01.129Z"}
{"level":"debug","message":"Executing query [m8jni33fg29u6cykcmf]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742614201124\"]","timestamp":"2025-03-22T03:30:01.131Z"}
{"level":"debug","message":"Executing query [m8jni33i8qwih2kd1kx]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:30:01.134Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:30:01.136Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:30:01.240Z"}
{"level":"debug","message":"Executing query [m8jni36jh30gn8z7i1]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:30:01.243Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:30:01.255Z"}
{"level":"debug","message":"Executing query [m8jni36wzq5bgw9m8pm]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T03:30:01.256Z"}
{"level":"debug","message":"Executing query [m8jni36yg6e93fy7u09]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742614201242\"]","timestamp":"2025-03-22T03:30:01.258Z"}
{"level":"debug","message":"Executing query [m8jni36zcp6aflrfamo]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742614201242\",\"TEST-OFI-FORENSE-1742614201242\",8633,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742614201242\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:30:01.259Z"}
{"level":"debug","message":"Executing query [m8jni374tffr04pkms]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.264Z"}
{"level":"debug","message":"Executing query [m8jni377c35cfya7bs8]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742614201242\"]","timestamp":"2025-03-22T03:30:01.267Z"}
{"level":"debug","message":"Executing query [m8jni379kr6zt9xlg1m]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",3]","timestamp":"2025-03-22T03:30:01.269Z"}
{"level":"debug","message":"Executing query [m8jni37bd49zgnbt6zb]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.271Z"}
{"level":"debug","message":"Executing query [m8jni37dspsyxzfuirn]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.273Z"}
{"level":"debug","message":"Executing query [m8jni37g5b7wg9z9vmi]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.276Z"}
{"level":"debug","message":"Executing query [m8jni37iujn3td9t5eq]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.278Z"}
{"level":"debug","message":"Executing query [m8jni37lfe165pr7yrl]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.281Z"}
{"level":"debug","message":"Executing query [m8jni37nt0rukvs6o0s]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742614201283\",\"TEST-SP-OFI-FORENSE-1742614201283\",6450,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T03:30:01.283Z"}
{"level":"debug","message":"Executing query [m8jni37qbnczu4jizm]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742614201283\"]","timestamp":"2025-03-22T03:30:01.286Z"}
{"level":"debug","message":"Executing query [m8jni37sq69vdnc6x9s]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742614201283\"]","timestamp":"2025-03-22T03:30:01.288Z"}
{"level":"debug","message":"Executing query [m8jni37v7xaylmhhqg2]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:30:01.291Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:30:01.292Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:30:01.398Z"}
{"level":"debug","message":"Executing query [m8jni3axmmn5gfu59mg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:30:01.401Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:30:01.412Z"}
{"level":"debug","message":"Executing query [m8jni3b94orae857txc]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T03:30:01.413Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T03:30:01.415Z"}
{"level":"debug","message":"Executing query [m8jni3bbt8scy8f7hrh]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T03:30:01.415Z"}
{"level":"debug","message":"Executing query [m8jni3bd2hhot7hk68h]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T03:30:01.417Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-22T03:30:01.418Z"}
{"level":"debug","message":"Executing query [m8jni3bfvmbhk8lsf39]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T03:30:01.419Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T03:30:01.421Z"}
{"level":"debug","message":"Executing query [m8jni3bmf1mefc9kztd]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T03:30:01.426Z"}
{"level":"debug","message":"Executing query [m8jni3bpw79zfo10yl]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T03:30:01.429Z"}
{"level":"debug","message":"Executing query [m8jni3brdqf63hpjol4]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T03:30:01.431Z"}
{"level":"debug","message":"Executing query [m8jni3bu4u6qjm9whog]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:30:01.434Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:30:01.534Z"}
{"level":"debug","message":"Executing query [m8jni3ep1n0bvtr8cos]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:30:01.537Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:30:01.554Z"}
{"level":"debug","message":"Executing query [m8jni3f98kuvfjkbf3s]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742614201536\"]","timestamp":"2025-03-22T03:30:01.557Z"}
{"level":"debug","message":"Executing query [m8jni3fbxm9bftyal4]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742614201536\"]","timestamp":"2025-03-22T03:30:01.559Z"}
{"level":"debug","message":"Executing query [m8jni3fd8dz6lafrv6l]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742614201536\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:30:01.561Z"}
{"level":"debug","message":"Executing query [m8jni3fi7dhp1vl2ze]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T03:30:01.566Z"}
{"level":"debug","message":"Executing query [m8jni3flds1c5ocem7i]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742614201536\"]","timestamp":"2025-03-22T03:30:01.569Z"}
{"level":"debug","message":"Executing query [m8jni3fn6bjwprfiqat]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1001]","timestamp":"2025-03-22T03:30:01.571Z"}
{"level":"debug","message":"Executing query [m8jni3fq8371xusp4lc]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T03:30:01.574Z"}
{"level":"debug","message":"Executing query [m8jni3fsm2dd9gex56k]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T03:30:01.576Z"}
{"level":"debug","message":"Executing query [m8jni3fwktbn594prh8]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T03:30:01.580Z"}
{"level":"debug","message":"Executing query [m8jni3fxle6vq1hyqb]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T03:30:01.582Z"}
{"level":"debug","message":"Executing query [m8jni3fzqk8naut1ksr]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T03:30:01.583Z"}
{"level":"debug","message":"Executing query [m8jni3g354dhi7yayzq]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T03:30:01.587Z"}
{"level":"debug","message":"Executing query [m8jni3g4q2g2kvzpfwa]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T03:30:01.588Z"}
{"level":"debug","message":"Executing query [m8jni3g6r0bxyh6t6gi]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:30:01.590Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:30:01.591Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:30:01.689Z"}
{"level":"debug","message":"Executing query [m8jni3iz3x256vym76t]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:30:01.691Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:30:01.700Z"}
{"level":"debug","message":"Executing query [m8jni3jazz1qt6kf8]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T03:30:01.702Z"}
{"level":"debug","message":"Executing query [m8jni3jbbsarycg2w9j]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742614201691\"]","timestamp":"2025-03-22T03:30:01.703Z"}
{"level":"debug","message":"Executing query [m8jni3jcho3tktdh4fm]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742614201691\",\"TEST-OFI-QUIMICA-1742614201691\",8983,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:30:01.704Z"}
{"level":"debug","message":"Executing query [m8jni3jh4yiw5xy5cax]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T03:30:01.709Z"}
{"level":"debug","message":"Executing query [m8jni3jkrn8ow5qpomg]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742614201691\"]","timestamp":"2025-03-22T03:30:01.712Z"}
{"level":"debug","message":"Executing query [m8jni3jmfvmzwcw99z6]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",2]","timestamp":"2025-03-22T03:30:01.714Z"}
{"level":"debug","message":"Executing query [m8jni3jpi0svtaifb39]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T03:30:01.717Z"}
{"level":"debug","message":"Executing query [m8jni3jqf7b8y0ci5g5]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T03:30:01.718Z"}
{"level":"debug","message":"Executing query [m8jni3jtf5ccg63tti]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T03:30:01.721Z"}
{"level":"debug","message":"Executing query [m8jni3jultwdw6s1rjf]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T03:30:01.722Z"}
{"level":"debug","message":"Executing query [m8jni3jwe2iybiydlvc]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T03:30:01.724Z"}
{"level":"debug","message":"Executing query [m8jni3jygb7ogfh0dn5]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:30:01.726Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:30:01.727Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:30:01.825Z"}
{"level":"debug","message":"Executing query [m8jni3mtsj6ir7eunb9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:30:01.829Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:30:01.849Z"}
{"level":"debug","message":"Executing query [m8jni3ngw4ddx4p2v1]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742614201828\"]","timestamp":"2025-03-22T03:30:01.852Z"}
{"level":"debug","message":"Executing query [m8jni3nirym4ku1juu]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742614201828\",true]","timestamp":"2025-03-22T03:30:01.854Z"}
{"level":"debug","message":"Executing query [m8jni3nrf8r6e4dhbek]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.863Z"}
{"level":"debug","message":"Executing query [m8jni3nvazqznns2b2]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742614201828\"]","timestamp":"2025-03-22T03:30:01.867Z"}
{"level":"debug","message":"Executing query [m8jni3nx8sjvxp9pgwl]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",3]","timestamp":"2025-03-22T03:30:01.869Z"}
{"level":"debug","message":"Executing query [m8jni3o1hqiwrfeyw7]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.873Z"}
{"level":"debug","message":"Executing query [m8jni3o4q4u88w51j2]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.876Z"}
{"level":"debug","message":"Executing query [m8jni3ofxpivvhss8sr]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.887Z"}
{"level":"debug","message":"Executing query [m8jni3oid8cew5tlpew]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.890Z"}
{"level":"debug","message":"Executing query [m8jni3olen810yq0vjv]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.893Z"}
{"level":"debug","message":"Executing query [m8jni3oobqp2599f58n]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-22T03:30:01.896Z"}
{"level":"debug","message":"Executing query [m8jni3orc2zcifd29t]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T03:30:01.899Z"}
{"level":"debug","message":"Executing query [m8jni3ou1801j1cn9qq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:30:01.902Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:30:01.904Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:30:02.010Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:30:02.025Z"}
{"level":"debug","message":"Executing query [m8jni3sbixh5su8qn5]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T03:30:02.027Z"}
{"level":"debug","message":"Executing query [m8jni3scja6sfo9y7a8]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T03:30:02.028Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jni3scja6sfo9y7a8]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T03:30:02.030Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:30:02.032Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T03:30:02.110Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T03:30:02.211Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T03:30:02.328Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T03:30:02.329Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T03:30:02.330Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T03:30:02.330Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T03:30:02.331Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T03:30:02.331Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:30:22.285Z"}
{"level":"debug","message":"Executing query [m8jnijfqmkmud4ujizs]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:30:22.310Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:30:22.345Z"}
{"level":"debug","message":"Executing query [m8jnijgrxx68z9b4iu]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T03:30:22.348Z"}
{"level":"debug","message":"Executing query [m8jnijgurc4d8eqcbh]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T03:30:22.350Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T03:30:22.351Z"}
{"level":"debug","message":"Executing query [m8jnijgwkuu1g2pwex]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T03:30:22.352Z"}
{"level":"debug","message":"Executing query [m8jnijgycrsjwhz2qn]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T03:30:22.354Z"}
{"level":"debug","message":"Executing query [m8jnijh171vdadq1key]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:30:22.357Z"}
{"level":"debug","message":"Executing query [m8jnijh8tjgou9whag]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[3]","timestamp":"2025-03-22T03:30:22.364Z"}
{"level":"debug","message":"Executing query [m8jnijhbiv1k21aq2l]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[3]","timestamp":"2025-03-22T03:30:22.367Z"}
{"level":"debug","message":"Executing query [m8jnijhfhjsjcae59w]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",3]","timestamp":"2025-03-22T03:30:22.371Z"}
{"level":"debug","message":"Executing query [m8jnijhjqef1axdg0wj]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[3]","timestamp":"2025-03-22T03:30:22.375Z"}
{"level":"debug","message":"Executing query [m8jnijhlibgqeumnp2]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[3]","timestamp":"2025-03-22T03:30:22.377Z"}
{"level":"debug","message":"Executing query [m8jnijhozcw1yzse36]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[3]","timestamp":"2025-03-22T03:30:22.380Z"}
{"level":"debug","message":"Executing query [m8jnijhq9umv89nq0ar]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:30:22.382Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:30:22.384Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:30:35.988Z"}
{"level":"debug","message":"Executing query [m8jniu0a8a8hc23hf46]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:30:36.010Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:30:36.045Z"}
{"level":"debug","message":"Executing query [m8jniu1brisak0ywzoi]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = ?","params":"[888]","timestamp":"2025-03-22T03:30:36.048Z"}
{"level":"debug","message":"Executing query [m8jniu1fh9qm47at0w]: SELECT IDRol FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T03:30:36.051Z"}
{"level":"debug","message":"Executing query [m8jniu1he8e9yfy12zw]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TESTPAP123\",\"Usuario\",\"Papelera\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","timestamp":"2025-03-22T03:30:36.053Z"}
{"level":"debug","message":"Executing query [m8jniu1m4vhjrgqd073]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T03:30:36.058Z"}
{"level":"debug","message":"Executing query [m8jniu1pq7coitvpht]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[4,888,4,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T03:30:36.061Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:30:36.061Z"}
{"level":"info","message":"Creado usuario ID: 4, área ID: 888, rol ID: 888, documento ID: 3 para pruebas de papelera","timestamp":"2025-03-22T03:30:36.065Z"}
{"level":"debug","message":"Executing query [m8jniu1v9so9hihxu3s]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,4,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:30:36.067Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jniu1v9so9hihxu3s]","params":"[3,4,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:30:36.070Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:30:36.071Z"}
{"level":"debug","message":"Executing query [m8jniu24qq4l0qdur]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,4,\"RESTAURAR\"]","timestamp":"2025-03-22T03:30:36.076Z"}
{"level":"debug","message":"Executing query [m8jniu25mfmt0oqgqjb]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T03:30:36.077Z"}
{"level":"debug","message":"Executing query [m8jniu27eufrgj9a8i8]: SELECT * FROM DocumentoLog WHERE IDDocumento = ? AND TipoAccion = ?","params":"[3,\"RESTAURAR_PAPELERA\"]","timestamp":"2025-03-22T03:30:36.079Z"}
{"level":"error","message":"Error al restaurar documento de papelera: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveLength\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected length: \u001b[32m1\u001b[39m\nReceived length: \u001b[31m0\u001b[39m\nReceived array:  \u001b[31m[]\u001b[39m","timestamp":"2025-03-22T03:30:36.082Z"}
{"level":"debug","message":"Executing query [m8jniu2cysd6f4kanc8]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,4,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:30:36.084Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jniu2cysd6f4kanc8]","params":"[3,4,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:30:36.086Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:30:36.087Z"}
{"level":"debug","message":"Executing query [m8jniu2g9z8gvfk9sol]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[4,888,4,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T03:30:36.088Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:30:36.088Z"}
{"level":"debug","message":"Executing query [m8jniu2jvw84gj3ecl]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:30:36.091Z"}
{"level":"debug","message":"Executing query [m8jniu2nb3rciug0js]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[4,\"DOCUMENTO\",4,\"ELIMINAR\"]","timestamp":"2025-03-22T03:30:36.095Z"}
{"level":"debug","message":"Executing query [m8jniu2q19lnl3musr]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[4]","timestamp":"2025-03-22T03:30:36.098Z"}
{"level":"debug","message":"Executing query [m8jniu2ttbttgagrbn]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T03:30:36.101Z"}
{"level":"debug","message":"Executing query [m8jniu2w0cs8ghyihahp]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T03:30:36.104Z"}
{"level":"debug","message":"Executing query [m8jniu2yo0onffgfaf]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-22T03:30:36.106Z"}
{"level":"debug","message":"Executing query [m8jniu31l5mf4u0o66p]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:30:36.109Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:30:36.111Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:32:03.072Z"}
{"level":"debug","message":"Executing query [m8jnkp7bkh646ugi56o]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:32:03.095Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:32:03.130Z"}
{"level":"debug","message":"Executing query [m8jnkp8cwl8rl21khd]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T03:32:03.132Z"}
{"level":"debug","message":"Executing query [m8jnkp8fcrq78cod4rl]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = ?","params":"[888]","timestamp":"2025-03-22T03:32:03.135Z"}
{"level":"debug","message":"Executing query [m8jnkp8hnodf5jtr9f9]: SELECT IDRol FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T03:32:03.137Z"}
{"level":"debug","message":"Executing query [m8jnkp8iz9w5g11rfoo]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TESTPAP123\",\"Usuario\",\"Papelera\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","timestamp":"2025-03-22T03:32:03.138Z"}
{"level":"debug","message":"Executing query [m8jnkp8nd9sntgi9l1i]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T03:32:03.143Z"}
{"level":"debug","message":"Executing query [m8jnkp8qh2zw4qx6zno]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[5,888,5,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T03:32:03.146Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:32:03.146Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 5, Área ID: 888, Rol ID: 888, Documento ID: 5","timestamp":"2025-03-22T03:32:03.149Z"}
{"level":"debug","message":"Executing query [m8jnkp8vytj837kur77]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[5,5,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:32:03.151Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnkp8vytj837kur77]","params":"[5,5,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:32:03.155Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:32:03.156Z"}
{"level":"debug","message":"Executing query [m8jnkp95usxc0kaif9f]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[5,5,\"RESTAURAR\"]","timestamp":"2025-03-22T03:32:03.161Z"}
{"level":"debug","message":"Executing query [m8jnkp96r1irlwz7og]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[5]","timestamp":"2025-03-22T03:32:03.162Z"}
{"level":"debug","message":"Executing query [m8jnkp98dhm8p0q9zif]: SELECT * FROM DocumentoLog WHERE IDDocumento = ? AND TipoAccion = ?","params":"[5,\"RESTAURAR_PAPELERA\"]","timestamp":"2025-03-22T03:32:03.164Z"}
{"level":"error","message":"Error al restaurar documento de papelera: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveLength\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected length: \u001b[32m1\u001b[39m\nReceived length: \u001b[31m0\u001b[39m\nReceived array:  \u001b[31m[]\u001b[39m","timestamp":"2025-03-22T03:32:03.166Z"}
{"level":"debug","message":"Executing query [m8jnkp9dlzqzbq14g1a]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[5,5,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:32:03.169Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnkp9dlzqzbq14g1a]","params":"[5,5,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:32:03.171Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:32:03.172Z"}
{"level":"debug","message":"Executing query [m8jnkp9hfbcbne2ixe8]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[5,888,5,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T03:32:03.173Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:32:03.173Z"}
{"level":"debug","message":"Executing query [m8jnkp9l6ccx66pq2pt]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:32:03.177Z"}
{"level":"debug","message":"Executing query [m8jnkp9oz2nz0oeoijj]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[5,\"DOCUMENTO\",6,\"ELIMINAR\"]","timestamp":"2025-03-22T03:32:03.180Z"}
{"level":"debug","message":"Executing query [m8jnkp9r3dmyk78a4nh]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[6]","timestamp":"2025-03-22T03:32:03.183Z"}
{"level":"debug","message":"Executing query [m8jnkp9tlt7uvdh1a1]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T03:32:03.185Z"}
{"level":"debug","message":"Executing query [m8jnkp9wx7ufvz8ycd]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-22T03:32:03.188Z"}
{"level":"debug","message":"Executing query [m8jnkp9zfauxmmgddg6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:32:03.191Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:32:03.192Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:33:01.638Z"}
{"level":"debug","message":"Executing query [m8jnlye6c56tsm98cnj]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:33:01.663Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:33:01.697Z"}
{"level":"debug","message":"Executing query [m8jnlyf8gfw74bzjczj]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T03:33:01.700Z"}
{"level":"debug","message":"Executing query [m8jnlyfaatvzec4jwiq]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T03:33:01.702Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T03:33:01.704Z"}
{"level":"debug","message":"Executing query [m8jnlyfchwobe8tjzif]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T03:33:01.704Z"}
{"level":"debug","message":"Executing query [m8jnlyfega1oaijgiib]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T03:33:01.706Z"}
{"level":"debug","message":"Executing query [m8jnlyfgft3hk9anzy5]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:33:01.708Z"}
{"level":"debug","message":"Executing query [m8jnlyfnqfwirv16l6n]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[6]","timestamp":"2025-03-22T03:33:01.715Z"}
{"level":"debug","message":"Executing query [m8jnlyfqstkl1r1e3d9]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[6]","timestamp":"2025-03-22T03:33:01.718Z"}
{"level":"debug","message":"Executing query [m8jnlyftx4hvmlfged]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",6]","timestamp":"2025-03-22T03:33:01.721Z"}
{"level":"debug","message":"Executing query [m8jnlyfx3wjka7s041p]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[6]","timestamp":"2025-03-22T03:33:01.725Z"}
{"level":"debug","message":"Executing query [m8jnlyg00a9qlo7jwjbh]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[6]","timestamp":"2025-03-22T03:33:01.728Z"}
{"level":"debug","message":"Executing query [m8jnlyg3t61wuytmzy]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[6]","timestamp":"2025-03-22T03:33:01.731Z"}
{"level":"debug","message":"Executing query [m8jnlyg5mzox5au5cge]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:33:01.733Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:33:01.734Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:36:47.966Z"}
{"level":"debug","message":"Executing query [m8jnqt11z677mtlng9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:36:47.989Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:36:48.027Z"}
{"level":"debug","message":"Executing query [m8jnqt24yazhw52p2v]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T03:36:48.028Z"}
{"level":"debug","message":"Executing query [m8jnqt29a5egkhwtc4l]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = ?","params":"[888]","timestamp":"2025-03-22T03:36:48.033Z"}
{"level":"debug","message":"Executing query [m8jnqt2br5030aobfob]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Área Papelera\",\"TEST-PAPELERA\",\"PRUEBA\",1]","timestamp":"2025-03-22T03:36:48.035Z"}
{"level":"debug","message":"Executing query [m8jnqt2gezn36ovu7mb]: SELECT IDRol FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T03:36:48.040Z"}
{"level":"debug","message":"Executing query [m8jnqt2irgxlmtwoyz]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Rol Papelera\",\"Rol para pruebas de papelera\",2,4]","timestamp":"2025-03-22T03:36:48.042Z"}
{"level":"debug","message":"Executing query [m8jnqt2mlj74kex4jn]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TESTPAP123\",\"Usuario\",\"Papelera\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","timestamp":"2025-03-22T03:36:48.046Z"}
{"level":"debug","message":"Executing query [m8jnqt2p57rz6fndbfe]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T03:36:48.049Z"}
{"level":"debug","message":"Executing query [m8jnqt2tu3wenf8c1n9]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T03:36:48.053Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:36:48.053Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 1","timestamp":"2025-03-22T03:36:48.058Z"}
{"level":"debug","message":"Executing query [m8jnqt30fc2pph77e75]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:36:48.060Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnqt30fc2pph77e75]","params":"[1,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:36:48.064Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:36:48.065Z"}
{"level":"debug","message":"Executing query [m8jnqt39b9mvigb59x]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,1,\"RESTAURAR\"]","timestamp":"2025-03-22T03:36:48.069Z"}
{"level":"debug","message":"Executing query [m8jnqt3ejeobtfa82z]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T03:36:48.074Z"}
{"level":"debug","message":"Executing query [m8jnqt3f5h454jjlm3n]: SELECT * FROM DocumentoLog WHERE IDDocumento = ? AND TipoAccion = ?","params":"[1,\"RESTAURAR_PAPELERA\"]","timestamp":"2025-03-22T03:36:48.075Z"}
{"level":"debug","message":"Executing query [m8jnqt3ieb7gnerqj47]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:36:48.078Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnqt3ieb7gnerqj47]","params":"[1,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:36:48.080Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:36:48.081Z"}
{"level":"debug","message":"Executing query [m8jnqt3mxajtaj5oylj]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T03:36:48.082Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:36:48.082Z"}
{"level":"debug","message":"Executing query [m8jnqt3p3h3eyv9dkxd]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:36:48.085Z"}
{"level":"debug","message":"Executing query [m8jnqt3sqau12r2yo8]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",2,\"ELIMINAR\"]","timestamp":"2025-03-22T03:36:48.088Z"}
{"level":"debug","message":"Executing query [m8jnqt3uo7eys9q7i]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[2]","timestamp":"2025-03-22T03:36:48.090Z"}
{"level":"debug","message":"Executing query [m8jnqt3xcnow5o1sr7]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T03:36:48.093Z"}
{"level":"debug","message":"Executing query [m8jnqt40bdd03sit7b]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-22T03:36:48.096Z"}
{"level":"debug","message":"Executing query [m8jnqt43y88ezi4jt3]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:36:48.099Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:36:48.100Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:38:35.081Z"}
{"level":"debug","message":"Executing query [m8jnt3ohwqmevym832s]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:38:35.105Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:38:35.142Z"}
{"level":"debug","message":"Executing query [m8jnt3pl9um8q9h056b]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T03:38:35.145Z"}
{"level":"debug","message":"Executing query [m8jnt3ppu65n5rl1e4]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = ?","params":"[888]","timestamp":"2025-03-22T03:38:35.149Z"}
{"level":"debug","message":"Executing query [m8jnt3pskdq6wsbkas]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Área Papelera\",\"TEST-PAPELERA\",\"PRUEBA\",1]","timestamp":"2025-03-22T03:38:35.152Z"}
{"level":"debug","message":"Executing query [m8jnt3pyszny27o4sh]: SELECT IDRol FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T03:38:35.158Z"}
{"level":"debug","message":"Executing query [m8jnt3pz8hipgp0t0v]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Rol Papelera\",\"Rol para pruebas de papelera\",2,4]","timestamp":"2025-03-22T03:38:35.159Z"}
{"level":"debug","message":"Executing query [m8jnt3q4t7ga6p0z34]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TESTPAP123\",\"Usuario\",\"Papelera\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","timestamp":"2025-03-22T03:38:35.164Z"}
{"level":"debug","message":"Executing query [m8jnt3q7nht1em4zpp]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T03:38:35.167Z"}
{"level":"debug","message":"Executing query [m8jnt3qbgthxaq2ee1u]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T03:38:35.171Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:38:35.171Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 1","timestamp":"2025-03-22T03:38:35.176Z"}
{"level":"debug","message":"Executing query [m8jnt3qjz6bnus478xb]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:38:35.179Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnt3qjz6bnus478xb]","params":"[1,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:38:35.183Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:38:35.183Z"}
{"level":"debug","message":"Executing query [m8jnt3qsdzywgaku5jr]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,1,\"RESTAURAR\"]","timestamp":"2025-03-22T03:38:35.188Z"}
{"level":"debug","message":"Executing query [m8jnt3qxr0kiwiwc92]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T03:38:35.193Z"}
{"level":"debug","message":"Executing query [m8jnt3qz2dkhf2tbxo5]: SELECT * FROM DocumentoLog WHERE IDDocumento = ? AND TipoAccion = ?","params":"[1,\"RESTAURAR_PAPELERA\"]","timestamp":"2025-03-22T03:38:35.195Z"}
{"level":"debug","message":"Executing query [m8jnt3r28yn0sqiqou3]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:38:35.198Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnt3r28yn0sqiqou3]","params":"[1,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:38:35.200Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:38:35.201Z"}
{"level":"debug","message":"Executing query [m8jnt3r6fcu0y0wwyvj]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T03:38:35.202Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:38:35.202Z"}
{"level":"debug","message":"Executing query [m8jnt3raiyeqv2we5oq]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:38:35.206Z"}
{"level":"debug","message":"Executing query [m8jnt3rdkeh9azu049f]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",2,\"ELIMINAR\"]","timestamp":"2025-03-22T03:38:35.209Z"}
{"level":"debug","message":"Executing query [m8jnt3rggkpehxlnkyb]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[2]","timestamp":"2025-03-22T03:38:35.212Z"}
{"level":"debug","message":"Executing query [m8jnt3rinfohvt4lwpa]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T03:38:35.214Z"}
{"level":"debug","message":"Executing query [m8jnt3rmnf03qeit7s]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-22T03:38:35.218Z"}
{"level":"debug","message":"Executing query [m8jnt3rq2cxrdag0lwp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:38:35.222Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:38:35.223Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:39:55.003Z"}
{"level":"debug","message":"Executing query [m8jnutcjx4ki8ntths9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:39:55.027Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:39:55.067Z"}
{"level":"debug","message":"Executing query [m8jnutdqhz3kkk62z1b]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T03:39:55.070Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T03:39:55.074Z"}
{"level":"debug","message":"Executing query [m8jnutdvtem92dzcso]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T03:39:55.075Z"}
{"level":"debug","message":"Executing query [m8jnute1s5w343h6cx9]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[2,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T03:39:55.081Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:39:55.081Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 3","timestamp":"2025-03-22T03:39:55.085Z"}
{"level":"debug","message":"Executing query [m8jnute783surddeirf]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:39:55.087Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnute783surddeirf]","params":"[3,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:39:55.091Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T03:39:55.091Z"}
{"level":"debug","message":"Executing query [m8jnutectvxlcn6zpb]: UPDATE Documento SET Estado = ? WHERE IDDocumento = ?","params":"[\"PAPELERA\",3]","timestamp":"2025-03-22T03:39:55.092Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnutectvxlcn6zpb]","params":"[\"PAPELERA\",3]","query":"UPDATE Documento SET Estado = ? WHERE IDDocumento = ?","timestamp":"2025-03-22T03:39:55.094Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:39:55.094Z"}
{"level":"debug","message":"Executing query [m8jnuteijwi40axu7]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,1,\"RESTAURAR\"]","timestamp":"2025-03-22T03:39:55.098Z"}
{"level":"debug","message":"Executing query [m8jnuteofj0grnsiini]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T03:39:55.104Z"}
{"level":"debug","message":"Executing query [m8jnuterc8axquxfbia]: SELECT COUNT(*) AS total FROM DocumentoLog WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T03:39:55.107Z"}
{"level":"debug","message":"Executing query [m8jnuteu21pnznsy2kc]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:39:55.110Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnuteu21pnznsy2kc]","params":"[3,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:39:55.113Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T03:39:55.114Z"}
{"level":"debug","message":"Executing query [m8jnuteyotlarqa4m4]: UPDATE Documento SET Estado = ? WHERE IDDocumento = ?","params":"[\"PAPELERA\",3]","timestamp":"2025-03-22T03:39:55.114Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnuteyotlarqa4m4]","params":"[\"PAPELERA\",3]","query":"UPDATE Documento SET Estado = ? WHERE IDDocumento = ?","timestamp":"2025-03-22T03:39:55.116Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:39:55.117Z"}
{"level":"debug","message":"Executing query [m8jnutf27nnimxcx7x6]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[2,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T03:39:55.118Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:39:55.118Z"}
{"level":"debug","message":"Executing query [m8jnutf56ms1d1sir2i]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:39:55.121Z"}
{"level":"debug","message":"Executing query [m8jnutf8w8oy7qlx9z]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",4,\"ELIMINAR\"]","timestamp":"2025-03-22T03:39:55.124Z"}
{"level":"debug","message":"Executing query [m8jnutfbp8cinh92kf]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[4]","timestamp":"2025-03-22T03:39:55.127Z"}
{"level":"debug","message":"Executing query [m8jnutffyemyvnm9a5]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T03:39:55.131Z"}
{"level":"debug","message":"Executing query [m8jnutfjgo41ftpg2se]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T03:39:55.135Z"}
{"level":"debug","message":"Executing query [m8jnutfmvfg7qv0igw]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:39:55.138Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:39:55.140Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:41:10.770Z"}
{"level":"debug","message":"Executing query [m8jnwft4kvqeuuf8aps]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:41:10.792Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:41:10.826Z"}
{"level":"debug","message":"Executing query [m8jnwfu47eelarad16u]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T03:41:10.828Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T03:41:10.831Z"}
{"level":"debug","message":"Executing query [m8jnwfu8wa1i1kgzlin]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T03:41:10.832Z"}
{"level":"debug","message":"Executing query [m8jnwfudh5eieo7i42]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[3,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T03:41:10.837Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:41:10.837Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 5","timestamp":"2025-03-22T03:41:10.841Z"}
{"level":"debug","message":"Executing query [m8jnwfujqyamjanhr3]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[5,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:41:10.843Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnwfujqyamjanhr3]","params":"[5,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:41:10.847Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T03:41:10.847Z"}
{"level":"debug","message":"Executing query [m8jnwfuojnsyoffn4ef]: UPDATE Documento SET Estado = ? WHERE IDDocumento = ?","params":"[\"PAPELERA\",5]","timestamp":"2025-03-22T03:41:10.848Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnwfuojnsyoffn4ef]","params":"[\"PAPELERA\",5]","query":"UPDATE Documento SET Estado = ? WHERE IDDocumento = ?","timestamp":"2025-03-22T03:41:10.850Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:41:10.850Z"}
{"level":"debug","message":"Executing query [m8jnwfuvkknvktjum2]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[5,1,\"RESTAURAR\"]","timestamp":"2025-03-22T03:41:10.855Z"}
{"level":"debug","message":"Executing query [m8jnwfuz705rf5mc4vm]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[5]","timestamp":"2025-03-22T03:41:10.859Z"}
{"level":"debug","message":"Executing query [m8jnwfv1rdxyno2n93h]: SELECT COUNT(*) AS total FROM DocumentoLog WHERE IDDocumento = ?","params":"[5]","timestamp":"2025-03-22T03:41:10.861Z"}
{"level":"debug","message":"Executing query [m8jnwfv40rmr6lduzzef]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[5,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:41:10.864Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnwfv40rmr6lduzzef]","params":"[5,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:41:10.866Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T03:41:10.867Z"}
{"level":"debug","message":"Executing query [m8jnwfv7s7mnsb0hjm]: UPDATE Documento SET Estado = ? WHERE IDDocumento = ?","params":"[\"PAPELERA\",5]","timestamp":"2025-03-22T03:41:10.867Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnwfv7s7mnsb0hjm]","params":"[\"PAPELERA\",5]","query":"UPDATE Documento SET Estado = ? WHERE IDDocumento = ?","timestamp":"2025-03-22T03:41:10.869Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:41:10.869Z"}
{"level":"debug","message":"Executing query [m8jnwfvbvs0f9ojbvg9]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[3,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T03:41:10.871Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:41:10.871Z"}
{"level":"debug","message":"Executing query [m8jnwfveewfjrnluzxh]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:41:10.874Z"}
{"level":"debug","message":"Executing query [m8jnwfvh48psjpb8eiu]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",6,\"ELIMINAR\"]","timestamp":"2025-03-22T03:41:10.877Z"}
{"level":"debug","message":"Executing query [m8jnwfvjr83y72t20d]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[6]","timestamp":"2025-03-22T03:41:10.879Z"}
{"level":"debug","message":"Executing query [m8jnwfvm0utntqubd31]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T03:41:10.882Z"}
{"level":"debug","message":"Executing query [m8jnwfvpxefm2bccql]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-22T03:41:10.885Z"}
{"level":"debug","message":"Executing query [m8jnwfvs69htyv627jb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:41:10.888Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:41:10.889Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:43:07.055Z"}
{"level":"debug","message":"Executing query [m8jnyxj9c96ihs22nyf]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:43:07.078Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:43:07.110Z"}
{"level":"debug","message":"Executing query [m8jnyxk9zwt5l3jr13j]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T03:43:07.113Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T03:43:07.116Z"}
{"level":"debug","message":"Executing query [m8jnyxkdnoezsur2p8]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T03:43:07.117Z"}
{"level":"debug","message":"Executing query [m8jnyxkj1koiiv7j76i]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[4,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T03:43:07.123Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:43:07.123Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 7","timestamp":"2025-03-22T03:43:07.127Z"}
{"level":"debug","message":"Executing query [m8jnyxkp3vjpiw77k2r]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[7,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:43:07.129Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnyxkp3vjpiw77k2r]","params":"[7,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:43:07.134Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T03:43:07.134Z"}
{"level":"debug","message":"Executing query [m8jnyxkve4704t5ws7g]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[7]","timestamp":"2025-03-22T03:43:07.135Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnyxkve4704t5ws7g]","params":"[7]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T03:43:07.137Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:43:07.137Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T03:43:07.137Z"}
{"level":"debug","message":"Executing query [m8jnyxkzjlxko7x5wie]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[7,1,\"RESTAURAR\"]","timestamp":"2025-03-22T03:43:07.139Z"}
{"level":"debug","message":"Executing query [m8jnyxl3rugnykzi89]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[7]","timestamp":"2025-03-22T03:43:07.144Z"}
{"level":"debug","message":"Executing query [m8jnyxl7apnjblim14k]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[7,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:43:07.147Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnyxl7apnjblim14k]","params":"[7,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:43:07.149Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T03:43:07.149Z"}
{"level":"debug","message":"Executing query [m8jnyxl9fkhtvc487k6]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[7]","timestamp":"2025-03-22T03:43:07.149Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jnyxl9fkhtvc487k6]","params":"[7]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T03:43:07.151Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:43:07.152Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T03:43:07.152Z"}
{"level":"debug","message":"Executing query [m8jnyxld1d4rg9jauvb]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[4,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T03:43:07.153Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:43:07.153Z"}
{"level":"debug","message":"Executing query [m8jnyxlgm45jctl1ise]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:43:07.156Z"}
{"level":"debug","message":"Executing query [m8jnyxlj0qy2av6qqrad]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",8,\"ELIMINAR\"]","timestamp":"2025-03-22T03:43:07.159Z"}
{"level":"debug","message":"Executing query [m8jnyxlmhhrhpzm76zb]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[8]","timestamp":"2025-03-22T03:43:07.162Z"}
{"level":"debug","message":"Executing query [m8jnyxlogu58mqgksgo]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T03:43:07.164Z"}
{"level":"debug","message":"Executing query [m8jnyxlrfe5432mww28]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T03:43:07.167Z"}
{"level":"debug","message":"Executing query [m8jnyxlusguxffonhej]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:43:07.170Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:43:07.171Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:43:23.794Z"}
{"level":"debug","message":"Executing query [m8jnzag9cmnr49yssa5]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:43:23.817Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:43:23.851Z"}
{"level":"debug","message":"Executing query [m8jnzahaxsmqkttcgz]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T03:43:23.854Z"}
{"level":"debug","message":"Executing query [m8jnzahehm9laht8vws]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T03:43:23.858Z"}
{"level":"debug","message":"Executing query [m8jnzahgk1s28xw27i]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive, Descripcion) VALUES (?, ?, ?, ?, ?, ?)","params":"[999,\"Área de Prueba\",\"TEST-AREA\",\"PRUEBA\",1,\"Área creada para pruebas\"]","timestamp":"2025-03-22T03:43:23.860Z"}
{"level":"debug","message":"Executing query [m8jnzahka2xnnil14ba]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[999,\"Rol de Prueba\",\"Rol creado para pruebas\",1,255]","timestamp":"2025-03-22T03:43:23.864Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T03:43:23.867Z"}
{"level":"debug","message":"Executing query [m8jnzahoipkxnhz31t]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T03:43:23.868Z"}
{"level":"debug","message":"Executing query [m8jnzahqyy0dik1zv8]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T03:43:23.870Z"}
{"level":"debug","message":"Executing query [m8jnzahtw3qri3ileyd]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:43:23.873Z"}
{"level":"debug","message":"Executing query [m8jnzahynj3ye2ntg5n]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[5]","timestamp":"2025-03-22T03:43:23.878Z"}
{"level":"debug","message":"Executing query [m8jnzai2dhwd2p2yb9u]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[5]","timestamp":"2025-03-22T03:43:23.882Z"}
{"level":"debug","message":"Executing query [m8jnzai75e1ytuwf9z5]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",5]","timestamp":"2025-03-22T03:43:23.887Z"}
{"level":"debug","message":"Executing query [m8jnzaicsx9osk3f1mj]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[5]","timestamp":"2025-03-22T03:43:23.892Z"}
{"level":"debug","message":"Executing query [m8jnzaifwcxb7qzbyiq]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[5]","timestamp":"2025-03-22T03:43:23.895Z"}
{"level":"debug","message":"Executing query [m8jnzaiimxvm46pu4x]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[5]","timestamp":"2025-03-22T03:43:23.898Z"}
{"level":"debug","message":"Executing query [m8jnzaikvaj3sxh56ws]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:43:23.900Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:43:23.902Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:46:36.040Z"}
{"level":"debug","message":"Executing query [m8jo3esgxemvqe1llb]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:46:36.064Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:46:36.097Z"}
{"level":"debug","message":"Executing query [m8jo3etg0ik6px2gwsat]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T03:46:36.100Z"}
{"level":"debug","message":"Executing query [m8jo3etkcr9ag9b763p]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = ?","params":"[888]","timestamp":"2025-03-22T03:46:36.104Z"}
{"level":"debug","message":"Executing query [m8jo3etmanffolilmuv]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Área Papelera\",\"TEST-PAPELERA\",\"PRUEBA\",1]","timestamp":"2025-03-22T03:46:36.106Z"}
{"level":"debug","message":"Executing query [m8jo3etrchiujeip41w]: SELECT IDRol FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T03:46:36.111Z"}
{"level":"debug","message":"Executing query [m8jo3ett6xp37rmkqm]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Rol Papelera\",\"Rol para pruebas de papelera\",2,4]","timestamp":"2025-03-22T03:46:36.113Z"}
{"level":"debug","message":"Executing query [m8jo3etxvidg94pjl5o]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TESTPAP123\",\"Usuario\",\"Papelera\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","timestamp":"2025-03-22T03:46:36.117Z"}
{"level":"debug","message":"Executing query [m8jo3eu0n21akrf8u8c]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T03:46:36.120Z"}
{"level":"debug","message":"Executing query [m8jo3eu44uy4lowti8u]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T03:46:36.124Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:46:36.124Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 1","timestamp":"2025-03-22T03:46:36.130Z"}
{"level":"debug","message":"Executing query [m8jo3eubhwb87h2cj4w]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:46:36.131Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo3eubhwb87h2cj4w]","params":"[1,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:46:36.136Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T03:46:36.137Z"}
{"level":"debug","message":"Executing query [m8jo3euh33syabk0s9]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T03:46:36.137Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo3euh33syabk0s9]","params":"[1]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T03:46:36.140Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:46:36.141Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T03:46:36.141Z"}
{"level":"debug","message":"Executing query [m8jo3eun3qb6m6lqyvq]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,1,\"RESTAURAR\"]","timestamp":"2025-03-22T03:46:36.143Z"}
{"level":"debug","message":"Executing query [m8jo3eus7klzxesk9zd]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T03:46:36.148Z"}
{"level":"debug","message":"Executing query [m8jo3euv0kgyygxhtqt]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:46:36.151Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo3euv0kgyygxhtqt]","params":"[1,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:46:36.155Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T03:46:36.155Z"}
{"level":"debug","message":"Executing query [m8jo3euze3wyau8rm3e]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T03:46:36.155Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo3euze3wyau8rm3e]","params":"[1]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T03:46:36.157Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:46:36.158Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T03:46:36.158Z"}
{"level":"debug","message":"Executing query [m8jo3ev3jarh4y5moz]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T03:46:36.159Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:46:36.159Z"}
{"level":"debug","message":"Executing query [m8jo3ev65i4x6hevvgo]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:46:36.162Z"}
{"level":"debug","message":"Executing query [m8jo3ev921rxd5q9766]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",2,\"ELIMINAR\"]","timestamp":"2025-03-22T03:46:36.165Z"}
{"level":"debug","message":"Executing query [m8jo3evc8kfenkdwt9w]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[2]","timestamp":"2025-03-22T03:46:36.168Z"}
{"level":"debug","message":"Executing query [m8jo3evfmfahditicnp]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T03:46:36.171Z"}
{"level":"debug","message":"Executing query [m8jo3evih8bwboa55fw]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-22T03:46:36.174Z"}
{"level":"debug","message":"Executing query [m8jo3evl5kmxmmud7sq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:46:36.177Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:46:36.181Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:47:44.201Z"}
{"level":"debug","message":"Executing query [m8jo4vdt1zihruxpbav]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:47:44.225Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:47:44.258Z"}
{"level":"debug","message":"Executing query [m8jo4vetpg4b6lcxux]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T03:47:44.261Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T03:47:44.265Z"}
{"level":"debug","message":"Executing query [m8jo4vexk855l7cs5ig]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T03:47:44.265Z"}
{"level":"debug","message":"Executing query [m8jo4vf32dfiplsiyk4]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[2,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T03:47:44.271Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:47:44.271Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 3","timestamp":"2025-03-22T03:47:44.274Z"}
{"level":"debug","message":"Executing query [m8jo4vf8fzsa88af0il]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:47:44.276Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo4vf8fzsa88af0il]","params":"[3,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:47:44.280Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T03:47:44.281Z"}
{"level":"debug","message":"Executing query [m8jo4vfe2jkujxu6igg]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T03:47:44.282Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo4vfe2jkujxu6igg]","params":"[3]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T03:47:44.284Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:47:44.285Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T03:47:44.285Z"}
{"level":"debug","message":"Executing query [m8jo4vfjvll7y68vf9]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,1,\"RESTAURAR\"]","timestamp":"2025-03-22T03:47:44.287Z"}
{"level":"debug","message":"Executing query [m8jo4vfnqwjt7v1wzn]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T03:47:44.291Z"}
{"level":"debug","message":"Executing query [m8jo4vfqf0qkuqxgnkk]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:47:44.294Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo4vfqf0qkuqxgnkk]","params":"[3,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:47:44.299Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T03:47:44.299Z"}
{"level":"debug","message":"Executing query [m8jo4vfvn1ni7wsr89d]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T03:47:44.299Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo4vfvn1ni7wsr89d]","params":"[3]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T03:47:44.301Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:47:44.302Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T03:47:44.302Z"}
{"level":"debug","message":"Executing query [m8jo4vg0lr2sifl6sq]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[2,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T03:47:44.304Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:47:44.304Z"}
{"level":"debug","message":"Executing query [m8jo4vg29jobgf3a0u8]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:47:44.306Z"}
{"level":"debug","message":"Executing query [m8jo4vg5920jgqqbcij]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",4,\"ELIMINAR\"]","timestamp":"2025-03-22T03:47:44.309Z"}
{"level":"debug","message":"Executing query [m8jo4vg78kwll1yhgh5]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[4]","timestamp":"2025-03-22T03:47:44.311Z"}
{"level":"debug","message":"Executing query [m8jo4vga19m25x3iqap]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T03:47:44.314Z"}
{"level":"debug","message":"Executing query [m8jo4vgez7wsi3exhq]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T03:47:44.318Z"}
{"level":"debug","message":"Executing query [m8jo4vggqfkel77fwwa]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:47:44.320Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:47:44.322Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:47:59.612Z"}
{"level":"debug","message":"Executing query [m8jo579ybh5tvzt3bwq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:47:59.638Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:47:59.677Z"}
{"level":"debug","message":"Executing query [m8jo57b4pfbprd1cdk]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T03:47:59.680Z"}
{"level":"debug","message":"Executing query [m8jo57b7gulytaoyy7m]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T03:47:59.683Z"}
{"level":"debug","message":"Executing query [m8jo57b9wow34nmhmkl]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive, Descripcion) VALUES (?, ?, ?, ?, ?, ?)","params":"[999,\"Área de Prueba\",\"TEST-AREA\",\"PRUEBA\",1,\"Área creada para pruebas\"]","timestamp":"2025-03-22T03:47:59.685Z"}
{"level":"debug","message":"Executing query [m8jo57bfztaqoh25u3o]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[999,\"Rol de Prueba\",\"Rol creado para pruebas\",1,255]","timestamp":"2025-03-22T03:47:59.691Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T03:47:59.695Z"}
{"level":"debug","message":"Executing query [m8jo57bjbxi3gub098e]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T03:47:59.695Z"}
{"level":"debug","message":"Executing query [m8jo57bmlstpfu4wrks]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T03:47:59.698Z"}
{"level":"debug","message":"Executing query [m8jo57bp10wgwaxbob3]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:47:59.701Z"}
{"level":"debug","message":"Executing query [m8jo57bvzlltmwlhxu]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[3]","timestamp":"2025-03-22T03:47:59.707Z"}
{"level":"debug","message":"Executing query [m8jo57bym0ahzuarjrs]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[3]","timestamp":"2025-03-22T03:47:59.710Z"}
{"level":"debug","message":"Executing query [m8jo57c28kn6fcna3k6]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",3]","timestamp":"2025-03-22T03:47:59.714Z"}
{"level":"debug","message":"Executing query [m8jo57c82pjzjet3gnc]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[3]","timestamp":"2025-03-22T03:47:59.720Z"}
{"level":"debug","message":"Executing query [m8jo57ca6fpvifbdoi3]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[3]","timestamp":"2025-03-22T03:47:59.722Z"}
{"level":"debug","message":"Executing query [m8jo57ce21wzolkk3huj]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[3]","timestamp":"2025-03-22T03:47:59.726Z"}
{"level":"debug","message":"Executing query [m8jo57ci1yarsm6hf0w]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:47:59.730Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:47:59.732Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:15.096Z"}
{"level":"debug","message":"Executing query [m8jo5j7za38kwjxl05g]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:48:15.119Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:48:15.154Z"}
{"level":"debug","message":"Executing query [m8jo5j91s24kzomvqpj]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T03:48:15.157Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T03:48:15.160Z"}
{"level":"debug","message":"Executing query [m8jo5j95pqwf4bochy]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T03:48:15.161Z"}
{"level":"debug","message":"Executing query [m8jo5j9ah5g6r1cksb]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[3,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T03:48:15.166Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:48:15.166Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 5","timestamp":"2025-03-22T03:48:15.170Z"}
{"level":"debug","message":"Executing query [m8jo5j9go18b0dk1nws]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[5,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:48:15.172Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo5j9go18b0dk1nws]","params":"[5,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:48:15.177Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T03:48:15.178Z"}
{"level":"debug","message":"Executing query [m8jo5j9mcx5imunmza]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[5]","timestamp":"2025-03-22T03:48:15.178Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo5j9mcx5imunmza]","params":"[5]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T03:48:15.181Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:48:15.181Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T03:48:15.182Z"}
{"level":"debug","message":"Executing query [m8jo5j9rscmaifxu24k]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[5,1,\"RESTAURAR\"]","timestamp":"2025-03-22T03:48:15.183Z"}
{"level":"debug","message":"Executing query [m8jo5j9xt7d02st8hsf]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[5]","timestamp":"2025-03-22T03:48:15.189Z"}
{"level":"debug","message":"Executing query [m8jo5ja0d235t80uyw]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[5,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:48:15.192Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo5ja0d235t80uyw]","params":"[5,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:48:15.195Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T03:48:15.196Z"}
{"level":"debug","message":"Executing query [m8jo5ja4e0lvl5i5kyg]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[5]","timestamp":"2025-03-22T03:48:15.196Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo5ja4e0lvl5i5kyg]","params":"[5]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T03:48:15.199Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:48:15.199Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T03:48:15.200Z"}
{"level":"debug","message":"Executing query [m8jo5ja93su9ga6coxy]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[3,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T03:48:15.201Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:48:15.201Z"}
{"level":"debug","message":"Executing query [m8jo5jaccqdeuccc21]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:48:15.204Z"}
{"level":"debug","message":"Executing query [m8jo5jae8o1v8ct53dl]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",6,\"ELIMINAR\"]","timestamp":"2025-03-22T03:48:15.206Z"}
{"level":"debug","message":"Executing query [m8jo5jah5mv8zzv857u]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[6]","timestamp":"2025-03-22T03:48:15.209Z"}
{"level":"debug","message":"Executing query [m8jo5jakuiavs2wlrh]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T03:48:15.212Z"}
{"level":"debug","message":"Executing query [m8jo5jao81yjsso2zk5]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-22T03:48:15.216Z"}
{"level":"debug","message":"Executing query [m8jo5jarqanb0gfsl1p]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:48:15.219Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:48:15.220Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:46.553Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:48:46.719Z"}
{"duration":"23ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T03:48:46.722Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T03:48:46.726Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:48:46.737Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:47.394Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:48:47.443Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T03:48:47.445Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:47.561Z"}
{"level":"debug","message":"Executing query [m8jo6898f3ktlcfs8js]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:48:47.564Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:48:47.577Z"}
{"level":"debug","message":"Executing query [m8jo689n6x6uplpg1zb]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T03:48:47.579Z"}
{"level":"debug","message":"Executing query [m8jo689quxpyuxq3kv]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T03:48:47.582Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T03:48:47.584Z"}
{"level":"debug","message":"Executing query [m8jo689tnydmevvqiuf]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T03:48:47.585Z"}
{"level":"debug","message":"Executing query [m8jo689u9up1pn9lft9]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T03:48:47.586Z"}
{"level":"debug","message":"Executing query [m8jo689wrahs6bhtdyl]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:48:47.588Z"}
{"level":"debug","message":"Executing query [m8jo68a0k6neko3t1u]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[5]","timestamp":"2025-03-22T03:48:47.592Z"}
{"level":"debug","message":"Executing query [m8jo68a258ccl69fuf9]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[5]","timestamp":"2025-03-22T03:48:47.594Z"}
{"level":"debug","message":"Executing query [m8jo68a5ntp54i424k]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",5]","timestamp":"2025-03-22T03:48:47.597Z"}
{"level":"debug","message":"Executing query [m8jo68a853uta1793pf]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[5]","timestamp":"2025-03-22T03:48:47.600Z"}
{"level":"debug","message":"Executing query [m8jo68aa6vi9jbs73vc]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[5]","timestamp":"2025-03-22T03:48:47.602Z"}
{"level":"debug","message":"Executing query [m8jo68adqqs929tcn3c]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[5]","timestamp":"2025-03-22T03:48:47.605Z"}
{"level":"debug","message":"Executing query [m8jo68af3t4ejwa1p9k]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:48:47.607Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:48:47.608Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:47.719Z"}
{"level":"debug","message":"Executing query [m8jo68dmzqrr0pdhhrs]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:48:47.722Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:48:47.733Z"}
{"level":"debug","message":"Executing query [m8jo68dzpuwx7wlvpp]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T03:48:47.735Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T03:48:47.737Z"}
{"level":"debug","message":"Executing query [m8jo68e2eui04ajaxb]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T03:48:47.738Z"}
{"level":"debug","message":"Executing query [m8jo68e6v2zc900pvc]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[4,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T03:48:47.742Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:48:47.742Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 7","timestamp":"2025-03-22T03:48:47.747Z"}
{"level":"debug","message":"Executing query [m8jo68edu3aoymwj1u]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[7,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:48:47.749Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo68edu3aoymwj1u]","params":"[7,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:48:47.754Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T03:48:47.755Z"}
{"level":"debug","message":"Executing query [m8jo68ejfa52muzq6w]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[7]","timestamp":"2025-03-22T03:48:47.755Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo68ejfa52muzq6w]","params":"[7]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T03:48:47.761Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:48:47.761Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T03:48:47.762Z"}
{"level":"debug","message":"Executing query [m8jo68erfop2ef0fr2c]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[7,1,\"RESTAURAR\"]","timestamp":"2025-03-22T03:48:47.763Z"}
{"level":"debug","message":"Executing query [m8jo68ew3cmf4ttn3rg]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[7]","timestamp":"2025-03-22T03:48:47.768Z"}
{"level":"debug","message":"Executing query [m8jo68eyovo5du0l0di]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[7,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T03:48:47.770Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo68eyovo5du0l0di]","params":"[7,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T03:48:47.774Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T03:48:47.774Z"}
{"level":"debug","message":"Executing query [m8jo68f3o9ewi43caoe]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[7]","timestamp":"2025-03-22T03:48:47.775Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jo68f3o9ewi43caoe]","params":"[7]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T03:48:47.777Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T03:48:47.778Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T03:48:47.778Z"}
{"level":"debug","message":"Executing query [m8jo68f7okb3yifyys]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[4,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T03:48:47.779Z\",\"ACTIVO\"]","timestamp":"2025-03-22T03:48:47.780Z"}
{"level":"debug","message":"Executing query [m8jo68fbukmrea52lsp]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T03:48:47.783Z"}
{"level":"debug","message":"Executing query [m8jo68ff32dv12azpu4]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",8,\"ELIMINAR\"]","timestamp":"2025-03-22T03:48:47.787Z"}
{"level":"debug","message":"Executing query [m8jo68fivrensb55r2b]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[8]","timestamp":"2025-03-22T03:48:47.790Z"}
{"level":"debug","message":"Executing query [m8jo68fl1eb8c9pitc6]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T03:48:47.793Z"}
{"level":"debug","message":"Executing query [m8jo68fob4x8yzn07yn]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T03:48:47.796Z"}
{"level":"debug","message":"Executing query [m8jo68frhpo0jivdy26]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:48:47.799Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:48:47.800Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:48.008Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T03:48:48.048Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:48:48.093Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T03:48:48.112Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:48:48.153Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:48.437Z"}
{"level":"debug","message":"Executing query [m8jo68xj3w9j15h1du2]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:48:48.439Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:48:48.452Z"}
{"level":"debug","message":"Executing query [m8jo68xy4jmqtgre6me]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742615328439\"]","timestamp":"2025-03-22T03:48:48.454Z"}
{"level":"debug","message":"Executing query [m8jo68y1jpmdm8hd43a]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742615328439\",true]","timestamp":"2025-03-22T03:48:48.457Z"}
{"level":"debug","message":"Executing query [m8jo68y9qwbhmuhqpb]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-22T03:48:48.465Z"}
{"level":"debug","message":"Executing query [m8jo68yd13dczof655]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742615328439\"]","timestamp":"2025-03-22T03:48:48.469Z"}
{"level":"debug","message":"Executing query [m8jo68yf5ufji9j7cfl]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",5]","timestamp":"2025-03-22T03:48:48.471Z"}
{"level":"debug","message":"Executing query [m8jo68yjzvfs3fxb9xl]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-22T03:48:48.475Z"}
{"level":"debug","message":"Executing query [m8jo68ym21p4am5qp3b]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-22T03:48:48.478Z"}
{"level":"debug","message":"Executing query [m8jo68yquks8oh4k2tl]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-22T03:48:48.482Z"}
{"level":"debug","message":"Executing query [m8jo68yshoxwyw8f1sw]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-22T03:48:48.484Z"}
{"level":"debug","message":"Executing query [m8jo68yum9frbw5mwe]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-22T03:48:48.486Z"}
{"level":"debug","message":"Executing query [m8jo68yxz3py1bmsrlr]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-22T03:48:48.489Z"}
{"level":"debug","message":"Executing query [m8jo68yzxx0uitdkt7n]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T03:48:48.491Z"}
{"level":"debug","message":"Executing query [m8jo68z09i3vxeb9x8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:48:48.493Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:48:48.494Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:48.598Z"}
{"level":"debug","message":"Executing query [m8jo69215ozwc2prg4d]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:48:48.601Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:48:48.613Z"}
{"level":"debug","message":"Executing query [m8jo692esxmqui8prj9]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T03:48:48.614Z"}
{"level":"debug","message":"Executing query [m8jo692gf8by7xbw4z6]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742615328600\"]","timestamp":"2025-03-22T03:48:48.616Z"}
{"level":"debug","message":"Executing query [m8jo692knycbip3j34i]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742615328600\",\"TEST-OFICIO-1742615328600\",7151,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:48:48.620Z"}
{"level":"debug","message":"Executing query [m8jo692pipa4emsvy87]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T03:48:48.625Z"}
{"level":"debug","message":"Executing query [m8jo692sh8kodkkjar6]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742615328600\"]","timestamp":"2025-03-22T03:48:48.628Z"}
{"level":"debug","message":"Executing query [m8jo692u2ng1i0lln02]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",1]","timestamp":"2025-03-22T03:48:48.630Z"}
{"level":"debug","message":"Executing query [m8jo692wyu9h47db4q8]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T03:48:48.633Z"}
{"level":"debug","message":"Executing query [m8jo692y0d9xdwt8lvas]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T03:48:48.634Z"}
{"level":"debug","message":"Executing query [m8jo6931xpz0x3miiyr]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T03:48:48.637Z"}
{"level":"debug","message":"Executing query [m8jo6933o3853qmw0n]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T03:48:48.639Z"}
{"level":"debug","message":"Executing query [m8jo6935e3bmzss6ej8]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T03:48:48.641Z"}
{"level":"debug","message":"Executing query [m8jo69375e0okgt5gt3]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742615328643\",\"TEST-SP-OFICIO-1742615328643\",5692,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T03:48:48.643Z"}
{"level":"debug","message":"Executing query [m8jo693afg2ym0scobg]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742615328643\"]","timestamp":"2025-03-22T03:48:48.646Z"}
{"level":"debug","message":"Executing query [m8jo693c3g1ls8ip35z]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742615328643\"]","timestamp":"2025-03-22T03:48:48.648Z"}
{"level":"debug","message":"Executing query [m8jo693fibv9qp9yp7l]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:48:48.651Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:48:48.652Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:48.767Z"}
{"level":"debug","message":"Executing query [m8jo696qcf2h8yz546v]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:48:48.770Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:48:48.781Z"}
{"level":"debug","message":"Executing query [m8jo69736ms4t9rplbh]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742615328769\"]","timestamp":"2025-03-22T03:48:48.783Z"}
{"level":"debug","message":"Executing query [m8jo69789keogy3uag]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742615328769\"]","timestamp":"2025-03-22T03:48:48.788Z"}
{"level":"debug","message":"Executing query [m8jo6979mxs5tq8ow7]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742615328769\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:48:48.789Z"}
{"level":"debug","message":"Executing query [m8jo697dp4k12z79re]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T03:48:48.793Z"}
{"level":"debug","message":"Executing query [m8jo697gtclpm8cida9]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742615328769\"]","timestamp":"2025-03-22T03:48:48.796Z"}
{"level":"debug","message":"Executing query [m8jo697h3iwolmuny7y]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1000]","timestamp":"2025-03-22T03:48:48.797Z"}
{"level":"debug","message":"Executing query [m8jo697k3o4n3o8xm0b]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T03:48:48.800Z"}
{"level":"debug","message":"Executing query [m8jo697mv6aw9xazap9]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T03:48:48.802Z"}
{"level":"debug","message":"Executing query [m8jo697pfl40xbghgyg]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T03:48:48.805Z"}
{"level":"debug","message":"Executing query [m8jo697rvr07ffbli1n]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T03:48:48.807Z"}
{"level":"debug","message":"Executing query [m8jo697sjf8833irzn]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T03:48:48.808Z"}
{"level":"debug","message":"Executing query [m8jo697vey793svfd9c]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T03:48:48.811Z"}
{"level":"debug","message":"Executing query [m8jo697xjh8aowriglj]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T03:48:48.813Z"}
{"level":"debug","message":"Executing query [m8jo697y5jnmzzrgd2p]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:48:48.814Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:48:48.816Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:48.919Z"}
{"level":"debug","message":"Executing query [m8jo69az60vt0ifzk43]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:48:48.923Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:48:48.939Z"}
{"level":"debug","message":"Executing query [m8jo69bg7yo390bcq8d]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T03:48:48.941Z"}
{"level":"debug","message":"Executing query [m8jo69bj3ib78o2rpqk]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742615328921\"]","timestamp":"2025-03-22T03:48:48.943Z"}
{"level":"debug","message":"Executing query [m8jo69bl31t3r2w4yde]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742615328921\",\"TEST-OFI-FORENSE-1742615328921\",186,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742615328921\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:48:48.945Z"}
{"level":"debug","message":"Executing query [m8jo69bsvktr4822jyf]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T03:48:48.952Z"}
{"level":"debug","message":"Executing query [m8jo69bwyvdwfopau6s]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742615328921\"]","timestamp":"2025-03-22T03:48:48.956Z"}
{"level":"debug","message":"Executing query [m8jo69bzvu8uw3x5f3]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",1]","timestamp":"2025-03-22T03:48:48.959Z"}
{"level":"debug","message":"Executing query [m8jo69c45g5xdnq49p]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T03:48:48.964Z"}
{"level":"debug","message":"Executing query [m8jo69c7ia2d60x20ts]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T03:48:48.967Z"}
{"level":"debug","message":"Executing query [m8jo69cbpmoqqc0tf6]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T03:48:48.971Z"}
{"level":"debug","message":"Executing query [m8jo69ce09o3kr6l9p73]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T03:48:48.974Z"}
{"level":"debug","message":"Executing query [m8jo69cic2cpvsxk3lw]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T03:48:48.978Z"}
{"level":"debug","message":"Executing query [m8jo69ckojcbi2au5m]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742615328980\",\"TEST-SP-OFI-FORENSE-1742615328980\",5064,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T03:48:48.980Z"}
{"level":"debug","message":"Executing query [m8jo69cnu0bsca3illb]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742615328980\"]","timestamp":"2025-03-22T03:48:48.983Z"}
{"level":"debug","message":"Executing query [m8jo69cpz3cgrredcn]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742615328980\"]","timestamp":"2025-03-22T03:48:48.985Z"}
{"level":"debug","message":"Executing query [m8jo69cu41h93779sap]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:48:48.990Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:48:48.993Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:49.114Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:49.120Z"}
{"level":"debug","message":"Executing query [m8jo69gikvl51d4c3wo]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:48:49.122Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:48:49.133Z"}
{"level":"debug","message":"Executing query [m8jo69gu02jszu68tbcu]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T03:48:49.134Z"}
{"level":"debug","message":"Executing query [m8jo69gwpgqd8ng06cg]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T03:48:49.136Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T03:48:49.137Z"}
{"level":"debug","message":"Executing query [m8jo69gxqm6bssb4usb]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:48:49.137Z"}
{"level":"debug","message":"Executing query [m8jo69gyrnaotandqu]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:48:49.138Z"}
{"level":"debug","message":"Executing query [m8jo69gzt2rpfoyz13q]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:48:49.139Z"}
{"level":"debug","message":"Executing query [m8jo69h0hvv6ndiiajo]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T03:48:49.140Z"}
{"level":"debug","message":"Executing query [m8jo69h474qckp5syq7]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[2]","timestamp":"2025-03-22T03:48:49.144Z"}
{"level":"debug","message":"Executing query [m8jo69h6o0n3922yy1]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T03:48:49.146Z"}
{"level":"debug","message":"Executing query [m8jo69h9nu1dnnsq5gp]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",2]","timestamp":"2025-03-22T03:48:49.149Z"}
{"level":"debug","message":"Executing query [m8jo69hclhszm4gk5te]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[2]","timestamp":"2025-03-22T03:48:49.152Z"}
{"level":"debug","message":"Executing query [m8jo69hdasq6b7lkaio]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[2]","timestamp":"2025-03-22T03:48:49.153Z"}
{"level":"debug","message":"Executing query [m8jo69hf0bgrbrpbsehc]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[2]","timestamp":"2025-03-22T03:48:49.156Z"}
{"level":"debug","message":"Executing query [m8jo69hh8z33coqnc3q]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:48:49.157Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:48:49.160Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:49.283Z"}
{"level":"debug","message":"Executing query [m8jo69l2ugmjw78wnj]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:48:49.286Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:48:49.296Z"}
{"level":"debug","message":"Executing query [m8jo69ldhnwly7vwov9]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T03:48:49.298Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T03:48:49.299Z"}
{"level":"debug","message":"Executing query [m8jo69lgwfnv9bovia]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T03:48:49.300Z"}
{"level":"debug","message":"Executing query [m8jo69liv1epej1uoch]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T03:48:49.302Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-22T03:48:49.304Z"}
{"level":"debug","message":"Executing query [m8jo69lkyou1tez47qn]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T03:48:49.304Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T03:48:49.307Z"}
{"level":"debug","message":"Executing query [m8jo69lsmzrtvxe10tm]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T03:48:49.312Z"}
{"level":"debug","message":"Executing query [m8jo69lwvjdir36ixgi]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T03:48:49.316Z"}
{"level":"debug","message":"Executing query [m8jo69ly4clszk5rp82]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T03:48:49.318Z"}
{"level":"debug","message":"Executing query [m8jo69m1d0ugga5l10s]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:48:49.321Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:49.439Z"}
{"level":"debug","message":"Executing query [m8jo69pgz6eo1t0k0wp]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T03:48:49.444Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:48:49.465Z"}
{"level":"debug","message":"Executing query [m8jo69q4arb2auubp8o]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T03:48:49.468Z"}
{"level":"debug","message":"Executing query [m8jo69q7fhse3roh7a5]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742615329442\"]","timestamp":"2025-03-22T03:48:49.471Z"}
{"level":"debug","message":"Executing query [m8jo69qboetk3y1myg]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742615329442\",\"TEST-OFI-QUIMICA-1742615329442\",4045,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T03:48:49.475Z"}
{"level":"debug","message":"Executing query [m8jo69qhpzk7165cr6n]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T03:48:49.481Z"}
{"level":"debug","message":"Executing query [m8jo69qlh5uo0o4uqi]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742615329442\"]","timestamp":"2025-03-22T03:48:49.485Z"}
{"level":"debug","message":"Executing query [m8jo69qnbzn0noorc6g]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",1]","timestamp":"2025-03-22T03:48:49.488Z"}
{"level":"debug","message":"Executing query [m8jo69qrdtv7emjinip]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T03:48:49.491Z"}
{"level":"debug","message":"Executing query [m8jo69qu7wsdhthq7os]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T03:48:49.494Z"}
{"level":"debug","message":"Executing query [m8jo69qyf4hbx7syvk9]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T03:48:49.498Z"}
{"level":"debug","message":"Executing query [m8jo69r1tp1hcjp2ix]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T03:48:49.501Z"}
{"level":"debug","message":"Executing query [m8jo69r4maynccdqaba]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T03:48:49.504Z"}
{"level":"debug","message":"Executing query [m8jo69r69le9a6cv4sr]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T03:48:49.506Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:48:49.507Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:48:49.610Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:48:49.626Z"}
{"level":"debug","message":"Executing query [m8jo69ukbaq92yd7zd]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T03:48:49.628Z"}
{"level":"debug","message":"Executing query [m8jo69ulcqxx8kncogc]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T03:48:49.629Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jo69ulcqxx8kncogc]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T03:48:49.631Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T03:48:49.632Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T03:48:49.706Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T03:48:49.801Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T03:48:49.906Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T03:48:49.907Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T03:48:49.907Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T03:48:49.907Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T03:48:49.908Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T03:48:49.908Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:49:05.513Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:49:05.518Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:49:05.523Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:49:07.193Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:49:31.191Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:49:31.197Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:49:31.200Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:49:32.750Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:52:31.610Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:52:31.615Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:52:31.618Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:52:33.226Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:52:39.496Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:52:39.502Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:52:39.505Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:52:41.145Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:52:41.688Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:52:41.694Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:52:41.697Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:52:43.340Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:53:32.711Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:53:32.717Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:53:32.720Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:53:34.313Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:54:31.252Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:54:31.257Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T03:54:31.260Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T03:54:32.818Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:00:43.602Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:00:43.607Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:00:43.610Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:00:45.111Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:00:51.560Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:00:51.565Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:00:51.568Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:00:53.113Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:02:23.188Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:02:23.218Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:02:23.222Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:02:24.836Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:02:59.188Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:02:59.337Z"}
{"duration":"22ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T04:02:59.340Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T04:02:59.344Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:02:59.354Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:02:59.994Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:03:00.045Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T04:03:00.047Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:03:00.237Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T04:03:00.276Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:03:00.324Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T04:03:00.338Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:03:00.379Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:03:00.488Z"}
{"level":"debug","message":"Executing query [m8jooidmkekna6zi4l]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:03:00.490Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:03:00.505Z"}
{"level":"debug","message":"Executing query [m8jooie20399tr5ivflc]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T04:03:00.506Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T04:03:00.509Z"}
{"level":"debug","message":"Executing query [m8jooie5b6k7epvk8nl]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T04:03:00.509Z"}
{"level":"debug","message":"Executing query [m8jooieawpl5uen35gp]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[6,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T04:03:00.514Z\",\"ACTIVO\"]","timestamp":"2025-03-22T04:03:00.514Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 9","timestamp":"2025-03-22T04:03:00.517Z"}
{"level":"debug","message":"Executing query [m8jooieed8x3x6jw0pf]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[9,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T04:03:00.518Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jooieed8x3x6jw0pf]","params":"[9,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T04:03:00.521Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T04:03:00.522Z"}
{"level":"debug","message":"Executing query [m8jooiej3g7ew3852ex]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[9]","timestamp":"2025-03-22T04:03:00.523Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jooiej3g7ew3852ex]","params":"[9]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T04:03:00.525Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T04:03:00.525Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T04:03:00.525Z"}
{"level":"debug","message":"Executing query [m8jooiem5l38m4otvh2]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[9,1,\"RESTAURAR\"]","timestamp":"2025-03-22T04:03:00.526Z"}
{"level":"debug","message":"Executing query [m8jooier6bgspk1h6ka]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[9]","timestamp":"2025-03-22T04:03:00.531Z"}
{"level":"debug","message":"Executing query [m8jooieupsbt3yzfdu]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[9,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T04:03:00.534Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jooieupsbt3yzfdu]","params":"[9,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T04:03:00.537Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T04:03:00.538Z"}
{"level":"debug","message":"Executing query [m8jooiey1dkns0bcfeh]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[9]","timestamp":"2025-03-22T04:03:00.538Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jooiey1dkns0bcfeh]","params":"[9]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T04:03:00.541Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T04:03:00.541Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T04:03:00.541Z"}
{"level":"debug","message":"Executing query [m8jooif2zgjr0pai98c]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[6,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T04:03:00.542Z\",\"ACTIVO\"]","timestamp":"2025-03-22T04:03:00.543Z"}
{"level":"debug","message":"Executing query [m8jooif5litfghbxkw]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T04:03:00.545Z"}
{"level":"debug","message":"Executing query [m8jooif8ch32ady9jug]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",10,\"ELIMINAR\"]","timestamp":"2025-03-22T04:03:00.548Z"}
{"level":"debug","message":"Executing query [m8jooifarwre3d94el]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[10]","timestamp":"2025-03-22T04:03:00.550Z"}
{"level":"debug","message":"Executing query [m8jooifdemm7kam1erh]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T04:03:00.553Z"}
{"level":"debug","message":"Executing query [m8jooifgtxrtpgctzvn]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-22T04:03:00.556Z"}
{"level":"debug","message":"Executing query [m8jooifjml5h12gc35]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:03:00.559Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:03:00.560Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:03:00.671Z"}
{"level":"debug","message":"Executing query [m8jooiiq2z8347ulete]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:03:00.674Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:03:00.684Z"}
{"level":"debug","message":"Executing query [m8jooij2t1drqjw037]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:03:00.686Z"}
{"level":"debug","message":"Executing query [m8jooij48yp72tp43m6]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742616180673\"]","timestamp":"2025-03-22T04:03:00.688Z"}
{"level":"debug","message":"Executing query [m8jooij5wp3w8cyj3nr]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742616180673\",\"TEST-OFI-QUIMICA-1742616180673\",5280,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:03:00.689Z"}
{"level":"debug","message":"Executing query [m8jooij90259wlzznnxs]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T04:03:00.693Z"}
{"level":"debug","message":"Executing query [m8jooijczvc378fd4cj]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742616180673\"]","timestamp":"2025-03-22T04:03:00.696Z"}
{"level":"debug","message":"Executing query [m8jooijez2yvisigxe]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",2]","timestamp":"2025-03-22T04:03:00.699Z"}
{"level":"debug","message":"Executing query [m8jooijizdfi7htqbpd]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T04:03:00.702Z"}
{"level":"debug","message":"Executing query [m8jooijkdad4b7b0shf]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T04:03:00.704Z"}
{"level":"debug","message":"Executing query [m8jooijox8up4pxpexe]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T04:03:00.708Z"}
{"level":"debug","message":"Executing query [m8jooijqph7bb2lrj7]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T04:03:00.710Z"}
{"level":"debug","message":"Executing query [m8jooijukqpfn1katxe]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T04:03:00.714Z"}
{"level":"debug","message":"Executing query [m8jooijwr7xbkdp43l]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:03:00.716Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:03:00.718Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:03:00.996Z"}
{"level":"debug","message":"Executing query [m8jooirrc2z2kh83gtd]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:03:00.999Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:03:01.010Z"}
{"level":"debug","message":"Executing query [m8joois40haan63dmlvl]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:03:01.012Z"}
{"level":"debug","message":"Executing query [m8joois69b7rt6s2lco]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742616180998\"]","timestamp":"2025-03-22T04:03:01.014Z"}
{"level":"debug","message":"Executing query [m8joois9io0r9lti6r]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742616180998\",\"TEST-OFI-FORENSE-1742616180998\",7187,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742616180998\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:03:01.017Z"}
{"level":"debug","message":"Executing query [m8jooishoinnoq9tvt]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.025Z"}
{"level":"debug","message":"Executing query [m8jooisku8ogcnx0un]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742616180998\"]","timestamp":"2025-03-22T04:03:01.028Z"}
{"level":"debug","message":"Executing query [m8jooisnd2bbwgsxdi]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",3]","timestamp":"2025-03-22T04:03:01.031Z"}
{"level":"debug","message":"Executing query [m8jooisrqr7hsgp065n]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.035Z"}
{"level":"debug","message":"Executing query [m8jooistmo3fd1jbxpj]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.038Z"}
{"level":"debug","message":"Executing query [m8jooisx63147d85p0t]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.041Z"}
{"level":"debug","message":"Executing query [m8jooit0t1imil4bp4]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.044Z"}
{"level":"debug","message":"Executing query [m8jooit32hdxnf5ty2x]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.047Z"}
{"level":"debug","message":"Executing query [m8jooit5wm4res5ce]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742616181048\",\"TEST-SP-OFI-FORENSE-1742616181049\",2962,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T04:03:01.049Z"}
{"level":"debug","message":"Executing query [m8jooit8bahqkuo5l3r]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742616181048\"]","timestamp":"2025-03-22T04:03:01.052Z"}
{"level":"debug","message":"Executing query [m8jooitapxol7bi7mz]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742616181048\"]","timestamp":"2025-03-22T04:03:01.054Z"}
{"level":"debug","message":"Executing query [m8jooitfc0skrwat97t]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:03:01.059Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:03:01.060Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:03:01.165Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:03:01.170Z"}
{"level":"debug","message":"Executing query [m8jooiwkjgmlqvlzihc]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:03:01.172Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:03:01.185Z"}
{"level":"debug","message":"Executing query [m8jooiwyzxd425et99]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T04:03:01.186Z"}
{"level":"debug","message":"Executing query [m8jooix0fi1d4cvvt7n]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T04:03:01.188Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T04:03:01.189Z"}
{"level":"debug","message":"Executing query [m8jooix2tvw8x6sq9yp]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:03:01.190Z"}
{"level":"debug","message":"Executing query [m8jooix2a4lnxs7y2dv]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:03:01.191Z"}
{"level":"debug","message":"Executing query [m8jooix4d0m9jjphmk5]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:03:01.192Z"}
{"level":"debug","message":"Executing query [m8jooix4lvw5sq6ryi]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T04:03:01.192Z"}
{"level":"debug","message":"Executing query [m8jooixaeqvgbwhn1k8]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.198Z"}
{"level":"debug","message":"Executing query [m8jooixcm2paxd8psyj]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:03:01.200Z"}
{"level":"debug","message":"Executing query [m8jooixdb0fhma89tru]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",3]","timestamp":"2025-03-22T04:03:01.201Z"}
{"level":"debug","message":"Executing query [m8jooixgao95lff09vf]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.204Z"}
{"level":"debug","message":"Executing query [m8jooixi64jjeqzogsf]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.206Z"}
{"level":"debug","message":"Executing query [m8jooixkia10muq0v9a]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.208Z"}
{"level":"debug","message":"Executing query [m8jooixm4yg1qvjzwjm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:03:01.210Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:03:01.210Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:03:01.316Z"}
{"level":"debug","message":"Executing query [m8jooj0mydr0juo81se]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:03:01.318Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:03:01.328Z"}
{"level":"debug","message":"Executing query [m8jooj0xlilpc1r2xf]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742616181318\"]","timestamp":"2025-03-22T04:03:01.330Z"}
{"level":"debug","message":"Executing query [m8jooj11f8ddyzb27eq]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742616181318\"]","timestamp":"2025-03-22T04:03:01.333Z"}
{"level":"debug","message":"Executing query [m8jooj12l4jdz84411i]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742616181318\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:03:01.334Z"}
{"level":"debug","message":"Executing query [m8jooj18uxl2dve7oub]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T04:03:01.340Z"}
{"level":"debug","message":"Executing query [m8jooj1bw46o5t8uebi]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742616181318\"]","timestamp":"2025-03-22T04:03:01.343Z"}
{"level":"debug","message":"Executing query [m8jooj1dlqsirbbi1wd]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1001]","timestamp":"2025-03-22T04:03:01.345Z"}
{"level":"debug","message":"Executing query [m8jooj1gzojj5kydjwb]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T04:03:01.349Z"}
{"level":"debug","message":"Executing query [m8jooj1j5cf3bcww7hc]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T04:03:01.351Z"}
{"level":"debug","message":"Executing query [m8jooj1mxecv5uc86o]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T04:03:01.354Z"}
{"level":"debug","message":"Executing query [m8jooj1ofcljh8o2ahp]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T04:03:01.356Z"}
{"level":"debug","message":"Executing query [m8jooj1qwn43kujs2up]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T04:03:01.358Z"}
{"level":"debug","message":"Executing query [m8jooj1t1uxbj73erd6]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T04:03:01.361Z"}
{"level":"debug","message":"Executing query [m8jooj1w4p6b8pbnp9a]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T04:03:01.364Z"}
{"level":"debug","message":"Executing query [m8jooj1y960co4kucxj]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:03:01.366Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:03:01.367Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:03:01.475Z"}
{"level":"debug","message":"Executing query [m8jooj52cl2f3fhjha]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:03:01.478Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:03:01.495Z"}
{"level":"debug","message":"Executing query [m8jooj5ljtyuhklxqvl]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742616181477\"]","timestamp":"2025-03-22T04:03:01.497Z"}
{"level":"debug","message":"Executing query [m8jooj5nmlbuk2l7bn]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742616181477\",true]","timestamp":"2025-03-22T04:03:01.499Z"}
{"level":"debug","message":"Executing query [m8jooj5q18s83adszl6]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-22T04:03:01.502Z"}
{"level":"debug","message":"Executing query [m8jooj5tlttswnfamt]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742616181477\"]","timestamp":"2025-03-22T04:03:01.505Z"}
{"level":"debug","message":"Executing query [m8jooj5vl741o0rbzfb]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",7]","timestamp":"2025-03-22T04:03:01.507Z"}
{"level":"debug","message":"Executing query [m8jooj5zaitaz8q0877]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-22T04:03:01.511Z"}
{"level":"debug","message":"Executing query [m8jooj624amernt58ej]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-22T04:03:01.514Z"}
{"level":"debug","message":"Executing query [m8jooj65n7hy9dsdmv]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-22T04:03:01.517Z"}
{"level":"debug","message":"Executing query [m8jooj67wvz0wswgyhr]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-22T04:03:01.519Z"}
{"level":"debug","message":"Executing query [m8jooj68ouhi3ckti0o]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-22T04:03:01.520Z"}
{"level":"debug","message":"Executing query [m8jooj6c87kzxu2cm1i]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-22T04:03:01.524Z"}
{"level":"debug","message":"Executing query [m8jooj6d0lpe8ljzlr8]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T04:03:01.525Z"}
{"level":"debug","message":"Executing query [m8jooj6e0qjd1cb532mo]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:03:01.527Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:03:01.527Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:03:01.630Z"}
{"level":"debug","message":"Executing query [m8jooj9d73yqb044tzn]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:03:01.633Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:03:01.643Z"}
{"level":"debug","message":"Executing query [m8jooj9px0cd9ilth0q]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T04:03:01.645Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T04:03:01.648Z"}
{"level":"debug","message":"Executing query [m8jooj9syt2uhy4tpz]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T04:03:01.648Z"}
{"level":"debug","message":"Executing query [m8jooj9utkutoxox5ts]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T04:03:01.650Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-22T04:03:01.652Z"}
{"level":"debug","message":"Executing query [m8jooj9wv7z9qztgli]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T04:03:01.652Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T04:03:01.654Z"}
{"level":"debug","message":"Executing query [m8jooja2lvm2e7n2l0f]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T04:03:01.658Z"}
{"level":"debug","message":"Executing query [m8jooja5rpdge1fs54q]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T04:03:01.661Z"}
{"level":"debug","message":"Executing query [m8jooja8n0uvrgmcqw]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.664Z"}
{"level":"debug","message":"Executing query [m8joojab61p9vr3jzvw]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:03:01.667Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:03:01.767Z"}
{"level":"debug","message":"Executing query [m8joojd74oc5pyyy3tx]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:03:01.771Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:03:01.791Z"}
{"level":"debug","message":"Executing query [m8joojdtj5otrhexug]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:03:01.793Z"}
{"level":"debug","message":"Executing query [m8joojdvjxoy3mranb]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742616181770\"]","timestamp":"2025-03-22T04:03:01.795Z"}
{"level":"debug","message":"Executing query [m8joojdx9etbws84w8]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742616181770\",\"TEST-OFICIO-1742616181770\",7113,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:03:01.798Z"}
{"level":"debug","message":"Executing query [m8jooje59b9mdocb69a]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.805Z"}
{"level":"debug","message":"Executing query [m8jooje95ig63yho97c]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742616181770\"]","timestamp":"2025-03-22T04:03:01.809Z"}
{"level":"debug","message":"Executing query [m8joojecugv79p4392l]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",3]","timestamp":"2025-03-22T04:03:01.812Z"}
{"level":"debug","message":"Executing query [m8joojeg6a3n9hp6ql]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.816Z"}
{"level":"debug","message":"Executing query [m8joojepy5529wi45xa]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.825Z"}
{"level":"debug","message":"Executing query [m8joojesm07zgqccd2o]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.828Z"}
{"level":"debug","message":"Executing query [m8joojewo5232wizox]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.832Z"}
{"level":"debug","message":"Executing query [m8joojf1g67lvznjnoe]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T04:03:01.837Z"}
{"level":"debug","message":"Executing query [m8joojf3qumpp7jjctp]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742616181839\",\"TEST-SP-OFICIO-1742616181839\",4378,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T04:03:01.839Z"}
{"level":"debug","message":"Executing query [m8joojf88ph2sybrpi9]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742616181839\"]","timestamp":"2025-03-22T04:03:01.844Z"}
{"level":"debug","message":"Executing query [m8joojf9xdl1ocr4wvi]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742616181839\"]","timestamp":"2025-03-22T04:03:01.845Z"}
{"level":"debug","message":"Executing query [m8joojfc0qlynwd21mad]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:03:01.848Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:03:01.849Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:03:01.948Z"}
{"level":"debug","message":"Executing query [m8jooji8q8d11jpd43]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:03:01.952Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:03:01.963Z"}
{"level":"debug","message":"Executing query [m8joojiki4kxe1wybc]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T04:03:01.964Z"}
{"level":"debug","message":"Executing query [m8joojiltxan3llmthp]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T04:03:01.965Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T04:03:01.966Z"}
{"level":"debug","message":"Executing query [m8joojimycq6a8jsrqm]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T04:03:01.966Z"}
{"level":"debug","message":"Executing query [m8joojin82qwm3ojmog]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T04:03:01.967Z"}
{"level":"debug","message":"Executing query [m8joojiocuq7wf2gtmm]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T04:03:01.968Z"}
{"level":"debug","message":"Executing query [m8joojisz3ijfqrmi9n]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[8]","timestamp":"2025-03-22T04:03:01.972Z"}
{"level":"debug","message":"Executing query [m8joojiuq8pjj00nxg]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[8]","timestamp":"2025-03-22T04:03:01.974Z"}
{"level":"debug","message":"Executing query [m8joojiwd1p4lg218bt]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",8]","timestamp":"2025-03-22T04:03:01.976Z"}
{"level":"debug","message":"Executing query [m8joojiz1rdnfcwxucc]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[8]","timestamp":"2025-03-22T04:03:01.979Z"}
{"level":"debug","message":"Executing query [m8joojj0nldrykd9qg]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[8]","timestamp":"2025-03-22T04:03:01.980Z"}
{"level":"debug","message":"Executing query [m8joojj3q718h1fsje]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[8]","timestamp":"2025-03-22T04:03:01.983Z"}
{"level":"debug","message":"Executing query [m8joojj4e5jk3woitg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:03:01.984Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:03:01.985Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:03:02.083Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:03:02.100Z"}
{"level":"debug","message":"Executing query [m8joojmgsc4bvk6bzb]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T04:03:02.104Z"}
{"level":"debug","message":"Executing query [m8joojmij9d149c6s9]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T04:03:02.106Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8joojmij9d149c6s9]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T04:03:02.112Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:03:02.114Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T04:03:02.193Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T04:03:02.292Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T04:03:02.404Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T04:03:02.405Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T04:03:02.406Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T04:03:02.406Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T04:03:02.407Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T04:03:02.407Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:16:54.697Z"}
{"level":"debug","message":"Executing query [m8jp6e2rfhxp2v5tvva]: INSERT IGNORE INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive, Descripcion) VALUES (?, ?, ?, ?, ?, ?)","params":"[888,\"Área de Prueba\",\"TEST-AREA\",\"PRUEBA\",1,\"Área creada para pruebas\"]","timestamp":"2025-03-22T04:16:54.724Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:16:54.785Z"}
{"level":"debug","message":"Executing query [m8jp6e4ngpjlv78txh]: INSERT IGNORE INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Rol de Prueba\",\"Rol creado para pruebas\",1,255]","timestamp":"2025-03-22T04:16:54.792Z"}
{"level":"debug","message":"Executing query [m8jp6e4pobscaxrbspi]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123\"]","timestamp":"2025-03-22T04:16:54.793Z"}
{"level":"debug","message":"Executing query [m8jp6e4tl737hlkaxc]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, Password, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123\",\"Usuario\",\"Prueba\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","timestamp":"2025-03-22T04:16:54.797Z"}
{"code":"ER_BAD_FIELD_ERROR","error":"Unknown column 'Rango' in 'field list'","level":"error","message":"Database query error [m8jp6e4tl737hlkaxc]","params":"[\"TEST123\",\"Usuario\",\"Prueba\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","query":"INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, Password, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","timestamp":"2025-03-22T04:16:54.801Z"}
{"level":"error","message":"Error en la configuración de las pruebas: Unknown column 'Rango' in 'field list'","timestamp":"2025-03-22T04:16:54.802Z"}
{"level":"debug","message":"Executing query [m8jp6e5es711vwmwe69]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[888,888]","timestamp":"2025-03-22T04:16:54.819Z"}
{"level":"error","message":"Error al limpiar datos de prueba: db.close is not a function","timestamp":"2025-03-22T04:16:54.820Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:39.123Z"}
{"level":"debug","message":"Executing query [m8jp8mnihk9v6s45fmo]: INSERT IGNORE INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive, Descripcion) VALUES (?, ?, ?, ?, ?, ?)","params":"[888,\"Área de Prueba\",\"TEST-AREA\",\"PRUEBA\",1,\"Área creada para pruebas\"]","timestamp":"2025-03-22T04:18:39.151Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:18:39.205Z"}
{"level":"debug","message":"Executing query [m8jp8mp63cl4psubj2l]: INSERT IGNORE INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Rol de Prueba\",\"Rol creado para pruebas\",1,255]","timestamp":"2025-03-22T04:18:39.210Z"}
{"level":"debug","message":"Executing query [m8jp8mp8rrjbl57j15i]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123\"]","timestamp":"2025-03-22T04:18:39.212Z"}
{"level":"debug","message":"Executing query [m8jp8mpbw9qmsi1r0c]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, Password, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123\",\"Usuario\",\"Prueba\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","timestamp":"2025-03-22T04:18:39.215Z"}
{"code":"ER_BAD_FIELD_ERROR","error":"Unknown column 'Rango' in 'field list'","level":"error","message":"Database query error [m8jp8mpbw9qmsi1r0c]","params":"[\"TEST123\",\"Usuario\",\"Prueba\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","query":"INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, Password, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","timestamp":"2025-03-22T04:18:39.217Z"}
{"level":"error","message":"Error en la configuración de las pruebas: Unknown column 'Rango' in 'field list'","timestamp":"2025-03-22T04:18:39.218Z"}
{"level":"debug","message":"Executing query [m8jp8mpq16mmqr0nzcd]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[888,888]","timestamp":"2025-03-22T04:18:39.230Z"}
{"level":"error","message":"Error al limpiar datos de prueba: db.close is not a function","timestamp":"2025-03-22T04:18:39.232Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:41.548Z"}
{"duration":"10ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T04:18:41.704Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T04:18:41.716Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:18:41.728Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T04:18:41.731Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:42.510Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:18:42.580Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T04:18:42.584Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:42.833Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T04:18:42.858Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:18:42.918Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T04:18:42.950Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:18:42.990Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:43.133Z"}
{"level":"debug","message":"Executing query [m8jp8pq9l7cbdmvd6mi]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:18:43.137Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:18:43.151Z"}
{"level":"debug","message":"Executing query [m8jp8pqo3dygziioc6t]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:18:43.152Z"}
{"level":"debug","message":"Executing query [m8jp8pqqywxkdwt25c]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742617123136\"]","timestamp":"2025-03-22T04:18:43.154Z"}
{"level":"debug","message":"Executing query [m8jp8pqsbbc8yi4icch]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742617123136\",\"TEST-OFICIO-1742617123136\",956,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:18:43.156Z"}
{"level":"debug","message":"Executing query [m8jp8pqz8nx6v19sv64]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T04:18:43.163Z"}
{"level":"debug","message":"Executing query [m8jp8pr2tkmjy02cqhh]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742617123136\"]","timestamp":"2025-03-22T04:18:43.166Z"}
{"level":"debug","message":"Executing query [m8jp8pr47fj0tp83kfk]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",5]","timestamp":"2025-03-22T04:18:43.168Z"}
{"level":"debug","message":"Executing query [m8jp8pray9x7ocei61j]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T04:18:43.174Z"}
{"level":"debug","message":"Executing query [m8jp8prdclk6i8hq2zf]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T04:18:43.177Z"}
{"level":"debug","message":"Executing query [m8jp8prhvcjv4l5rvdb]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T04:18:43.181Z"}
{"level":"debug","message":"Executing query [m8jp8profosxkkq3yx4]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T04:18:43.188Z"}
{"level":"debug","message":"Executing query [m8jp8prsi336cpnl3v]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T04:18:43.192Z"}
{"level":"debug","message":"Executing query [m8jp8prtbha3j9gh6id]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742617123193\",\"TEST-SP-OFICIO-1742617123193\",9640,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T04:18:43.193Z"}
{"level":"debug","message":"Executing query [m8jp8prxr1rx2qfnzy]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742617123193\"]","timestamp":"2025-03-22T04:18:43.197Z"}
{"level":"debug","message":"Executing query [m8jp8przpobaiy5rhxl]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742617123193\"]","timestamp":"2025-03-22T04:18:43.199Z"}
{"level":"debug","message":"Executing query [m8jp8ps3sev9pbsbzur]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:18:43.203Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:18:43.205Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:43.338Z"}
{"level":"debug","message":"Executing query [m8jp8pvzs10xgfozutq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:18:43.343Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:18:43.358Z"}
{"level":"debug","message":"Executing query [m8jp8pwgwcc1sdny938]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T04:18:43.360Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T04:18:43.361Z"}
{"level":"debug","message":"Executing query [m8jp8pwiq77ygaezo9]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T04:18:43.362Z"}
{"level":"debug","message":"Executing query [m8jp8pwkaibyfo4npc]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[8,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T04:18:43.364Z\",\"ACTIVO\"]","timestamp":"2025-03-22T04:18:43.364Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 11","timestamp":"2025-03-22T04:18:43.368Z"}
{"level":"debug","message":"Executing query [m8jp8pwraiisubgvs4s]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[11,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T04:18:43.371Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jp8pwraiisubgvs4s]","params":"[11,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T04:18:43.379Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T04:18:43.380Z"}
{"level":"debug","message":"Executing query [m8jp8px0q2z7vj0pbce]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[11]","timestamp":"2025-03-22T04:18:43.380Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jp8px0q2z7vj0pbce]","params":"[11]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T04:18:43.384Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T04:18:43.385Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T04:18:43.386Z"}
{"level":"debug","message":"Executing query [m8jp8px7fjz01sye64c]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[11,1,\"RESTAURAR\"]","timestamp":"2025-03-22T04:18:43.387Z"}
{"level":"debug","message":"Executing query [m8jp8pxcie933l7ieif]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[11]","timestamp":"2025-03-22T04:18:43.392Z"}
{"level":"debug","message":"Executing query [m8jp8pxfgw5191m81jq]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[11,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T04:18:43.395Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jp8pxfgw5191m81jq]","params":"[11,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T04:18:43.399Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T04:18:43.399Z"}
{"level":"debug","message":"Executing query [m8jp8pxjhu0i5ipw2f9]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[11]","timestamp":"2025-03-22T04:18:43.399Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jp8pxjhu0i5ipw2f9]","params":"[11]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T04:18:43.402Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T04:18:43.402Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T04:18:43.403Z"}
{"level":"debug","message":"Executing query [m8jp8pxo5oehm80faty]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[8,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T04:18:43.404Z\",\"ACTIVO\"]","timestamp":"2025-03-22T04:18:43.404Z"}
{"level":"debug","message":"Executing query [m8jp8pxrkgva22x27mq]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T04:18:43.407Z"}
{"level":"debug","message":"Executing query [m8jp8pxvuattkx902fq]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",12,\"ELIMINAR\"]","timestamp":"2025-03-22T04:18:43.411Z"}
{"level":"debug","message":"Executing query [m8jp8pxzjtb1f2bhjmm]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[12]","timestamp":"2025-03-22T04:18:43.415Z"}
{"level":"debug","message":"Executing query [m8jp8py27opk5rlm4xo]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T04:18:43.418Z"}
{"level":"debug","message":"Executing query [m8jp8py6o23yfikk1z]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-22T04:18:43.422Z"}
{"level":"debug","message":"Executing query [m8jp8pyav6r5m1hmjpa]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:18:43.426Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:18:43.427Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:43.777Z"}
{"level":"debug","message":"Executing query [m8jp8q83rpa9j60z7y9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:18:43.779Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:18:43.792Z"}
{"level":"debug","message":"Executing query [m8jp8q8hryfifl3icle]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:18:43.793Z"}
{"level":"debug","message":"Executing query [m8jp8q8jbs13ojdezrh]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742617123779\"]","timestamp":"2025-03-22T04:18:43.795Z"}
{"level":"debug","message":"Executing query [m8jp8q8mm9nsmatip8p]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742617123779\",\"TEST-OFI-FORENSE-1742617123779\",5302,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742617123779\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:18:43.798Z"}
{"level":"debug","message":"Executing query [m8jp8q8t7bl9oyahbp3]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T04:18:43.805Z"}
{"level":"debug","message":"Executing query [m8jp8q8wlcxgewjxd]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742617123779\"]","timestamp":"2025-03-22T04:18:43.808Z"}
{"level":"debug","message":"Executing query [m8jp8q91tayh5gu4ded]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",5]","timestamp":"2025-03-22T04:18:43.813Z"}
{"level":"debug","message":"Executing query [m8jp8q941ynqcc7d3nz]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T04:18:43.817Z"}
{"level":"debug","message":"Executing query [m8jp8q964jptiatdcov]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T04:18:43.818Z"}
{"level":"debug","message":"Executing query [m8jp8q995ab0dqwryle]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T04:18:43.821Z"}
{"level":"debug","message":"Executing query [m8jp8q9cdgmbuqmov1]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T04:18:43.824Z"}
{"level":"debug","message":"Executing query [m8jp8q9fortrke2yjf]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T04:18:43.827Z"}
{"level":"debug","message":"Executing query [m8jp8q9hza4eg15ra6h]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742617123829\",\"TEST-SP-OFI-FORENSE-1742617123829\",677,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T04:18:43.829Z"}
{"level":"debug","message":"Executing query [m8jp8q9kdxc9qbao5md]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742617123829\"]","timestamp":"2025-03-22T04:18:43.832Z"}
{"level":"debug","message":"Executing query [m8jp8q9ld8mhg9g6gio]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742617123829\"]","timestamp":"2025-03-22T04:18:43.833Z"}
{"level":"debug","message":"Executing query [m8jp8q9rz5jz1udx9xb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:18:43.839Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:18:43.841Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:43.970Z"}
{"level":"debug","message":"Executing query [m8jp8qdiymi9zmrd8m9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:18:43.974Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:18:43.990Z"}
{"level":"debug","message":"Executing query [m8jp8qe02jhr53ackte]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742617123973\"]","timestamp":"2025-03-22T04:18:43.992Z"}
{"level":"debug","message":"Executing query [m8jp8qe2zxiy7et1d7b]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742617123973\",true]","timestamp":"2025-03-22T04:18:43.994Z"}
{"level":"debug","message":"Executing query [m8jp8qe77ua0l1q66bp]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-22T04:18:43.999Z"}
{"level":"debug","message":"Executing query [m8jp8qe9ogdyyu4mjx]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742617123973\"]","timestamp":"2025-03-22T04:18:44.002Z"}
{"level":"debug","message":"Executing query [m8jp8qech9tgi6q2aiv]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",9]","timestamp":"2025-03-22T04:18:44.004Z"}
{"level":"debug","message":"Executing query [m8jp8qefxos7ek3c16d]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-22T04:18:44.007Z"}
{"level":"debug","message":"Executing query [m8jp8qejsac47c1y1pe]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-22T04:18:44.011Z"}
{"level":"debug","message":"Executing query [m8jp8qenzwm8mjt3drs]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-22T04:18:44.015Z"}
{"level":"debug","message":"Executing query [m8jp8qeo6b6fal3ff1e]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-22T04:18:44.016Z"}
{"level":"debug","message":"Executing query [m8jp8qeqvw4vwfsikt]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-22T04:18:44.018Z"}
{"level":"debug","message":"Executing query [m8jp8qetsjmfwriobb]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-22T04:18:44.021Z"}
{"level":"debug","message":"Executing query [m8jp8qeyu8osrlsvrgn]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T04:18:44.026Z"}
{"level":"debug","message":"Executing query [m8jp8qf1zh0t1ayab5c]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:18:44.029Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:18:44.030Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:44.164Z"}
{"level":"debug","message":"Executing query [m8jp8qivu02frhttan]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:18:44.167Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:18:44.181Z"}
{"level":"debug","message":"Executing query [m8jp8qjelb2cv4h4q2]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:18:44.186Z"}
{"level":"debug","message":"Executing query [m8jp8qjhige8x18yua]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742617124166\"]","timestamp":"2025-03-22T04:18:44.189Z"}
{"level":"debug","message":"Executing query [m8jp8qjjgtbj3aci05]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742617124166\",\"TEST-OFI-QUIMICA-1742617124166\",3729,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:18:44.191Z"}
{"level":"debug","message":"Executing query [m8jp8qjrv8i2cl2fuea]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T04:18:44.199Z"}
{"level":"debug","message":"Executing query [m8jp8qjuwc1os2z8fs]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742617124166\"]","timestamp":"2025-03-22T04:18:44.202Z"}
{"level":"debug","message":"Executing query [m8jp8qjvg9mrw4ja02]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",3]","timestamp":"2025-03-22T04:18:44.203Z"}
{"level":"debug","message":"Executing query [m8jp8qjzbzfekzrn1jv]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T04:18:44.207Z"}
{"level":"debug","message":"Executing query [m8jp8qk2wul2zb2hh8]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T04:18:44.210Z"}
{"level":"debug","message":"Executing query [m8jp8qk5kecm215qpl]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T04:18:44.213Z"}
{"level":"debug","message":"Executing query [m8jp8qk8xy47idxoc9o]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T04:18:44.216Z"}
{"level":"debug","message":"Executing query [m8jp8qkaosrlqtrx5na]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T04:18:44.218Z"}
{"level":"debug","message":"Executing query [m8jp8qkc1q2v050u5su]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:18:44.220Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:18:44.220Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:44.346Z"}
{"level":"debug","message":"Executing query [m8jp8qnxjqab0do1crf]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:18:44.349Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:18:44.361Z"}
{"level":"debug","message":"Executing query [m8jp8qoa22sat6g8lxk]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617124348\"]","timestamp":"2025-03-22T04:18:44.362Z"}
{"level":"debug","message":"Executing query [m8jp8qoc63u0o4gnyre]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617124348\"]","timestamp":"2025-03-22T04:18:44.364Z"}
{"level":"debug","message":"Executing query [m8jp8qodnnunopsfqb8]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742617124348\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:18:44.365Z"}
{"level":"debug","message":"Executing query [m8jp8qoip64srcl3fa9]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-22T04:18:44.370Z"}
{"level":"debug","message":"Executing query [m8jp8qomrwey5kny2rf]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617124348\"]","timestamp":"2025-03-22T04:18:44.374Z"}
{"level":"debug","message":"Executing query [m8jp8qoouqx65kcfqps]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1002]","timestamp":"2025-03-22T04:18:44.376Z"}
{"level":"debug","message":"Executing query [m8jp8qoqi7wjocqsq3]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-22T04:18:44.378Z"}
{"level":"debug","message":"Executing query [m8jp8qotcprbiq468iq]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-22T04:18:44.381Z"}
{"level":"debug","message":"Executing query [m8jp8qp1jh43wh7peut]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-22T04:18:44.389Z"}
{"level":"debug","message":"Executing query [m8jp8qp3ntuy1w56wni]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-22T04:18:44.391Z"}
{"level":"debug","message":"Executing query [m8jp8qp5q5pvuuopj7a]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-22T04:18:44.393Z"}
{"level":"debug","message":"Executing query [m8jp8qp9pik1lyvnx7f]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-22T04:18:44.397Z"}
{"level":"debug","message":"Executing query [m8jp8qpbyunzdijz51s]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T04:18:44.399Z"}
{"level":"debug","message":"Executing query [m8jp8qpd66onl4vf2uy]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:18:44.401Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:18:44.402Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:44.524Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:44.530Z"}
{"level":"debug","message":"Executing query [m8jp8qsze82mhny1sg8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:18:44.531Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:18:44.541Z"}
{"level":"debug","message":"Executing query [m8jp8qtcwos49pwvoxj]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T04:18:44.544Z"}
{"level":"debug","message":"Executing query [m8jp8qtdjgdxs4lrped]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T04:18:44.545Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T04:18:44.547Z"}
{"level":"debug","message":"Executing query [m8jp8qtfje0ghm1mga]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:18:44.547Z"}
{"level":"debug","message":"Executing query [m8jp8qtgop7vxiwclm]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:18:44.548Z"}
{"level":"debug","message":"Executing query [m8jp8qthbrovtagy5q]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:18:44.549Z"}
{"level":"debug","message":"Executing query [m8jp8qth93ccu1bs1f5]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T04:18:44.549Z"}
{"level":"debug","message":"Executing query [m8jp8qtlx0o0ax4mzso]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-22T04:18:44.553Z"}
{"level":"debug","message":"Executing query [m8jp8qtnmdshw1jkrz]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:18:44.555Z"}
{"level":"debug","message":"Executing query [m8jp8qtqglh4y85b8mu]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",4]","timestamp":"2025-03-22T04:18:44.558Z"}
{"level":"debug","message":"Executing query [m8jp8qttyic7s92xbw]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-22T04:18:44.561Z"}
{"level":"debug","message":"Executing query [m8jp8qtu01j857qzyo8d]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-22T04:18:44.563Z"}
{"level":"debug","message":"Executing query [m8jp8qtxa065t7pl4v7]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-22T04:18:44.565Z"}
{"level":"debug","message":"Executing query [m8jp8qtyybq3mudg8ar]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:18:44.567Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:18:44.568Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:44.694Z"}
{"level":"debug","message":"Executing query [m8jp8qxlu3eoqzokr5d]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:18:44.697Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:18:44.717Z"}
{"level":"debug","message":"Executing query [m8jp8qy7ehbln4f62pt]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T04:18:44.719Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T04:18:44.722Z"}
{"level":"debug","message":"Executing query [m8jp8qyasu6dmqcftim]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T04:18:44.722Z"}
{"level":"debug","message":"Executing query [m8jp8qyd0tpek2toamv]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T04:18:44.725Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-22T04:18:44.727Z"}
{"level":"debug","message":"Executing query [m8jp8qyfq0r15ww9loa]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T04:18:44.727Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T04:18:44.730Z"}
{"level":"debug","message":"Executing query [m8jp8qyns71s0mkjcu]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T04:18:44.735Z"}
{"level":"debug","message":"Executing query [m8jp8qyq1t97a8143hr]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T04:18:44.738Z"}
{"level":"debug","message":"Executing query [m8jp8qys6bb31l4cdsx]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[5]","timestamp":"2025-03-22T04:18:44.741Z"}
{"level":"debug","message":"Executing query [m8jp8qz0oski08v0qv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:18:44.748Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:44.877Z"}
{"level":"debug","message":"Executing query [m8jp8r2n4x2uoq2trzr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:18:44.879Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:18:44.888Z"}
{"level":"debug","message":"Executing query [m8jp8r2ynlaa3vsk1c]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T04:18:44.890Z"}
{"level":"debug","message":"Executing query [m8jp8r2zw1mt6gh0haf]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T04:18:44.891Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T04:18:44.893Z"}
{"level":"debug","message":"Executing query [m8jp8r31wzhcpnn10ar]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T04:18:44.893Z"}
{"level":"debug","message":"Executing query [m8jp8r33j4w1vdng3i]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T04:18:44.895Z"}
{"level":"debug","message":"Executing query [m8jp8r343m6j6pbpm3l]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T04:18:44.896Z"}
{"level":"debug","message":"Executing query [m8jp8r39yftsrqmmwv]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[10]","timestamp":"2025-03-22T04:18:44.901Z"}
{"level":"debug","message":"Executing query [m8jp8r3edepyqvesi8l]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[10]","timestamp":"2025-03-22T04:18:44.906Z"}
{"level":"debug","message":"Executing query [m8jp8r3h9paori9prgg]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",10]","timestamp":"2025-03-22T04:18:44.909Z"}
{"level":"debug","message":"Executing query [m8jp8r3kwbk27bp4evs]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[10]","timestamp":"2025-03-22T04:18:44.912Z"}
{"level":"debug","message":"Executing query [m8jp8r3mul4lfz77hn]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[10]","timestamp":"2025-03-22T04:18:44.914Z"}
{"level":"debug","message":"Executing query [m8jp8r3uoblvtata19]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[10]","timestamp":"2025-03-22T04:18:44.922Z"}
{"level":"debug","message":"Executing query [m8jp8r3wnk5vck5wqw]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:18:44.924Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:18:44.925Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:18:45.053Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:18:45.073Z"}
{"level":"debug","message":"Executing query [m8jp8r8780srneo2nvs]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T04:18:45.079Z"}
{"level":"debug","message":"Executing query [m8jp8r89caf4hhz1kw9]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T04:18:45.081Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jp8r89caf4hhz1kw9]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T04:18:45.083Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:18:45.084Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T04:18:45.188Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T04:18:45.336Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T04:18:45.470Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T04:18:45.471Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T04:18:45.472Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T04:18:45.473Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T04:18:45.474Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T04:18:45.474Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:52.596Z"}
{"level":"debug","message":"Executing query [m8jpa7ci75msgy3yt85]: INSERT IGNORE INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive, Descripcion) VALUES (?, ?, ?, ?, ?, ?)","params":"[888,\"Área de Prueba\",\"TEST-AREA\",\"PRUEBA\",1,\"Área creada para pruebas\"]","timestamp":"2025-03-22T04:19:52.626Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:19:52.682Z"}
{"level":"debug","message":"Executing query [m8jpa7e7p2nbp71qk1]: INSERT IGNORE INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Rol de Prueba\",\"Rol creado para pruebas\",1,255]","timestamp":"2025-03-22T04:19:52.688Z"}
{"level":"debug","message":"Executing query [m8jpa7eafv1d38qvasb]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123\"]","timestamp":"2025-03-22T04:19:52.690Z"}
{"level":"debug","message":"Executing query [m8jpa7eeh5yz915lh3j]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, Password, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123\",\"Usuario\",\"Prueba\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","timestamp":"2025-03-22T04:19:52.694Z"}
{"code":"ER_BAD_FIELD_ERROR","error":"Unknown column 'Rango' in 'field list'","level":"error","message":"Database query error [m8jpa7eeh5yz915lh3j]","params":"[\"TEST123\",\"Usuario\",\"Prueba\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","query":"INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, Password, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","timestamp":"2025-03-22T04:19:52.696Z"}
{"level":"error","message":"Error en la configuración de las pruebas: Unknown column 'Rango' in 'field list'","timestamp":"2025-03-22T04:19:52.697Z"}
{"level":"debug","message":"Executing query [m8jpa7f2yqo34xbssyk]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[888,888]","timestamp":"2025-03-22T04:19:52.718Z"}
{"level":"error","message":"Error al limpiar datos de prueba: db.close is not a function","timestamp":"2025-03-22T04:19:52.721Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:55.060Z"}
{"duration":"9ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T04:19:55.242Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T04:19:55.256Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:19:55.272Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T04:19:55.275Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:56.299Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:19:56.371Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T04:19:56.373Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:56.651Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T04:19:56.671Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:19:56.749Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T04:19:56.772Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:19:56.822Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:57.228Z"}
{"level":"debug","message":"Executing query [m8jpaawfvbzzcmt2ve]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:19:57.231Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:19:57.242Z"}
{"level":"debug","message":"Executing query [m8jpaawsao2omag2pek]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T04:19:57.244Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T04:19:57.250Z"}
{"level":"debug","message":"Executing query [m8jpaawzdikktrtk7yk]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T04:19:57.251Z"}
{"level":"debug","message":"Executing query [m8jpaax4421k49ta7z]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[10,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T04:19:57.256Z\",\"ACTIVO\"]","timestamp":"2025-03-22T04:19:57.256Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 13","timestamp":"2025-03-22T04:19:57.262Z"}
{"level":"debug","message":"Executing query [m8jpaaxc24frf6q5i0x]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[13,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T04:19:57.264Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpaaxc24frf6q5i0x]","params":"[13,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T04:19:57.270Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T04:19:57.271Z"}
{"level":"debug","message":"Executing query [m8jpaaxlkhem6t6qj8]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[13]","timestamp":"2025-03-22T04:19:57.273Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpaaxlkhem6t6qj8]","params":"[13]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T04:19:57.276Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T04:19:57.277Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T04:19:57.277Z"}
{"level":"debug","message":"Executing query [m8jpaaxrpc720kuxvbp]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[13,1,\"RESTAURAR\"]","timestamp":"2025-03-22T04:19:57.279Z"}
{"level":"debug","message":"Executing query [m8jpaaxy8kmbxswc98g]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[13]","timestamp":"2025-03-22T04:19:57.286Z"}
{"level":"debug","message":"Executing query [m8jpaay264q25z1a77x]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[13,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T04:19:57.290Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpaay264q25z1a77x]","params":"[13,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T04:19:57.294Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T04:19:57.295Z"}
{"level":"debug","message":"Executing query [m8jpaay7jps183pory]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[13]","timestamp":"2025-03-22T04:19:57.295Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpaay7jps183pory]","params":"[13]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T04:19:57.298Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T04:19:57.299Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T04:19:57.299Z"}
{"level":"debug","message":"Executing query [m8jpaayctjqhduczeu8]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[10,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T04:19:57.300Z\",\"ACTIVO\"]","timestamp":"2025-03-22T04:19:57.301Z"}
{"level":"debug","message":"Executing query [m8jpaaygvjmsxpmxkn]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T04:19:57.304Z"}
{"level":"debug","message":"Executing query [m8jpaayimiqil9zszy]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",14,\"ELIMINAR\"]","timestamp":"2025-03-22T04:19:57.306Z"}
{"level":"debug","message":"Executing query [m8jpaaylzg3ggb2nk7s]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[14]","timestamp":"2025-03-22T04:19:57.309Z"}
{"level":"debug","message":"Executing query [m8jpaaynznjh44lnm6]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T04:19:57.311Z"}
{"level":"debug","message":"Executing query [m8jpaaywwkphylbur19]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-22T04:19:57.320Z"}
{"level":"debug","message":"Executing query [m8jpaaz1m6t5ck9gyah]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:19:57.325Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:19:57.329Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:57.476Z"}
{"level":"debug","message":"Executing query [m8jpab3ceqrg0fburci]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:19:57.480Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:19:57.497Z"}
{"level":"debug","message":"Executing query [m8jpab3w78so6y6upx]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:19:57.500Z"}
{"level":"debug","message":"Executing query [m8jpab3ydfed01ivgcn]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742617197479\"]","timestamp":"2025-03-22T04:19:57.502Z"}
{"level":"debug","message":"Executing query [m8jpab40n7hltdcv04a]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742617197479\",\"TEST-OFICIO-1742617197479\",7458,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:19:57.504Z"}
{"level":"debug","message":"Executing query [m8jpab46oukshk64m2m]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-22T04:19:57.510Z"}
{"level":"debug","message":"Executing query [m8jpab4czj4apgjhb0p]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742617197479\"]","timestamp":"2025-03-22T04:19:57.516Z"}
{"level":"debug","message":"Executing query [m8jpab4e1vm9agk3tvb]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",7]","timestamp":"2025-03-22T04:19:57.518Z"}
{"level":"debug","message":"Executing query [m8jpab4ionhixslaw4k]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-22T04:19:57.522Z"}
{"level":"debug","message":"Executing query [m8jpab4k0wfixmpoitx]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-22T04:19:57.524Z"}
{"level":"debug","message":"Executing query [m8jpab4q2nhebfexk2r]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-22T04:19:57.530Z"}
{"level":"debug","message":"Executing query [m8jpab4uzrd15nnnk1]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-22T04:19:57.534Z"}
{"level":"debug","message":"Executing query [m8jpab4zjdrpmn6yzi]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-22T04:19:57.539Z"}
{"level":"debug","message":"Executing query [m8jpab52wxjxqmiypp]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742617197542\",\"TEST-SP-OFICIO-1742617197542\",5433,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T04:19:57.543Z"}
{"level":"debug","message":"Executing query [m8jpab5718nzkmbyb0c]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742617197542\"]","timestamp":"2025-03-22T04:19:57.547Z"}
{"level":"debug","message":"Executing query [m8jpab591lal4ppg9c2]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742617197542\"]","timestamp":"2025-03-22T04:19:57.549Z"}
{"level":"debug","message":"Executing query [m8jpab5e7horuqb0h5r]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:19:57.554Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:19:57.555Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:57.692Z"}
{"level":"debug","message":"Executing query [m8jpab9c31qzsdnik69]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:19:57.696Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:19:57.708Z"}
{"level":"debug","message":"Executing query [m8jpab9q452cbunp8il]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:19:57.710Z"}
{"level":"debug","message":"Executing query [m8jpab9s7e23co0oxh3]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742617197695\"]","timestamp":"2025-03-22T04:19:57.712Z"}
{"level":"debug","message":"Executing query [m8jpab9wu5svjpg7z7]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742617197695\",\"TEST-OFI-FORENSE-1742617197695\",1487,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742617197695\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:19:57.716Z"}
{"level":"debug","message":"Executing query [m8jpaba4bbhxshjm0t]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-22T04:19:57.724Z"}
{"level":"debug","message":"Executing query [m8jpabaava7eoc5mzed]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742617197695\"]","timestamp":"2025-03-22T04:19:57.730Z"}
{"level":"debug","message":"Executing query [m8jpabadk6ie5v2635l]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",7]","timestamp":"2025-03-22T04:19:57.733Z"}
{"level":"debug","message":"Executing query [m8jpabahuaxor8xubwa]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-22T04:19:57.737Z"}
{"level":"debug","message":"Executing query [m8jpabaju1umvrzlf8]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-22T04:19:57.739Z"}
{"level":"debug","message":"Executing query [m8jpabamco2vj8iakg]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-22T04:19:57.742Z"}
{"level":"debug","message":"Executing query [m8jpabapjb3ogf0bt1]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-22T04:19:57.745Z"}
{"level":"debug","message":"Executing query [m8jpabas67ohyju6yxv]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-22T04:19:57.748Z"}
{"level":"debug","message":"Executing query [m8jpabauwkv8p5h0l2]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742617197750\",\"TEST-SP-OFI-FORENSE-1742617197750\",6547,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T04:19:57.750Z"}
{"level":"debug","message":"Executing query [m8jpabay28lloeem9gl]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742617197750\"]","timestamp":"2025-03-22T04:19:57.754Z"}
{"level":"debug","message":"Executing query [m8jpabb015aibzghv8s]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742617197750\"]","timestamp":"2025-03-22T04:19:57.756Z"}
{"level":"debug","message":"Executing query [m8jpabb4l9y7xab0jdm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:19:57.760Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:19:57.761Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:57.903Z"}
{"level":"debug","message":"Executing query [m8jpabf6uil948t52g]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:19:57.906Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:19:57.924Z"}
{"level":"debug","message":"Executing query [m8jpabfuyw2md7206rl]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:19:57.930Z"}
{"level":"debug","message":"Executing query [m8jpabfxjajsrw5po6s]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742617197905\"]","timestamp":"2025-03-22T04:19:57.933Z"}
{"level":"debug","message":"Executing query [m8jpabfz6hj1fhcjd34]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742617197905\",\"TEST-OFI-QUIMICA-1742617197905\",5173,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:19:57.935Z"}
{"level":"debug","message":"Executing query [m8jpabg8341jiiydz1w]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-22T04:19:57.944Z"}
{"level":"debug","message":"Executing query [m8jpabgb8zlb7jvdlmj]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742617197905\"]","timestamp":"2025-03-22T04:19:57.947Z"}
{"level":"debug","message":"Executing query [m8jpabgdj1nndpeffn]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",4]","timestamp":"2025-03-22T04:19:57.949Z"}
{"level":"debug","message":"Executing query [m8jpabggs6wjsvyblhg]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-22T04:19:57.952Z"}
{"level":"debug","message":"Executing query [m8jpabgjo50382ngw9h]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-22T04:19:57.955Z"}
{"level":"debug","message":"Executing query [m8jpabgonvj0jyuhx3]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-22T04:19:57.960Z"}
{"level":"debug","message":"Executing query [m8jpabgqgen4ngka3bf]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-22T04:19:57.962Z"}
{"level":"debug","message":"Executing query [m8jpabgt7df4ydcgtuf]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-22T04:19:57.965Z"}
{"level":"debug","message":"Executing query [m8jpabgw392e6rqcg3r]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:19:57.968Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:19:57.970Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:58.108Z"}
{"level":"debug","message":"Executing query [m8jpabkv57mn9ur2onh]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:19:58.111Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:19:58.134Z"}
{"level":"debug","message":"Executing query [m8jpabljrf70il9mpu]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617198110\"]","timestamp":"2025-03-22T04:19:58.135Z"}
{"level":"debug","message":"Executing query [m8jpabllhky8iun6mnf]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617198110\"]","timestamp":"2025-03-22T04:19:58.137Z"}
{"level":"debug","message":"Executing query [m8jpablmubm4xdgspf]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742617198110\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:19:58.138Z"}
{"level":"debug","message":"Executing query [m8jpablu8ly86k8a68q]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-22T04:19:58.146Z"}
{"level":"debug","message":"Executing query [m8jpablwlhaqn3cccz7]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617198110\"]","timestamp":"2025-03-22T04:19:58.148Z"}
{"level":"debug","message":"Executing query [m8jpablytr5cf5658kg]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1003]","timestamp":"2025-03-22T04:19:58.150Z"}
{"level":"debug","message":"Executing query [m8jpabm27fhu3shmp3k]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-22T04:19:58.154Z"}
{"level":"debug","message":"Executing query [m8jpabm5gnc0djr9rnw]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-22T04:19:58.157Z"}
{"level":"debug","message":"Executing query [m8jpabm90lbnmhkn9ck]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-22T04:19:58.161Z"}
{"level":"debug","message":"Executing query [m8jpabmb4ypphtbwle6]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-22T04:19:58.163Z"}
{"level":"debug","message":"Executing query [m8jpabmdkn85qjqlkj]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-22T04:19:58.165Z"}
{"level":"debug","message":"Executing query [m8jpabmga3z9fjg6f1]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-22T04:19:58.168Z"}
{"level":"debug","message":"Executing query [m8jpabmiga71sf4rxyl]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T04:19:58.170Z"}
{"level":"debug","message":"Executing query [m8jpabmlzmw7lmt8k9b]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:19:58.173Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:19:58.174Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:58.306Z"}
{"level":"debug","message":"Executing query [m8jpabqc5bkrfk123js]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:19:58.308Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:19:58.326Z"}
{"level":"debug","message":"Executing query [m8jpabr10nfwzon4im4]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742617198308\"]","timestamp":"2025-03-22T04:19:58.333Z"}
{"level":"debug","message":"Executing query [m8jpabr4rc4aw54bhsj]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742617198308\",true]","timestamp":"2025-03-22T04:19:58.336Z"}
{"level":"debug","message":"Executing query [m8jpabrdhbjpt08zlom]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-22T04:19:58.345Z"}
{"level":"debug","message":"Executing query [m8jpabrgdst86bd47kn]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742617198308\"]","timestamp":"2025-03-22T04:19:58.348Z"}
{"level":"debug","message":"Executing query [m8jpabri5srf6v0ki3f]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",11]","timestamp":"2025-03-22T04:19:58.350Z"}
{"level":"debug","message":"Executing query [m8jpabrmljcsbmi8am]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-22T04:19:58.354Z"}
{"level":"debug","message":"Executing query [m8jpabroz5rj9fykjyr]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-22T04:19:58.356Z"}
{"level":"debug","message":"Executing query [m8jpabrsesdjli30l3a]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-22T04:19:58.361Z"}
{"level":"debug","message":"Executing query [m8jpabru5k1bqnx25bk]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-22T04:19:58.362Z"}
{"level":"debug","message":"Executing query [m8jpabrw1wjiuc4pvnk]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-22T04:19:58.364Z"}
{"level":"debug","message":"Executing query [m8jpabrzjz452udtn2e]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-22T04:19:58.367Z"}
{"level":"debug","message":"Executing query [m8jpabs1zhehpr8n59l]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T04:19:58.369Z"}
{"level":"debug","message":"Executing query [m8jpabs3gzln7ba4xrl]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:19:58.371Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:19:58.372Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:58.498Z"}
{"level":"debug","message":"Executing query [m8jpabvrztym2fw68q]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:19:58.503Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:19:58.516Z"}
{"level":"debug","message":"Executing query [m8jpabw647i210n4viy]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T04:19:58.518Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T04:19:58.521Z"}
{"level":"debug","message":"Executing query [m8jpabw9k9z445wko7]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T04:19:58.521Z"}
{"level":"debug","message":"Executing query [m8jpabwbl61bpn1db2]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T04:19:58.523Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-22T04:19:58.524Z"}
{"level":"debug","message":"Executing query [m8jpabwcebhzebr6545]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T04:19:58.524Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T04:19:58.525Z"}
{"level":"debug","message":"Executing query [m8jpabwlxgsqb7q66qp]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T04:19:58.533Z"}
{"level":"debug","message":"Executing query [m8jpabwosc7dppacmns]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T04:19:58.536Z"}
{"level":"debug","message":"Executing query [m8jpabwryrvoh1p14en]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[7]","timestamp":"2025-03-22T04:19:58.539Z"}
{"level":"debug","message":"Executing query [m8jpabwyg4du82fp34b]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:19:58.546Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:58.686Z"}
{"level":"debug","message":"Executing query [m8jpac0yh0ptywupygv]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:19:58.690Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:19:58.705Z"}
{"level":"debug","message":"Executing query [m8jpac1e6pznufxq7z]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T04:19:58.706Z"}
{"level":"debug","message":"Executing query [m8jpac1gj6up7o8wzk]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T04:19:58.708Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T04:19:58.709Z"}
{"level":"debug","message":"Executing query [m8jpac1ijlhi2b7yuk]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T04:19:58.710Z"}
{"level":"debug","message":"Executing query [m8jpac1jouhdmpygzxc]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T04:19:58.711Z"}
{"level":"debug","message":"Executing query [m8jpac1meihg7bhnvra]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T04:19:58.714Z"}
{"level":"debug","message":"Executing query [m8jpac1tjkstwe82w0n]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[12]","timestamp":"2025-03-22T04:19:58.721Z"}
{"level":"debug","message":"Executing query [m8jpac1ws9vgomr1nl]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[12]","timestamp":"2025-03-22T04:19:58.724Z"}
{"level":"debug","message":"Executing query [m8jpac20mgo1mj80cwh]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",12]","timestamp":"2025-03-22T04:19:58.728Z"}
{"level":"debug","message":"Executing query [m8jpac24ruk9dyawqnd]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[12]","timestamp":"2025-03-22T04:19:58.732Z"}
{"level":"debug","message":"Executing query [m8jpac27cccoxmj4ypm]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[12]","timestamp":"2025-03-22T04:19:58.735Z"}
{"level":"debug","message":"Executing query [m8jpac2ayobkdy2xr9]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[12]","timestamp":"2025-03-22T04:19:58.738Z"}
{"level":"debug","message":"Executing query [m8jpac2c2qoddm3951g]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:19:58.740Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:19:58.741Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:58.877Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:58.884Z"}
{"level":"debug","message":"Executing query [m8jpac6ez82c8r2tyva]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:19:58.886Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:19:58.898Z"}
{"level":"debug","message":"Executing query [m8jpac6teyl7n3984xb]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T04:19:58.901Z"}
{"level":"debug","message":"Executing query [m8jpac6uuvvibh4wolh]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T04:19:58.902Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T04:19:58.904Z"}
{"level":"debug","message":"Executing query [m8jpac6wk343g0zqvii]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:19:58.904Z"}
{"level":"debug","message":"Executing query [m8jpac6xznvy0ygla3e]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:19:58.905Z"}
{"level":"debug","message":"Executing query [m8jpac6zeppvbr8dkg4]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:19:58.907Z"}
{"level":"debug","message":"Executing query [m8jpac70jptldx2wng]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T04:19:58.908Z"}
{"level":"debug","message":"Executing query [m8jpac74jctk1qpb6ra]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-22T04:19:58.912Z"}
{"level":"debug","message":"Executing query [m8jpac7dpnqoss67mwo]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:19:58.921Z"}
{"level":"debug","message":"Executing query [m8jpac7gaxbsmlazw6w]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",5]","timestamp":"2025-03-22T04:19:58.924Z"}
{"level":"debug","message":"Executing query [m8jpac7kd7ru6ityk1s]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-22T04:19:58.928Z"}
{"level":"debug","message":"Executing query [m8jpac7oy0wd1njtoi9]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-22T04:19:58.932Z"}
{"level":"debug","message":"Executing query [m8jpac7subvkq2rnkrq]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-22T04:19:58.936Z"}
{"level":"debug","message":"Executing query [m8jpac7uhqrnkotibtg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:19:58.938Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:19:58.940Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:19:59.076Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:19:59.100Z"}
{"level":"debug","message":"Executing query [m8jpaccgw17px203lf]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T04:19:59.104Z"}
{"level":"debug","message":"Executing query [m8jpaccih9uqeuhde3f]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T04:19:59.106Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jpaccih9uqeuhde3f]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T04:19:59.108Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:19:59.110Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T04:19:59.224Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T04:19:59.367Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T04:19:59.526Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T04:19:59.531Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T04:19:59.538Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T04:19:59.539Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T04:19:59.541Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T04:19:59.541Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:18.546Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:20.233Z"}
{"fatal":true,"level":"error","message":"Error al conectar a la base de datos: Encoding not recognized: 'cesu8' (searched as: 'cesu8')","stack":"Error: Encoding not recognized: 'cesu8' (searched as: 'cesu8')\n    at Object.getCodec (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:104:23)\n    at Object.getDecoder (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:125:23)\n    at Object.<anonymous>.exports.decode (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\parsers\\string.js:20:23)\n    at Packet.readNullTerminatedString (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\packet.js:414:25)\n    at Function.fromPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\handshake.js:62:33)\n    at ClientHandshake.handshakeInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\client_handshake.js:112:40)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:45:22)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T04:23:20.362Z"}
{"duration":"31ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T04:23:20.381Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:23:20.383Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T04:23:20.386Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:23:20.398Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:21.044Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:23:21.099Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T04:23:21.101Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:21.299Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T04:23:21.312Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:23:21.370Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T04:23:21.388Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:23:21.418Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:21.702Z"}
{"level":"debug","message":"Executing query [m8jpeoo9d2nc6gj5u9f]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:23:21.705Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:23:21.715Z"}
{"level":"debug","message":"Executing query [m8jpeoolr591dkbnwq]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T04:23:21.717Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T04:23:21.720Z"}
{"level":"debug","message":"Executing query [m8jpeooo33z06kgvq7f]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T04:23:21.720Z"}
{"level":"debug","message":"Executing query [m8jpeootrtvyi3ar08s]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[12,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T04:23:21.725Z\",\"ACTIVO\"]","timestamp":"2025-03-22T04:23:21.726Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 15","timestamp":"2025-03-22T04:23:21.730Z"}
{"level":"debug","message":"Executing query [m8jpeooz8zbvszn18vp]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[15,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T04:23:21.731Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpeooz8zbvszn18vp]","params":"[15,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T04:23:21.735Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T04:23:21.736Z"}
{"level":"debug","message":"Executing query [m8jpeop4w5v5ib32bxt]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[15]","timestamp":"2025-03-22T04:23:21.736Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpeop4w5v5ib32bxt]","params":"[15]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T04:23:21.739Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T04:23:21.739Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T04:23:21.740Z"}
{"level":"debug","message":"Executing query [m8jpeop976a0bat4gpl]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[15,1,\"RESTAURAR\"]","timestamp":"2025-03-22T04:23:21.741Z"}
{"level":"debug","message":"Executing query [m8jpeope96no8zbt9o8]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[15]","timestamp":"2025-03-22T04:23:21.746Z"}
{"level":"debug","message":"Executing query [m8jpeopgqj2ufeht3u]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[15,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T04:23:21.749Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpeopgqj2ufeht3u]","params":"[15,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T04:23:21.752Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T04:23:21.753Z"}
{"level":"debug","message":"Executing query [m8jpeoplgzl7a46px99]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[15]","timestamp":"2025-03-22T04:23:21.753Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpeoplgzl7a46px99]","params":"[15]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T04:23:21.756Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T04:23:21.756Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T04:23:21.757Z"}
{"level":"debug","message":"Executing query [m8jpeopq1mltmmxmhri]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[12,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T04:23:21.758Z\",\"ACTIVO\"]","timestamp":"2025-03-22T04:23:21.758Z"}
{"level":"debug","message":"Executing query [m8jpeoptjhysa1z53u]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T04:23:21.761Z"}
{"level":"debug","message":"Executing query [m8jpeopv5ivi14ksxmc]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",16,\"ELIMINAR\"]","timestamp":"2025-03-22T04:23:21.763Z"}
{"level":"debug","message":"Executing query [m8jpeopywycuzkkqund]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[16]","timestamp":"2025-03-22T04:23:21.766Z"}
{"level":"debug","message":"Executing query [m8jpeoq1ie5j5fxnfkq]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T04:23:21.769Z"}
{"level":"debug","message":"Executing query [m8jpeoq5i91clc2tg3]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-22T04:23:21.773Z"}
{"level":"debug","message":"Executing query [m8jpeoq8t5wetu4h2n]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:23:21.776Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:23:21.777Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:21.882Z"}
{"level":"debug","message":"Executing query [m8jpeot91aaf7pqa895]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:23:21.885Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:23:21.898Z"}
{"level":"debug","message":"Executing query [m8jpeoto49uo0npy4jh]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:23:21.900Z"}
{"level":"debug","message":"Executing query [m8jpeotpw4dgp0az3w]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742617401885\"]","timestamp":"2025-03-22T04:23:21.901Z"}
{"level":"debug","message":"Executing query [m8jpeotqmx3ej7kohgk]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742617401885\",\"TEST-OFICIO-1742617401885\",7027,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:23:21.902Z"}
{"level":"debug","message":"Executing query [m8jpeotwmmk5n8fv1ya]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-22T04:23:21.908Z"}
{"level":"debug","message":"Executing query [m8jpeotze70hfyidpyl]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742617401885\"]","timestamp":"2025-03-22T04:23:21.911Z"}
{"level":"debug","message":"Executing query [m8jpeou1lbndk630p0f]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",9]","timestamp":"2025-03-22T04:23:21.913Z"}
{"level":"debug","message":"Executing query [m8jpeou4zxg62wrxgio]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-22T04:23:21.916Z"}
{"level":"debug","message":"Executing query [m8jpeou6towl720lhu]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-22T04:23:21.918Z"}
{"level":"debug","message":"Executing query [m8jpeou8sg40r3q9d]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-22T04:23:21.920Z"}
{"level":"debug","message":"Executing query [m8jpeou9l2nm9bpnwq]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-22T04:23:21.921Z"}
{"level":"debug","message":"Executing query [m8jpeoucbe87nixzwpa]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-22T04:23:21.924Z"}
{"level":"debug","message":"Executing query [m8jpeoueky4pmypuq6m]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742617401926\",\"TEST-SP-OFICIO-1742617401926\",2566,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T04:23:21.926Z"}
{"level":"debug","message":"Executing query [m8jpeouh7s4puoddgfy]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742617401926\"]","timestamp":"2025-03-22T04:23:21.929Z"}
{"level":"debug","message":"Executing query [m8jpeoukia43t6ukutq]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742617401926\"]","timestamp":"2025-03-22T04:23:21.932Z"}
{"level":"debug","message":"Executing query [m8jpeounc6du69lfsnl]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:23:21.935Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:23:21.936Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:22.038Z"}
{"level":"debug","message":"Executing query [m8jpeoxljcjaumbwya]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:23:22.041Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:23:22.050Z"}
{"level":"debug","message":"Executing query [m8jpeoxvze53fo3mln]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:23:22.051Z"}
{"level":"debug","message":"Executing query [m8jpeoxx24wyxed7j3qi]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742617402040\"]","timestamp":"2025-03-22T04:23:22.053Z"}
{"level":"debug","message":"Executing query [m8jpeoxydm7voktaikg]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742617402040\",\"TEST-OFI-QUIMICA-1742617402040\",6120,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:23:22.054Z"}
{"level":"debug","message":"Executing query [m8jpeoy3ox44wugzhpn]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-22T04:23:22.060Z"}
{"level":"debug","message":"Executing query [m8jpeoy79aabr2r8766]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742617402040\"]","timestamp":"2025-03-22T04:23:22.063Z"}
{"level":"debug","message":"Executing query [m8jpeoyagorpgshf2c]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",5]","timestamp":"2025-03-22T04:23:22.066Z"}
{"level":"debug","message":"Executing query [m8jpeoyd8y18xp2jybg]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-22T04:23:22.069Z"}
{"level":"debug","message":"Executing query [m8jpeoyfhy7omq0jfw9]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-22T04:23:22.071Z"}
{"level":"debug","message":"Executing query [m8jpeoyj7enzvv7hnwl]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-22T04:23:22.075Z"}
{"level":"debug","message":"Executing query [m8jpeoyljed1yvl6cti]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-22T04:23:22.077Z"}
{"level":"debug","message":"Executing query [m8jpeoyot609wy4tv0d]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-22T04:23:22.080Z"}
{"level":"debug","message":"Executing query [m8jpeoyqjj1bt3wn6o]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:23:22.082Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:23:22.082Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:22.184Z"}
{"level":"debug","message":"Executing query [m8jpep1n4b2zbbu454y]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:23:22.187Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:23:22.202Z"}
{"level":"debug","message":"Executing query [m8jpep23kwbbbn5vgb9]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:23:22.203Z"}
{"level":"debug","message":"Executing query [m8jpep25hs3gu5tevz]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742617402187\"]","timestamp":"2025-03-22T04:23:22.205Z"}
{"level":"debug","message":"Executing query [m8jpep27vgk9528kam]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742617402187\",\"TEST-OFI-FORENSE-1742617402187\",6975,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742617402187\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:23:22.207Z"}
{"level":"debug","message":"Executing query [m8jpep2czpa4lr1zlgc]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-22T04:23:22.212Z"}
{"level":"debug","message":"Executing query [m8jpep2f1k390r8a3mr]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742617402187\"]","timestamp":"2025-03-22T04:23:22.215Z"}
{"level":"debug","message":"Executing query [m8jpep2gqf3bhyepv5r]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",9]","timestamp":"2025-03-22T04:23:22.216Z"}
{"level":"debug","message":"Executing query [m8jpep2k3lori0z9cvf]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-22T04:23:22.220Z"}
{"level":"debug","message":"Executing query [m8jpep2nti0hv6ac9ec]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-22T04:23:22.223Z"}
{"level":"debug","message":"Executing query [m8jpep2qqi0gebzqpwk]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-22T04:23:22.226Z"}
{"level":"debug","message":"Executing query [m8jpep2racw7p64op4l]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-22T04:23:22.227Z"}
{"level":"debug","message":"Executing query [m8jpep2uxb2lc4y2nz9]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-22T04:23:22.230Z"}
{"level":"debug","message":"Executing query [m8jpep2w941ii8ny3b7]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742617402232\",\"TEST-SP-OFI-FORENSE-1742617402232\",3194,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T04:23:22.232Z"}
{"level":"debug","message":"Executing query [m8jpep30754jod1v80g]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742617402232\"]","timestamp":"2025-03-22T04:23:22.236Z"}
{"level":"debug","message":"Executing query [m8jpep3200n20wujomci]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742617402232\"]","timestamp":"2025-03-22T04:23:22.238Z"}
{"level":"debug","message":"Executing query [m8jpep34edroax98mbs]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:23:22.240Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:23:22.241Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:22.347Z"}
{"level":"debug","message":"Executing query [m8jpep657xikrzbnawg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:23:22.349Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:23:22.361Z"}
{"level":"debug","message":"Executing query [m8jpep6isyl8ws1jenj]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617402349\"]","timestamp":"2025-03-22T04:23:22.362Z"}
{"level":"debug","message":"Executing query [m8jpep6jj6egvmiepg]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617402349\"]","timestamp":"2025-03-22T04:23:22.363Z"}
{"level":"debug","message":"Executing query [m8jpep6lmv70gu62yuk]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742617402349\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:23:22.365Z"}
{"level":"debug","message":"Executing query [m8jpep6rgh411k8k5w]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-22T04:23:22.371Z"}
{"level":"debug","message":"Executing query [m8jpep6ss6wrcih4m7a]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617402349\"]","timestamp":"2025-03-22T04:23:22.372Z"}
{"level":"debug","message":"Executing query [m8jpep6u4ub2iiyjl1g]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1004]","timestamp":"2025-03-22T04:23:22.374Z"}
{"level":"debug","message":"Executing query [m8jpep6wqu5eijstin]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-22T04:23:22.376Z"}
{"level":"debug","message":"Executing query [m8jpep6y5t9l8dl2f6l]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-22T04:23:22.378Z"}
{"level":"debug","message":"Executing query [m8jpep71y5pol3reago]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-22T04:23:22.381Z"}
{"level":"debug","message":"Executing query [m8jpep73vsq8xeryl4]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-22T04:23:22.383Z"}
{"level":"debug","message":"Executing query [m8jpep74ll8aluu86z9]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-22T04:23:22.384Z"}
{"level":"debug","message":"Executing query [m8jpep768rxjnsvvx97]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-22T04:23:22.386Z"}
{"level":"debug","message":"Executing query [m8jpep78g70vl805atd]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T04:23:22.388Z"}
{"level":"debug","message":"Executing query [m8jpep79k499f3bhkzq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:23:22.389Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:23:22.390Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:22.496Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:22.504Z"}
{"level":"debug","message":"Executing query [m8jpepaip3zjq7ajnz]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:23:22.506Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:23:22.518Z"}
{"level":"debug","message":"Executing query [m8jpepawdj0qml8hl46]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T04:23:22.520Z"}
{"level":"debug","message":"Executing query [m8jpepaxzf5nd5folff]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T04:23:22.521Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T04:23:22.522Z"}
{"level":"debug","message":"Executing query [m8jpepay99frysl5d3]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:23:22.522Z"}
{"level":"debug","message":"Executing query [m8jpepazlwxvfz84ux]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:23:22.523Z"}
{"level":"debug","message":"Executing query [m8jpepb0ovv3lcvlt5]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:23:22.524Z"}
{"level":"debug","message":"Executing query [m8jpepb1slcdzvz2cii]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T04:23:22.525Z"}
{"level":"debug","message":"Executing query [m8jpepb6owaeaepxer]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-22T04:23:22.530Z"}
{"level":"debug","message":"Executing query [m8jpepb8qaox5orizz]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:23:22.532Z"}
{"level":"debug","message":"Executing query [m8jpepba0ydonx22z42]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",6]","timestamp":"2025-03-22T04:23:22.534Z"}
{"level":"debug","message":"Executing query [m8jpepbcikpliosszrm]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-22T04:23:22.536Z"}
{"level":"debug","message":"Executing query [m8jpepbeqnj50vab06p]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-22T04:23:22.538Z"}
{"level":"debug","message":"Executing query [m8jpepbhr86u5y4ov8c]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-22T04:23:22.541Z"}
{"level":"debug","message":"Executing query [m8jpepbjh9kj67d7z9u]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:23:22.543Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:23:22.544Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:22.643Z"}
{"level":"debug","message":"Executing query [m8jpepef8keuvvqj1lu]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:23:22.647Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:23:22.656Z"}
{"level":"debug","message":"Executing query [m8jpeperh9z5oskth2]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742617402645\"]","timestamp":"2025-03-22T04:23:22.659Z"}
{"level":"debug","message":"Executing query [m8jpepeu4rc14iciqmk]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742617402645\",true]","timestamp":"2025-03-22T04:23:22.662Z"}
{"level":"debug","message":"Executing query [m8jpepeyps5pi0gq2rf]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-22T04:23:22.666Z"}
{"level":"debug","message":"Executing query [m8jpepf0ixlhx7n8kw]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742617402645\"]","timestamp":"2025-03-22T04:23:22.668Z"}
{"level":"debug","message":"Executing query [m8jpepf232vfw7ukq2u]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",13]","timestamp":"2025-03-22T04:23:22.670Z"}
{"level":"debug","message":"Executing query [m8jpepf55x7q08frdy7]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-22T04:23:22.673Z"}
{"level":"debug","message":"Executing query [m8jpepf6xthz0jvhd7]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-22T04:23:22.674Z"}
{"level":"debug","message":"Executing query [m8jpepfassl2f94jab]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-22T04:23:22.678Z"}
{"level":"debug","message":"Executing query [m8jpepfbadwz973ntjm]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-22T04:23:22.679Z"}
{"level":"debug","message":"Executing query [m8jpepfcv4fvulayrmq]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-22T04:23:22.680Z"}
{"level":"debug","message":"Executing query [m8jpepffwm2k9haqsur]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[13]","timestamp":"2025-03-22T04:23:22.683Z"}
{"level":"debug","message":"Executing query [m8jpepfhsf07ceeus2m]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T04:23:22.685Z"}
{"level":"debug","message":"Executing query [m8jpepfj1ts3kuhsumni]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:23:22.687Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:23:22.689Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:22.787Z"}
{"level":"debug","message":"Executing query [m8jpepieg8nt2lli8hw]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:23:22.790Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:23:22.803Z"}
{"level":"debug","message":"Executing query [m8jpepisiisn28vf1rm]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T04:23:22.804Z"}
{"level":"debug","message":"Executing query [m8jpepiuynrdai7pl4c]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T04:23:22.806Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T04:23:22.807Z"}
{"level":"debug","message":"Executing query [m8jpepiv3gjvy3m81sv]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T04:23:22.807Z"}
{"level":"debug","message":"Executing query [m8jpepiwvj9s9qjjqgb]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T04:23:22.808Z"}
{"level":"debug","message":"Executing query [m8jpepiyr9dryjgxu0j]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T04:23:22.810Z"}
{"level":"debug","message":"Executing query [m8jpepj2w3bfwy9ku4f]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[14]","timestamp":"2025-03-22T04:23:22.814Z"}
{"level":"debug","message":"Executing query [m8jpepj4acsdssuiiem]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[14]","timestamp":"2025-03-22T04:23:22.816Z"}
{"level":"debug","message":"Executing query [m8jpepj79fhyfw3p5ff]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",14]","timestamp":"2025-03-22T04:23:22.819Z"}
{"level":"debug","message":"Executing query [m8jpepjbazd2rmhvjh]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[14]","timestamp":"2025-03-22T04:23:22.823Z"}
{"level":"debug","message":"Executing query [m8jpepjc5e500frxf9k]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[14]","timestamp":"2025-03-22T04:23:22.824Z"}
{"level":"debug","message":"Executing query [m8jpepjfa9xrkozcwad]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[14]","timestamp":"2025-03-22T04:23:22.827Z"}
{"level":"debug","message":"Executing query [m8jpepjgm5x0izzabkg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:23:22.828Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:23:22.829Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:22.931Z"}
{"level":"debug","message":"Executing query [m8jpepmdv1uj5duv0x]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:23:22.933Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:23:22.943Z"}
{"level":"debug","message":"Executing query [m8jpepmo3hg1x33f06b]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T04:23:22.944Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T04:23:22.945Z"}
{"level":"debug","message":"Executing query [m8jpepmqtxbvz6kkxoa]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T04:23:22.946Z"}
{"level":"debug","message":"Executing query [m8jpepmrklcxc7urb8]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T04:23:22.947Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-22T04:23:22.947Z"}
{"level":"debug","message":"Executing query [m8jpepmsegi299qh515]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T04:23:22.948Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T04:23:22.949Z"}
{"level":"debug","message":"Executing query [m8jpepmxqv50r5mgq5s]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T04:23:22.953Z"}
{"level":"debug","message":"Executing query [m8jpepmzvaa14asj66j]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T04:23:22.956Z"}
{"level":"debug","message":"Executing query [m8jpepn1hyrrfedegen]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[9]","timestamp":"2025-03-22T04:23:22.957Z"}
{"level":"debug","message":"Executing query [m8jpepn67xetbbbvruh]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:23:22.962Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:23:23.062Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:23:23.078Z"}
{"level":"debug","message":"Executing query [m8jpepqgsb3n1r7u4pa]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T04:23:23.080Z"}
{"level":"debug","message":"Executing query [m8jpepqins6zwkhlkuf]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T04:23:23.082Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jpepqins6zwkhlkuf]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T04:23:23.083Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:23:23.085Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T04:23:23.163Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T04:23:23.265Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T04:23:23.363Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T04:23:23.364Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T04:23:23.365Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T04:23:23.366Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T04:23:23.366Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T04:23:23.366Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:12.172Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:26:12.323Z"}
{"duration":"21ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T04:26:12.326Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T04:26:12.333Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:26:12.343Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:12.975Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:26:13.024Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T04:26:13.027Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:13.219Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T04:26:13.260Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:26:13.309Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T04:26:13.321Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:26:13.350Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:13.451Z"}
{"level":"debug","message":"Executing query [m8jpid73z247j518n88]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:26:13.455Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:26:13.468Z"}
{"level":"debug","message":"Executing query [m8jpid7i9nt94e2vijq]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T04:26:13.470Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T04:26:13.473Z"}
{"level":"debug","message":"Executing query [m8jpid7m1rdkktvpm5q]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T04:26:13.474Z"}
{"level":"debug","message":"Executing query [m8jpid7q3dwguloosnk]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[14,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T04:26:13.478Z\",\"ACTIVO\"]","timestamp":"2025-03-22T04:26:13.478Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 17","timestamp":"2025-03-22T04:26:13.482Z"}
{"level":"debug","message":"Executing query [m8jpid7u083enckw89ry]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[17,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T04:26:13.482Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpid7u083enckw89ry]","params":"[17,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T04:26:13.487Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T04:26:13.488Z"}
{"level":"debug","message":"Executing query [m8jpid81a362q73b0cs]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[17]","timestamp":"2025-03-22T04:26:13.489Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpid81a362q73b0cs]","params":"[17]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T04:26:13.491Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T04:26:13.491Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T04:26:13.492Z"}
{"level":"debug","message":"Executing query [m8jpid85dsw5cmlel6n]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[17,1,\"RESTAURAR\"]","timestamp":"2025-03-22T04:26:13.493Z"}
{"level":"debug","message":"Executing query [m8jpid89zgdavimie8d]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[17]","timestamp":"2025-03-22T04:26:13.497Z"}
{"level":"debug","message":"Executing query [m8jpid8by8k3cmewa4r]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[17,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T04:26:13.499Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpid8by8k3cmewa4r]","params":"[17,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T04:26:13.502Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T04:26:13.503Z"}
{"level":"debug","message":"Executing query [m8jpid8fledyeyr40rp]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[17]","timestamp":"2025-03-22T04:26:13.503Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpid8fledyeyr40rp]","params":"[17]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T04:26:13.505Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T04:26:13.506Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T04:26:13.506Z"}
{"level":"debug","message":"Executing query [m8jpid8jfrjlm7tb65k]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[14,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T04:26:13.507Z\",\"ACTIVO\"]","timestamp":"2025-03-22T04:26:13.507Z"}
{"level":"debug","message":"Executing query [m8jpid8nucd8smhlvpt]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T04:26:13.511Z"}
{"level":"debug","message":"Executing query [m8jpid8pqrayb4ocana]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",18,\"ELIMINAR\"]","timestamp":"2025-03-22T04:26:13.513Z"}
{"level":"debug","message":"Executing query [m8jpid8spxd5ag9dp5]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[18]","timestamp":"2025-03-22T04:26:13.516Z"}
{"level":"debug","message":"Executing query [m8jpid8vnjv69xi74h]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T04:26:13.519Z"}
{"level":"debug","message":"Executing query [m8jpid8y9jq8pl83c2]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[14]","timestamp":"2025-03-22T04:26:13.522Z"}
{"level":"debug","message":"Executing query [m8jpid91tn6qdohtaah]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:26:13.525Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:26:13.526Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:13.797Z"}
{"level":"debug","message":"Executing query [m8jpidgnjbi2yc2kx8f]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:26:13.799Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:26:13.809Z"}
{"level":"debug","message":"Executing query [m8jpidgy0a2xybtc5o75]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:26:13.810Z"}
{"level":"debug","message":"Executing query [m8jpidh0izfpeqmqf8]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742617573798\"]","timestamp":"2025-03-22T04:26:13.812Z"}
{"level":"debug","message":"Executing query [m8jpidh1xoonap86yae]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742617573798\",\"TEST-OFICIO-1742617573798\",6168,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:26:13.813Z"}
{"level":"debug","message":"Executing query [m8jpidh7hu9m8l9rttb]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-22T04:26:13.819Z"}
{"level":"debug","message":"Executing query [m8jpidh9xzwyb2956gh]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742617573798\"]","timestamp":"2025-03-22T04:26:13.821Z"}
{"level":"debug","message":"Executing query [m8jpidhbkaddmnr5h7g]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",11]","timestamp":"2025-03-22T04:26:13.823Z"}
{"level":"debug","message":"Executing query [m8jpidhdba89fp47w1o]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-22T04:26:13.825Z"}
{"level":"debug","message":"Executing query [m8jpidhg7xjvzs7avns]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-22T04:26:13.828Z"}
{"level":"debug","message":"Executing query [m8jpidhjwjavfqlbqp]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-22T04:26:13.831Z"}
{"level":"debug","message":"Executing query [m8jpidhl3zoql16ezs3]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-22T04:26:13.833Z"}
{"level":"debug","message":"Executing query [m8jpidho3q6ib8o2oap]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-22T04:26:13.836Z"}
{"level":"debug","message":"Executing query [m8jpidhpx4n735rhla9]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742617573837\",\"TEST-SP-OFICIO-1742617573837\",1449,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T04:26:13.837Z"}
{"level":"debug","message":"Executing query [m8jpidhsjsweiniitbn]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742617573837\"]","timestamp":"2025-03-22T04:26:13.840Z"}
{"level":"debug","message":"Executing query [m8jpidhtp5ewmwp4ul9]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742617573837\"]","timestamp":"2025-03-22T04:26:13.841Z"}
{"level":"debug","message":"Executing query [m8jpidhwhcuk7ovfnx9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:26:13.844Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:26:13.847Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:13.946Z"}
{"level":"debug","message":"Executing query [m8jpidkuzf5371pf3w]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:26:13.950Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:26:13.959Z"}
{"level":"debug","message":"Executing query [m8jpidl5nwdsyg4gug8]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:26:13.961Z"}
{"level":"debug","message":"Executing query [m8jpidl7qe5z9miud]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742617573949\"]","timestamp":"2025-03-22T04:26:13.963Z"}
{"level":"debug","message":"Executing query [m8jpidl83u5l5hmovx2]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742617573949\",\"TEST-OFI-FORENSE-1742617573949\",8698,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742617573949\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:26:13.964Z"}
{"level":"debug","message":"Executing query [m8jpidle5g48rxqr91j]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-22T04:26:13.970Z"}
{"level":"debug","message":"Executing query [m8jpidlgqdhl76iy0t]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742617573949\"]","timestamp":"2025-03-22T04:26:13.972Z"}
{"level":"debug","message":"Executing query [m8jpidlhe3j32dnr4h7]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",11]","timestamp":"2025-03-22T04:26:13.973Z"}
{"level":"debug","message":"Executing query [m8jpidlk0ssc8zn656f]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-22T04:26:13.976Z"}
{"level":"debug","message":"Executing query [m8jpidlmi1uja05vre]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-22T04:26:13.978Z"}
{"level":"debug","message":"Executing query [m8jpidlpp7cyctyjln]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-22T04:26:13.981Z"}
{"level":"debug","message":"Executing query [m8jpidlqba66l968zt]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-22T04:26:13.982Z"}
{"level":"debug","message":"Executing query [m8jpidlsjelqupg7dl]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-22T04:26:13.984Z"}
{"level":"debug","message":"Executing query [m8jpidlu5nmyn81duik]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742617573986\",\"TEST-SP-OFI-FORENSE-1742617573986\",2853,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T04:26:13.986Z"}
{"level":"debug","message":"Executing query [m8jpidlxhm80hehzqms]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742617573986\"]","timestamp":"2025-03-22T04:26:13.989Z"}
{"level":"debug","message":"Executing query [m8jpidly79ior0av5gn]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742617573986\"]","timestamp":"2025-03-22T04:26:13.990Z"}
{"level":"debug","message":"Executing query [m8jpidm16h0bgyw54xf]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:26:13.993Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:26:13.994Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:14.092Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:14.098Z"}
{"level":"debug","message":"Executing query [m8jpidp0mukuhtyt12l]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:26:14.100Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:26:14.112Z"}
{"level":"debug","message":"Executing query [m8jpidpdb7r2inq602]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T04:26:14.113Z"}
{"level":"debug","message":"Executing query [m8jpidpeyz379g6mt0r]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T04:26:14.114Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T04:26:14.115Z"}
{"level":"debug","message":"Executing query [m8jpidpg10e9jeqavbnp]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:26:14.116Z"}
{"level":"debug","message":"Executing query [m8jpidpgolo7ocn2i9]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:26:14.116Z"}
{"level":"debug","message":"Executing query [m8jpidphbs3vbpljzl9]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:26:14.117Z"}
{"level":"debug","message":"Executing query [m8jpidpix0a7kdxi85j]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T04:26:14.118Z"}
{"level":"debug","message":"Executing query [m8jpidplftxq90y7j0q]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-22T04:26:14.121Z"}
{"level":"debug","message":"Executing query [m8jpidpnn5natbtobh]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:26:14.123Z"}
{"level":"debug","message":"Executing query [m8jpidppkcccqnj7jv]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",7]","timestamp":"2025-03-22T04:26:14.125Z"}
{"level":"debug","message":"Executing query [m8jpidprc1oweyslcet]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-22T04:26:14.127Z"}
{"level":"debug","message":"Executing query [m8jpidpsv7sspjwdtie]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-22T04:26:14.128Z"}
{"level":"debug","message":"Executing query [m8jpidpv2gqatixik3x]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-22T04:26:14.131Z"}
{"level":"debug","message":"Executing query [m8jpidpw3bvx0hborjc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:26:14.132Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:26:14.133Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:14.231Z"}
{"level":"debug","message":"Executing query [m8jpidsq2w8q6tqqrha]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:26:14.234Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:26:14.245Z"}
{"level":"debug","message":"Executing query [m8jpidt278mfg20ra9k]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617574233\"]","timestamp":"2025-03-22T04:26:14.246Z"}
{"level":"debug","message":"Executing query [m8jpidt36fmol6c1t5s]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617574233\"]","timestamp":"2025-03-22T04:26:14.248Z"}
{"level":"debug","message":"Executing query [m8jpidt4iq3rh95dou]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742617574233\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:26:14.248Z"}
{"level":"debug","message":"Executing query [m8jpidtasu7c92bg8cd]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-22T04:26:14.254Z"}
{"level":"debug","message":"Executing query [m8jpidtds9fib39j8l]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617574233\"]","timestamp":"2025-03-22T04:26:14.257Z"}
{"level":"debug","message":"Executing query [m8jpidtew2ef72vh81]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1005]","timestamp":"2025-03-22T04:26:14.258Z"}
{"level":"debug","message":"Executing query [m8jpidth87igrzfry5f]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-22T04:26:14.261Z"}
{"level":"debug","message":"Executing query [m8jpidtii02szjybfwk]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-22T04:26:14.262Z"}
{"level":"debug","message":"Executing query [m8jpidtlvp959w1n2o]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-22T04:26:14.265Z"}
{"level":"debug","message":"Executing query [m8jpidtm54yy14v7aq]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-22T04:26:14.266Z"}
{"level":"debug","message":"Executing query [m8jpidtoma110p7am6p]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-22T04:26:14.268Z"}
{"level":"debug","message":"Executing query [m8jpidtqdmcqxnsebz6]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1005]","timestamp":"2025-03-22T04:26:14.270Z"}
{"level":"debug","message":"Executing query [m8jpidts79qt5r6dqe]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T04:26:14.272Z"}
{"level":"debug","message":"Executing query [m8jpidtuoofr1uhssb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:26:14.274Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:26:14.274Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:14.370Z"}
{"level":"debug","message":"Executing query [m8jpidwl6xkzuvs4qap]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:26:14.373Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:26:14.385Z"}
{"level":"debug","message":"Executing query [m8jpidwzgap8g49hk9l]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:26:14.387Z"}
{"level":"debug","message":"Executing query [m8jpidx0p5ipetex8qh]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742617574372\"]","timestamp":"2025-03-22T04:26:14.388Z"}
{"level":"debug","message":"Executing query [m8jpidx2j71l6cmlanr]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742617574372\",\"TEST-OFI-QUIMICA-1742617574372\",115,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:26:14.390Z"}
{"level":"debug","message":"Executing query [m8jpidx760pj6l5ylaa]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-22T04:26:14.395Z"}
{"level":"debug","message":"Executing query [m8jpidx9loq0g57rq1]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742617574372\"]","timestamp":"2025-03-22T04:26:14.397Z"}
{"level":"debug","message":"Executing query [m8jpidxb2wtx5v9rt2h]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",6]","timestamp":"2025-03-22T04:26:14.399Z"}
{"level":"debug","message":"Executing query [m8jpidxd3dhiwf7pqp3]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-22T04:26:14.402Z"}
{"level":"debug","message":"Executing query [m8jpidxgx8cxc73dfkj]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-22T04:26:14.404Z"}
{"level":"debug","message":"Executing query [m8jpidxj4f557abz5m5]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-22T04:26:14.407Z"}
{"level":"debug","message":"Executing query [m8jpidxlwry16hdy37s]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-22T04:26:14.409Z"}
{"level":"debug","message":"Executing query [m8jpidxnsbork0p0ad]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-22T04:26:14.411Z"}
{"level":"debug","message":"Executing query [m8jpidxoqn4uim40zkq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:26:14.412Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:26:14.413Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:14.511Z"}
{"level":"debug","message":"Executing query [m8jpie0i7ooua4vdjzx]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:26:14.514Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:26:14.523Z"}
{"level":"debug","message":"Executing query [m8jpie0tpea25crndf]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742617574514\"]","timestamp":"2025-03-22T04:26:14.525Z"}
{"level":"debug","message":"Executing query [m8jpie0ud2vev1g1h6a]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742617574514\",true]","timestamp":"2025-03-22T04:26:14.526Z"}
{"level":"debug","message":"Executing query [m8jpie0x04038dr6ksb4]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-22T04:26:14.530Z"}
{"level":"debug","message":"Executing query [m8jpie0zhmr3ntmose6]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742617574514\"]","timestamp":"2025-03-22T04:26:14.531Z"}
{"level":"debug","message":"Executing query [m8jpie11i9w8ntopxhe]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",15]","timestamp":"2025-03-22T04:26:14.533Z"}
{"level":"debug","message":"Executing query [m8jpie146b76o0ddj74]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-22T04:26:14.536Z"}
{"level":"debug","message":"Executing query [m8jpie15jpk6t791ej]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-22T04:26:14.538Z"}
{"level":"debug","message":"Executing query [m8jpie19pcvolk3t3j8]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-22T04:26:14.541Z"}
{"level":"debug","message":"Executing query [m8jpie1a2cc2wo965i8]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-22T04:26:14.542Z"}
{"level":"debug","message":"Executing query [m8jpie1cjq542eawafc]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-22T04:26:14.544Z"}
{"level":"debug","message":"Executing query [m8jpie1fdeanxsxb18h]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-22T04:26:14.547Z"}
{"level":"debug","message":"Executing query [m8jpie1ght17jw8ubqr]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T04:26:14.549Z"}
{"level":"debug","message":"Executing query [m8jpie1i26z9a66ohyh]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:26:14.550Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:26:14.551Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:14.646Z"}
{"level":"debug","message":"Executing query [m8jpie49e76t1l0g44k]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:26:14.649Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:26:14.663Z"}
{"level":"debug","message":"Executing query [m8jpie4olmhjpil4nt8]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T04:26:14.664Z"}
{"level":"debug","message":"Executing query [m8jpie4q2tdwkxgaho7]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T04:26:14.666Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T04:26:14.668Z"}
{"level":"debug","message":"Executing query [m8jpie4tqjmy4ce5ytc]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T04:26:14.669Z"}
{"level":"debug","message":"Executing query [m8jpie4uurplntw6jip]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T04:26:14.670Z"}
{"level":"debug","message":"Executing query [m8jpie4wz90ka1139sq]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T04:26:14.672Z"}
{"level":"debug","message":"Executing query [m8jpie51g2rjgm39fmb]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[16]","timestamp":"2025-03-22T04:26:14.677Z"}
{"level":"debug","message":"Executing query [m8jpie55sfd4bzpy31]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[16]","timestamp":"2025-03-22T04:26:14.681Z"}
{"level":"debug","message":"Executing query [m8jpie58ybmfszqq2em]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",16]","timestamp":"2025-03-22T04:26:14.684Z"}
{"level":"debug","message":"Executing query [m8jpie5f82n0fw0ncg4]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[16]","timestamp":"2025-03-22T04:26:14.691Z"}
{"level":"debug","message":"Executing query [m8jpie5ivjs98smpmsa]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[16]","timestamp":"2025-03-22T04:26:14.694Z"}
{"level":"debug","message":"Executing query [m8jpie5ljt08ot9mbkq]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[16]","timestamp":"2025-03-22T04:26:14.697Z"}
{"level":"debug","message":"Executing query [m8jpie5npwl7k3i1cc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:26:14.699Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:26:14.700Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:14.800Z"}
{"level":"debug","message":"Executing query [m8jpie8khofljrrs3f7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:26:14.804Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:26:14.815Z"}
{"level":"debug","message":"Executing query [m8jpie8woa5hg3uo2s]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T04:26:14.816Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T04:26:14.818Z"}
{"level":"debug","message":"Executing query [m8jpie8y1tginmrbxvv]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T04:26:14.818Z"}
{"level":"debug","message":"Executing query [m8jpie8z8kpmdi549zd]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T04:26:14.819Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-22T04:26:14.820Z"}
{"level":"debug","message":"Executing query [m8jpie90f94bjbalqzw]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T04:26:14.820Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T04:26:14.821Z"}
{"level":"debug","message":"Executing query [m8jpie95mirfi2c60i]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T04:26:14.825Z"}
{"level":"debug","message":"Executing query [m8jpie978xgegy4n7en]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T04:26:14.827Z"}
{"level":"debug","message":"Executing query [m8jpie99tggudknss3r]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[11]","timestamp":"2025-03-22T04:26:14.829Z"}
{"level":"debug","message":"Executing query [m8jpie9didadib4i1g]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:26:14.833Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:14.931Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:26:14.944Z"}
{"level":"debug","message":"Executing query [m8jpiecjrujlq35r5or]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T04:26:14.947Z"}
{"level":"debug","message":"Executing query [m8jpieclzojln9zqnh]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T04:26:14.949Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jpieclzojln9zqnh]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T04:26:14.951Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:26:14.952Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T04:26:15.028Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T04:26:15.130Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T04:26:15.226Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T04:26:15.228Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T04:26:15.228Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T04:26:15.229Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T04:26:15.230Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T04:26:15.230Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:26:15.933Z"}
{"fatal":true,"level":"error","message":"Error al conectar a la base de datos: Encoding not recognized: 'cesu8' (searched as: 'cesu8')","stack":"Error: Encoding not recognized: 'cesu8' (searched as: 'cesu8')\n    at Object.getCodec (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:104:23)\n    at Object.getDecoder (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:125:23)\n    at Object.<anonymous>.exports.decode (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\parsers\\string.js:20:23)\n    at Packet.readNullTerminatedString (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\packet.js:414:25)\n    at Function.fromPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\handshake.js:62:33)\n    at ClientHandshake.handshakeInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\client_handshake.js:112:40)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:45:22)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T04:26:17.237Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:05.483Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:29:05.751Z"}
{"duration":"46ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T04:29:05.757Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T04:29:05.769Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:29:05.784Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:06.509Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:29:06.570Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T04:29:06.572Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:06.790Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T04:29:06.837Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:29:06.892Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T04:29:06.905Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:29:06.937Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:07.064Z"}
{"level":"debug","message":"Executing query [m8jpm35m6d0g9niup4]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:29:07.066Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:29:07.081Z"}
{"level":"debug","message":"Executing query [m8jpm363tsj7n2mp6qb]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T04:29:07.083Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T04:29:07.086Z"}
{"level":"debug","message":"Executing query [m8jpm366rchchq5po1m]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T04:29:07.086Z"}
{"level":"debug","message":"Executing query [m8jpm36g22cgwcd9p17i]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[16,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T04:29:07.096Z\",\"ACTIVO\"]","timestamp":"2025-03-22T04:29:07.096Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 19","timestamp":"2025-03-22T04:29:07.100Z"}
{"level":"debug","message":"Executing query [m8jpm36l800fsb5zkkp]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[19,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T04:29:07.101Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpm36l800fsb5zkkp]","params":"[19,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T04:29:07.107Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T04:29:07.107Z"}
{"level":"debug","message":"Executing query [m8jpm36sir8bce5zru]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[19]","timestamp":"2025-03-22T04:29:07.108Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpm36sir8bce5zru]","params":"[19]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T04:29:07.110Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T04:29:07.111Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T04:29:07.111Z"}
{"level":"debug","message":"Executing query [m8jpm36w5t5tgc257bx]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[19,1,\"RESTAURAR\"]","timestamp":"2025-03-22T04:29:07.112Z"}
{"level":"debug","message":"Executing query [m8jpm372kjf29zorrwl]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[19]","timestamp":"2025-03-22T04:29:07.118Z"}
{"level":"debug","message":"Executing query [m8jpm375t2ko3kn27gs]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[19,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T04:29:07.121Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpm375t2ko3kn27gs]","params":"[19,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T04:29:07.124Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T04:29:07.124Z"}
{"level":"debug","message":"Executing query [m8jpm3793t8t9qq0nh1]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[19]","timestamp":"2025-03-22T04:29:07.125Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpm3793t8t9qq0nh1]","params":"[19]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T04:29:07.127Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T04:29:07.127Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T04:29:07.128Z"}
{"level":"debug","message":"Executing query [m8jpm37fgzfy3kbia64]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[16,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T04:29:07.131Z\",\"ACTIVO\"]","timestamp":"2025-03-22T04:29:07.131Z"}
{"level":"debug","message":"Executing query [m8jpm37iancdz5l969d]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T04:29:07.134Z"}
{"level":"debug","message":"Executing query [m8jpm37kt4aab0vejja]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",20,\"ELIMINAR\"]","timestamp":"2025-03-22T04:29:07.136Z"}
{"level":"debug","message":"Executing query [m8jpm37nmmi9f03zmz]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[20]","timestamp":"2025-03-22T04:29:07.139Z"}
{"level":"debug","message":"Executing query [m8jpm37qv7f32m5l8s]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T04:29:07.142Z"}
{"level":"debug","message":"Executing query [m8jpm37t68elheh5zu6]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-22T04:29:07.145Z"}
{"level":"debug","message":"Executing query [m8jpm37w22m62f638bc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:29:07.148Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:29:07.149Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:07.644Z"}
{"level":"debug","message":"Executing query [m8jpm3lsnx4tjucwqyp]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:29:07.648Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:29:07.666Z"}
{"level":"debug","message":"Executing query [m8jpm3mci1mr5jjmtp]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T04:29:07.668Z"}
{"level":"debug","message":"Executing query [m8jpm3mfk2vekkqyofq]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T04:29:07.671Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T04:29:07.672Z"}
{"level":"debug","message":"Executing query [m8jpm3mh6oh5jc6k1qb]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T04:29:07.673Z"}
{"level":"debug","message":"Executing query [m8jpm3mjkj2ir9zjz1c]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T04:29:07.675Z"}
{"level":"debug","message":"Executing query [m8jpm3mmlckd9m1buek]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T04:29:07.678Z"}
{"level":"debug","message":"Executing query [m8jpm3mttog1qsapwl]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[18]","timestamp":"2025-03-22T04:29:07.686Z"}
{"level":"debug","message":"Executing query [m8jpm3myx1etxlmoyuj]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[18]","timestamp":"2025-03-22T04:29:07.690Z"}
{"level":"debug","message":"Executing query [m8jpm3n3hf1k7vjha07]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",18]","timestamp":"2025-03-22T04:29:07.695Z"}
{"level":"debug","message":"Executing query [m8jpm3n7eu9xylehz9a]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[18]","timestamp":"2025-03-22T04:29:07.699Z"}
{"level":"debug","message":"Executing query [m8jpm3na49my6onokon]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[18]","timestamp":"2025-03-22T04:29:07.702Z"}
{"level":"debug","message":"Executing query [m8jpm3nethuk2bplfjs]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[18]","timestamp":"2025-03-22T04:29:07.706Z"}
{"level":"debug","message":"Executing query [m8jpm3ng24maqwkp5dv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:29:07.709Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:29:07.710Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:07.905Z"}
{"level":"debug","message":"Executing query [m8jpm3t1yj1gx7rlyp]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:29:07.909Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:29:07.927Z"}
{"level":"debug","message":"Executing query [m8jpm3tnoh5ttwhtrmc]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:29:07.931Z"}
{"level":"debug","message":"Executing query [m8jpm3tp2kdha7zu0q2]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742617747908\"]","timestamp":"2025-03-22T04:29:07.933Z"}
{"level":"debug","message":"Executing query [m8jpm3trpu8vdkj914]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742617747908\",\"TEST-OFICIO-1742617747908\",3354,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:29:07.936Z"}
{"level":"debug","message":"Executing query [m8jpm3u0r0e8gh2j06]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-22T04:29:07.944Z"}
{"level":"debug","message":"Executing query [m8jpm3u3nisxrd5xonp]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742617747908\"]","timestamp":"2025-03-22T04:29:07.947Z"}
{"level":"debug","message":"Executing query [m8jpm3u6hig1rfy66d9]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",13]","timestamp":"2025-03-22T04:29:07.950Z"}
{"level":"debug","message":"Executing query [m8jpm3u935oyy74068m]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-22T04:29:07.953Z"}
{"level":"debug","message":"Executing query [m8jpm3ucknoauesk8ba]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-22T04:29:07.956Z"}
{"level":"debug","message":"Executing query [m8jpm3ufgw2ynceif7]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-22T04:29:07.959Z"}
{"level":"debug","message":"Executing query [m8jpm3uigzwjcnddaiv]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-22T04:29:07.962Z"}
{"level":"debug","message":"Executing query [m8jpm3umsjw2gffpb39]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[13]","timestamp":"2025-03-22T04:29:07.966Z"}
{"level":"debug","message":"Executing query [m8jpm3uoifcdem1azbo]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742617747968\",\"TEST-SP-OFICIO-1742617747968\",6693,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T04:29:07.968Z"}
{"level":"debug","message":"Executing query [m8jpm3ut1r13rfjnxme]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742617747968\"]","timestamp":"2025-03-22T04:29:07.973Z"}
{"level":"debug","message":"Executing query [m8jpm3uvsjp19jikey]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742617747968\"]","timestamp":"2025-03-22T04:29:07.975Z"}
{"level":"debug","message":"Executing query [m8jpm3uyypq7lnzutim]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:29:07.978Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:29:07.980Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:08.116Z"}
{"level":"debug","message":"Executing query [m8jpm3yvf00sqglqucb]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:29:08.119Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:29:08.130Z"}
{"level":"debug","message":"Executing query [m8jpm3z7fh1v4lz0zyo]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:29:08.131Z"}
{"level":"debug","message":"Executing query [m8jpm3z9gkv5cczged7]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742617748118\"]","timestamp":"2025-03-22T04:29:08.133Z"}
{"level":"debug","message":"Executing query [m8jpm3za07eqg8pbibxr]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742617748118\",\"TEST-OFI-FORENSE-1742617748118\",3652,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742617748118\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:29:08.134Z"}
{"level":"debug","message":"Executing query [m8jpm3zf3yu4o51uyqe]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-22T04:29:08.139Z"}
{"level":"debug","message":"Executing query [m8jpm3ziunu9vda1nag]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742617748118\"]","timestamp":"2025-03-22T04:29:08.142Z"}
{"level":"debug","message":"Executing query [m8jpm3zleovblmbio8]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",13]","timestamp":"2025-03-22T04:29:08.145Z"}
{"level":"debug","message":"Executing query [m8jpm3zph99thll1bco]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-22T04:29:08.149Z"}
{"level":"debug","message":"Executing query [m8jpm3zrqecga2uj68]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-22T04:29:08.151Z"}
{"level":"debug","message":"Executing query [m8jpm3zyzpoodca4qwe]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-22T04:29:08.158Z"}
{"level":"debug","message":"Executing query [m8jpm406waoxo2vzv5]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-22T04:29:08.166Z"}
{"level":"debug","message":"Executing query [m8jpm409scac5a17au]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[13]","timestamp":"2025-03-22T04:29:08.169Z"}
{"level":"debug","message":"Executing query [m8jpm40c2iig2whtnmw]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742617748172\",\"TEST-SP-OFI-FORENSE-1742617748172\",2235,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T04:29:08.172Z"}
{"level":"debug","message":"Executing query [m8jpm40g8q96682w4cw]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742617748172\"]","timestamp":"2025-03-22T04:29:08.176Z"}
{"level":"debug","message":"Executing query [m8jpm40ijwgje97g1se]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742617748172\"]","timestamp":"2025-03-22T04:29:08.178Z"}
{"level":"debug","message":"Executing query [m8jpm40m7riyw9aq0z7]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:29:08.182Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:29:08.184Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:08.318Z"}
{"level":"debug","message":"Executing query [m8jpm44h1mr4np18zfp]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:29:08.321Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:29:08.335Z"}
{"level":"debug","message":"Executing query [m8jpm44xo5tpt372bc]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617748320\"]","timestamp":"2025-03-22T04:29:08.337Z"}
{"level":"debug","message":"Executing query [m8jpm44zlgm0sjlkk3]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617748320\"]","timestamp":"2025-03-22T04:29:08.339Z"}
{"level":"debug","message":"Executing query [m8jpm450myn6fvy6tbl]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742617748320\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:29:08.340Z"}
{"level":"debug","message":"Executing query [m8jpm455yospyp0oox]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-22T04:29:08.345Z"}
{"level":"debug","message":"Executing query [m8jpm457pheskxbnuki]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742617748320\"]","timestamp":"2025-03-22T04:29:08.348Z"}
{"level":"debug","message":"Executing query [m8jpm4592vp48vjilwq]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1006]","timestamp":"2025-03-22T04:29:08.349Z"}
{"level":"debug","message":"Executing query [m8jpm45dtqylcdc7f2i]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-22T04:29:08.353Z"}
{"level":"debug","message":"Executing query [m8jpm45fcgy5rkiz25b]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-22T04:29:08.355Z"}
{"level":"debug","message":"Executing query [m8jpm45km5sgkjtzxeg]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-22T04:29:08.360Z"}
{"level":"debug","message":"Executing query [m8jpm45mwrdqrrzzyjq]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-22T04:29:08.362Z"}
{"level":"debug","message":"Executing query [m8jpm45okfe7q4lck4]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-22T04:29:08.364Z"}
{"level":"debug","message":"Executing query [m8jpm45rz9g134n54vl]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-22T04:29:08.367Z"}
{"level":"debug","message":"Executing query [m8jpm45tjl0cpi4yvph]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T04:29:08.369Z"}
{"level":"debug","message":"Executing query [m8jpm45wh35wt4rqtnp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:29:08.372Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:29:08.373Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:08.512Z"}
{"level":"debug","message":"Executing query [m8jpm49vaj35u94m49i]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:29:08.515Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:29:08.532Z"}
{"level":"debug","message":"Executing query [m8jpm4aekyanrsjd2t]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:29:08.534Z"}
{"level":"debug","message":"Executing query [m8jpm4agseoi3hqxaf]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742617748514\"]","timestamp":"2025-03-22T04:29:08.536Z"}
{"level":"debug","message":"Executing query [m8jpm4ahjnz089xa5z]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742617748514\",\"TEST-OFI-QUIMICA-1742617748514\",1437,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:29:08.537Z"}
{"level":"debug","message":"Executing query [m8jpm4amzd2m15m96h9]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-22T04:29:08.542Z"}
{"level":"debug","message":"Executing query [m8jpm4ap54gyb96nps7]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742617748514\"]","timestamp":"2025-03-22T04:29:08.545Z"}
{"level":"debug","message":"Executing query [m8jpm4as83b4e7gilkv]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",7]","timestamp":"2025-03-22T04:29:08.548Z"}
{"level":"debug","message":"Executing query [m8jpm4avz6xoao9lywe]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-22T04:29:08.551Z"}
{"level":"debug","message":"Executing query [m8jpm4axvrhdhk0d5j8]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-22T04:29:08.553Z"}
{"level":"debug","message":"Executing query [m8jpm4b289271qqzrjx]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-22T04:29:08.558Z"}
{"level":"debug","message":"Executing query [m8jpm4b6wmopwvc46p]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-22T04:29:08.562Z"}
{"level":"debug","message":"Executing query [m8jpm4b93n6a3lxy0b8]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[7]","timestamp":"2025-03-22T04:29:08.565Z"}
{"level":"debug","message":"Executing query [m8jpm4bbapma0np95i6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:29:08.567Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:29:08.569Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:08.692Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:08.698Z"}
{"level":"debug","message":"Executing query [m8jpm4f0h11lprzqx6p]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:29:08.700Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:29:08.712Z"}
{"level":"debug","message":"Executing query [m8jpm4fexpucktoo03n]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T04:29:08.714Z"}
{"level":"debug","message":"Executing query [m8jpm4ffbixlobh3n7h]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T04:29:08.715Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T04:29:08.717Z"}
{"level":"debug","message":"Executing query [m8jpm4filzulwa92whq]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:29:08.718Z"}
{"level":"debug","message":"Executing query [m8jpm4fjef2dgtch21p]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:29:08.719Z"}
{"level":"debug","message":"Executing query [m8jpm4fmosu9ck0hls]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:29:08.722Z"}
{"level":"debug","message":"Executing query [m8jpm4fnb2d3thkjy29]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T04:29:08.723Z"}
{"level":"debug","message":"Executing query [m8jpm4futrwdglhqq4]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-22T04:29:08.730Z"}
{"level":"debug","message":"Executing query [m8jpm4fxnzc50a6vvx]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:29:08.733Z"}
{"level":"debug","message":"Executing query [m8jpm4fz00f2b0z1ce37l]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",8]","timestamp":"2025-03-22T04:29:08.735Z"}
{"level":"debug","message":"Executing query [m8jpm4g292fkc7atjus]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-22T04:29:08.738Z"}
{"level":"debug","message":"Executing query [m8jpm4g41801kovtdm2i]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-22T04:29:08.741Z"}
{"level":"debug","message":"Executing query [m8jpm4g8odn721vyz7k]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-22T04:29:08.744Z"}
{"level":"debug","message":"Executing query [m8jpm4ga4nn3clt612b]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:29:08.746Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:29:08.748Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:08.859Z"}
{"level":"debug","message":"Executing query [m8jpm4jjzsbj8ysutr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:29:08.863Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:29:08.877Z"}
{"level":"debug","message":"Executing query [m8jpm4jyzdxct54tv9]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742617748861\"]","timestamp":"2025-03-22T04:29:08.878Z"}
{"level":"debug","message":"Executing query [m8jpm4k0djxzx6fu584]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742617748861\",true]","timestamp":"2025-03-22T04:29:08.880Z"}
{"level":"debug","message":"Executing query [m8jpm4k5k3wx6l4l0g9]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-22T04:29:08.885Z"}
{"level":"debug","message":"Executing query [m8jpm4k71rrdkrw1bpg]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742617748861\"]","timestamp":"2025-03-22T04:29:08.887Z"}
{"level":"debug","message":"Executing query [m8jpm4k9efn15fm8eur]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",17]","timestamp":"2025-03-22T04:29:08.889Z"}
{"level":"debug","message":"Executing query [m8jpm4klesn2s1gfh87]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-22T04:29:08.901Z"}
{"level":"debug","message":"Executing query [m8jpm4ko6jbce5ozial]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-22T04:29:08.904Z"}
{"level":"debug","message":"Executing query [m8jpm4krab56blqigvq]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-22T04:29:08.907Z"}
{"level":"debug","message":"Executing query [m8jpm4ktrcdm0t7sk4p]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-22T04:29:08.909Z"}
{"level":"debug","message":"Executing query [m8jpm4kukb0ws57czu]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-22T04:29:08.910Z"}
{"level":"debug","message":"Executing query [m8jpm4kxk5bmebo3lk]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[17]","timestamp":"2025-03-22T04:29:08.913Z"}
{"level":"debug","message":"Executing query [m8jpm4kzppdfz6okyw]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T04:29:08.915Z"}
{"level":"debug","message":"Executing query [m8jpm4l17ke5z3gh9av]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:29:08.917Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:29:08.918Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:09.021Z"}
{"level":"debug","message":"Executing query [m8jpm4o3sl5w4qdrz4]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:29:09.027Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:29:09.038Z"}
{"level":"debug","message":"Executing query [m8jpm4og6m9dgpfsei4]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T04:29:09.040Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T04:29:09.042Z"}
{"level":"debug","message":"Executing query [m8jpm4oi17xvexkyccc]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T04:29:09.042Z"}
{"level":"debug","message":"Executing query [m8jpm4okzut76nq8p6]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T04:29:09.044Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-22T04:29:09.045Z"}
{"level":"debug","message":"Executing query [m8jpm4oltncm7doqry9]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T04:29:09.045Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T04:29:09.047Z"}
{"level":"debug","message":"Executing query [m8jpm4otkuhzyybzjlk]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T04:29:09.053Z"}
{"level":"debug","message":"Executing query [m8jpm4oxro9ysd084ss]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T04:29:09.057Z"}
{"level":"debug","message":"Executing query [m8jpm4p0cyuct3430e]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[13]","timestamp":"2025-03-22T04:29:09.060Z"}
{"level":"debug","message":"Executing query [m8jpm4p8l1ir3ly734]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:29:09.068Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:09.181Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:29:09.196Z"}
{"level":"debug","message":"Executing query [m8jpm4svnehxmy2x7x]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T04:29:09.199Z"}
{"level":"debug","message":"Executing query [m8jpm4sw87ti9k4tenb]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T04:29:09.201Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jpm4sw87ti9k4tenb]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T04:29:09.202Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:29:09.203Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T04:29:09.283Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T04:29:09.405Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T04:29:09.529Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T04:29:09.533Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T04:29:09.534Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T04:29:09.534Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T04:29:09.535Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T04:29:09.535Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:10.234Z"}
{"fatal":true,"level":"error","message":"Error al conectar a la base de datos: Encoding not recognized: 'cesu8' (searched as: 'cesu8')","stack":"Error: Encoding not recognized: 'cesu8' (searched as: 'cesu8')\n    at Object.getCodec (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:104:23)\n    at Object.getDecoder (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:125:23)\n    at Object.<anonymous>.exports.decode (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\parsers\\string.js:20:23)\n    at Packet.readNullTerminatedString (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\packet.js:414:25)\n    at Function.fromPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\handshake.js:62:33)\n    at ClientHandshake.handshakeInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\client_handshake.js:112:40)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:45:22)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T04:29:11.701Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:29:52.713Z"}
{"fatal":true,"level":"error","message":"Error al conectar a la base de datos: Encoding not recognized: 'cesu8' (searched as: 'cesu8')","stack":"Error: Encoding not recognized: 'cesu8' (searched as: 'cesu8')\n    at Object.getCodec (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:104:23)\n    at Object.getDecoder (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:125:23)\n    at Object.<anonymous>.exports.decode (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\parsers\\string.js:20:23)\n    at Packet.readNullTerminatedString (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\packet.js:414:25)\n    at Function.fromPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\handshake.js:62:33)\n    at ClientHandshake.handshakeInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\client_handshake.js:112:40)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:45:22)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T04:29:52.982Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:32:18.517Z"}
{"level":"debug","message":"Executing query [m8jpq6xo0oelokk3p53]: INSERT IGNORE INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive, Descripcion) VALUES (?, ?, ?, ?, ?, ?)","params":"[888,\"Área de Prueba\",\"TEST-AREA\",\"PRUEBA\",1,\"Área creada para pruebas\"]","timestamp":"2025-03-22T04:32:18.588Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:32:18.631Z"}
{"level":"debug","message":"Executing query [m8jpq6yy1qvz1qoeuvs]: INSERT IGNORE INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Rol de Prueba\",\"Rol creado para pruebas\",1,255]","timestamp":"2025-03-22T04:32:18.635Z"}
{"level":"debug","message":"Executing query [m8jpq6z0qynpzdl40eo]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123\"]","timestamp":"2025-03-22T04:32:18.636Z"}
{"level":"debug","message":"Executing query [m8jpq6z4f6oenw1ivwp]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, Password, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123\",\"Usuario\",\"Prueba\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","timestamp":"2025-03-22T04:32:18.640Z"}
{"code":"ER_BAD_FIELD_ERROR","error":"Unknown column 'Rango' in 'field list'","level":"error","message":"Database query error [m8jpq6z4f6oenw1ivwp]","params":"[\"TEST123\",\"Usuario\",\"Prueba\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","query":"INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Rango, Password, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","timestamp":"2025-03-22T04:32:18.642Z"}
{"level":"error","message":"Error en la configuración de las pruebas: Unknown column 'Rango' in 'field list'","timestamp":"2025-03-22T04:32:18.647Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:106:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\test-server.js:37:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-22T04:32:18.695Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:106:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\test-server.js:37:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:85:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\raw-body\\index.js:238:16)\n    at done (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-22T04:32:18.734Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:106:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\test-server.js:37:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-22T04:32:18.748Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:106:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\test-server.js:37:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-22T04:32:18.763Z"}
{"level":"error","message":"Error al verificar token: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:106:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\test-server.js:37:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-22T04:32:18.781Z"}
{"level":"debug","message":"Executing query [m8jpq739lj5e601y1wl]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[888,888]","timestamp":"2025-03-22T04:32:18.789Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:32:18.793Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:35:02.794Z"}
{"level":"debug","message":"Executing query [m8jptptxgpjx3rvd1vq]: INSERT IGNORE INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive, Descripcion) VALUES (?, ?, ?, ?, ?, ?)","params":"[888,\"Área de Prueba\",\"TEST-AREA\",\"PRUEBA\",1,\"Área creada para pruebas\"]","timestamp":"2025-03-22T04:35:03.045Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:35:03.126Z"}
{"level":"debug","message":"Executing query [m8jptpwb9gsr0vm9y3f]: INSERT IGNORE INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Rol de Prueba\",\"Rol creado para pruebas\",1,255]","timestamp":"2025-03-22T04:35:03.131Z"}
{"level":"debug","message":"Executing query [m8jptpwevpoj6z9ilm]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123\"]","timestamp":"2025-03-22T04:35:03.134Z"}
{"level":"debug","message":"Executing query [m8jptpwj88oizii2mt]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Password, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?)","params":"[\"TEST123\",\"Usuario\",\"Prueba\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","timestamp":"2025-03-22T04:35:03.139Z"}
{"code":"ER_BAD_FIELD_ERROR","error":"Unknown column 'Password' in 'field list'","level":"error","message":"Database query error [m8jptpwj88oizii2mt]","params":"[\"TEST123\",\"Usuario\",\"Prueba\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","query":"INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Password, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?)","timestamp":"2025-03-22T04:35:03.142Z"}
{"level":"error","message":"Error en la configuración de las pruebas: Unknown column 'Password' in 'field list'","timestamp":"2025-03-22T04:35:03.149Z"}
{"level":"debug","message":"Executing query [m8jptq0w278izlpou4c]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T04:35:03.296Z"}
{"level":"debug","message":"Executing query [m8jptq1u69hz8lq3lhy]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[null]","timestamp":"2025-03-22T04:35:03.330Z"}
{"code":"ER_BAD_FIELD_ERROR","error":"Unknown column 'NaN' in 'where clause'","level":"error","message":"Database query error [m8jptq1u69hz8lq3lhy]","params":"[null]","query":"SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","timestamp":"2025-03-22T04:35:03.333Z"}
{"level":"error","message":"Error al obtener información del usuario: Unknown column 'NaN' in 'where clause'","timestamp":"2025-03-22T04:35:03.334Z"}
{"level":"error","message":"Error al obtener información de permisos para frontend: Unknown column 'NaN' in 'where clause'","timestamp":"2025-03-22T04:35:03.336Z"}
{"level":"debug","message":"Executing query [m8jptq2m3tmqmgijxku]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[99999]","timestamp":"2025-03-22T04:35:03.358Z"}
{"level":"debug","message":"Executing query [m8jptq2vruc9xts3a1]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[888,888]","timestamp":"2025-03-22T04:35:03.367Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:35:03.371Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:37:13.916Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:37:14.089Z"}
{"level":"debug","message":"Executing query [m8jpwiymxnlwtkjape]: SELECT IDRol FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T04:37:14.110Z"}
{"level":"debug","message":"Executing query [m8jpwiys4p1m6tub8ab]: SELECT Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T04:37:14.116Z"}
{"level":"debug","message":"Executing query [m8jpwiz5fay92gxvcw7]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T04:37:14.129Z"}
{"level":"debug","message":"Executing query [m8jpwizm563qbcp5jl2]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T04:37:14.146Z"}
{"level":"debug","message":"Executing query [m8jpwizpmllp8xia39j]: SELECT IDRol, NombreRol, Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T04:37:14.149Z"}
{"level":"debug","message":"Executing query [m8jpwizq7m0jvieuzdd]: SELECT \n        pc.IDPermisoContextual,\n        pc.IDRol,\n        pc.IDArea,\n        pc.TipoRecurso,\n        pc.ReglaContexto,\n        pc.Activo\n      FROM \n        PermisoContextual pc\n      WHERE \n        pc.IDRol = ? \n        AND pc.IDArea = ?\n        AND pc.Activo = true","params":"[888,888]","timestamp":"2025-03-22T04:37:14.150Z"}
{"level":"debug","message":"Executing query [m8jpwj061wwv1wok5gy]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[99999]","timestamp":"2025-03-22T04:37:14.166Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:37:14.173Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:37:51.538Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:37:51.721Z"}
{"level":"debug","message":"Executing query [m8jpxbzzjk5dnxwxln]: SELECT IDRol FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T04:37:51.743Z"}
{"level":"debug","message":"Executing query [m8jpxc05u2wdj3a2omf]: SELECT Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T04:37:51.749Z"}
{"level":"debug","message":"Executing query [m8jpxc0kugqi8h8j3ar]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T04:37:51.764Z"}
{"level":"debug","message":"Executing query [m8jpxc11jxryhtdjwle]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T04:37:51.781Z"}
{"level":"debug","message":"Executing query [m8jpxc14or3zc9tow4i]: SELECT IDRol, NombreRol, Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T04:37:51.784Z"}
{"level":"debug","message":"Executing query [m8jpxc17mu2tkvrgvcm]: SELECT \n        pc.IDPermisoContextual,\n        pc.IDRol,\n        pc.IDArea,\n        pc.TipoRecurso,\n        pc.ReglaContexto,\n        pc.Activo\n      FROM \n        PermisoContextual pc\n      WHERE \n        pc.IDRol = ? \n        AND pc.IDArea = ?\n        AND pc.Activo = true","params":"[888,888]","timestamp":"2025-03-22T04:37:51.787Z"}
{"level":"debug","message":"Executing query [m8jpxc1lgukbb7yw24t]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[99999]","timestamp":"2025-03-22T04:37:51.801Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:37:51.808Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:21.000Z"}
{"duration":"37ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T04:38:21.307Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:38:21.310Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T04:38:21.314Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:38:21.333Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:22.175Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:38:22.307Z"}
{"level":"debug","message":"Executing query [m8jpxzlfvd8zgoxotz]: SELECT IDRol FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T04:38:22.323Z"}
{"level":"debug","message":"Executing query [m8jpxzlp5oimvydbvze]: SELECT Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T04:38:22.333Z"}
{"level":"debug","message":"Executing query [m8jpxzm9v62rekmxtyh]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T04:38:22.353Z"}
{"level":"debug","message":"Executing query [m8jpxzmv4jao9fgsw2]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T04:38:22.375Z"}
{"level":"debug","message":"Executing query [m8jpxzmyg4ngo0lra3]: SELECT IDRol, NombreRol, Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T04:38:22.378Z"}
{"level":"debug","message":"Executing query [m8jpxzn1zkfssfpouzb]: SELECT \n        pc.IDPermisoContextual,\n        pc.IDRol,\n        pc.IDArea,\n        pc.TipoRecurso,\n        pc.ReglaContexto,\n        pc.Activo\n      FROM \n        PermisoContextual pc\n      WHERE \n        pc.IDRol = ? \n        AND pc.IDArea = ?\n        AND pc.Activo = true","params":"[888,888]","timestamp":"2025-03-22T04:38:22.381Z"}
{"level":"debug","message":"Executing query [m8jpxznllxxhvm15kx]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[99999]","timestamp":"2025-03-22T04:38:22.401Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:38:22.409Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:23.394Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:38:23.487Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T04:38:23.490Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:23.783Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T04:38:23.804Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:38:23.865Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T04:38:23.887Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:38:23.941Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:24.087Z"}
{"level":"debug","message":"Executing query [m8jpy0yjmc54p3lu7fc]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:38:24.091Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:38:24.108Z"}
{"level":"debug","message":"Executing query [m8jpy0z457t6y3vp4xn]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T04:38:24.112Z"}
{"level":"debug","message":"Executing query [m8jpy0z7oiu938awyet]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T04:38:24.115Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T04:38:24.117Z"}
{"level":"debug","message":"Executing query [m8jpy0z9aq3w52l0ag8]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T04:38:24.117Z"}
{"level":"debug","message":"Executing query [m8jpy0zeeayrg1sga9b]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T04:38:24.122Z"}
{"level":"debug","message":"Executing query [m8jpy0zhqavnzuczlp]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T04:38:24.125Z"}
{"level":"debug","message":"Executing query [m8jpy0zzvwk3xeggvn]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[19]","timestamp":"2025-03-22T04:38:24.143Z"}
{"level":"debug","message":"Executing query [m8jpy10cmqke464m07i]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[19]","timestamp":"2025-03-22T04:38:24.156Z"}
{"level":"debug","message":"Executing query [m8jpy10i0ys43en0gts]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",19]","timestamp":"2025-03-22T04:38:24.162Z"}
{"level":"debug","message":"Executing query [m8jpy10qr0vzdnk2sk]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[19]","timestamp":"2025-03-22T04:38:24.170Z"}
{"level":"debug","message":"Executing query [m8jpy10ucplh058yykp]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[19]","timestamp":"2025-03-22T04:38:24.174Z"}
{"level":"debug","message":"Executing query [m8jpy1105j5b8wm4po]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[19]","timestamp":"2025-03-22T04:38:24.180Z"}
{"level":"debug","message":"Executing query [m8jpy1139a0nah7r5pb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:38:24.183Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:38:24.185Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:24.353Z"}
{"level":"debug","message":"Executing query [m8jpy15xu7dik1f8tyr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:38:24.357Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:38:24.369Z"}
{"level":"debug","message":"Executing query [m8jpy16cr0j73s54a9l]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:38:24.372Z"}
{"level":"debug","message":"Executing query [m8jpy16f25q61a27r83]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742618304356\"]","timestamp":"2025-03-22T04:38:24.375Z"}
{"level":"debug","message":"Executing query [m8jpy16hzbj5obl7f8]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742618304356\",\"TEST-OFICIO-1742618304356\",7125,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:38:24.377Z"}
{"level":"debug","message":"Executing query [m8jpy16otttwvhbyp8b]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-22T04:38:24.384Z"}
{"level":"debug","message":"Executing query [m8jpy16tehsxsi9ie9l]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742618304356\"]","timestamp":"2025-03-22T04:38:24.390Z"}
{"level":"debug","message":"Executing query [m8jpy16x5uouoxwcp0q]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",15]","timestamp":"2025-03-22T04:38:24.393Z"}
{"level":"debug","message":"Executing query [m8jpy17136c1e7i6baf]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-22T04:38:24.397Z"}
{"level":"debug","message":"Executing query [m8jpy175woz96xde2o8]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-22T04:38:24.401Z"}
{"level":"debug","message":"Executing query [m8jpy178rqo9fpy2kud]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-22T04:38:24.404Z"}
{"level":"debug","message":"Executing query [m8jpy17bbstvvvgo4qn]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-22T04:38:24.407Z"}
{"level":"debug","message":"Executing query [m8jpy17ht4mzw810uo]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-22T04:38:24.413Z"}
{"level":"debug","message":"Executing query [m8jpy17lwrv4rb93ecs]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742618304417\",\"TEST-SP-OFICIO-1742618304417\",7017,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T04:38:24.417Z"}
{"level":"debug","message":"Executing query [m8jpy17vf2fbx1qh9rf]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742618304417\"]","timestamp":"2025-03-22T04:38:24.427Z"}
{"level":"debug","message":"Executing query [m8jpy17xtnvf7bdi9g]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742618304417\"]","timestamp":"2025-03-22T04:38:24.429Z"}
{"level":"debug","message":"Executing query [m8jpy18106yyj894g08g]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:38:24.433Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:38:24.434Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:24.761Z"}
{"level":"debug","message":"Executing query [m8jpy1h7pb510shc8id]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:38:24.763Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:38:24.777Z"}
{"level":"debug","message":"Executing query [m8jpy1hn1h6n36vobmm]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T04:38:24.779Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T04:38:24.782Z"}
{"level":"debug","message":"Executing query [m8jpy1hqn45zto5c9km]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T04:38:24.782Z"}
{"level":"debug","message":"Executing query [m8jpy1hu42b6lsr4yvb]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[18,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T04:38:24.786Z\",\"ACTIVO\"]","timestamp":"2025-03-22T04:38:24.786Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 21","timestamp":"2025-03-22T04:38:24.793Z"}
{"level":"debug","message":"Executing query [m8jpy1i25zvm9peif0q]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[21,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T04:38:24.794Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpy1i25zvm9peif0q]","params":"[21,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T04:38:24.806Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T04:38:24.807Z"}
{"level":"debug","message":"Executing query [m8jpy1igffcfu3pcsfk]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[21]","timestamp":"2025-03-22T04:38:24.808Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpy1igffcfu3pcsfk]","params":"[21]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T04:38:24.811Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T04:38:24.812Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T04:38:24.812Z"}
{"level":"debug","message":"Executing query [m8jpy1in9qb9nwqnkvs]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[21,1,\"RESTAURAR\"]","timestamp":"2025-03-22T04:38:24.815Z"}
{"level":"debug","message":"Executing query [m8jpy1j6ezy8ihdsuka]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[21]","timestamp":"2025-03-22T04:38:24.834Z"}
{"level":"debug","message":"Executing query [m8jpy1jb95yr7ff86sq]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[21,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T04:38:24.839Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpy1jb95yr7ff86sq]","params":"[21,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T04:38:24.847Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T04:38:24.848Z"}
{"level":"debug","message":"Executing query [m8jpy1jlw1vwfaea0ht]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[21]","timestamp":"2025-03-22T04:38:24.849Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8jpy1jlw1vwfaea0ht]","params":"[21]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T04:38:24.853Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T04:38:24.854Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T04:38:24.856Z"}
{"level":"debug","message":"Executing query [m8jpy1juc99plwtm8md]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[18,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T04:38:24.858Z\",\"ACTIVO\"]","timestamp":"2025-03-22T04:38:24.858Z"}
{"level":"debug","message":"Executing query [m8jpy1jyq8t9o5yo5yn]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T04:38:24.862Z"}
{"level":"debug","message":"Executing query [m8jpy1k3goarzukvawj]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",22,\"ELIMINAR\"]","timestamp":"2025-03-22T04:38:24.867Z"}
{"level":"debug","message":"Executing query [m8jpy1k9l1mwj0rds3]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[22]","timestamp":"2025-03-22T04:38:24.873Z"}
{"level":"debug","message":"Executing query [m8jpy1kdpz3tcbutb2i]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T04:38:24.877Z"}
{"level":"debug","message":"Executing query [m8jpy1khuqrpsgapp5]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[18]","timestamp":"2025-03-22T04:38:24.881Z"}
{"level":"debug","message":"Executing query [m8jpy1kli3h624sjcd8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:38:24.885Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:38:24.886Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:25.046Z"}
{"level":"debug","message":"Executing query [m8jpy1p63e7z2ji0r05]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:38:25.050Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:38:25.065Z"}
{"level":"debug","message":"Executing query [m8jpy1pn0yicehhc2jn]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:38:25.068Z"}
{"level":"debug","message":"Executing query [m8jpy1pqzf5ppq95ncj]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742618305049\"]","timestamp":"2025-03-22T04:38:25.070Z"}
{"level":"debug","message":"Executing query [m8jpy1pspckedr12peh]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742618305049\",\"TEST-OFI-FORENSE-1742618305049\",8350,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742618305049\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:38:25.072Z"}
{"level":"debug","message":"Executing query [m8jpy1pxc5jnld8frqf]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-22T04:38:25.077Z"}
{"level":"debug","message":"Executing query [m8jpy1q0mqvgtoo0b3k]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742618305049\"]","timestamp":"2025-03-22T04:38:25.081Z"}
{"level":"debug","message":"Executing query [m8jpy1q37jyrahk4cl7]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",15]","timestamp":"2025-03-22T04:38:25.083Z"}
{"level":"debug","message":"Executing query [m8jpy1q77uwyh1js0tt]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-22T04:38:25.088Z"}
{"level":"debug","message":"Executing query [m8jpy1qasexv7ulp8ae]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-22T04:38:25.090Z"}
{"level":"debug","message":"Executing query [m8jpy1qey3itim4dmwg]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-22T04:38:25.095Z"}
{"level":"debug","message":"Executing query [m8jpy1qisl0wy1ls0l]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-22T04:38:25.098Z"}
{"level":"debug","message":"Executing query [m8jpy1qn032h4pfqzmmv]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-22T04:38:25.104Z"}
{"level":"debug","message":"Executing query [m8jpy1qqutfty7qewej]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742618305106\",\"TEST-SP-OFI-FORENSE-1742618305106\",6044,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T04:38:25.106Z"}
{"level":"debug","message":"Executing query [m8jpy1qu1sibr6i1hus]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742618305106\"]","timestamp":"2025-03-22T04:38:25.110Z"}
{"level":"debug","message":"Executing query [m8jpy1qw6f846mttdbt]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742618305106\"]","timestamp":"2025-03-22T04:38:25.112Z"}
{"level":"debug","message":"Executing query [m8jpy1r180swrqjmp2s]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:38:25.117Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:38:25.118Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:25.274Z"}
{"level":"debug","message":"Executing query [m8jpy1vgtldjzz533od]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:38:25.277Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:38:25.290Z"}
{"level":"debug","message":"Executing query [m8jpy1vwaai7is1xlqa]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T04:38:25.292Z"}
{"level":"debug","message":"Executing query [m8jpy1vyeulvfv8n2q6]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742618305276\"]","timestamp":"2025-03-22T04:38:25.294Z"}
{"level":"debug","message":"Executing query [m8jpy1w1izgo62am3gm]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742618305276\",\"TEST-OFI-QUIMICA-1742618305276\",1781,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:38:25.297Z"}
{"level":"debug","message":"Executing query [m8jpy1w6ibjt628ftu]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-22T04:38:25.302Z"}
{"level":"debug","message":"Executing query [m8jpy1wapa5x5lyhsre]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742618305276\"]","timestamp":"2025-03-22T04:38:25.306Z"}
{"level":"debug","message":"Executing query [m8jpy1wdi4299z4b0rn]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",8]","timestamp":"2025-03-22T04:38:25.309Z"}
{"level":"debug","message":"Executing query [m8jpy1wjdz605m54rww]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-22T04:38:25.315Z"}
{"level":"debug","message":"Executing query [m8jpy1wntvc5p11gh6]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-22T04:38:25.319Z"}
{"level":"debug","message":"Executing query [m8jpy1wr257jlq0m6oi]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-22T04:38:25.323Z"}
{"level":"debug","message":"Executing query [m8jpy1wum53v7jj57ga]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-22T04:38:25.326Z"}
{"level":"debug","message":"Executing query [m8jpy1wx2cy8h6xqbm4]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-22T04:38:25.329Z"}
{"level":"debug","message":"Executing query [m8jpy1x1vsis9mdam8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:38:25.333Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:38:25.334Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:25.468Z"}
{"level":"debug","message":"Executing query [m8jpy20wd2e2yn46jxh]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:38:25.472Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:38:25.482Z"}
{"level":"debug","message":"Executing query [m8jpy2185nsxmswryf8]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742618305471\"]","timestamp":"2025-03-22T04:38:25.484Z"}
{"level":"debug","message":"Executing query [m8jpy219t5u1bi3ltti]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742618305471\"]","timestamp":"2025-03-22T04:38:25.485Z"}
{"level":"debug","message":"Executing query [m8jpy21blq7jh4t1dn]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742618305471\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T04:38:25.487Z"}
{"level":"debug","message":"Executing query [m8jpy21h1aal5429uou]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-22T04:38:25.493Z"}
{"level":"debug","message":"Executing query [m8jpy21likielm3tvu]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742618305471\"]","timestamp":"2025-03-22T04:38:25.497Z"}
{"level":"debug","message":"Executing query [m8jpy21np4w7cy9599]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1007]","timestamp":"2025-03-22T04:38:25.499Z"}
{"level":"debug","message":"Executing query [m8jpy21r2kgxlfoxtpx]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-22T04:38:25.503Z"}
{"level":"debug","message":"Executing query [m8jpy21thophv82xgkk]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-22T04:38:25.505Z"}
{"level":"debug","message":"Executing query [m8jpy21ydcpmibbvh96]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-22T04:38:25.510Z"}
{"level":"debug","message":"Executing query [m8jpy220bhso5b3mbo]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-22T04:38:25.512Z"}
{"level":"debug","message":"Executing query [m8jpy2242pg2gn6g2jw]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-22T04:38:25.516Z"}
{"level":"debug","message":"Executing query [m8jpy228r6wnzzpho3]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1007]","timestamp":"2025-03-22T04:38:25.520Z"}
{"level":"debug","message":"Executing query [m8jpy22bhltg08jp0x8]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T04:38:25.523Z"}
{"level":"debug","message":"Executing query [m8jpy22d7ykjzqoomm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:38:25.525Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:38:25.527Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:25.685Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:25.692Z"}
{"level":"debug","message":"Executing query [m8jpy272al1ez8t9h4k]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:38:25.694Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:38:25.709Z"}
{"level":"debug","message":"Executing query [m8jpy27j6q72m207utt]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T04:38:25.711Z"}
{"level":"debug","message":"Executing query [m8jpy27lfsgicjhpf1o]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T04:38:25.713Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T04:38:25.714Z"}
{"level":"debug","message":"Executing query [m8jpy27ncqqdcgrgwvt]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:38:25.715Z"}
{"level":"debug","message":"Executing query [m8jpy27pwcogls82ac]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:38:25.717Z"}
{"level":"debug","message":"Executing query [m8jpy27r12mxf8349j3]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:38:25.719Z"}
{"level":"debug","message":"Executing query [m8jpy27seu28ylo2nq]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T04:38:25.720Z"}
{"level":"debug","message":"Executing query [m8jpy27yrbeesrixb2b]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[9]","timestamp":"2025-03-22T04:38:25.726Z"}
{"level":"debug","message":"Executing query [m8jpy281uj5dchdy5ef]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T04:38:25.729Z"}
{"level":"debug","message":"Executing query [m8jpy284q4b9lxsxkao]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",9]","timestamp":"2025-03-22T04:38:25.732Z"}
{"level":"debug","message":"Executing query [m8jpy2887dghw6s6p0i]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[9]","timestamp":"2025-03-22T04:38:25.736Z"}
{"level":"debug","message":"Executing query [m8jpy28bn4hv467yx0n]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[9]","timestamp":"2025-03-22T04:38:25.739Z"}
{"level":"debug","message":"Executing query [m8jpy28g2jsc2i5077j]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[9]","timestamp":"2025-03-22T04:38:25.744Z"}
{"level":"debug","message":"Executing query [m8jpy28i11iwznntfq4]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:38:25.746Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:38:25.748Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:25.897Z"}
{"level":"debug","message":"Executing query [m8jpy2ctzyx77n03jsa]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:38:25.901Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:38:25.915Z"}
{"level":"debug","message":"Executing query [m8jpy2d8z79vu2i5qog]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742618305900\"]","timestamp":"2025-03-22T04:38:25.916Z"}
{"level":"debug","message":"Executing query [m8jpy2da5pbqkdq0bzq]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742618305900\",true]","timestamp":"2025-03-22T04:38:25.918Z"}
{"level":"debug","message":"Executing query [m8jpy2dfb6nfhlulqce]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[19]","timestamp":"2025-03-22T04:38:25.923Z"}
{"level":"debug","message":"Executing query [m8jpy2diyyj5r91w9kg]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742618305900\"]","timestamp":"2025-03-22T04:38:25.926Z"}
{"level":"debug","message":"Executing query [m8jpy2dkpaualuey3d]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",19]","timestamp":"2025-03-22T04:38:25.928Z"}
{"level":"debug","message":"Executing query [m8jpy2dorkx63cyj8yk]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[19]","timestamp":"2025-03-22T04:38:25.932Z"}
{"level":"debug","message":"Executing query [m8jpy2dr9wftnmxuk3d]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[19]","timestamp":"2025-03-22T04:38:25.935Z"}
{"level":"debug","message":"Executing query [m8jpy2dvd0nxu27iint]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[19]","timestamp":"2025-03-22T04:38:25.939Z"}
{"level":"debug","message":"Executing query [m8jpy2dy3xgp6kmb6s4]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[19]","timestamp":"2025-03-22T04:38:25.942Z"}
{"level":"debug","message":"Executing query [m8jpy2dzeas7p8ps1qo]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[19]","timestamp":"2025-03-22T04:38:25.944Z"}
{"level":"debug","message":"Executing query [m8jpy2e4029qtfr3rely]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[19]","timestamp":"2025-03-22T04:38:25.948Z"}
{"level":"debug","message":"Executing query [m8jpy2e6faz7l57qtp]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T04:38:25.950Z"}
{"level":"debug","message":"Executing query [m8jpy2e9wk58o0pg9zg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:38:25.953Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:38:25.954Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:26.094Z"}
{"level":"debug","message":"Executing query [m8jpy2iau9naol3mar]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T04:38:26.098Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:38:26.114Z"}
{"level":"debug","message":"Executing query [m8jpy2ispjouboi36rg]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T04:38:26.116Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T04:38:26.118Z"}
{"level":"debug","message":"Executing query [m8jpy2iu083wxhhs4qo5]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T04:38:26.119Z"}
{"level":"debug","message":"Executing query [m8jpy2iwwybkyc8yx5f]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T04:38:26.120Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-22T04:38:26.123Z"}
{"level":"debug","message":"Executing query [m8jpy2izg9g634dkz6]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T04:38:26.123Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T04:38:26.125Z"}
{"level":"debug","message":"Executing query [m8jpy2j69i0aoz9fjw6]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T04:38:26.130Z"}
{"level":"debug","message":"Executing query [m8jpy2jablhvxz9l9pf]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T04:38:26.134Z"}
{"level":"debug","message":"Executing query [m8jpy2jcksruszz4inq]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[15]","timestamp":"2025-03-22T04:38:26.136Z"}
{"level":"debug","message":"Executing query [m8jpy2jh0g74mne5reml]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T04:38:26.141Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:26.268Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:38:26.289Z"}
{"level":"debug","message":"Executing query [m8jpy2nqrjuff2e4ps]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T04:38:26.294Z"}
{"level":"debug","message":"Executing query [m8jpy2ns3pmz9ixwgix]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T04:38:26.296Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8jpy2ns3pmz9ixwgix]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T04:38:26.306Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T04:38:26.309Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T04:38:26.434Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T04:38:26.555Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T04:38:26.689Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T04:38:26.690Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T04:38:26.691Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T04:38:26.691Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T04:38:26.692Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T04:38:26.692Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:44.827Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:44.832Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:44.838Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:38:46.724Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-22T04:38:46.728Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-22T04:38:46.729Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.731Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:38:46.768Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.771Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.777Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.843Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.854Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.861Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.866Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.873Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.878Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.885Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.889Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.898Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.906Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.911Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.915Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.921Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.925Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.931Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.935Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.943Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.947Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.954Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.958Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.964Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.971Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:38:46.978Z"}
{"code":"ER_NO_SUCH_TABLE","errno":1146,"level":"error","message":"Error al inicializar la base de datos: Table 'oficri_sistema.area' doesn't exist","sql":"SELECT IDArea FROM Area WHERE NombreArea = 'Administración'","sqlMessage":"Table 'oficri_sistema.area' doesn't exist","sqlState":"42S02","stack":"Error: Table 'oficri_sistema.area' doesn't exist\n    at PromiseConnection.query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\promise\\connection.js:29:22)\n    at executeQuery (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\utils\\database-helpers.js:58:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async createDefaultAdmin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\scripts\\init-database.js:188:24)\n    at async initializeDatabase (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\scripts\\init-database.js:301:7)\n    at async initializeDatabaseAndAdmin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\server.js:201:5)\n    at async startServer (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\server.js:236:5)","timestamp":"2025-03-22T04:38:46.983Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-22T04:38:46.987Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-22T04:38:46.987Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:45:47.623Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:45:47.629Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:45:47.632Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T04:45:49.934Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-22T04:45:49.938Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-22T04:45:49.939Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:49.940Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T04:45:49.993Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:49.999Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.007Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.024Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.031Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.039Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.044Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.052Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.057Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.064Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.070Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.077Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.083Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.089Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.093Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.099Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.105Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.190Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.197Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.200Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.208Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.218Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.228Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.234Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.244Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.254Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.262Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.271Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.280Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.285Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.293Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.301Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.311Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.317Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.326Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.331Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.339Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.343Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.348Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.355Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.362Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.366Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.373Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.377Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.385Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.394Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.401Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.406Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.414Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.425Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.432Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.436Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.442Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.446Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.453Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T04:45:50.458Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-22T04:45:50.462Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-22T04:45:50.466Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-22T04:45:50.467Z"}
{"level":"info","message":"Shutting down gracefully...","timestamp":"2025-03-22T05:20:46.478Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:40:08.363Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:40:08.369Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:40:08.374Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:40:10.835Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-22T06:40:10.840Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-22T06:40:10.841Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:10.842Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T06:40:10.885Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:10.893Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:10.901Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:10.932Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:10.940Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:10.962Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:10.967Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:10.972Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:10.978Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:10.983Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:10.988Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:10.992Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:10.997Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.001Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.006Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.011Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.017Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.101Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.121Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.126Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.129Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.132Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.138Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.141Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.145Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.156Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.161Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.165Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.169Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.175Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.180Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.184Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.188Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.191Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.195Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.198Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.202Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.206Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:40:11.210Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-22T06:40:11.214Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-22T06:40:11.219Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-22T06:40:11.219Z"}
{"error":"Content-Security-Policy received a duplicate directive \"script-src\"","level":"error","message":"Error processing request","method":"GET","path":"/api-docs","stack":"Error: Content-Security-Policy received a duplicate directive \"script-src\"\n    at normalizeDirectives (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\helmet\\index.cjs:45:10)\n    at Function.contentSecurityPolicy (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\helmet\\index.cjs:121:31)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\server.js:132:34\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\server.js:117:3\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-03-22T06:40:25.567Z"}
{"level":"info","message":"Shutting down gracefully...","timestamp":"2025-03-22T06:45:19.065Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:45:41.531Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:45:41.540Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:45:41.544Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:45:43.409Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-22T06:45:43.413Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-22T06:45:43.413Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.415Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T06:45:43.451Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.453Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.458Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.473Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.480Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.485Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.489Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.493Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.497Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.501Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.505Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.509Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.515Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.518Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.522Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.527Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.531Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.609Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.621Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.625Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.628Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.632Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.640Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.645Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.654Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.659Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.662Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.665Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.669Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.673Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.678Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.681Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.686Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.689Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.693Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.696Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.699Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.704Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:45:43.708Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-22T06:45:43.712Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-22T06:45:43.715Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-22T06:45:43.715Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:49:07.331Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:49:07.336Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:49:07.340Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:49:09.034Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-22T06:49:09.043Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-22T06:49:09.044Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.046Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T06:49:09.083Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.086Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.090Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.101Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.108Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.114Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.117Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.122Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.126Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.130Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.134Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.139Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.144Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.152Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.155Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.159Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.165Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.247Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.255Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.259Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.263Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.266Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.275Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.278Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.282Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.288Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.291Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.295Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.298Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.301Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.304Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.311Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.315Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.319Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.323Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.327Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.331Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.337Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:49:09.340Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-22T06:49:09.343Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-22T06:49:09.348Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-22T06:49:09.349Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:52:55.586Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:52:55.591Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:52:55.831Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T06:52:57.457Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-22T06:52:57.461Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-22T06:52:57.462Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.463Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T06:52:57.498Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.501Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.506Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.515Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.520Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.524Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.528Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.532Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.541Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.546Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.550Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.556Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.559Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.563Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.566Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.571Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.577Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.654Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.661Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.664Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.667Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.671Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.679Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.682Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.685Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.693Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.696Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.701Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.703Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.707Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.713Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.716Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.718Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.721Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.725Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.727Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.731Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.734Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T06:52:57.738Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-22T06:52:57.742Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-22T06:52:57.744Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-22T06:52:57.745Z"}
{"level":"info","message":"Shutting down gracefully...","timestamp":"2025-03-22T06:53:30.165Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:14:24.278Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:14:24.283Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:14:24.595Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:14:26.647Z"}
{"level":"info","message":"Swagger documentation available at /api-docs","timestamp":"2025-03-22T17:14:26.651Z"}
{"level":"info","message":"Verificando configuración inicial de la base de datos...","timestamp":"2025-03-22T17:14:26.651Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.653Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T17:14:26.701Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.704Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.710Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.725Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.733Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.738Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.742Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.748Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.755Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.761Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.767Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.774Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.779Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.786Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.792Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.800Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.808Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.895Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.904Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.909Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.913Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.917Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.923Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.926Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.929Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.935Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.938Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.941Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.944Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.947Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.950Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.954Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.957Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.960Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.963Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.966Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.969Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.973Z"}
{"level":"debug","message":"Conexión a: localhost@Oficri_sistema como root","timestamp":"2025-03-22T17:14:26.976Z"}
{"level":"info","message":"Inicialización de base de datos completada","timestamp":"2025-03-22T17:14:26.979Z"}
{"level":"info","message":"Servidor iniciado en http://localhost:3000","timestamp":"2025-03-22T17:14:26.984Z"}
{"level":"info","message":"Documentación API disponible en http://localhost:3000/api-docs","timestamp":"2025-03-22T17:14:26.985Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/auth/check","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:17:55.970Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/auth/check","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:17:56.778Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/auth/login","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:18:07.783Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/auth/login","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:18:08.954Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/auth/login","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:18:09.155Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/auth/login","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:18:09.410Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/auth/check","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:18:10.176Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/auth/check","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:18:10.705Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/auth/check","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:18:10.881Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/auth/check","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:18:11.065Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/auth/check","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:18:11.265Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/documents","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:18:16.745Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/users","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:18:17.600Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/documents","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:18:18.490Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/users","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:18:19.257Z"}
{"error":"logSecurityEvent is not a function","level":"error","message":"Error processing request","method":"OPTIONS","path":"/api/documents","stack":"TypeError: logSecurityEvent is not a function\n    at origin (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\config\\cors.js:53:9)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)","timestamp":"2025-03-22T17:18:19.761Z"}
{"level":"info","message":"Shutting down gracefully...","timestamp":"2025-03-22T17:20:04.899Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:20.959Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T17:27:21.128Z"}
{"duration":"21ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T17:27:21.131Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T17:27:21.136Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T17:27:21.145Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:21.794Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T17:27:21.840Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T17:27:21.845Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:22.639Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T17:27:22.702Z"}
{"level":"debug","message":"Executing query [m8khexqvblycxf67sm9]: SELECT IDRol FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T17:27:22.711Z"}
{"level":"debug","message":"Executing query [m8khexqz2kvkkpx7yk3]: SELECT Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T17:27:22.715Z"}
{"level":"debug","message":"Executing query [m8khexr9v5hmfp20bg8]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T17:27:22.725Z"}
{"level":"debug","message":"Executing query [m8khexrl6vfd2iml3la]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T17:27:22.737Z"}
{"level":"debug","message":"Executing query [m8khexrn271sbqu1d49i]: SELECT IDRol, NombreRol, Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T17:27:22.739Z"}
{"level":"debug","message":"Executing query [m8khexroek9k7bg0kr9]: SELECT \n        pc.IDPermisoContextual,\n        pc.IDRol,\n        pc.IDArea,\n        pc.TipoRecurso,\n        pc.ReglaContexto,\n        pc.Activo\n      FROM \n        PermisoContextual pc\n      WHERE \n        pc.IDRol = ? \n        AND pc.IDArea = ?\n        AND pc.Activo = true","params":"[888,888]","timestamp":"2025-03-22T17:27:22.740Z"}
{"level":"debug","message":"Executing query [m8khexs26dspyfaj89v]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[99999]","timestamp":"2025-03-22T17:27:22.754Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T17:27:22.759Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:22.957Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T17:27:22.970Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T17:27:23.001Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T17:27:23.015Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T17:27:23.042Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:23.155Z"}
{"level":"debug","message":"Executing query [m8khey3arn0w9b8tbc9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T17:27:23.158Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T17:27:23.169Z"}
{"level":"debug","message":"Executing query [m8khey3mfr64r5diyfi]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T17:27:23.170Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T17:27:23.172Z"}
{"level":"debug","message":"Executing query [m8khey3p8jidlpte9ne]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T17:27:23.173Z"}
{"level":"debug","message":"Executing query [m8khey3t449w01ssooh]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[21,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T17:27:23.177Z\",\"ACTIVO\"]","timestamp":"2025-03-22T17:27:23.178Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 23","timestamp":"2025-03-22T17:27:23.181Z"}
{"level":"debug","message":"Executing query [m8khey3y8hdjeegr30g]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[23,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T17:27:23.182Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8khey3y8hdjeegr30g]","params":"[23,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T17:27:23.187Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T17:27:23.188Z"}
{"level":"debug","message":"Executing query [m8khey441b2qn6mwd0q]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[23]","timestamp":"2025-03-22T17:27:23.188Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8khey441b2qn6mwd0q]","params":"[23]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T17:27:23.192Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T17:27:23.192Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T17:27:23.192Z"}
{"level":"debug","message":"Executing query [m8khey49mjj35itpy6]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[23,1,\"RESTAURAR\"]","timestamp":"2025-03-22T17:27:23.193Z"}
{"level":"debug","message":"Executing query [m8khey4esaeob6ezw6]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[23]","timestamp":"2025-03-22T17:27:23.198Z"}
{"level":"debug","message":"Executing query [m8khey4g359m2c9h089]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[23,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T17:27:23.200Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8khey4g359m2c9h089]","params":"[23,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T17:27:23.204Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T17:27:23.205Z"}
{"level":"debug","message":"Executing query [m8khey4lp1lcrpop3r]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[23]","timestamp":"2025-03-22T17:27:23.205Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8khey4lp1lcrpop3r]","params":"[23]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T17:27:23.208Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T17:27:23.208Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T17:27:23.209Z"}
{"level":"debug","message":"Executing query [m8khey4qlw11qfu09m]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[21,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T17:27:23.210Z\",\"ACTIVO\"]","timestamp":"2025-03-22T17:27:23.210Z"}
{"level":"debug","message":"Executing query [m8khey4toeoywxekli]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T17:27:23.213Z"}
{"level":"debug","message":"Executing query [m8khey4wk64py8vr9q]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",24,\"ELIMINAR\"]","timestamp":"2025-03-22T17:27:23.216Z"}
{"level":"debug","message":"Executing query [m8khey4yiklvniqyqjm]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[24]","timestamp":"2025-03-22T17:27:23.218Z"}
{"level":"debug","message":"Executing query [m8khey510dajmzbawckc]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T17:27:23.221Z"}
{"level":"debug","message":"Executing query [m8khey55pqgfnzz36ca]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[21]","timestamp":"2025-03-22T17:27:23.225Z"}
{"level":"debug","message":"Executing query [m8khey58txeocq6b2qg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T17:27:23.228Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T17:27:23.229Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:23.336Z"}
{"level":"debug","message":"Executing query [m8khey8aqo14pc31fc]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T17:27:23.338Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T17:27:23.351Z"}
{"level":"debug","message":"Executing query [m8khey8omjzr8di8bmc]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T17:27:23.352Z"}
{"level":"debug","message":"Executing query [m8khey8qkdzflgd7iak]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742664443338\"]","timestamp":"2025-03-22T17:27:23.354Z"}
{"level":"debug","message":"Executing query [m8khey8ru7v251didml]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742664443338\",\"TEST-OFICIO-1742664443338\",5221,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T17:27:23.355Z"}
{"level":"debug","message":"Executing query [m8khey8xk13umacx73]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-22T17:27:23.361Z"}
{"level":"debug","message":"Executing query [m8khey8zpfx47lc5skc]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742664443338\"]","timestamp":"2025-03-22T17:27:23.364Z"}
{"level":"debug","message":"Executing query [m8khey92c8cxkj2jllb]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",17]","timestamp":"2025-03-22T17:27:23.366Z"}
{"level":"debug","message":"Executing query [m8khey95z5tap0h9eq]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-22T17:27:23.369Z"}
{"level":"debug","message":"Executing query [m8khey979sn08tcpezb]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-22T17:27:23.371Z"}
{"level":"debug","message":"Executing query [m8khey9a3hnrm10mlcx]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-22T17:27:23.374Z"}
{"level":"debug","message":"Executing query [m8khey9ccrcl1tb2rqm]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-22T17:27:23.376Z"}
{"level":"debug","message":"Executing query [m8khey9fahbwd0rfgsr]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[17]","timestamp":"2025-03-22T17:27:23.380Z"}
{"level":"debug","message":"Executing query [m8khey9ibqvnbx98agj]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742664443382\",\"TEST-SP-OFICIO-1742664443382\",8863,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T17:27:23.382Z"}
{"level":"debug","message":"Executing query [m8khey9lcah9rjck9ju]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742664443382\"]","timestamp":"2025-03-22T17:27:23.385Z"}
{"level":"debug","message":"Executing query [m8khey9mz14pffziax]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742664443382\"]","timestamp":"2025-03-22T17:27:23.386Z"}
{"level":"debug","message":"Executing query [m8khey9qeqd3sx95o9e]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T17:27:23.391Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T17:27:23.393Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:23.496Z"}
{"level":"debug","message":"Executing query [m8kheycsp0dxd8fpeuh]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T17:27:23.500Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T17:27:23.518Z"}
{"level":"debug","message":"Executing query [m8kheydcy7o51qq2bw]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T17:27:23.520Z"}
{"level":"debug","message":"Executing query [m8kheydeyt4xac3ps9i]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T17:27:23.523Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T17:27:23.525Z"}
{"level":"debug","message":"Executing query [m8kheyditdv9vrsjl2i]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T17:27:23.526Z"}
{"level":"debug","message":"Executing query [m8kheydkx4d0gvidmt]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T17:27:23.528Z"}
{"level":"debug","message":"Executing query [m8kheydmnccthv4aapb]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T17:27:23.530Z"}
{"level":"debug","message":"Executing query [m8kheydr84r4f3mlhwc]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[22]","timestamp":"2025-03-22T17:27:23.535Z"}
{"level":"debug","message":"Executing query [m8kheye22ls2zq8wmmt]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[22]","timestamp":"2025-03-22T17:27:23.546Z"}
{"level":"debug","message":"Executing query [m8kheye5hxwc6zjmas]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",22]","timestamp":"2025-03-22T17:27:23.549Z"}
{"level":"debug","message":"Executing query [m8kheye98m6mgtx0qj7]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[22]","timestamp":"2025-03-22T17:27:23.553Z"}
{"level":"debug","message":"Executing query [m8kheyec5kwmcky3ryb]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[22]","timestamp":"2025-03-22T17:27:23.556Z"}
{"level":"debug","message":"Executing query [m8kheyef8857ib2s5tk]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[22]","timestamp":"2025-03-22T17:27:23.559Z"}
{"level":"debug","message":"Executing query [m8kheyehdgg56mcdjae]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T17:27:23.561Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T17:27:23.562Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:23.665Z"}
{"level":"debug","message":"Executing query [m8kheyhi9ezitk16tzk]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T17:27:23.670Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T17:27:23.680Z"}
{"level":"debug","message":"Executing query [m8kheyhutcy2oxhvzfk]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T17:27:23.682Z"}
{"level":"debug","message":"Executing query [m8kheyhwdg68w2gu7og]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742664443669\"]","timestamp":"2025-03-22T17:27:23.684Z"}
{"level":"debug","message":"Executing query [m8kheyhzbjqxomgtsab]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742664443669\",\"TEST-OFI-FORENSE-1742664443669\",483,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742664443669\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T17:27:23.687Z"}
{"level":"debug","message":"Executing query [m8kheyi34j7xti9kjpa]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-22T17:27:23.691Z"}
{"level":"debug","message":"Executing query [m8kheyi5kdxd6fw064e]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742664443669\"]","timestamp":"2025-03-22T17:27:23.693Z"}
{"level":"debug","message":"Executing query [m8kheyi7qbrhzdkzr1j]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",17]","timestamp":"2025-03-22T17:27:23.695Z"}
{"level":"debug","message":"Executing query [m8kheyi9uf8qjcsykmh]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-22T17:27:23.697Z"}
{"level":"debug","message":"Executing query [m8kheyibijfs6t9ohxr]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-22T17:27:23.699Z"}
{"level":"debug","message":"Executing query [m8kheyieyvjoe92qir]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-22T17:27:23.702Z"}
{"level":"debug","message":"Executing query [m8kheyifq45x7ta3xy]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-22T17:27:23.703Z"}
{"level":"debug","message":"Executing query [m8kheyiiunfdfgq1f1e]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[17]","timestamp":"2025-03-22T17:27:23.706Z"}
{"level":"debug","message":"Executing query [m8kheyikych9gyhhxij]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742664443708\",\"TEST-SP-OFI-FORENSE-1742664443708\",4519,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T17:27:23.708Z"}
{"level":"debug","message":"Executing query [m8kheyiotriuqq52t59]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742664443708\"]","timestamp":"2025-03-22T17:27:23.712Z"}
{"level":"debug","message":"Executing query [m8kheyipbuwfax3mngg]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742664443708\"]","timestamp":"2025-03-22T17:27:23.713Z"}
{"level":"debug","message":"Executing query [m8kheyiscpip54d2vpf]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T17:27:23.716Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T17:27:23.717Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:23.819Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:23.829Z"}
{"level":"debug","message":"Executing query [m8kheym0q26376y2whk]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T17:27:23.832Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T17:27:23.843Z"}
{"level":"debug","message":"Executing query [m8kheymd1jde1m8rdxi]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T17:27:23.845Z"}
{"level":"debug","message":"Executing query [m8kheymikh2wmzlue4l]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T17:27:23.850Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T17:27:23.851Z"}
{"level":"debug","message":"Executing query [m8kheymjicndic9gimf]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T17:27:23.851Z"}
{"level":"debug","message":"Executing query [m8kheymlg8cfmo24k9]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T17:27:23.853Z"}
{"level":"debug","message":"Executing query [m8kheymn7yjkt1hylk]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T17:27:23.855Z"}
{"level":"debug","message":"Executing query [m8kheymo4krb46ow4xf]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T17:27:23.856Z"}
{"level":"debug","message":"Executing query [m8kheyms0qmicazd7txf]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[11]","timestamp":"2025-03-22T17:27:23.860Z"}
{"level":"debug","message":"Executing query [m8kheymupf9xlj4tskk]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T17:27:23.862Z"}
{"level":"debug","message":"Executing query [m8kheymw3n58mpgoyl9]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",11]","timestamp":"2025-03-22T17:27:23.864Z"}
{"level":"debug","message":"Executing query [m8kheymycf6b8nwjmy]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[11]","timestamp":"2025-03-22T17:27:23.866Z"}
{"level":"debug","message":"Executing query [m8kheyn0dylba3ches]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[11]","timestamp":"2025-03-22T17:27:23.868Z"}
{"level":"debug","message":"Executing query [m8kheyn34fvxjfp3ldn]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[11]","timestamp":"2025-03-22T17:27:23.871Z"}
{"level":"debug","message":"Executing query [m8kheyn5ajuyhufx7y4]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T17:27:23.873Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T17:27:23.875Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:23.980Z"}
{"level":"debug","message":"Executing query [m8kheyq7tgdw5q0cuw]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T17:27:23.983Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T17:27:23.993Z"}
{"level":"debug","message":"Executing query [m8kheyqj7u1rinaj122]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T17:27:23.995Z"}
{"level":"debug","message":"Executing query [m8kheyqlzqy2sahyyla]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742664443982\"]","timestamp":"2025-03-22T17:27:23.997Z"}
{"level":"debug","message":"Executing query [m8kheyqnfxngo0zzk3]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742664443982\",\"TEST-OFI-QUIMICA-1742664443982\",8401,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T17:27:23.999Z"}
{"level":"debug","message":"Executing query [m8kheyqsfqe8hp9bayd]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-22T17:27:24.004Z"}
{"level":"debug","message":"Executing query [m8kheyqu8c1p0m0xbyl]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742664443982\"]","timestamp":"2025-03-22T17:27:24.006Z"}
{"level":"debug","message":"Executing query [m8kheyqw6jjazh569ga]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",9]","timestamp":"2025-03-22T17:27:24.008Z"}
{"level":"debug","message":"Executing query [m8kheyqzz28dmjn0z48]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-22T17:27:24.011Z"}
{"level":"debug","message":"Executing query [m8kheyr1xlxrg0kzk]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-22T17:27:24.013Z"}
{"level":"debug","message":"Executing query [m8kheyr3ml55jca4dq]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-22T17:27:24.015Z"}
{"level":"debug","message":"Executing query [m8kheyr5w60r8uowgm]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-22T17:27:24.017Z"}
{"level":"debug","message":"Executing query [m8kheyr88nzrcedawux]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[9]","timestamp":"2025-03-22T17:27:24.020Z"}
{"level":"debug","message":"Executing query [m8kheyr9s2o0cek6mk8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T17:27:24.021Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T17:27:24.022Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:24.125Z"}
{"level":"debug","message":"Executing query [m8kheyu9184kaxvruph]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T17:27:24.129Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T17:27:24.147Z"}
{"level":"debug","message":"Executing query [m8kheyus8ju31ozzblb]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742664444128\"]","timestamp":"2025-03-22T17:27:24.148Z"}
{"level":"debug","message":"Executing query [m8kheyuwmyj9vzep9y]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742664444128\",true]","timestamp":"2025-03-22T17:27:24.152Z"}
{"level":"debug","message":"Executing query [m8kheyv28qr5et6isk3]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[22]","timestamp":"2025-03-22T17:27:24.158Z"}
{"level":"debug","message":"Executing query [m8kheyv48249lp4mrv]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742664444128\"]","timestamp":"2025-03-22T17:27:24.160Z"}
{"level":"debug","message":"Executing query [m8kheyv7ztwm34z71ma]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",22]","timestamp":"2025-03-22T17:27:24.163Z"}
{"level":"debug","message":"Executing query [m8kheyvb2pp1kjp4jfg]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[22]","timestamp":"2025-03-22T17:27:24.167Z"}
{"level":"debug","message":"Executing query [m8kheyvdg1359meccw]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[22]","timestamp":"2025-03-22T17:27:24.169Z"}
{"level":"debug","message":"Executing query [m8kheyvg8b91akowzd7]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[22]","timestamp":"2025-03-22T17:27:24.172Z"}
{"level":"debug","message":"Executing query [m8kheyvi7b2un7u27eu]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[22]","timestamp":"2025-03-22T17:27:24.174Z"}
{"level":"debug","message":"Executing query [m8kheyvkeo5tpdacjjn]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[22]","timestamp":"2025-03-22T17:27:24.176Z"}
{"level":"debug","message":"Executing query [m8kheyvpaonl9vk2so]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[22]","timestamp":"2025-03-22T17:27:24.181Z"}
{"level":"debug","message":"Executing query [m8kheyvrubbfef1wyzs]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T17:27:24.183Z"}
{"level":"debug","message":"Executing query [m8kheyvtw2zs6j6nqm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T17:27:24.185Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T17:27:24.186Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:24.466Z"}
{"level":"debug","message":"Executing query [m8khez3p4hxp3nqnefv]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T17:27:24.469Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T17:27:24.483Z"}
{"level":"debug","message":"Executing query [m8khez44q7mq42xpnb]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742664444468\"]","timestamp":"2025-03-22T17:27:24.484Z"}
{"level":"debug","message":"Executing query [m8khez4604m1vdj7e7te]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742664444468\"]","timestamp":"2025-03-22T17:27:24.486Z"}
{"level":"debug","message":"Executing query [m8khez48akbnx3auu5k]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742664444468\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T17:27:24.488Z"}
{"level":"debug","message":"Executing query [m8khez4c8lqjn7oofu6]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-22T17:27:24.492Z"}
{"level":"debug","message":"Executing query [m8khez4f55w0dttjo2]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742664444468\"]","timestamp":"2025-03-22T17:27:24.495Z"}
{"level":"debug","message":"Executing query [m8khez4hvy0v0o0em8]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1013]","timestamp":"2025-03-22T17:27:24.497Z"}
{"level":"debug","message":"Executing query [m8khez4kzvqhesnyb0p]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-22T17:27:24.500Z"}
{"level":"debug","message":"Executing query [m8khez4nj73nbgppu4]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-22T17:27:24.503Z"}
{"level":"debug","message":"Executing query [m8khez4qa1y840us84h]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-22T17:27:24.506Z"}
{"level":"debug","message":"Executing query [m8khez4s7j23lxpnhsx]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-22T17:27:24.508Z"}
{"level":"debug","message":"Executing query [m8khez4u1czzbj3cdu5]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-22T17:27:24.510Z"}
{"level":"debug","message":"Executing query [m8khez4yom3r5psgbsg]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1013]","timestamp":"2025-03-22T17:27:24.514Z"}
{"level":"debug","message":"Executing query [m8khez505yx3v3ymyur]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T17:27:24.516Z"}
{"level":"debug","message":"Executing query [m8khez52zp6noohqu4q]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T17:27:24.518Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T17:27:24.519Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:24.620Z"}
{"level":"debug","message":"Executing query [m8khez7ytjrjl04a4ee]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T17:27:24.622Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T17:27:24.633Z"}
{"level":"debug","message":"Executing query [m8khez89mwvi4wlstic]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T17:27:24.633Z"}
{"level":"debug","message":"Executing query [m8khez8aq6hblyo047f]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T17:27:24.635Z"}
{"level":"debug","message":"Executing query [m8khez8b9o32h7jkq7j]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T17:27:24.635Z"}
{"level":"debug","message":"Executing query [m8khez8cih62zsu6j5j]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T17:27:24.636Z"}
{"level":"info","message":"Usando Mesa ID: 20, Áreas ID: 888/999, Usuarios ID: 1/10, Documento ID: 17","timestamp":"2025-03-22T17:27:24.637Z"}
{"level":"debug","message":"Executing query [m8khez8d1r35z5rzepc]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[17,888,999]","timestamp":"2025-03-22T17:27:24.637Z"}
{"level":"debug","message":"Executing query [m8khez8fzv4rrte6n8g]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[17,20,888,999,1,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-22T17:27:24.639Z"}
{"level":"debug","message":"Executing query [m8khez8in84o28a1w88]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-22T17:27:24.642Z"}
{"level":"debug","message":"Executing query [m8khez8lbx4121icvkw]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-22 17:27:24\",10,1]","timestamp":"2025-03-22T17:27:24.645Z"}
{"level":"debug","message":"Executing query [m8khez8osqxnfwa7g7]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-22T17:27:24.648Z"}
{"level":"debug","message":"Executing query [m8khez8qy5zgdxendbc]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T17:27:24.650Z"}
{"level":"debug","message":"Executing query [m8khez8rgz8riyn5ouf]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T17:27:24.651Z"}
{"level":"debug","message":"Executing query [m8khez8sekkprtbsei]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-22T17:27:24.652Z"}
{"level":"debug","message":"Executing query [m8khez8unffbejne7xo]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-22T17:27:24.654Z"}
{"level":"debug","message":"Executing query [m8khez8w885ui75x75q]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[17]","timestamp":"2025-03-22T17:27:24.656Z"}
{"level":"debug","message":"Executing query [m8khez8zy9a6etbbqw]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T17:27:24.659Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T17:27:24.770Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T17:27:24.795Z"}
{"level":"debug","message":"Executing query [m8khezcu5ti2fgsawif]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T17:27:24.798Z"}
{"level":"debug","message":"Executing query [m8khezcxpif45qjz3mp]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T17:27:24.801Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8khezcxpif45qjz3mp]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T17:27:24.804Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T17:27:24.805Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T17:27:24.891Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T17:27:24.987Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T17:27:25.088Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T17:27:25.089Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T17:27:25.089Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T17:27:25.090Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T17:27:25.091Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T17:27:25.091Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:27.296Z"}
{"duration":"3ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T18:29:27.442Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T18:29:27.458Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:29:27.475Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T18:29:27.477Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:28.262Z"}
{"level":"debug","message":"Executing query [m8kjmsgau1wtg8rcuxk]: SELECT IDRol FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T18:29:28.330Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:29:28.332Z"}
{"level":"debug","message":"Executing query [m8kjmsgi81ewe1tswnn]: SELECT Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T18:29:28.338Z"}
{"level":"debug","message":"Executing query [m8kjmsguatjtjj17f6]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T18:29:28.351Z"}
{"level":"debug","message":"Executing query [m8kjmsh90zm6jtwz7aq]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T18:29:28.365Z"}
{"level":"debug","message":"Executing query [m8kjmshb4azd0b9flf9]: SELECT IDRol, NombreRol, Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T18:29:28.367Z"}
{"level":"debug","message":"Executing query [m8kjmshdeita3yts47]: SELECT \n        pc.IDPermisoContextual,\n        pc.IDRol,\n        pc.IDArea,\n        pc.TipoRecurso,\n        pc.ReglaContexto,\n        pc.Activo\n      FROM \n        PermisoContextual pc\n      WHERE \n        pc.IDRol = ? \n        AND pc.IDArea = ?\n        AND pc.Activo = true","params":"[888,888]","timestamp":"2025-03-22T18:29:28.369Z"}
{"level":"debug","message":"Executing query [m8kjmshs48f7hbq7p3s]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[99999]","timestamp":"2025-03-22T18:29:28.384Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:29:28.388Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:28.989Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:29:29.034Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T18:29:29.036Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:29.225Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T18:29:29.239Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:29:29.268Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T18:29:29.279Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:29:29.310Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:29.407Z"}
{"level":"debug","message":"Executing query [m8kjmta956wqhr4u68t]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:29:29.409Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:29:29.418Z"}
{"level":"debug","message":"Executing query [m8kjmtajhvzg1eyla29]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T18:29:29.420Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T18:29:29.422Z"}
{"level":"debug","message":"Executing query [m8kjmtam90ied9xcdx]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T18:29:29.422Z"}
{"level":"debug","message":"Executing query [m8kjmtatecvclef0udb]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[23,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T18:29:29.429Z\",\"ACTIVO\"]","timestamp":"2025-03-22T18:29:29.429Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 25","timestamp":"2025-03-22T18:29:29.433Z"}
{"level":"debug","message":"Executing query [m8kjmtaya9kcagefsbn]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[25,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T18:29:29.434Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kjmtaya9kcagefsbn]","params":"[25,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T18:29:29.440Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T18:29:29.440Z"}
{"level":"debug","message":"Executing query [m8kjmtb55iscdnzjj2]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[25]","timestamp":"2025-03-22T18:29:29.441Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kjmtb55iscdnzjj2]","params":"[25]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T18:29:29.443Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T18:29:29.443Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T18:29:29.443Z"}
{"level":"debug","message":"Executing query [m8kjmtb89u4rh9bkf4i]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[25,1,\"RESTAURAR\"]","timestamp":"2025-03-22T18:29:29.444Z"}
{"level":"debug","message":"Executing query [m8kjmtbdr4ffsto09x]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[25]","timestamp":"2025-03-22T18:29:29.449Z"}
{"level":"debug","message":"Executing query [m8kjmtbga2wjthtq2a]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[25,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T18:29:29.452Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kjmtbga2wjthtq2a]","params":"[25,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T18:29:29.455Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T18:29:29.456Z"}
{"level":"debug","message":"Executing query [m8kjmtbkvfz6b90zy2g]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[25]","timestamp":"2025-03-22T18:29:29.456Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kjmtbkvfz6b90zy2g]","params":"[25]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T18:29:29.458Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T18:29:29.459Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T18:29:29.459Z"}
{"level":"debug","message":"Executing query [m8kjmtbonf5wq4v58q]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[23,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T18:29:29.460Z\",\"ACTIVO\"]","timestamp":"2025-03-22T18:29:29.460Z"}
{"level":"debug","message":"Executing query [m8kjmtbrdh4vke9nhx]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T18:29:29.463Z"}
{"level":"debug","message":"Executing query [m8kjmtbvwnj3x4soo38]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",26,\"ELIMINAR\"]","timestamp":"2025-03-22T18:29:29.467Z"}
{"level":"debug","message":"Executing query [m8kjmtbxjl16tb6k6cd]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[26]","timestamp":"2025-03-22T18:29:29.470Z"}
{"level":"debug","message":"Executing query [m8kjmtc1pril5518aag]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T18:29:29.473Z"}
{"level":"debug","message":"Executing query [m8kjmtc5gmiobvl48j4]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[23]","timestamp":"2025-03-22T18:29:29.477Z"}
{"level":"debug","message":"Executing query [m8kjmtc75dt2oaiuqif]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:29:29.479Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:29:29.480Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:29.769Z"}
{"level":"debug","message":"Executing query [m8kjmtkbmbnovp17qw]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:29:29.771Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:29:29.780Z"}
{"level":"debug","message":"Executing query [m8kjmtkm25rq5gsqapt]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T18:29:29.782Z"}
{"level":"debug","message":"Executing query [m8kjmtkohxz5tu5ll9]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T18:29:29.784Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T18:29:29.786Z"}
{"level":"debug","message":"Executing query [m8kjmtkqiak2f6mvtir]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T18:29:29.786Z"}
{"level":"debug","message":"Executing query [m8kjmtkurg7uyephhpf]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T18:29:29.790Z"}
{"level":"debug","message":"Executing query [m8kjmtkvx1b4kx37el]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T18:29:29.791Z"}
{"level":"debug","message":"Executing query [m8kjmtl0vmkd8bjj7sq]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[24]","timestamp":"2025-03-22T18:29:29.796Z"}
{"level":"debug","message":"Executing query [m8kjmtl3yu72hqh2k2g]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[24]","timestamp":"2025-03-22T18:29:29.799Z"}
{"level":"debug","message":"Executing query [m8kjmtl5y4o1k3lu4gf]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",24]","timestamp":"2025-03-22T18:29:29.801Z"}
{"level":"debug","message":"Executing query [m8kjmtl7gixy4sd59le]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[24]","timestamp":"2025-03-22T18:29:29.803Z"}
{"level":"debug","message":"Executing query [m8kjmtl84r7ezj967ys]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[24]","timestamp":"2025-03-22T18:29:29.804Z"}
{"level":"debug","message":"Executing query [m8kjmtlbzn5x64g0ix]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[24]","timestamp":"2025-03-22T18:29:29.807Z"}
{"level":"debug","message":"Executing query [m8kjmtldw45zg17o8sq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:29:29.809Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:29:29.810Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:29.911Z"}
{"level":"debug","message":"Executing query [m8kjmtoas54xkm2gzq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:29:29.914Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:29:29.923Z"}
{"level":"debug","message":"Executing query [m8kjmtolixz0gpm9jed]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T18:29:29.925Z"}
{"level":"debug","message":"Executing query [m8kjmtonvtjpewr24j]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742668169913\"]","timestamp":"2025-03-22T18:29:29.927Z"}
{"level":"debug","message":"Executing query [m8kjmtoohgfe7k11dog]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742668169913\",\"TEST-OFICIO-1742668169913\",2872,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T18:29:29.928Z"}
{"level":"debug","message":"Executing query [m8kjmtovyzs75332iz]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-22T18:29:29.935Z"}
{"level":"debug","message":"Executing query [m8kjmtoxgbeglylb4df]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742668169913\"]","timestamp":"2025-03-22T18:29:29.937Z"}
{"level":"debug","message":"Executing query [m8kjmtozp01f9edpoy9]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",19]","timestamp":"2025-03-22T18:29:29.939Z"}
{"level":"debug","message":"Executing query [m8kjmtp2k3fy4w4kr9f]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-22T18:29:29.942Z"}
{"level":"debug","message":"Executing query [m8kjmtp41qoduv4xs1v]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-22T18:29:29.944Z"}
{"level":"debug","message":"Executing query [m8kjmtp69yj4ffhgzml]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-22T18:29:29.946Z"}
{"level":"debug","message":"Executing query [m8kjmtp8wc97yoblp5]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-22T18:29:29.948Z"}
{"level":"debug","message":"Executing query [m8kjmtpahfmwsx61z1k]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[19]","timestamp":"2025-03-22T18:29:29.950Z"}
{"level":"debug","message":"Executing query [m8kjmtpcvvzfc5ht5dp]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742668169952\",\"TEST-SP-OFICIO-1742668169952\",8866,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T18:29:29.952Z"}
{"level":"debug","message":"Executing query [m8kjmtpf5kbkg2hyt6]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742668169952\"]","timestamp":"2025-03-22T18:29:29.955Z"}
{"level":"debug","message":"Executing query [m8kjmtph7b159uv41ah]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742668169952\"]","timestamp":"2025-03-22T18:29:29.957Z"}
{"level":"debug","message":"Executing query [m8kjmtpkvsaqg1l6fw7]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:29:29.960Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:29:29.961Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:30.061Z"}
{"level":"debug","message":"Executing query [m8kjmtsfj71ft3j09bo]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:29:30.063Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:29:30.072Z"}
{"level":"debug","message":"Executing query [m8kjmtsri8wqr6u6v3n]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742668170063\"]","timestamp":"2025-03-22T18:29:30.075Z"}
{"level":"debug","message":"Executing query [m8kjmtsstfy7xfk86ka]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742668170063\",true]","timestamp":"2025-03-22T18:29:30.076Z"}
{"level":"debug","message":"Executing query [m8kjmtsxiogcb6w28sn]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[24]","timestamp":"2025-03-22T18:29:30.081Z"}
{"level":"debug","message":"Executing query [m8kjmtsz6c6ims9y2gv]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742668170063\"]","timestamp":"2025-03-22T18:29:30.083Z"}
{"level":"debug","message":"Executing query [m8kjmtt2zf1ou41yls]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",24]","timestamp":"2025-03-22T18:29:30.086Z"}
{"level":"debug","message":"Executing query [m8kjmtt5dx9fg89d0w9]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[24]","timestamp":"2025-03-22T18:29:30.089Z"}
{"level":"debug","message":"Executing query [m8kjmtt8ukcbupj9fip]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[24]","timestamp":"2025-03-22T18:29:30.092Z"}
{"level":"debug","message":"Executing query [m8kjmtta0kd7bhxfhvhb]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[24]","timestamp":"2025-03-22T18:29:30.094Z"}
{"level":"debug","message":"Executing query [m8kjmttcgmof1e692qp]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[24]","timestamp":"2025-03-22T18:29:30.096Z"}
{"level":"debug","message":"Executing query [m8kjmttdwnv6ptu5mag]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[24]","timestamp":"2025-03-22T18:29:30.097Z"}
{"level":"debug","message":"Executing query [m8kjmttg44fh2egemvy]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[24]","timestamp":"2025-03-22T18:29:30.100Z"}
{"level":"debug","message":"Executing query [m8kjmtthxyyu90crcjl]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T18:29:30.101Z"}
{"level":"debug","message":"Executing query [m8kjmttjv4jn673fcl]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:29:30.103Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:29:30.104Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:30.201Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:30.207Z"}
{"level":"debug","message":"Executing query [m8kjmtwgkuav2ab029]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:29:30.208Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:29:30.218Z"}
{"level":"debug","message":"Executing query [m8kjmtwrm8dvgt0ck7]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T18:29:30.219Z"}
{"level":"debug","message":"Executing query [m8kjmtwse0141ea7prn]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T18:29:30.220Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T18:29:30.222Z"}
{"level":"debug","message":"Executing query [m8kjmtwvjawv9jw6j5]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T18:29:30.223Z"}
{"level":"debug","message":"Executing query [m8kjmtwwgs4m704cj7l]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T18:29:30.224Z"}
{"level":"debug","message":"Executing query [m8kjmtwyd9e3cb613]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T18:29:30.226Z"}
{"level":"debug","message":"Executing query [m8kjmtwzbodvs9cpj2]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T18:29:30.227Z"}
{"level":"debug","message":"Executing query [m8kjmtx2f34kdt7s6z7]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[12]","timestamp":"2025-03-22T18:29:30.230Z"}
{"level":"debug","message":"Executing query [m8kjmtx45pbqy01cvgl]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T18:29:30.232Z"}
{"level":"debug","message":"Executing query [m8kjmtx5dqr783vo71]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",12]","timestamp":"2025-03-22T18:29:30.233Z"}
{"level":"debug","message":"Executing query [m8kjmtx8fkkbf96zw2]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[12]","timestamp":"2025-03-22T18:29:30.236Z"}
{"level":"debug","message":"Executing query [m8kjmtxa8f3bh9s14b5]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[12]","timestamp":"2025-03-22T18:29:30.238Z"}
{"level":"debug","message":"Executing query [m8kjmtxc8j8hkt0v28q]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[12]","timestamp":"2025-03-22T18:29:30.241Z"}
{"level":"debug","message":"Executing query [m8kjmtxecxpnf13wsaj]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:29:30.242Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:29:30.243Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:30.337Z"}
{"level":"debug","message":"Executing query [m8kjmu04b7x3935ufyq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:29:30.340Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:29:30.350Z"}
{"level":"debug","message":"Executing query [m8kjmu0g6k8nr2gkhr6]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T18:29:30.352Z"}
{"level":"debug","message":"Executing query [m8kjmu0is6c7f4vlckg]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742668170339\"]","timestamp":"2025-03-22T18:29:30.354Z"}
{"level":"debug","message":"Executing query [m8kjmu0k1hzwii7w726]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742668170339\",\"TEST-OFI-FORENSE-1742668170339\",2815,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742668170339\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T18:29:30.356Z"}
{"level":"debug","message":"Executing query [m8kjmu0r34o2ggat8zi]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-22T18:29:30.363Z"}
{"level":"debug","message":"Executing query [m8kjmu0tc2d7l0fuwn4]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742668170339\"]","timestamp":"2025-03-22T18:29:30.365Z"}
{"level":"debug","message":"Executing query [m8kjmu0u7dzfhmj3wn]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",19]","timestamp":"2025-03-22T18:29:30.367Z"}
{"level":"debug","message":"Executing query [m8kjmu0y7rcy7rdgvc]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-22T18:29:30.370Z"}
{"level":"debug","message":"Executing query [m8kjmu0zgstwzmzsv09]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-22T18:29:30.372Z"}
{"level":"debug","message":"Executing query [m8kjmu12409yyrmb3gy]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-22T18:29:30.374Z"}
{"level":"debug","message":"Executing query [m8kjmu14e4j3jn22svi]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-22T18:29:30.376Z"}
{"level":"debug","message":"Executing query [m8kjmu16qe87bt31t6p]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[19]","timestamp":"2025-03-22T18:29:30.378Z"}
{"level":"debug","message":"Executing query [m8kjmu17pkvzpdfpepi]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742668170379\",\"TEST-SP-OFI-FORENSE-1742668170379\",1027,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T18:29:30.379Z"}
{"level":"debug","message":"Executing query [m8kjmu1atytffmfee1j]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742668170379\"]","timestamp":"2025-03-22T18:29:30.382Z"}
{"level":"debug","message":"Executing query [m8kjmu1bg40tumabvub]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742668170379\"]","timestamp":"2025-03-22T18:29:30.383Z"}
{"level":"debug","message":"Executing query [m8kjmu1ez1y0ht2k52b]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:29:30.386Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:29:30.387Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:30.479Z"}
{"level":"debug","message":"Executing query [m8kjmu42os83ll6ofae]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:29:30.482Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:29:30.491Z"}
{"level":"debug","message":"Executing query [m8kjmu4d3s7mpvvej9j]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742668170481\"]","timestamp":"2025-03-22T18:29:30.493Z"}
{"level":"debug","message":"Executing query [m8kjmu4f4darvcm5yxd]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742668170481\"]","timestamp":"2025-03-22T18:29:30.495Z"}
{"level":"debug","message":"Executing query [m8kjmu4gw2ki8rtymxr]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742668170481\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T18:29:30.496Z"}
{"level":"debug","message":"Executing query [m8kjmu4jrlgat2l7jg]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-22T18:29:30.499Z"}
{"level":"debug","message":"Executing query [m8kjmu4l40esjbujd3h]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742668170481\"]","timestamp":"2025-03-22T18:29:30.501Z"}
{"level":"debug","message":"Executing query [m8kjmu4oyic4lf0moxj]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1014]","timestamp":"2025-03-22T18:29:30.504Z"}
{"level":"debug","message":"Executing query [m8kjmu4qgke635cfb2l]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-22T18:29:30.506Z"}
{"level":"debug","message":"Executing query [m8kjmu4scenpgnm0afh]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-22T18:29:30.508Z"}
{"level":"debug","message":"Executing query [m8kjmu4u973qgvahrj]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-22T18:29:30.510Z"}
{"level":"debug","message":"Executing query [m8kjmu4wqlumugxeb6]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-22T18:29:30.512Z"}
{"level":"debug","message":"Executing query [m8kjmu4wz0sxygi0i1c]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-22T18:29:30.512Z"}
{"level":"debug","message":"Executing query [m8kjmu4z3mx48qlowii]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1014]","timestamp":"2025-03-22T18:29:30.515Z"}
{"level":"debug","message":"Executing query [m8kjmu51ruo9gtq8vdr]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T18:29:30.517Z"}
{"level":"debug","message":"Executing query [m8kjmu52rnpmhc8v23a]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:29:30.518Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:29:30.519Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:30.613Z"}
{"level":"debug","message":"Executing query [m8kjmu7rv8q1zwdr8th]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:29:30.615Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:29:30.626Z"}
{"level":"debug","message":"Executing query [m8kjmu84alwsusb78we]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T18:29:30.628Z"}
{"level":"debug","message":"Executing query [m8kjmu86kf9dcr6aiu]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742668170614\"]","timestamp":"2025-03-22T18:29:30.630Z"}
{"level":"debug","message":"Executing query [m8kjmu88nw4dydlhw3]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742668170614\",\"TEST-OFI-QUIMICA-1742668170614\",5761,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T18:29:30.632Z"}
{"level":"debug","message":"Executing query [m8kjmu8czf7rdd921o9]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-22T18:29:30.636Z"}
{"level":"debug","message":"Executing query [m8kjmu8fd46ht7n011]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742668170614\"]","timestamp":"2025-03-22T18:29:30.639Z"}
{"level":"debug","message":"Executing query [m8kjmu8gbrjbvy3ga6f]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",10]","timestamp":"2025-03-22T18:29:30.640Z"}
{"level":"debug","message":"Executing query [m8kjmu8is4kd1ujjgzq]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-22T18:29:30.642Z"}
{"level":"debug","message":"Executing query [m8kjmu8kaczwzh1spig]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-22T18:29:30.644Z"}
{"level":"debug","message":"Executing query [m8kjmu8nomzzzmdflb]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-22T18:29:30.647Z"}
{"level":"debug","message":"Executing query [m8kjmu8omho9m9kvmtg]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-22T18:29:30.648Z"}
{"level":"debug","message":"Executing query [m8kjmu8rrszvdk335ad]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[10]","timestamp":"2025-03-22T18:29:30.651Z"}
{"level":"debug","message":"Executing query [m8kjmu8t0f4lzd6ubv3i]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:29:30.653Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:29:30.654Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:30.747Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:29:30.759Z"}
{"level":"debug","message":"Executing query [m8kjmubusl21k7j5pz]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T18:29:30.762Z"}
{"level":"debug","message":"Executing query [m8kjmubw2aap7z0nr57]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T18:29:30.764Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8kjmubw2aap7z0nr57]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T18:29:30.767Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:29:30.769Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:29:30.863Z"}
{"level":"debug","message":"Executing query [m8kjmueqpyee7m6ayvi]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:29:30.866Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:29:30.877Z"}
{"level":"debug","message":"Executing query [m8kjmuf3a4wvexq89ua]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T18:29:30.879Z"}
{"level":"debug","message":"Executing query [m8kjmuf5vl45d6n4oai]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T18:29:30.881Z"}
{"level":"debug","message":"Executing query [m8kjmuf5zl8zi7ki5v9]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T18:29:30.881Z"}
{"level":"debug","message":"Executing query [m8kjmuf64qxuijswnaj]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T18:29:30.882Z"}
{"level":"info","message":"Usando Mesa ID: 20, Áreas ID: 888/999, Usuarios ID: 1/10, Documento ID: 19","timestamp":"2025-03-22T18:29:30.883Z"}
{"level":"debug","message":"Executing query [m8kjmuf8t59wkjf8ned]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[19,888,999]","timestamp":"2025-03-22T18:29:30.884Z"}
{"level":"debug","message":"Executing query [m8kjmuf9imtiu84rjs]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[19,20,888,999,1,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-22T18:29:30.885Z"}
{"level":"debug","message":"Executing query [m8kjmufgfkjil856zps]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[2]","timestamp":"2025-03-22T18:29:30.892Z"}
{"level":"debug","message":"Executing query [m8kjmufi9xi0wjbxpiv]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-22 18:29:30\",10,2]","timestamp":"2025-03-22T18:29:30.894Z"}
{"level":"debug","message":"Executing query [m8kjmuflqih4i0hwf6a]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[2]","timestamp":"2025-03-22T18:29:30.897Z"}
{"level":"debug","message":"Executing query [m8kjmufmvv1povss7ii]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T18:29:30.898Z"}
{"level":"debug","message":"Executing query [m8kjmufnyx98ap9n66]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T18:29:30.900Z"}
{"level":"debug","message":"Executing query [m8kjmufpv4ct0f35tf]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[2]","timestamp":"2025-03-22T18:29:30.901Z"}
{"level":"debug","message":"Executing query [m8kjmufv2evwufeetpq]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[2]","timestamp":"2025-03-22T18:29:30.907Z"}
{"level":"debug","message":"Executing query [m8kjmufx9wkv4owox8o]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[19]","timestamp":"2025-03-22T18:29:30.909Z"}
{"level":"debug","message":"Executing query [m8kjmufz854i5lu42sw]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:29:30.911Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T18:29:30.987Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T18:29:31.078Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T18:29:31.178Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T18:29:31.179Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T18:29:31.180Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T18:29:31.180Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T18:29:31.181Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T18:29:31.181Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:19.838Z"}
{"duration":"20ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T18:53:19.991Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:53:19.995Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T18:53:19.999Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:53:20.009Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:20.549Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:53:20.616Z"}
{"level":"debug","message":"Executing query [m8kkhhmakcpdplod4t]: SELECT IDRol FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T18:53:20.626Z"}
{"level":"debug","message":"Executing query [m8kkhhmdcco4vdf8te6]: SELECT Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T18:53:20.629Z"}
{"level":"debug","message":"Executing query [m8kkhhmnylm5l8nmx3m]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T18:53:20.639Z"}
{"level":"debug","message":"Executing query [m8kkhhn1vfdn9n4133p]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T18:53:20.653Z"}
{"level":"debug","message":"Executing query [m8kkhhn3jvdo0oo6989]: SELECT IDRol, NombreRol, Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T18:53:20.655Z"}
{"level":"debug","message":"Executing query [m8kkhhn4jlxs9d12ww8]: SELECT \n        pc.IDPermisoContextual,\n        pc.IDRol,\n        pc.IDArea,\n        pc.TipoRecurso,\n        pc.ReglaContexto,\n        pc.Activo\n      FROM \n        PermisoContextual pc\n      WHERE \n        pc.IDRol = ? \n        AND pc.IDArea = ?\n        AND pc.Activo = true","params":"[888,888]","timestamp":"2025-03-22T18:53:20.656Z"}
{"level":"debug","message":"Executing query [m8kkhhne0uswfbe2ck1d]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[99999]","timestamp":"2025-03-22T18:53:20.666Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:53:20.670Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:21.270Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:53:21.315Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T18:53:21.317Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:21.507Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T18:53:21.522Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:53:21.555Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T18:53:21.565Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:53:21.591Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:21.689Z"}
{"level":"debug","message":"Executing query [m8kkhifwic1gac2vr2]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:53:21.692Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:53:21.703Z"}
{"level":"debug","message":"Executing query [m8kkhig90h6sxx435hpc]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T18:53:21.705Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T18:53:21.706Z"}
{"level":"debug","message":"Executing query [m8kkhigbshy9x7hekmr]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T18:53:21.707Z"}
{"level":"debug","message":"Executing query [m8kkhigfwqry2rb2nb]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[25,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T18:53:21.711Z\",\"ACTIVO\"]","timestamp":"2025-03-22T18:53:21.711Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 27","timestamp":"2025-03-22T18:53:21.714Z"}
{"level":"debug","message":"Executing query [m8kkhigjmrha5rk6ia]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[27,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T18:53:21.715Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kkhigjmrha5rk6ia]","params":"[27,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T18:53:21.719Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T18:53:21.720Z"}
{"level":"debug","message":"Executing query [m8kkhigo53qm28ov7n7]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[27]","timestamp":"2025-03-22T18:53:21.720Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kkhigo53qm28ov7n7]","params":"[27]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T18:53:21.722Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T18:53:21.723Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T18:53:21.723Z"}
{"level":"debug","message":"Executing query [m8kkhigssagnkq3odt]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[27,1,\"RESTAURAR\"]","timestamp":"2025-03-22T18:53:21.724Z"}
{"level":"debug","message":"Executing query [m8kkhigxrhrkelb25ge]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[27]","timestamp":"2025-03-22T18:53:21.729Z"}
{"level":"debug","message":"Executing query [m8kkhigz5kxwcv45ke8]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[27,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T18:53:21.731Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kkhigz5kxwcv45ke8]","params":"[27,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T18:53:21.735Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T18:53:21.736Z"}
{"level":"debug","message":"Executing query [m8kkhih4j4t2j84ziw8]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[27]","timestamp":"2025-03-22T18:53:21.736Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kkhih4j4t2j84ziw8]","params":"[27]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T18:53:21.738Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T18:53:21.738Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T18:53:21.739Z"}
{"level":"debug","message":"Executing query [m8kkhih7mmkypkbla9]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[25,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T18:53:21.739Z\",\"ACTIVO\"]","timestamp":"2025-03-22T18:53:21.739Z"}
{"level":"debug","message":"Executing query [m8kkhihbflyhvwwrzfq]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T18:53:21.743Z"}
{"level":"debug","message":"Executing query [m8kkhihd7y6c3rwf2br]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",28,\"ELIMINAR\"]","timestamp":"2025-03-22T18:53:21.745Z"}
{"level":"debug","message":"Executing query [m8kkhihfvd4ekrnutlb]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[28]","timestamp":"2025-03-22T18:53:21.747Z"}
{"level":"debug","message":"Executing query [m8kkhihji1lb0abmj]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T18:53:21.751Z"}
{"level":"debug","message":"Executing query [m8kkhihnvt4976x848m]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[25]","timestamp":"2025-03-22T18:53:21.755Z"}
{"level":"debug","message":"Executing query [m8kkhihq9l433bdj3mp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:53:21.758Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:53:21.759Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:22.022Z"}
{"level":"debug","message":"Executing query [m8kkhip5vn0mwm86uuf]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:53:22.025Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:53:22.033Z"}
{"level":"debug","message":"Executing query [m8kkhipfa6uqdzdp4kq]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T18:53:22.035Z"}
{"level":"debug","message":"Executing query [m8kkhipgygnnz6jcbcn]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T18:53:22.036Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T18:53:22.037Z"}
{"level":"debug","message":"Executing query [m8kkhipht4uzn02mzof]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T18:53:22.037Z"}
{"level":"debug","message":"Executing query [m8kkhipi7yi9sqlzzz]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T18:53:22.038Z"}
{"level":"debug","message":"Executing query [m8kkhipjxzh8ljq3e79]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T18:53:22.039Z"}
{"level":"debug","message":"Executing query [m8kkhipofth1yl1pnwr]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[26]","timestamp":"2025-03-22T18:53:22.044Z"}
{"level":"debug","message":"Executing query [m8kkhipr24msj0xaiaz]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[26]","timestamp":"2025-03-22T18:53:22.047Z"}
{"level":"debug","message":"Executing query [m8kkhipum7rt0z3tzli]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",26]","timestamp":"2025-03-22T18:53:22.050Z"}
{"level":"debug","message":"Executing query [m8kkhipxk5fyf9lte4l]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[26]","timestamp":"2025-03-22T18:53:22.053Z"}
{"level":"debug","message":"Executing query [m8kkhipy435037vy0cf]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[26]","timestamp":"2025-03-22T18:53:22.054Z"}
{"level":"debug","message":"Executing query [m8kkhiq111a6tb1vaia]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[26]","timestamp":"2025-03-22T18:53:22.057Z"}
{"level":"debug","message":"Executing query [m8kkhiq26t1t8a1hmj8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:53:22.058Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:53:22.059Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:22.154Z"}
{"level":"debug","message":"Executing query [m8kkhistlttgcswdeds]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:53:22.157Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:53:22.168Z"}
{"level":"debug","message":"Executing query [m8kkhit6h4278nh103c]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T18:53:22.170Z"}
{"level":"debug","message":"Executing query [m8kkhit9x867ho2nuz]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742669602156\"]","timestamp":"2025-03-22T18:53:22.173Z"}
{"level":"debug","message":"Executing query [m8kkhita98bp4ukd1zm]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742669602156\",\"TEST-OFICIO-1742669602156\",2620,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T18:53:22.174Z"}
{"level":"debug","message":"Executing query [m8kkhitflm88ee9gfam]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-22T18:53:22.179Z"}
{"level":"debug","message":"Executing query [m8kkhitkzvjyqdag0gb]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742669602156\"]","timestamp":"2025-03-22T18:53:22.184Z"}
{"level":"debug","message":"Executing query [m8kkhitmiey6mp8i1ih]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",21]","timestamp":"2025-03-22T18:53:22.186Z"}
{"level":"debug","message":"Executing query [m8kkhitq7qaffxm39dx]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-22T18:53:22.190Z"}
{"level":"debug","message":"Executing query [m8kkhitt070wt6u3g0i]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-22T18:53:22.193Z"}
{"level":"debug","message":"Executing query [m8kkhitxxdg3k6a527d]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-22T18:53:22.197Z"}
{"level":"debug","message":"Executing query [m8kkhiu5b0zz15db40k]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-22T18:53:22.205Z"}
{"level":"debug","message":"Executing query [m8kkhiu9gylbw41k8id]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[21]","timestamp":"2025-03-22T18:53:22.209Z"}
{"level":"debug","message":"Executing query [m8kkhiubzsu2jhljvod]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742669602211\",\"TEST-SP-OFICIO-1742669602211\",5789,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T18:53:22.211Z"}
{"level":"debug","message":"Executing query [m8kkhiufggshq3fklp]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742669602211\"]","timestamp":"2025-03-22T18:53:22.215Z"}
{"level":"debug","message":"Executing query [m8kkhiuhpmem5l6zbj]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742669602211\"]","timestamp":"2025-03-22T18:53:22.217Z"}
{"level":"debug","message":"Executing query [m8kkhiul5o39b4avdfs]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:53:22.221Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:53:22.222Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:22.323Z"}
{"level":"debug","message":"Executing query [m8kkhixihe9wd496pl]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:53:22.326Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:53:22.337Z"}
{"level":"debug","message":"Executing query [m8kkhixu690orp9diid]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T18:53:22.338Z"}
{"level":"debug","message":"Executing query [m8kkhixwqwy1im45wae]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742669602325\"]","timestamp":"2025-03-22T18:53:22.340Z"}
{"level":"debug","message":"Executing query [m8kkhixxe3xf8vkotof]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742669602325\",\"TEST-OFI-FORENSE-1742669602325\",807,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742669602325\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T18:53:22.341Z"}
{"level":"debug","message":"Executing query [m8kkhiy1gyag7foyloa]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-22T18:53:22.345Z"}
{"level":"debug","message":"Executing query [m8kkhiy3frfkima49ob]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742669602325\"]","timestamp":"2025-03-22T18:53:22.347Z"}
{"level":"debug","message":"Executing query [m8kkhiy5omd85qgnns]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",21]","timestamp":"2025-03-22T18:53:22.349Z"}
{"level":"debug","message":"Executing query [m8kkhiy7zkp8gqr8q1a]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-22T18:53:22.351Z"}
{"level":"debug","message":"Executing query [m8kkhiy9jrhbrlyuotq]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-22T18:53:22.353Z"}
{"level":"debug","message":"Executing query [m8kkhiycm0eya4chbrl]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-22T18:53:22.356Z"}
{"level":"debug","message":"Executing query [m8kkhiyd4rw3apq7r1l]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-22T18:53:22.357Z"}
{"level":"debug","message":"Executing query [m8kkhiygca72jxzbr7]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[21]","timestamp":"2025-03-22T18:53:22.360Z"}
{"level":"debug","message":"Executing query [m8kkhiyi0crwtgewyq3]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742669602362\",\"TEST-SP-OFI-FORENSE-1742669602362\",9271,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T18:53:22.362Z"}
{"level":"debug","message":"Executing query [m8kkhiyl191bm1ajoxm]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742669602362\"]","timestamp":"2025-03-22T18:53:22.365Z"}
{"level":"debug","message":"Executing query [m8kkhiynntttn0vlzsg]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742669602362\"]","timestamp":"2025-03-22T18:53:22.367Z"}
{"level":"debug","message":"Executing query [m8kkhiyqo7cmhl8vcyb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:53:22.370Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:53:22.371Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:22.468Z"}
{"level":"debug","message":"Executing query [m8kkhj1j2niqattx4ey]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:53:22.471Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:53:22.480Z"}
{"level":"debug","message":"Executing query [m8kkhj1ufu8p3e68gn7]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742669602470\"]","timestamp":"2025-03-22T18:53:22.482Z"}
{"level":"debug","message":"Executing query [m8kkhj1vpc502elt51b]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742669602470\",true]","timestamp":"2025-03-22T18:53:22.483Z"}
{"level":"debug","message":"Executing query [m8kkhj1z29hj2swy3tr]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[26]","timestamp":"2025-03-22T18:53:22.487Z"}
{"level":"debug","message":"Executing query [m8kkhj216r780braqad]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742669602470\"]","timestamp":"2025-03-22T18:53:22.489Z"}
{"level":"debug","message":"Executing query [m8kkhj22un4hgp3e2r9]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",26]","timestamp":"2025-03-22T18:53:22.490Z"}
{"level":"debug","message":"Executing query [m8kkhj26o000l4686nm]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[26]","timestamp":"2025-03-22T18:53:22.494Z"}
{"level":"debug","message":"Executing query [m8kkhj27s9h4f3wgxg]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[26]","timestamp":"2025-03-22T18:53:22.495Z"}
{"level":"debug","message":"Executing query [m8kkhj2b9gwycnk8495]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[26]","timestamp":"2025-03-22T18:53:22.499Z"}
{"level":"debug","message":"Executing query [m8kkhj2d3gvcubq401s]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[26]","timestamp":"2025-03-22T18:53:22.501Z"}
{"level":"debug","message":"Executing query [m8kkhj2eb5fy0llukx4]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[26]","timestamp":"2025-03-22T18:53:22.502Z"}
{"level":"debug","message":"Executing query [m8kkhj2hdwwtu6vbzwl]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[26]","timestamp":"2025-03-22T18:53:22.505Z"}
{"level":"debug","message":"Executing query [m8kkhj2ixgn3lxh9qea]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T18:53:22.506Z"}
{"level":"debug","message":"Executing query [m8kkhj2j04gktywtn4i5]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:53:22.507Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:53:22.508Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:22.604Z"}
{"level":"debug","message":"Executing query [m8kkhj5afz66ofx8htg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:53:22.606Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:53:22.615Z"}
{"level":"debug","message":"Executing query [m8kkhj5knu22at239]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T18:53:22.616Z"}
{"level":"debug","message":"Executing query [m8kkhj5la30pylodlfh]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T18:53:22.618Z"}
{"level":"debug","message":"Executing query [m8kkhj5m6hvht8ppoxh]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T18:53:22.618Z"}
{"level":"debug","message":"Executing query [m8kkhj5npgpmk0nrs1a]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T18:53:22.619Z"}
{"level":"info","message":"Usando Mesa ID: 20, Áreas ID: 888/999, Usuarios ID: 1/10, Documento ID: 21","timestamp":"2025-03-22T18:53:22.620Z"}
{"level":"debug","message":"Executing query [m8kkhj5puegqv2qx3dq]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[21,888,999]","timestamp":"2025-03-22T18:53:22.621Z"}
{"level":"debug","message":"Executing query [m8kkhj5q9k019tadajg]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[21,20,888,999,1,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-22T18:53:22.622Z"}
{"level":"debug","message":"Executing query [m8kkhj5vq10ba25n8jd]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[3]","timestamp":"2025-03-22T18:53:22.627Z"}
{"level":"debug","message":"Executing query [m8kkhj5xlfczzwuold]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-22 18:53:22\",10,3]","timestamp":"2025-03-22T18:53:22.629Z"}
{"level":"debug","message":"Executing query [m8kkhj60sngwb7w2hid]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[3]","timestamp":"2025-03-22T18:53:22.632Z"}
{"level":"debug","message":"Executing query [m8kkhj61knxy6ysuhwo]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T18:53:22.633Z"}
{"level":"debug","message":"Executing query [m8kkhj63xg11pd65um]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T18:53:22.635Z"}
{"level":"debug","message":"Executing query [m8kkhj64cfzhgpjx7qh]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[3]","timestamp":"2025-03-22T18:53:22.636Z"}
{"level":"debug","message":"Executing query [m8kkhj67iq0j2bf1ou]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[3]","timestamp":"2025-03-22T18:53:22.639Z"}
{"level":"debug","message":"Executing query [m8kkhj69uddwubo3q68]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[21]","timestamp":"2025-03-22T18:53:22.641Z"}
{"level":"debug","message":"Executing query [m8kkhj6cub01ngmjenc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:53:22.644Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:22.740Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:22.746Z"}
{"level":"debug","message":"Executing query [m8kkhj977vp7nbr7lk2]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:53:22.747Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:53:22.758Z"}
{"level":"debug","message":"Executing query [m8kkhj9kbnb1q3zc0c]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T18:53:22.760Z"}
{"level":"debug","message":"Executing query [m8kkhj9l83s9diuprqj]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T18:53:22.761Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T18:53:22.762Z"}
{"level":"debug","message":"Executing query [m8kkhj9m7dbub9u74a7]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T18:53:22.762Z"}
{"level":"debug","message":"Executing query [m8kkhj9niw89tj2aan]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T18:53:22.763Z"}
{"level":"debug","message":"Executing query [m8kkhj9o57ahoqcn4w5]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T18:53:22.764Z"}
{"level":"debug","message":"Executing query [m8kkhj9pjjlvbboudyk]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T18:53:22.765Z"}
{"level":"debug","message":"Executing query [m8kkhj9s56ixk41yptb]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[13]","timestamp":"2025-03-22T18:53:22.769Z"}
{"level":"debug","message":"Executing query [m8kkhj9vkm89l2w9j2]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T18:53:22.771Z"}
{"level":"debug","message":"Executing query [m8kkhj9xlaeyptsspfg]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",13]","timestamp":"2025-03-22T18:53:22.773Z"}
{"level":"debug","message":"Executing query [m8kkhj9zn9kef4v59ph]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[13]","timestamp":"2025-03-22T18:53:22.775Z"}
{"level":"debug","message":"Executing query [m8kkhja169zey8btjnd]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[13]","timestamp":"2025-03-22T18:53:22.777Z"}
{"level":"debug","message":"Executing query [m8kkhja476ij0vawzau]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[13]","timestamp":"2025-03-22T18:53:22.780Z"}
{"level":"debug","message":"Executing query [m8kkhja55p9fhajfern]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:53:22.781Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:53:22.782Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:22.877Z"}
{"level":"debug","message":"Executing query [m8kkhjcxwkp4chdnft]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:53:22.881Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:53:22.890Z"}
{"level":"debug","message":"Executing query [m8kkhjd7q2z5nnoid]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T18:53:22.891Z"}
{"level":"debug","message":"Executing query [m8kkhjd98mh2pg4dcdi]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742669602880\"]","timestamp":"2025-03-22T18:53:22.893Z"}
{"level":"debug","message":"Executing query [m8kkhjdafez2eji86b9]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742669602880\",\"TEST-OFI-QUIMICA-1742669602880\",9794,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T18:53:22.894Z"}
{"level":"debug","message":"Executing query [m8kkhjdfwk3n1bj74lg]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-22T18:53:22.899Z"}
{"level":"debug","message":"Executing query [m8kkhjdhet9d24fi4qf]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742669602880\"]","timestamp":"2025-03-22T18:53:22.901Z"}
{"level":"debug","message":"Executing query [m8kkhjdi9dqc14prqwh]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",11]","timestamp":"2025-03-22T18:53:22.902Z"}
{"level":"debug","message":"Executing query [m8kkhjdlxe2xgz7x1gl]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-22T18:53:22.905Z"}
{"level":"debug","message":"Executing query [m8kkhjdnbuu6bg88fk5]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-22T18:53:22.907Z"}
{"level":"debug","message":"Executing query [m8kkhjdpyfskpafnlxk]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-22T18:53:22.909Z"}
{"level":"debug","message":"Executing query [m8kkhjdr6fwkoxeo2ur]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-22T18:53:22.911Z"}
{"level":"debug","message":"Executing query [m8kkhjdtjc3kkk0gfw]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[11]","timestamp":"2025-03-22T18:53:22.913Z"}
{"level":"debug","message":"Executing query [m8kkhjdu2docdjx0x2s]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:53:22.914Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:53:22.915Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:23.008Z"}
{"level":"debug","message":"Executing query [m8kkhjgjk3peior6dt]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T18:53:23.011Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:53:23.023Z"}
{"level":"debug","message":"Executing query [m8kkhjgwre96uxu84f7]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742669603010\"]","timestamp":"2025-03-22T18:53:23.024Z"}
{"level":"debug","message":"Executing query [m8kkhjgyxteanfsswmi]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742669603010\"]","timestamp":"2025-03-22T18:53:23.026Z"}
{"level":"debug","message":"Executing query [m8kkhjgzic9uvnbfdne]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742669603010\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T18:53:23.027Z"}
{"level":"debug","message":"Executing query [m8kkhjh3aw0ra055d1n]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-22T18:53:23.031Z"}
{"level":"debug","message":"Executing query [m8kkhjh4vcgrivj50v]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742669603010\"]","timestamp":"2025-03-22T18:53:23.033Z"}
{"level":"debug","message":"Executing query [m8kkhjh6uwoahg9oyg]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1015]","timestamp":"2025-03-22T18:53:23.034Z"}
{"level":"debug","message":"Executing query [m8kkhjh8dstn3nb73ed]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-22T18:53:23.036Z"}
{"level":"debug","message":"Executing query [m8kkhjhaggslnxefn3u]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-22T18:53:23.038Z"}
{"level":"debug","message":"Executing query [m8kkhjhclkgi2yylq6]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-22T18:53:23.040Z"}
{"level":"debug","message":"Executing query [m8kkhjhd8n100223lep]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-22T18:53:23.041Z"}
{"level":"debug","message":"Executing query [m8kkhjhe49ln2h6tqu]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-22T18:53:23.042Z"}
{"level":"debug","message":"Executing query [m8kkhjhg839b5tqdta]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1015]","timestamp":"2025-03-22T18:53:23.044Z"}
{"level":"debug","message":"Executing query [m8kkhjhib5i9ryk8bnp]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T18:53:23.046Z"}
{"level":"debug","message":"Executing query [m8kkhjhjytzghijs7sd]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T18:53:23.047Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:53:23.048Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T18:53:23.138Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T18:53:23.151Z"}
{"level":"debug","message":"Executing query [m8kkhjkisgdh6aemjj]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T18:53:23.154Z"}
{"level":"debug","message":"Executing query [m8kkhjkkoad4dcnt28d]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T18:53:23.156Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8kkhjkkoad4dcnt28d]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T18:53:23.160Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T18:53:23.162Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T18:53:23.253Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T18:53:23.354Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T18:53:23.455Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T18:53:23.455Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T18:53:23.456Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T18:53:23.456Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T18:53:23.457Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T18:53:23.457Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:02.696Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:00:02.845Z"}
{"duration":"21ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T19:00:02.849Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T19:00:02.855Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:00:02.865Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:03.606Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:04.351Z"}
{"fatal":true,"level":"error","message":"Error al conectar a la base de datos: Encoding not recognized: 'cesu8' (searched as: 'cesu8')","stack":"Error: Encoding not recognized: 'cesu8' (searched as: 'cesu8')\n    at Object.getCodec (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:104:23)\n    at Object.getDecoder (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:125:23)\n    at Object.<anonymous>.exports.decode (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\parsers\\string.js:20:23)\n    at Packet.readNullTerminatedString (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\packet.js:414:25)\n    at Function.fromPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\handshake.js:62:33)\n    at ClientHandshake.handshakeInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\client_handshake.js:112:40)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:45:22)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T19:00:04.399Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:00:04.410Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T19:00:04.412Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:04.601Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T19:00:04.614Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:00:04.651Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T19:00:04.663Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:00:04.691Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:04.960Z"}
{"level":"debug","message":"Executing query [m8kkq5lvp4jy7ui7hwr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:00:04.963Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:00:04.975Z"}
{"level":"debug","message":"Executing query [m8kkq5m9bg6idqs2rjd]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T19:00:04.978Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T19:00:04.981Z"}
{"level":"debug","message":"Executing query [m8kkq5mee82xfg9uaxt]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T19:00:04.982Z"}
{"level":"debug","message":"Executing query [m8kkq5mknrim20hjfk]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[27,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T19:00:04.988Z\",\"ACTIVO\"]","timestamp":"2025-03-22T19:00:04.988Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 29","timestamp":"2025-03-22T19:00:04.992Z"}
{"level":"debug","message":"Executing query [m8kkq5mplkzblnmhp7e]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[29,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T19:00:04.993Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kkq5mplkzblnmhp7e]","params":"[29,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T19:00:05.000Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T19:00:05.001Z"}
{"level":"debug","message":"Executing query [m8kkq5myl0wewsksfs]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[29]","timestamp":"2025-03-22T19:00:05.002Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kkq5myl0wewsksfs]","params":"[29]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T19:00:05.005Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T19:00:05.006Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T19:00:05.007Z"}
{"level":"debug","message":"Executing query [m8kkq5n48fjsr0sdziw]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[29,1,\"RESTAURAR\"]","timestamp":"2025-03-22T19:00:05.009Z"}
{"level":"debug","message":"Executing query [m8kkq5nb4hvmym89ds5]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[29]","timestamp":"2025-03-22T19:00:05.015Z"}
{"level":"debug","message":"Executing query [m8kkq5nelqok0mrj1ap]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[29,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T19:00:05.018Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kkq5nelqok0mrj1ap]","params":"[29,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T19:00:05.022Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T19:00:05.022Z"}
{"level":"debug","message":"Executing query [m8kkq5nj2vv4c2ybpp7]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[29]","timestamp":"2025-03-22T19:00:05.023Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kkq5nj2vv4c2ybpp7]","params":"[29]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T19:00:05.025Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T19:00:05.025Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T19:00:05.026Z"}
{"level":"debug","message":"Executing query [m8kkq5nm1y8us7mc5se]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[27,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T19:00:05.026Z\",\"ACTIVO\"]","timestamp":"2025-03-22T19:00:05.026Z"}
{"level":"debug","message":"Executing query [m8kkq5np3612oy8onw]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T19:00:05.029Z"}
{"level":"debug","message":"Executing query [m8kkq5nryl61a763pfs]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",30,\"ELIMINAR\"]","timestamp":"2025-03-22T19:00:05.031Z"}
{"level":"debug","message":"Executing query [m8kkq5nuse1rzpfsbn]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[30]","timestamp":"2025-03-22T19:00:05.034Z"}
{"level":"debug","message":"Executing query [m8kkq5nx5wcg0bfwj2m]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T19:00:05.037Z"}
{"level":"debug","message":"Executing query [m8kkq5o0qodthrmkpg]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[27]","timestamp":"2025-03-22T19:00:05.040Z"}
{"level":"debug","message":"Executing query [m8kkq5o3bhjifv62e3l]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:00:05.043Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:00:05.044Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:05.149Z"}
{"level":"debug","message":"Executing query [m8kkq5r4giptzguf1lf]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:00:05.152Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:00:05.163Z"}
{"level":"debug","message":"Executing query [m8kkq5rgpdfinfi4d6p]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T19:00:05.164Z"}
{"level":"debug","message":"Executing query [m8kkq5rjkvdvzledqgq]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742670005151\"]","timestamp":"2025-03-22T19:00:05.167Z"}
{"level":"debug","message":"Executing query [m8kkq5rkdqne3f1ui]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742670005151\",\"TEST-OFICIO-1742670005151\",5677,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:00:05.168Z"}
{"level":"debug","message":"Executing query [m8kkq5rq0udd6k4050jf]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-22T19:00:05.174Z"}
{"level":"debug","message":"Executing query [m8kkq5rs2t2htuxs5dv]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742670005151\"]","timestamp":"2025-03-22T19:00:05.176Z"}
{"level":"debug","message":"Executing query [m8kkq5ruhmq09xc35kv]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",23]","timestamp":"2025-03-22T19:00:05.178Z"}
{"level":"debug","message":"Executing query [m8kkq5rxkv7anete5m]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-22T19:00:05.181Z"}
{"level":"debug","message":"Executing query [m8kkq5rz7ed8bvuz6ns]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-22T19:00:05.183Z"}
{"level":"debug","message":"Executing query [m8kkq5s28ov7ul4gxns]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-22T19:00:05.186Z"}
{"level":"debug","message":"Executing query [m8kkq5s3uu89f1vvkh9]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-22T19:00:05.187Z"}
{"level":"debug","message":"Executing query [m8kkq5s6toezz5wtxm]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[23]","timestamp":"2025-03-22T19:00:05.190Z"}
{"level":"debug","message":"Executing query [m8kkq5s7hr4qvloywb5]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742670005191\",\"TEST-SP-OFICIO-1742670005191\",5982,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T19:00:05.191Z"}
{"level":"debug","message":"Executing query [m8kkq5sb0ovfjae91ksa]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742670005191\"]","timestamp":"2025-03-22T19:00:05.195Z"}
{"level":"debug","message":"Executing query [m8kkq5scctytwav6lh]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742670005191\"]","timestamp":"2025-03-22T19:00:05.196Z"}
{"level":"debug","message":"Executing query [m8kkq5sfrai8hbamsl]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:00:05.199Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:00:05.200Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:05.299Z"}
{"level":"debug","message":"Executing query [m8kkq5va32iwoy5zw2w]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:00:05.302Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:00:05.311Z"}
{"level":"debug","message":"Executing query [m8kkq5vkzxv8wutvu88]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T19:00:05.312Z"}
{"level":"debug","message":"Executing query [m8kkq5vmp1pkbobxfw]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742670005301\"]","timestamp":"2025-03-22T19:00:05.314Z"}
{"level":"debug","message":"Executing query [m8kkq5vnb55wsmll76]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742670005301\",\"TEST-OFI-FORENSE-1742670005301\",8105,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742670005301\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:00:05.315Z"}
{"level":"debug","message":"Executing query [m8kkq5vtt6sktbzdyq]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-22T19:00:05.321Z"}
{"level":"debug","message":"Executing query [m8kkq5vv7wjv2xrnyxd]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742670005301\"]","timestamp":"2025-03-22T19:00:05.323Z"}
{"level":"debug","message":"Executing query [m8kkq5vzxkdty624qz7]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",23]","timestamp":"2025-03-22T19:00:05.327Z"}
{"level":"debug","message":"Executing query [m8kkq5w13os18vchyzx]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-22T19:00:05.329Z"}
{"level":"debug","message":"Executing query [m8kkq5w3uv6ja6vlbs]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-22T19:00:05.331Z"}
{"level":"debug","message":"Executing query [m8kkq5w6spbdfr778b]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-22T19:00:05.334Z"}
{"level":"debug","message":"Executing query [m8kkq5w8jdvc7yo2tbg]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-22T19:00:05.336Z"}
{"level":"debug","message":"Executing query [m8kkq5wa41ghoufew2o]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[23]","timestamp":"2025-03-22T19:00:05.338Z"}
{"level":"debug","message":"Executing query [m8kkq5wci35cvibrkfo]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742670005340\",\"TEST-SP-OFI-FORENSE-1742670005340\",7536,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T19:00:05.340Z"}
{"level":"debug","message":"Executing query [m8kkq5wgt7knmlfif]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742670005340\"]","timestamp":"2025-03-22T19:00:05.344Z"}
{"level":"debug","message":"Executing query [m8kkq5whq0cjoiedtub]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742670005340\"]","timestamp":"2025-03-22T19:00:05.345Z"}
{"level":"debug","message":"Executing query [m8kkq5wkitldg3yjhla]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:00:05.348Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:00:05.349Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:05.448Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:05.453Z"}
{"level":"debug","message":"Executing query [m8kkq5zjnqdx97dkvq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:00:05.455Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:00:05.465Z"}
{"level":"debug","message":"Executing query [m8kkq5zue7e5amxy6gn]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T19:00:05.466Z"}
{"level":"debug","message":"Executing query [m8kkq5zv2iu0y2zwbtj]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T19:00:05.468Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T19:00:05.469Z"}
{"level":"debug","message":"Executing query [m8kkq5zxxk6ijwpbix]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:00:05.469Z"}
{"level":"debug","message":"Executing query [m8kkq5zy5r1r0mhxpup]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:00:05.470Z"}
{"level":"debug","message":"Executing query [m8kkq5zzsq4mmfavlir]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:00:05.471Z"}
{"level":"debug","message":"Executing query [m8kkq600tg971pkppff]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T19:00:05.472Z"}
{"level":"debug","message":"Executing query [m8kkq604ya2rveb5qeh]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[14]","timestamp":"2025-03-22T19:00:05.476Z"}
{"level":"debug","message":"Executing query [m8kkq6063ui03et330j]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:00:05.478Z"}
{"level":"debug","message":"Executing query [m8kkq608mpsugkqqsbh]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",14]","timestamp":"2025-03-22T19:00:05.480Z"}
{"level":"debug","message":"Executing query [m8kkq60a9aim612ko3j]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[14]","timestamp":"2025-03-22T19:00:05.482Z"}
{"level":"debug","message":"Executing query [m8kkq60cwse884dcc7c]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[14]","timestamp":"2025-03-22T19:00:05.484Z"}
{"level":"debug","message":"Executing query [m8kkq60fhaa7dfucwdi]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[14]","timestamp":"2025-03-22T19:00:05.487Z"}
{"level":"debug","message":"Executing query [m8kkq60h3uuno4g5p93]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:00:05.489Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:00:05.490Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:05.589Z"}
{"level":"debug","message":"Executing query [m8kkq63ci5su85udji]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:00:05.592Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:00:05.604Z"}
{"level":"debug","message":"Executing query [m8kkq63q8uc5zrkmpsg]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742670005591\"]","timestamp":"2025-03-22T19:00:05.606Z"}
{"level":"debug","message":"Executing query [m8kkq63rqo2krkekcg]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742670005591\",true]","timestamp":"2025-03-22T19:00:05.607Z"}
{"level":"debug","message":"Executing query [m8kkq63xlrip41qeldj]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[28]","timestamp":"2025-03-22T19:00:05.613Z"}
{"level":"debug","message":"Executing query [m8kkq63zo8csnlhggcg]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742670005591\"]","timestamp":"2025-03-22T19:00:05.615Z"}
{"level":"debug","message":"Executing query [m8kkq640nt75ile8dk]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",28]","timestamp":"2025-03-22T19:00:05.616Z"}
{"level":"debug","message":"Executing query [m8kkq6438z1juhyr8ug]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[28]","timestamp":"2025-03-22T19:00:05.619Z"}
{"level":"debug","message":"Executing query [m8kkq645yvx9i7xwuo9]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[28]","timestamp":"2025-03-22T19:00:05.621Z"}
{"level":"debug","message":"Executing query [m8kkq64749u9udi4aml]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[28]","timestamp":"2025-03-22T19:00:05.623Z"}
{"level":"debug","message":"Executing query [m8kkq6490d7c2uloqres]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[28]","timestamp":"2025-03-22T19:00:05.625Z"}
{"level":"debug","message":"Executing query [m8kkq64aj3memze86j9]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[28]","timestamp":"2025-03-22T19:00:05.626Z"}
{"level":"debug","message":"Executing query [m8kkq64cc6141psiig9]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[28]","timestamp":"2025-03-22T19:00:05.628Z"}
{"level":"debug","message":"Executing query [m8kkq64dqha7xdv8vsk]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T19:00:05.629Z"}
{"level":"debug","message":"Executing query [m8kkq64fipuauzrakb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:00:05.631Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:00:05.632Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:05.729Z"}
{"level":"debug","message":"Executing query [m8kkq677em1ipyf6w3s]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:00:05.731Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:00:05.741Z"}
{"level":"debug","message":"Executing query [m8kkq67ir1h29bcv32n]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T19:00:05.742Z"}
{"level":"debug","message":"Executing query [m8kkq67lzuxuh17ulyl]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T19:00:05.745Z"}
{"level":"debug","message":"Executing query [m8kkq67m2wk52l4x4hr]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T19:00:05.746Z"}
{"level":"debug","message":"Executing query [m8kkq67n7j9ypfphglq]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T19:00:05.747Z"}
{"level":"info","message":"Usando Mesa ID: 20, Áreas ID: 888/999, Usuarios ID: 1/10, Documento ID: 23","timestamp":"2025-03-22T19:00:05.748Z"}
{"level":"debug","message":"Executing query [m8kkq67pae7827w73u]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[23,888,999]","timestamp":"2025-03-22T19:00:05.749Z"}
{"level":"debug","message":"Executing query [m8kkq67qvl65yhoaag]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[23,20,888,999,1,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-22T19:00:05.750Z"}
{"level":"debug","message":"Executing query [m8kkq67tj1c30dq6nia]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[4]","timestamp":"2025-03-22T19:00:05.753Z"}
{"level":"debug","message":"Executing query [m8kkq67w5gdz47ue6rs]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-22 19:00:05\",10,4]","timestamp":"2025-03-22T19:00:05.756Z"}
{"level":"debug","message":"Executing query [m8kkq67ziokfxv4c1nf]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[4]","timestamp":"2025-03-22T19:00:05.759Z"}
{"level":"debug","message":"Executing query [m8kkq681u6kydn95xo]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T19:00:05.761Z"}
{"level":"debug","message":"Executing query [m8kkq682nw2b6d4wq2]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T19:00:05.762Z"}
{"level":"debug","message":"Executing query [m8kkq6838u97usb91b3]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[4]","timestamp":"2025-03-22T19:00:05.763Z"}
{"level":"debug","message":"Executing query [m8kkq686z1pukp8lonh]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[4]","timestamp":"2025-03-22T19:00:05.766Z"}
{"level":"debug","message":"Executing query [m8kkq688mzmx23vog3]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[23]","timestamp":"2025-03-22T19:00:05.768Z"}
{"level":"debug","message":"Executing query [m8kkq68caxht78qtf0i]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:00:05.772Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:05.867Z"}
{"level":"debug","message":"Executing query [m8kkq6b22dgqzqfl2ok]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:00:05.870Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:00:05.882Z"}
{"level":"debug","message":"Executing query [m8kkq6bfenfd5iq5em]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T19:00:05.883Z"}
{"level":"debug","message":"Executing query [m8kkq6bghw9pcpi2thb]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T19:00:05.884Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T19:00:05.885Z"}
{"level":"debug","message":"Executing query [m8kkq6bi6jgpmoh8qjx]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T19:00:05.886Z"}
{"level":"debug","message":"Executing query [m8kkq6bjj4iv7e36d59]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T19:00:05.887Z"}
{"level":"debug","message":"Executing query [m8kkq6blh584e2e8x1k]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T19:00:05.889Z"}
{"level":"debug","message":"Executing query [m8kkq6boj8goacwp1xc]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[28]","timestamp":"2025-03-22T19:00:05.892Z"}
{"level":"debug","message":"Executing query [m8kkq6bqx7i8j11udwp]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[28]","timestamp":"2025-03-22T19:00:05.894Z"}
{"level":"debug","message":"Executing query [m8kkq6bse5xs6wh5pd]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",28]","timestamp":"2025-03-22T19:00:05.896Z"}
{"level":"debug","message":"Executing query [m8kkq6bvwhsy8172k8]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[28]","timestamp":"2025-03-22T19:00:05.899Z"}
{"level":"debug","message":"Executing query [m8kkq6bxwfptyqf8zim]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[28]","timestamp":"2025-03-22T19:00:05.901Z"}
{"level":"debug","message":"Executing query [m8kkq6bzmbhttdlj6u]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[28]","timestamp":"2025-03-22T19:00:05.903Z"}
{"level":"debug","message":"Executing query [m8kkq6c01fx8zjvfyp5]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:00:05.904Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:00:05.905Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:06.000Z"}
{"level":"debug","message":"Executing query [m8kkq6ernn5r79k2ran]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:00:06.003Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:00:06.012Z"}
{"level":"debug","message":"Executing query [m8kkq6f1wyvxzw508s]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T19:00:06.013Z"}
{"level":"debug","message":"Executing query [m8kkq6f3dxjsk017e]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742670006002\"]","timestamp":"2025-03-22T19:00:06.015Z"}
{"level":"debug","message":"Executing query [m8kkq6f4bx5tagqseqq]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742670006002\",\"TEST-OFI-QUIMICA-1742670006002\",1914,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:00:06.016Z"}
{"level":"debug","message":"Executing query [m8kkq6f8a0cpfcmcx8v]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-22T19:00:06.020Z"}
{"level":"debug","message":"Executing query [m8kkq6fam2agqyqxd3h]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742670006002\"]","timestamp":"2025-03-22T19:00:06.022Z"}
{"level":"debug","message":"Executing query [m8kkq6fc37y7g4kywm]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",12]","timestamp":"2025-03-22T19:00:06.024Z"}
{"level":"debug","message":"Executing query [m8kkq6fewl4ovt5iij]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-22T19:00:06.027Z"}
{"level":"debug","message":"Executing query [m8kkq6fgeq9d0l8mkwl]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-22T19:00:06.028Z"}
{"level":"debug","message":"Executing query [m8kkq6fi9tiwbde43zj]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-22T19:00:06.030Z"}
{"level":"debug","message":"Executing query [m8kkq6fkrmcf8svg19k]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-22T19:00:06.032Z"}
{"level":"debug","message":"Executing query [m8kkq6fot21qwf8tix]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[12]","timestamp":"2025-03-22T19:00:06.036Z"}
{"level":"debug","message":"Executing query [m8kkq6fq7ugtqkso1c]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:00:06.038Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:00:06.039Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:06.139Z"}
{"level":"debug","message":"Executing query [m8kkq6ilxwjdgza1qlp]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:00:06.141Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:00:06.154Z"}
{"level":"debug","message":"Executing query [m8kkq6izqumkku6aunc]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742670006140\"]","timestamp":"2025-03-22T19:00:06.155Z"}
{"level":"debug","message":"Executing query [m8kkq6j0xwc7cpwc9vl]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742670006140\"]","timestamp":"2025-03-22T19:00:06.156Z"}
{"level":"debug","message":"Executing query [m8kkq6j1dagssvdawj]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742670006140\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:00:06.157Z"}
{"level":"debug","message":"Executing query [m8kkq6j723mggu2mk74j]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-22T19:00:06.163Z"}
{"level":"debug","message":"Executing query [m8kkq6j924xwjiy67vk]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742670006140\"]","timestamp":"2025-03-22T19:00:06.165Z"}
{"level":"debug","message":"Executing query [m8kkq6jbsc2aeuwsh3s]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1016]","timestamp":"2025-03-22T19:00:06.167Z"}
{"level":"debug","message":"Executing query [m8kkq6jdk2knv3lv36]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-22T19:00:06.169Z"}
{"level":"debug","message":"Executing query [m8kkq6jft2l6xotgf3]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-22T19:00:06.171Z"}
{"level":"debug","message":"Executing query [m8kkq6jijpaprcxn1]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-22T19:00:06.174Z"}
{"level":"debug","message":"Executing query [m8kkq6jjecj9gnki3e8]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-22T19:00:06.175Z"}
{"level":"debug","message":"Executing query [m8kkq6jkvzdr7r2su3]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-22T19:00:06.176Z"}
{"level":"debug","message":"Executing query [m8kkq6jnz4vksye7si]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1016]","timestamp":"2025-03-22T19:00:06.179Z"}
{"level":"debug","message":"Executing query [m8kkq6joqirgc04jn6f]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T19:00:06.180Z"}
{"level":"debug","message":"Executing query [m8kkq6jpqgojr95o2ml]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:00:06.181Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:00:06.182Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T19:00:06.260Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:00:06.372Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:00:06.386Z"}
{"level":"debug","message":"Executing query [m8kkq6pg30b2gvywyio]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T19:00:06.389Z"}
{"level":"debug","message":"Executing query [m8kkq6pim1n1vq56iod]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T19:00:06.390Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8kkq6pim1n1vq56iod]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T19:00:06.392Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:00:06.394Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T19:00:06.471Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T19:00:06.586Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T19:00:06.587Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T19:00:06.587Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T19:00:06.588Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T19:00:06.589Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T19:00:06.589Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:09.499Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:03:09.647Z"}
{"duration":"20ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T19:03:09.650Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T19:03:09.654Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:03:09.663Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:10.291Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:03:10.339Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T19:03:10.342Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:10.528Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T19:03:10.566Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:03:10.615Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T19:03:10.627Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:03:10.655Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:10.757Z"}
{"level":"debug","message":"Executing query [m8kku4yveygz1evb9ic]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:03:10.759Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:03:10.774Z"}
{"level":"debug","message":"Executing query [m8kku4zdupr8uspiyj8]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T19:03:10.777Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T19:03:10.780Z"}
{"level":"debug","message":"Executing query [m8kku4zgo4pkfu9bz]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T19:03:10.780Z"}
{"level":"debug","message":"Executing query [m8kku4zmrno9ch12n3a]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[29,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T19:03:10.786Z\",\"ACTIVO\"]","timestamp":"2025-03-22T19:03:10.786Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 31","timestamp":"2025-03-22T19:03:10.790Z"}
{"level":"debug","message":"Executing query [m8kku4zrm9uwhk38e99]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[31,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T19:03:10.791Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kku4zrm9uwhk38e99]","params":"[31,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T19:03:10.795Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T19:03:10.796Z"}
{"level":"debug","message":"Executing query [m8kku4zwlr8xn9uygkg]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[31]","timestamp":"2025-03-22T19:03:10.796Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kku4zwlr8xn9uygkg]","params":"[31]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T19:03:10.798Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T19:03:10.799Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T19:03:10.799Z"}
{"level":"debug","message":"Executing query [m8kku500f93tixdifo5]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[31,1,\"RESTAURAR\"]","timestamp":"2025-03-22T19:03:10.800Z"}
{"level":"debug","message":"Executing query [m8kku505nga1ywir92p]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[31]","timestamp":"2025-03-22T19:03:10.805Z"}
{"level":"debug","message":"Executing query [m8kku508nk31ydphr4k]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[31,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T19:03:10.808Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kku508nk31ydphr4k]","params":"[31,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T19:03:10.811Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T19:03:10.812Z"}
{"level":"debug","message":"Executing query [m8kku50c9uw0enyarzd]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[31]","timestamp":"2025-03-22T19:03:10.812Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kku50c9uw0enyarzd]","params":"[31]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T19:03:10.814Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T19:03:10.814Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T19:03:10.815Z"}
{"level":"debug","message":"Executing query [m8kku50f6hodc1jbfkv]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[29,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T19:03:10.815Z\",\"ACTIVO\"]","timestamp":"2025-03-22T19:03:10.815Z"}
{"level":"debug","message":"Executing query [m8kku50iwavqizrdm2b]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T19:03:10.818Z"}
{"level":"debug","message":"Executing query [m8kku50l6ep3soflo3g]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",32,\"ELIMINAR\"]","timestamp":"2025-03-22T19:03:10.821Z"}
{"level":"debug","message":"Executing query [m8kku50n6ynozm0dnqu]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[32]","timestamp":"2025-03-22T19:03:10.823Z"}
{"level":"debug","message":"Executing query [m8kku50rkptoaym2t9]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T19:03:10.827Z"}
{"level":"debug","message":"Executing query [m8kku50u2ew3yb3wblv]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[29]","timestamp":"2025-03-22T19:03:10.830Z"}
{"level":"debug","message":"Executing query [m8kku50xtzj38xqkmdm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:03:10.833Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:03:10.834Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:11.107Z"}
{"level":"debug","message":"Executing query [m8kku58m46exkudymoj]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:03:11.110Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:03:11.119Z"}
{"level":"debug","message":"Executing query [m8kku58xypwhzs66rmd]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T19:03:11.121Z"}
{"level":"debug","message":"Executing query [m8kku58yxhr8hqrxso]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742670191109\"]","timestamp":"2025-03-22T19:03:11.122Z"}
{"level":"debug","message":"Executing query [m8kku58z4tupddi93xy]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742670191109\",\"TEST-OFICIO-1742670191109\",465,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:03:11.123Z"}
{"level":"debug","message":"Executing query [m8kku594y9mpa6h6xg8]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-22T19:03:11.128Z"}
{"level":"debug","message":"Executing query [m8kku597s4hr095miq]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742670191109\"]","timestamp":"2025-03-22T19:03:11.131Z"}
{"level":"debug","message":"Executing query [m8kku599ajsh1to1g9]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",25]","timestamp":"2025-03-22T19:03:11.133Z"}
{"level":"debug","message":"Executing query [m8kku59cyl2t269wx68]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-22T19:03:11.136Z"}
{"level":"debug","message":"Executing query [m8kku59dnmti3229yhq]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-22T19:03:11.137Z"}
{"level":"debug","message":"Executing query [m8kku59gzo43cmgp3c8]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-22T19:03:11.140Z"}
{"level":"debug","message":"Executing query [m8kku59idhf5d0ffwyj]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-22T19:03:11.142Z"}
{"level":"debug","message":"Executing query [m8kku59kn53dk8kl2w]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[25]","timestamp":"2025-03-22T19:03:11.144Z"}
{"level":"debug","message":"Executing query [m8kku59ms7icq2y1noe]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742670191146\",\"TEST-SP-OFICIO-1742670191146\",9527,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T19:03:11.146Z"}
{"level":"debug","message":"Executing query [m8kku59rj28jfual1h]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742670191146\"]","timestamp":"2025-03-22T19:03:11.151Z"}
{"level":"debug","message":"Executing query [m8kku59tkk846izjg8g]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742670191146\"]","timestamp":"2025-03-22T19:03:11.153Z"}
{"level":"debug","message":"Executing query [m8kku59wtryfv41deuc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:03:11.156Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:03:11.157Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:11.257Z"}
{"level":"debug","message":"Executing query [m8kku5cryvk9n6z349]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:03:11.259Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:03:11.268Z"}
{"level":"debug","message":"Executing query [m8kku5d2uqoskpkv5v]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T19:03:11.270Z"}
{"level":"debug","message":"Executing query [m8kku5d49t9v9rx4wd]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742670191259\"]","timestamp":"2025-03-22T19:03:11.272Z"}
{"level":"debug","message":"Executing query [m8kku5d58nw4tuzoq2h]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742670191259\",\"TEST-OFI-FORENSE-1742670191259\",3700,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742670191259\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:03:11.273Z"}
{"level":"debug","message":"Executing query [m8kku5db1mbtjtq2alc]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-22T19:03:11.279Z"}
{"level":"debug","message":"Executing query [m8kku5ddy0bedhc8au]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742670191259\"]","timestamp":"2025-03-22T19:03:11.281Z"}
{"level":"debug","message":"Executing query [m8kku5dfolq2r5x1mx]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",25]","timestamp":"2025-03-22T19:03:11.283Z"}
{"level":"debug","message":"Executing query [m8kku5dixc02te44aco]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-22T19:03:11.286Z"}
{"level":"debug","message":"Executing query [m8kku5dkn32brsduirr]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-22T19:03:11.288Z"}
{"level":"debug","message":"Executing query [m8kku5dn31jtt09c19x]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-22T19:03:11.291Z"}
{"level":"debug","message":"Executing query [m8kku5do0rfs8ykdmeu]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-22T19:03:11.293Z"}
{"level":"debug","message":"Executing query [m8kku5drbhcf8z7btas]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[25]","timestamp":"2025-03-22T19:03:11.295Z"}
{"level":"debug","message":"Executing query [m8kku5dtnld0txixx3]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742670191297\",\"TEST-SP-OFI-FORENSE-1742670191297\",5606,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T19:03:11.297Z"}
{"level":"debug","message":"Executing query [m8kku5dvht9i0ry48yq]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742670191297\"]","timestamp":"2025-03-22T19:03:11.299Z"}
{"level":"debug","message":"Executing query [m8kku5dx4krctuz85sl]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742670191297\"]","timestamp":"2025-03-22T19:03:11.301Z"}
{"level":"debug","message":"Executing query [m8kku5e07wgihbid9oa]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:03:11.304Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:03:11.305Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:11.403Z"}
{"level":"debug","message":"Executing query [m8kku5guau3qwexg0vq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:03:11.406Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:03:11.418Z"}
{"level":"debug","message":"Executing query [m8kku5h7b0fgijprzzn]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742670191405\"]","timestamp":"2025-03-22T19:03:11.419Z"}
{"level":"debug","message":"Executing query [m8kku5h97gj7d5k614]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742670191405\"]","timestamp":"2025-03-22T19:03:11.421Z"}
{"level":"debug","message":"Executing query [m8kku5halsi63xg962]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742670191405\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:03:11.422Z"}
{"level":"debug","message":"Executing query [m8kku5hesl2xil118l]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1017]","timestamp":"2025-03-22T19:03:11.426Z"}
{"level":"debug","message":"Executing query [m8kku5hg2uktsofbfxy]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742670191405\"]","timestamp":"2025-03-22T19:03:11.428Z"}
{"level":"debug","message":"Executing query [m8kku5hhlylo3iplmnd]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1017]","timestamp":"2025-03-22T19:03:11.429Z"}
{"level":"debug","message":"Executing query [m8kku5hj1h66mhynlc3]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1017]","timestamp":"2025-03-22T19:03:11.431Z"}
{"level":"debug","message":"Executing query [m8kku5hluz604ns554]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1017]","timestamp":"2025-03-22T19:03:11.433Z"}
{"level":"debug","message":"Executing query [m8kku5hnri6mea1vg4j]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1017]","timestamp":"2025-03-22T19:03:11.435Z"}
{"level":"debug","message":"Executing query [m8kku5hpeoy2o3tny1m]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1017]","timestamp":"2025-03-22T19:03:11.437Z"}
{"level":"debug","message":"Executing query [m8kku5hqummwue24rse]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1017]","timestamp":"2025-03-22T19:03:11.438Z"}
{"level":"debug","message":"Executing query [m8kku5ht8hj6ptcnoo4]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1017]","timestamp":"2025-03-22T19:03:11.441Z"}
{"level":"debug","message":"Executing query [m8kku5hunaywsno5r79]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T19:03:11.442Z"}
{"level":"debug","message":"Executing query [m8kku5hwei74wsorfr6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:03:11.444Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:03:11.444Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:11.544Z"}
{"level":"debug","message":"Executing query [m8kku5kr94rr8wlbuvr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:03:11.547Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:03:11.556Z"}
{"level":"debug","message":"Executing query [m8kku5l2o9c5fpzvakp]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742670191546\"]","timestamp":"2025-03-22T19:03:11.558Z"}
{"level":"debug","message":"Executing query [m8kku5l3ub0ltezegv]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742670191546\",true]","timestamp":"2025-03-22T19:03:11.559Z"}
{"level":"debug","message":"Executing query [m8kku5l6ig975kz2xu]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[30]","timestamp":"2025-03-22T19:03:11.562Z"}
{"level":"debug","message":"Executing query [m8kku5l8fnsmrg5mzxv]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742670191546\"]","timestamp":"2025-03-22T19:03:11.564Z"}
{"level":"debug","message":"Executing query [m8kku5lap7ixfi0gil7]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",30]","timestamp":"2025-03-22T19:03:11.566Z"}
{"level":"debug","message":"Executing query [m8kku5lde7lhk64183h]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[30]","timestamp":"2025-03-22T19:03:11.570Z"}
{"level":"debug","message":"Executing query [m8kku5lfigvxcm72z9k]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[30]","timestamp":"2025-03-22T19:03:11.571Z"}
{"level":"debug","message":"Executing query [m8kku5li4rfj544vomd]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[30]","timestamp":"2025-03-22T19:03:11.574Z"}
{"level":"debug","message":"Executing query [m8kku5ljy8c10293cv]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[30]","timestamp":"2025-03-22T19:03:11.575Z"}
{"level":"debug","message":"Executing query [m8kku5llyutmn118f1c]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[30]","timestamp":"2025-03-22T19:03:11.577Z"}
{"level":"debug","message":"Executing query [m8kku5lnwwtzhnn0vu]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[30]","timestamp":"2025-03-22T19:03:11.579Z"}
{"level":"debug","message":"Executing query [m8kku5lqzfpsj3wake]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T19:03:11.582Z"}
{"level":"debug","message":"Executing query [m8kku5lrzlx3ei11z2e]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:03:11.583Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:03:11.584Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:11.681Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:11.686Z"}
{"level":"debug","message":"Executing query [m8kku5ooawhwcld4v6v]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:03:11.688Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:03:11.699Z"}
{"level":"debug","message":"Executing query [m8kku5p0t4n3e1494y9]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T19:03:11.700Z"}
{"level":"debug","message":"Executing query [m8kku5p118hmqn6dkbu]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T19:03:11.701Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T19:03:11.702Z"}
{"level":"debug","message":"Executing query [m8kku5p37233lhngjkt]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:03:11.703Z"}
{"level":"debug","message":"Executing query [m8kku5p433cn79srioh]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:03:11.704Z"}
{"level":"debug","message":"Executing query [m8kku5p5ku5b1vsw1nk]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:03:11.705Z"}
{"level":"debug","message":"Executing query [m8kku5p6qb9zb35g8ee]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T19:03:11.706Z"}
{"level":"debug","message":"Executing query [m8kku5pblw0hehw36ie]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[15]","timestamp":"2025-03-22T19:03:11.711Z"}
{"level":"debug","message":"Executing query [m8kku5pec83nsuw4z3s]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:03:11.714Z"}
{"level":"debug","message":"Executing query [m8kku5pgacdj0kqagvn]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",15]","timestamp":"2025-03-22T19:03:11.716Z"}
{"level":"debug","message":"Executing query [m8kku5pi61owg3ebg5q]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[15]","timestamp":"2025-03-22T19:03:11.718Z"}
{"level":"debug","message":"Executing query [m8kku5pkk1qpkpfllim]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[15]","timestamp":"2025-03-22T19:03:11.720Z"}
{"level":"debug","message":"Executing query [m8kku5pn3sbtmhmpgtd]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[15]","timestamp":"2025-03-22T19:03:11.723Z"}
{"level":"debug","message":"Executing query [m8kku5pom5yhelelk5d]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:03:11.724Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:03:11.725Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:11.825Z"}
{"level":"debug","message":"Executing query [m8kku5sj5raeirycqj]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:03:11.827Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:03:11.836Z"}
{"level":"debug","message":"Executing query [m8kku5st918rqya0w5p]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T19:03:11.837Z"}
{"level":"debug","message":"Executing query [m8kku5svc0evbgwuku]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T19:03:11.839Z"}
{"level":"debug","message":"Executing query [m8kku5swj30pcmkomgi]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T19:03:11.840Z"}
{"level":"debug","message":"Executing query [m8kku5sxmbhpcgztj2j]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T19:03:11.841Z"}
{"level":"info","message":"Usando Mesa ID: 20, Áreas ID: 888/999, Usuarios ID: 1/10, Documento ID: 25","timestamp":"2025-03-22T19:03:11.842Z"}
{"level":"debug","message":"Executing query [m8kku5sznaa0a5ku3ci]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[25,888,999]","timestamp":"2025-03-22T19:03:11.843Z"}
{"level":"debug","message":"Executing query [m8kku5t035xdd69v1b]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[25,20,888,999,1,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-22T19:03:11.844Z"}
{"level":"debug","message":"Executing query [m8kku5t5mzjvo3i8ka]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[5]","timestamp":"2025-03-22T19:03:11.849Z"}
{"level":"debug","message":"Executing query [m8kku5t7w0xyr9wtsws]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-22 19:03:11\",10,5]","timestamp":"2025-03-22T19:03:11.851Z"}
{"level":"debug","message":"Executing query [m8kku5tapdkbrvv1mhi]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[5]","timestamp":"2025-03-22T19:03:11.854Z"}
{"level":"debug","message":"Executing query [m8kku5tcmzbf3r0p0ii]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T19:03:11.856Z"}
{"level":"debug","message":"Executing query [m8kku5td0hve51m4seus]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T19:03:11.857Z"}
{"level":"debug","message":"Executing query [m8kku5teuysw8i5gcn]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[5]","timestamp":"2025-03-22T19:03:11.858Z"}
{"level":"debug","message":"Executing query [m8kku5thcaraar56m8]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[5]","timestamp":"2025-03-22T19:03:11.861Z"}
{"level":"debug","message":"Executing query [m8kku5tjunpk6rcihe]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[25]","timestamp":"2025-03-22T19:03:11.863Z"}
{"level":"debug","message":"Executing query [m8kku5tm2xd2j5uuhhw]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:03:11.866Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:11.961Z"}
{"level":"debug","message":"Executing query [m8kku5wb3b40hyfsqef]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:03:11.963Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:03:11.977Z"}
{"level":"debug","message":"Executing query [m8kku5wqe1ki0tufqm]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T19:03:11.978Z"}
{"level":"debug","message":"Executing query [m8kku5ws4f0gptru2jb]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742670191963\"]","timestamp":"2025-03-22T19:03:11.980Z"}
{"level":"debug","message":"Executing query [m8kku5wu28dfknmlbgp]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742670191963\",\"TEST-OFI-QUIMICA-1742670191963\",3852,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:03:11.982Z"}
{"level":"debug","message":"Executing query [m8kku5x0qjhmsu9ore]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-22T19:03:11.988Z"}
{"level":"debug","message":"Executing query [m8kku5x350onfb45dlc]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742670191963\"]","timestamp":"2025-03-22T19:03:11.991Z"}
{"level":"debug","message":"Executing query [m8kku5xc43g3fgdg9pg]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",13]","timestamp":"2025-03-22T19:03:12.000Z"}
{"level":"debug","message":"Executing query [m8kku5xfcjpdjtx3n9q]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-22T19:03:12.003Z"}
{"level":"debug","message":"Executing query [m8kku5xhhk2irbqkylq]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-22T19:03:12.005Z"}
{"level":"debug","message":"Executing query [m8kku5xlb0kayb45clb]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-22T19:03:12.009Z"}
{"level":"debug","message":"Executing query [m8kku5xmjhj8727pboe]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-22T19:03:12.011Z"}
{"level":"debug","message":"Executing query [m8kku5xpd48ezwq4s4]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[13]","timestamp":"2025-03-22T19:03:12.013Z"}
{"level":"debug","message":"Executing query [m8kku5xr3cnbwkihnug]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:03:12.015Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:03:12.015Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:12.115Z"}
{"level":"debug","message":"Executing query [m8kku60ndkute6oab4d]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:03:12.119Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:03:12.128Z"}
{"level":"debug","message":"Executing query [m8kku60y3bqpeea7vx9]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T19:03:12.130Z"}
{"level":"debug","message":"Executing query [m8kku60z75aocol86ta]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T19:03:12.131Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T19:03:12.132Z"}
{"level":"debug","message":"Executing query [m8kku611161paozy841]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T19:03:12.133Z"}
{"level":"debug","message":"Executing query [m8kku61217xjnlonevah]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T19:03:12.134Z"}
{"level":"debug","message":"Executing query [m8kku6135z972t9zlg]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T19:03:12.135Z"}
{"level":"debug","message":"Executing query [m8kku618s56tsh1mhv8]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[30]","timestamp":"2025-03-22T19:03:12.140Z"}
{"level":"debug","message":"Executing query [m8kku61a8rqraxfcflx]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[30]","timestamp":"2025-03-22T19:03:12.142Z"}
{"level":"debug","message":"Executing query [m8kku61ckgkq5jrz9u]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",30]","timestamp":"2025-03-22T19:03:12.144Z"}
{"level":"debug","message":"Executing query [m8kku61fmrh59hg8vhl]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[30]","timestamp":"2025-03-22T19:03:12.147Z"}
{"level":"debug","message":"Executing query [m8kku61gkc3jurj0hrk]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[30]","timestamp":"2025-03-22T19:03:12.149Z"}
{"level":"debug","message":"Executing query [m8kku61jd8ecup1hhn]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[30]","timestamp":"2025-03-22T19:03:12.151Z"}
{"level":"debug","message":"Executing query [m8kku61lbslus6zbjm7]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:03:12.153Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:03:12.154Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:12.251Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:03:12.264Z"}
{"level":"debug","message":"Executing query [m8kku64qh8egkefvk7i]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T19:03:12.266Z"}
{"level":"debug","message":"Executing query [m8kku64s8vs5wq82wvq]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T19:03:12.268Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8kku64s8vs5wq82wvq]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T19:03:12.271Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:03:12.273Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T19:03:12.348Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T19:03:12.349Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T19:03:12.350Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T19:03:12.350Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T19:03:12.351Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T19:03:12.351Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T19:03:12.430Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T19:03:12.525Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:13.041Z"}
{"fatal":true,"level":"error","message":"Error al conectar a la base de datos: Encoding not recognized: 'cesu8' (searched as: 'cesu8')","stack":"Error: Encoding not recognized: 'cesu8' (searched as: 'cesu8')\n    at Object.getCodec (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:104:23)\n    at Object.getDecoder (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:125:23)\n    at Object.<anonymous>.exports.decode (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\parsers\\string.js:20:23)\n    at Packet.readNullTerminatedString (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\packet.js:414:25)\n    at Function.fromPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\handshake.js:62:33)\n    at ClientHandshake.handshakeInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\client_handshake.js:112:40)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:45:22)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T19:03:14.687Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:53.999Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:03:54.028Z"}
{"level":"debug","message":"Executing query [m8kkv2cuq66oww33pxp]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:03:54.031Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:03:54.059Z"}
{"level":"debug","message":"Executing query [m8kkv2dq02i60iu7fh15]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T19:03:54.062Z"}
{"level":"debug","message":"Executing query [m8kkv2dtgziqmn7yyxc]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T19:03:54.065Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T19:03:54.066Z"}
{"level":"debug","message":"Executing query [m8kkv2dvmtjkg06uwy]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:03:54.067Z"}
{"level":"debug","message":"Executing query [m8kkv2dw3vu4cqx65d1]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:03:54.068Z"}
{"level":"debug","message":"Executing query [m8kkv2dz34a2nrgtsda]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:03:54.071Z"}
{"level":"debug","message":"Executing query [m8kkv2e0kdkmlv6wxw]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T19:03:54.072Z"}
{"level":"debug","message":"Executing query [m8kkv2e78w0l4edus2p]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[16]","timestamp":"2025-03-22T19:03:54.079Z"}
{"level":"debug","message":"Executing query [m8kkv2eatvej8tbrvw]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:03:54.082Z"}
{"level":"debug","message":"Executing query [m8kkv2echvqwwekmzc]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",16]","timestamp":"2025-03-22T19:03:54.084Z"}
{"level":"debug","message":"Executing query [m8kkv2efkaqxlnjjomk]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[16]","timestamp":"2025-03-22T19:03:54.087Z"}
{"level":"debug","message":"Executing query [m8kkv2eh6ie6rruydk6]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[16]","timestamp":"2025-03-22T19:03:54.090Z"}
{"level":"debug","message":"Executing query [m8kkv2elrbmhhlza22r]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[16]","timestamp":"2025-03-22T19:03:54.093Z"}
{"level":"debug","message":"Executing query [m8kkv2emlyz6ojkkwn]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:03:54.094Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:03:54.096Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:04:05.657Z"}
{"level":"debug","message":"Executing query [m8kkvbch7hxwk37to4b]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:04:05.681Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:04:05.714Z"}
{"level":"debug","message":"Executing query [m8kkvbdgjtfote53kd]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742670245678\"]","timestamp":"2025-03-22T19:04:05.716Z"}
{"level":"debug","message":"Executing query [m8kkvbdksm103zehcde]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742670245678\"]","timestamp":"2025-03-22T19:04:05.720Z"}
{"level":"debug","message":"Executing query [m8kkvbdmy4qt8djthg9]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742670245678\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:04:05.722Z"}
{"level":"debug","message":"Executing query [m8kkvbdtjmsna6g1kyb]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1018]","timestamp":"2025-03-22T19:04:05.729Z"}
{"level":"debug","message":"Executing query [m8kkvbdw5583mdz9oxq]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742670245678\"]","timestamp":"2025-03-22T19:04:05.732Z"}
{"level":"debug","message":"Executing query [m8kkvbdyzds8e4xto0m]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1018]","timestamp":"2025-03-22T19:04:05.734Z"}
{"level":"debug","message":"Executing query [m8kkvbe1rfsnpm41b]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1018]","timestamp":"2025-03-22T19:04:05.737Z"}
{"level":"debug","message":"Executing query [m8kkvbe6id3s3ncmzpf]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1018]","timestamp":"2025-03-22T19:04:05.742Z"}
{"level":"debug","message":"Executing query [m8kkvbe9kimy90e50ln]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1018]","timestamp":"2025-03-22T19:04:05.745Z"}
{"level":"debug","message":"Executing query [m8kkvbebxb5i8hg3v9d]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1018]","timestamp":"2025-03-22T19:04:05.747Z"}
{"level":"debug","message":"Executing query [m8kkvbed1mop9xn7dzn]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1018]","timestamp":"2025-03-22T19:04:05.749Z"}
{"level":"debug","message":"Executing query [m8kkvbefaa1jfrxjsft]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1018]","timestamp":"2025-03-22T19:04:05.751Z"}
{"level":"debug","message":"Executing query [m8kkvbeht9ujjyxfjqp]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T19:04:05.753Z"}
{"level":"debug","message":"Executing query [m8kkvbej12ptpuro2zx]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:04:05.755Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:04:05.756Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:04:20.720Z"}
{"duration":"19ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T19:04:20.879Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:04:20.882Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T19:04:20.886Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:04:20.895Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:04:33.992Z"}
{"fatal":true,"level":"error","message":"Error al conectar a la base de datos: Encoding not recognized: 'cesu8' (searched as: 'cesu8')","stack":"Error: Encoding not recognized: 'cesu8' (searched as: 'cesu8')\n    at Object.getCodec (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:104:23)\n    at Object.getDecoder (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:125:23)\n    at Object.<anonymous>.exports.decode (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\parsers\\string.js:20:23)\n    at Packet.readNullTerminatedString (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\packet.js:414:25)\n    at Function.fromPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\handshake.js:62:33)\n    at ClientHandshake.handshakeInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\client_handshake.js:112:40)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:45:22)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T19:04:34.344Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:05:18.870Z"}
{"fatal":true,"level":"error","message":"Error al conectar a la base de datos: Encoding not recognized: 'cesu8' (searched as: 'cesu8')","stack":"Error: Encoding not recognized: 'cesu8' (searched as: 'cesu8')\n    at Object.getCodec (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:104:23)\n    at Object.getDecoder (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:125:23)\n    at Object.<anonymous>.exports.decode (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\parsers\\string.js:20:23)\n    at Packet.readNullTerminatedString (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\packet.js:414:25)\n    at Function.fromPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\handshake.js:62:33)\n    at ClientHandshake.handshakeInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\client_handshake.js:112:40)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:45:22)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T19:05:19.610Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:05:59.648Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T19:05:59.717Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:05:59.821Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T19:05:59.838Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:05:59.877Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T19:06:26.619Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T19:08:16.864Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:09:14.296Z"}
{"level":"debug","message":"Executing query [m8kl1xhrdx5k1cgtpkh]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:09:14.319Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:09:14.354Z"}
{"level":"debug","message":"Executing query [m8kl1xis05ezdwf8q9xu]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742670554318\"]","timestamp":"2025-03-22T19:09:14.356Z"}
{"level":"debug","message":"Executing query [m8kl1xiwrdaa59b5gro]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742670554318\"]","timestamp":"2025-03-22T19:09:14.361Z"}
{"level":"debug","message":"Executing query [m8kl1xiygelbmmph21f]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742670554318\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:09:14.362Z"}
{"level":"debug","message":"Executing query [m8kl1xj5l9zda8ooue]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1019]","timestamp":"2025-03-22T19:09:14.369Z"}
{"level":"debug","message":"Executing query [m8kl1xj8rk4lg2cw6yn]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742670554318\"]","timestamp":"2025-03-22T19:09:14.372Z"}
{"level":"debug","message":"Executing query [m8kl1xjappr8s5a5jtp]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1019]","timestamp":"2025-03-22T19:09:14.374Z"}
{"level":"debug","message":"Executing query [m8kl1xjc78bodmfv56d]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1019]","timestamp":"2025-03-22T19:09:14.376Z"}
{"level":"debug","message":"Executing query [m8kl1xjf4itx56yyql]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1019]","timestamp":"2025-03-22T19:09:14.379Z"}
{"level":"debug","message":"Executing query [m8kl1xjjgclqgj8n9l]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1019]","timestamp":"2025-03-22T19:09:14.383Z"}
{"level":"debug","message":"Executing query [m8kl1xjl2u4dbntru7x]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1019]","timestamp":"2025-03-22T19:09:14.385Z"}
{"level":"debug","message":"Executing query [m8kl1xjme7hsvbtqb1l]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1019]","timestamp":"2025-03-22T19:09:14.386Z"}
{"level":"debug","message":"Executing query [m8kl1xjpoe8vbvhu7y]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1019]","timestamp":"2025-03-22T19:09:14.389Z"}
{"level":"debug","message":"Executing query [m8kl1xjqrtyh782bkwg]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T19:09:14.390Z"}
{"level":"debug","message":"Executing query [m8kl1xjsnlfk78t8xke]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:09:14.392Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:09:14.394Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:09:19.288Z"}
{"level":"debug","message":"Executing query [m8kl21cfflrm9so6rgt]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:09:19.312Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:09:19.344Z"}
{"level":"debug","message":"Executing query [m8kl21deeccofks5gyv]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T19:09:19.346Z"}
{"level":"debug","message":"Executing query [m8kl21dgfjtmse8jvi]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T19:09:19.348Z"}
{"level":"debug","message":"Executing query [m8kl21dikwqw1b9dlvj]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T19:09:19.350Z"}
{"level":"debug","message":"Executing query [m8kl21djqb4ohx45t4]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T19:09:19.351Z"}
{"level":"info","message":"Usando Mesa ID: 20, Áreas ID: 888/999, Usuarios ID: 1/10, Documento ID: 27","timestamp":"2025-03-22T19:09:19.352Z"}
{"level":"debug","message":"Executing query [m8kl21dmc5cv6xxzw1]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[27,888,999]","timestamp":"2025-03-22T19:09:19.354Z"}
{"level":"debug","message":"Executing query [m8kl21dnpxnhm28ojw]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[27,20,888,999,1,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-22T19:09:19.355Z"}
{"level":"debug","message":"Executing query [m8kl21durclngd5zjlm]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[6]","timestamp":"2025-03-22T19:09:19.362Z"}
{"level":"debug","message":"Executing query [m8kl21dxr0rmv8da4um]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-22 19:09:19\",10,6]","timestamp":"2025-03-22T19:09:19.365Z"}
{"level":"debug","message":"Executing query [m8kl21e1wow7olszyt]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[6]","timestamp":"2025-03-22T19:09:19.369Z"}
{"level":"debug","message":"Executing query [m8kl21e5z2sh0qwh5]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T19:09:19.373Z"}
{"level":"debug","message":"Executing query [m8kl21e7eihq8fuaad8]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T19:09:19.375Z"}
{"level":"debug","message":"Executing query [m8kl21e83aensb56767]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[6]","timestamp":"2025-03-22T19:09:19.376Z"}
{"level":"debug","message":"Executing query [m8kl21eali2m2d3njjn]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[6]","timestamp":"2025-03-22T19:09:19.378Z"}
{"level":"debug","message":"Executing query [m8kl21ecvcrztvn32jg]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[27]","timestamp":"2025-03-22T19:09:19.380Z"}
{"level":"debug","message":"Executing query [m8kl21egi0x5p8se74l]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:09:19.384Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T19:09:23.841Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T19:09:28.511Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:09:33.126Z"}
{"level":"debug","message":"Executing query [m8kl2c0usejqw7lo0h]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:09:33.151Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:09:33.182Z"}
{"level":"debug","message":"Executing query [m8kl2c1s05mex0ixsag8]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T19:09:33.184Z"}
{"level":"debug","message":"Executing query [m8kl2c1wtu871uv31f]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742670573149\"]","timestamp":"2025-03-22T19:09:33.188Z"}
{"level":"debug","message":"Executing query [m8kl2c1yt5sm4vqyoaa]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742670573149\",\"TEST-OFICIO-1742670573149\",7079,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:09:33.190Z"}
{"level":"debug","message":"Executing query [m8kl2c26hg6iwsxzcge]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-22T19:09:33.198Z"}
{"level":"debug","message":"Executing query [m8kl2c2absx0hlich5c]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742670573149\"]","timestamp":"2025-03-22T19:09:33.202Z"}
{"level":"debug","message":"Executing query [m8kl2c2dw2vvhkiodui]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",27]","timestamp":"2025-03-22T19:09:33.205Z"}
{"level":"debug","message":"Executing query [m8kl2c2gljo395ncrqm]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-22T19:09:33.208Z"}
{"level":"debug","message":"Executing query [m8kl2c2i0x9lq1mcb7u]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-22T19:09:33.210Z"}
{"level":"debug","message":"Executing query [m8kl2c2mm4e5b911b1o]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-22T19:09:33.214Z"}
{"level":"debug","message":"Executing query [m8kl2c2oufc9jk5ugzj]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-22T19:09:33.216Z"}
{"level":"debug","message":"Executing query [m8kl2c2qrvpsnw0fk2]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[27]","timestamp":"2025-03-22T19:09:33.218Z"}
{"level":"debug","message":"Executing query [m8kl2c2scac3ds2h0am]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742670573220\",\"TEST-SP-OFICIO-1742670573220\",5968,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T19:09:33.220Z"}
{"level":"debug","message":"Executing query [m8kl2c2ved7kr4qm25t]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742670573220\"]","timestamp":"2025-03-22T19:09:33.223Z"}
{"level":"debug","message":"Executing query [m8kl2c2ws8w1m1dpfbi]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742670573220\"]","timestamp":"2025-03-22T19:09:33.224Z"}
{"level":"debug","message":"Executing query [m8kl2c30d8nnbx1d3md]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:09:33.228Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:09:33.229Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:09:37.904Z"}
{"level":"debug","message":"Executing query [m8kl2fpj156m9pjlpd6]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:09:37.928Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:09:37.960Z"}
{"level":"debug","message":"Executing query [m8kl2fqjg9z6b9auko]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T19:09:37.963Z"}
{"level":"debug","message":"Executing query [m8kl2fqnp4kq78uy3xc]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742670577926\"]","timestamp":"2025-03-22T19:09:37.967Z"}
{"level":"debug","message":"Executing query [m8kl2fqpcxkcnfrxi2]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742670577926\",\"TEST-OFI-FORENSE-1742670577926\",6501,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742670577926\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:09:37.969Z"}
{"level":"debug","message":"Executing query [m8kl2fqwo8mhzt2vxm]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-22T19:09:37.976Z"}
{"level":"debug","message":"Executing query [m8kl2fr0blbtr0kzazu]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742670577926\"]","timestamp":"2025-03-22T19:09:37.980Z"}
{"level":"debug","message":"Executing query [m8kl2fr48mbprifr7xw]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",27]","timestamp":"2025-03-22T19:09:37.984Z"}
{"level":"debug","message":"Executing query [m8kl2fr8j3utua6omjc]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-22T19:09:37.988Z"}
{"level":"debug","message":"Executing query [m8kl2frb3ieavvfyfrs]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-22T19:09:37.991Z"}
{"level":"debug","message":"Executing query [m8kl2frfuynlz5hrdzg]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-22T19:09:37.995Z"}
{"level":"debug","message":"Executing query [m8kl2frh0l4ctnt1tsx]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-22T19:09:37.997Z"}
{"level":"debug","message":"Executing query [m8kl2frkwmvvefgnum]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[27]","timestamp":"2025-03-22T19:09:38.000Z"}
{"level":"debug","message":"Executing query [m8kl2frobqprjsg87t5]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742670578004\",\"TEST-SP-OFI-FORENSE-1742670578004\",9930,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T19:09:38.004Z"}
{"level":"debug","message":"Executing query [m8kl2frrx7xrsd0wl5]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742670578004\"]","timestamp":"2025-03-22T19:09:38.007Z"}
{"level":"debug","message":"Executing query [m8kl2frttn0e5yswy7q]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742670578004\"]","timestamp":"2025-03-22T19:09:38.009Z"}
{"level":"debug","message":"Executing query [m8kl2frxg6n14e20vtb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:09:38.013Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:09:38.015Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:09:42.670Z"}
{"level":"debug","message":"Executing query [m8kl2je1o4x1oz23hvs]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:09:42.697Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:09:42.735Z"}
{"level":"debug","message":"Executing query [m8kl2jf7afbhf0zkpra]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742670582694\"]","timestamp":"2025-03-22T19:09:42.739Z"}
{"level":"debug","message":"Executing query [m8kl2jfax5e0madhaxe]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742670582694\",true]","timestamp":"2025-03-22T19:09:42.742Z"}
{"level":"debug","message":"Executing query [m8kl2jfkf1ekcfltyjf]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[31]","timestamp":"2025-03-22T19:09:42.752Z"}
{"level":"debug","message":"Executing query [m8kl2jfpo3ty612dnw]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742670582694\"]","timestamp":"2025-03-22T19:09:42.757Z"}
{"level":"debug","message":"Executing query [m8kl2jfsj5zu1kgbb8]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",31]","timestamp":"2025-03-22T19:09:42.760Z"}
{"level":"debug","message":"Executing query [m8kl2jfwvau0itwdgsk]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[31]","timestamp":"2025-03-22T19:09:42.764Z"}
{"level":"debug","message":"Executing query [m8kl2jfz0bhh1yrpcpq5]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[31]","timestamp":"2025-03-22T19:09:42.767Z"}
{"level":"debug","message":"Executing query [m8kl2jg2o1aaaze4ah]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[31]","timestamp":"2025-03-22T19:09:42.770Z"}
{"level":"debug","message":"Executing query [m8kl2jg5xze0xl0jmfk]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[31]","timestamp":"2025-03-22T19:09:42.773Z"}
{"level":"debug","message":"Executing query [m8kl2jg7iw8aonog4q]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[31]","timestamp":"2025-03-22T19:09:42.775Z"}
{"level":"debug","message":"Executing query [m8kl2jgb7kum31u823j]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[31]","timestamp":"2025-03-22T19:09:42.779Z"}
{"level":"debug","message":"Executing query [m8kl2jgdpyc35jfmmam]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T19:09:42.781Z"}
{"level":"debug","message":"Executing query [m8kl2jgelbfteq1rs1]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:09:42.782Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:09:42.784Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:09:47.568Z"}
{"level":"debug","message":"Executing query [m8kl2n5zdy0vyp8myi4]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:09:47.591Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:09:47.623Z"}
{"level":"debug","message":"Executing query [m8kl2n6x55y239mfjvq]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T19:09:47.625Z"}
{"level":"info","message":"Usando usuario existente ID: 1","timestamp":"2025-03-22T19:09:47.628Z"}
{"level":"debug","message":"Executing query [m8kl2n716ahtk33p21a]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T19:09:47.629Z"}
{"level":"debug","message":"Executing query [m8kl2n77e1bvjexmlc6]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[32,888,1,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T19:09:47.635Z\",\"ACTIVO\"]","timestamp":"2025-03-22T19:09:47.635Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 1, Área ID: 888, Rol ID: 888, Documento ID: 33","timestamp":"2025-03-22T19:09:47.638Z"}
{"level":"debug","message":"Executing query [m8kl2n7csfwdkekvgqg]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[33,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T19:09:47.640Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kl2n7csfwdkekvgqg]","params":"[33,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T19:09:47.646Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T19:09:47.646Z"}
{"level":"debug","message":"Executing query [m8kl2n7iyhv351400mg]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[33]","timestamp":"2025-03-22T19:09:47.647Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kl2n7iyhv351400mg]","params":"[33]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T19:09:47.649Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T19:09:47.649Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T19:09:47.649Z"}
{"level":"debug","message":"Executing query [m8kl2n7nhd4t88xgiqp]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[33,1,\"RESTAURAR\"]","timestamp":"2025-03-22T19:09:47.651Z"}
{"level":"debug","message":"Executing query [m8kl2n7r3u0pv4c8hd3]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[33]","timestamp":"2025-03-22T19:09:47.655Z"}
{"level":"debug","message":"Executing query [m8kl2n7uyhujd0p043]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[33,1,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T19:09:47.658Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kl2n7uyhujd0p043]","params":"[33,1,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T19:09:47.662Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T19:09:47.663Z"}
{"level":"debug","message":"Executing query [m8kl2n7zwd3g9d3qi6d]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[33]","timestamp":"2025-03-22T19:09:47.663Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kl2n7zwd3g9d3qi6d]","params":"[33]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T19:09:47.665Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T19:09:47.665Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T19:09:47.666Z"}
{"level":"debug","message":"Executing query [m8kl2n836gy55l9vpw7]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[32,888,1,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T19:09:47.667Z\",\"ACTIVO\"]","timestamp":"2025-03-22T19:09:47.667Z"}
{"level":"debug","message":"Executing query [m8kl2n868vexw2zmfuf]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T19:09:47.670Z"}
{"level":"debug","message":"Executing query [m8kl2n88pxupddp4y6d]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[1,\"DOCUMENTO\",34,\"ELIMINAR\"]","timestamp":"2025-03-22T19:09:47.672Z"}
{"level":"debug","message":"Executing query [m8kl2n8by1expr8j4c]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[34]","timestamp":"2025-03-22T19:09:47.675Z"}
{"level":"debug","message":"Executing query [m8kl2n8eabmw16tdhv]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T19:09:47.678Z"}
{"level":"debug","message":"Executing query [m8kl2n8hkcqjp3rtpu]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[32]","timestamp":"2025-03-22T19:09:47.681Z"}
{"level":"debug","message":"Executing query [m8kl2n8kbo4at4sd11v]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:09:47.684Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:09:47.685Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:09:52.450Z"}
{"level":"debug","message":"Executing query [m8kl2qxml7wa7vq3kbp]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:09:52.474Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:09:52.505Z"}
{"level":"debug","message":"Executing query [m8kl2qykvnw4dzm2u9]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T19:09:52.508Z"}
{"level":"debug","message":"Executing query [m8kl2qymc0cuey811lj]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T19:09:52.510Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T19:09:52.512Z"}
{"level":"debug","message":"Executing query [m8kl2qypes0pfvpeof7]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T19:09:52.513Z"}
{"level":"debug","message":"Executing query [m8kl2qyslwa26ja3r1]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T19:09:52.516Z"}
{"level":"debug","message":"Executing query [m8kl2qyv4bzkzwo9ukf]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T19:09:52.519Z"}
{"level":"debug","message":"Executing query [m8kl2qz1npip1rz9pqg]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[32]","timestamp":"2025-03-22T19:09:52.525Z"}
{"level":"debug","message":"Executing query [m8kl2qz4obnxszjqgin]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[32]","timestamp":"2025-03-22T19:09:52.528Z"}
{"level":"debug","message":"Executing query [m8kl2qz7aoniiqs92fl]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",32]","timestamp":"2025-03-22T19:09:52.531Z"}
{"level":"debug","message":"Executing query [m8kl2qzata30fdl77kf]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[32]","timestamp":"2025-03-22T19:09:52.534Z"}
{"level":"debug","message":"Executing query [m8kl2qzcdqsp1ytgguo]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[32]","timestamp":"2025-03-22T19:09:52.536Z"}
{"level":"debug","message":"Executing query [m8kl2qzfph6c2d9dpjc]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[32]","timestamp":"2025-03-22T19:09:52.539Z"}
{"level":"debug","message":"Executing query [m8kl2qzh3lsf9zitcgt]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:09:52.541Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:09:52.542Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:09:57.252Z"}
{"level":"debug","message":"Executing query [m8kl2umz4mv4ql2mw7f]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:09:57.275Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:09:57.307Z"}
{"level":"debug","message":"Executing query [m8kl2unxq25ilx0wix]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T19:09:57.309Z"}
{"level":"debug","message":"Executing query [m8kl2uo186c1d4mmj4y]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742670597273\"]","timestamp":"2025-03-22T19:09:57.313Z"}
{"level":"debug","message":"Executing query [m8kl2uo3se3s3j9ap7d]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742670597273\",\"TEST-OFI-QUIMICA-1742670597273\",9506,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:09:57.315Z"}
{"level":"debug","message":"Executing query [m8kl2uob44v0kxr3wvd]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-22T19:09:57.323Z"}
{"level":"debug","message":"Executing query [m8kl2uofzfnq3qxnlrm]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742670597273\"]","timestamp":"2025-03-22T19:09:57.327Z"}
{"level":"debug","message":"Executing query [m8kl2uohv2hzzlje6hg]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",14]","timestamp":"2025-03-22T19:09:57.329Z"}
{"level":"debug","message":"Executing query [m8kl2uol6wk0xsyxb2u]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-22T19:09:57.333Z"}
{"level":"debug","message":"Executing query [m8kl2uonq6ot0v4dz0f]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-22T19:09:57.335Z"}
{"level":"debug","message":"Executing query [m8kl2uoqbx9q1udlq6r]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-22T19:09:57.338Z"}
{"level":"debug","message":"Executing query [m8kl2uoraex7ypky675]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-22T19:09:57.339Z"}
{"level":"debug","message":"Executing query [m8kl2uou51cabi01xbx]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[14]","timestamp":"2025-03-22T19:09:57.342Z"}
{"level":"debug","message":"Executing query [m8kl2uowl8sdb7nwjwf]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:09:57.344Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:09:57.345Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:10:02.328Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:10:02.362Z"}
{"level":"debug","message":"Executing query [m8kl2ykdxk7ivo6g9ce]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:10:02.365Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:10:02.403Z"}
{"level":"debug","message":"Executing query [m8kl2ylinvv8t1k0fzc]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T19:10:02.406Z"}
{"level":"debug","message":"Executing query [m8kl2ylkx698m3c12hp]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T19:10:02.408Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T19:10:02.410Z"}
{"level":"debug","message":"Executing query [m8kl2ylnlymgun63s2h]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:10:02.411Z"}
{"level":"debug","message":"Executing query [m8kl2ylomte5tjtyw0d]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:10:02.412Z"}
{"level":"debug","message":"Executing query [m8kl2ylriig8io5xz28]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:10:02.415Z"}
{"level":"debug","message":"Executing query [m8kl2yltgob0yb676y]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T19:10:02.417Z"}
{"level":"debug","message":"Executing query [m8kl2ylzl40othdx2n]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[17]","timestamp":"2025-03-22T19:10:02.423Z"}
{"level":"debug","message":"Executing query [m8kl2ym5qu4mah1ia6l]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:10:02.429Z"}
{"level":"debug","message":"Executing query [m8kl2ym8841n3rw33a4]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",17]","timestamp":"2025-03-22T19:10:02.432Z"}
{"level":"debug","message":"Executing query [m8kl2ymc2wurdtyjxj2]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[17]","timestamp":"2025-03-22T19:10:02.436Z"}
{"level":"debug","message":"Executing query [m8kl2ymfv7v7ryn7m3]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[17]","timestamp":"2025-03-22T19:10:02.439Z"}
{"level":"debug","message":"Executing query [m8kl2ymjxu2wcj2nab]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[17]","timestamp":"2025-03-22T19:10:02.443Z"}
{"level":"debug","message":"Executing query [m8kl2ymmf9ls83i2mbw]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:10:02.446Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:10:02.448Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:10:24.719Z"}
{"fatal":true,"level":"error","message":"Error al conectar a la base de datos: Encoding not recognized: 'cesu8' (searched as: 'cesu8')","stack":"Error: Encoding not recognized: 'cesu8' (searched as: 'cesu8')\n    at Object.getCodec (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:104:23)\n    at Object.getDecoder (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:125:23)\n    at Object.<anonymous>.exports.decode (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\parsers\\string.js:20:23)\n    at Packet.readNullTerminatedString (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\packet.js:414:25)\n    at Function.fromPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\handshake.js:62:33)\n    at ClientHandshake.handshakeInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\client_handshake.js:112:40)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:45:22)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T19:10:25.155Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:11:02.196Z"}
{"fatal":true,"level":"error","message":"Error al conectar a la base de datos: Encoding not recognized: 'cesu8' (searched as: 'cesu8')","stack":"Error: Encoding not recognized: 'cesu8' (searched as: 'cesu8')\n    at Object.getCodec (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:104:23)\n    at Object.getDecoder (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:125:23)\n    at Object.<anonymous>.exports.decode (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\parsers\\string.js:20:23)\n    at Packet.readNullTerminatedString (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\packet.js:414:25)\n    at Function.fromPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\handshake.js:62:33)\n    at ClientHandshake.handshakeInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\client_handshake.js:112:40)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:45:22)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T19:11:02.631Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:11:43.616Z"}
{"fatal":true,"level":"error","message":"Error al conectar a la base de datos: Encoding not recognized: 'cesu8' (searched as: 'cesu8')","stack":"Error: Encoding not recognized: 'cesu8' (searched as: 'cesu8')\n    at Object.getCodec (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:104:23)\n    at Object.getDecoder (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:125:23)\n    at Object.<anonymous>.exports.decode (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\parsers\\string.js:20:23)\n    at Packet.readNullTerminatedString (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\packet.js:414:25)\n    at Function.fromPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\handshake.js:62:33)\n    at ClientHandshake.handshakeInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\client_handshake.js:112:40)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:45:22)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T19:11:44.244Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:12:23.723Z"}
{"fatal":true,"level":"error","message":"Error al conectar a la base de datos: Encoding not recognized: 'cesu8' (searched as: 'cesu8')","stack":"Error: Encoding not recognized: 'cesu8' (searched as: 'cesu8')\n    at Object.getCodec (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:104:23)\n    at Object.getDecoder (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\node_modules\\iconv-lite\\lib\\index.js:125:23)\n    at Object.<anonymous>.exports.decode (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\parsers\\string.js:20:23)\n    at Packet.readNullTerminatedString (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\packet.js:414:25)\n    at Function.fromPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packets\\handshake.js:62:33)\n    at ClientHandshake.handshakeInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\client_handshake.js:112:40)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:45:22)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T19:12:24.168Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:13:28.743Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:13:29.060Z"}
{"level":"debug","message":"Executing query [m8kl7e2driwzfx26cyd]: SELECT IDRol FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T19:13:29.077Z"}
{"level":"debug","message":"Executing query [m8kl7e2hdrhwasv2345]: SELECT Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T19:13:29.081Z"}
{"level":"error","message":"Error al verificar token: invalid signature","name":"JsonWebTokenError","stack":"JsonWebTokenError: invalid signature\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:171:19\n    at getSecret (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:97:14)\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:101:10)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:70:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\test-server.js:44:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-22T19:13:29.108Z"}
{"level":"debug","message":"Executing query [m8kl7e3pfuye540n3hh]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T19:13:29.125Z"}
{"level":"debug","message":"Executing query [m8kl7e3rgl33h9jze04]: SELECT IDRol, NombreRol, Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T19:13:29.127Z"}
{"level":"debug","message":"Executing query [m8kl7e3tkelwwwrljx]: SELECT \n        pc.IDPermisoContextual,\n        pc.IDRol,\n        pc.IDArea,\n        pc.TipoRecurso,\n        pc.ReglaContexto,\n        pc.Activo\n      FROM \n        PermisoContextual pc\n      WHERE \n        pc.IDRol = ? \n        AND pc.IDArea = ?\n        AND pc.Activo = true","params":"[888,888]","timestamp":"2025-03-22T19:13:29.129Z"}
{"level":"debug","message":"Executing query [m8kl7e447vpsae55ttd]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[99999]","timestamp":"2025-03-22T19:13:29.140Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:13:29.144Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:14:19.648Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:14:19.970Z"}
{"level":"debug","message":"Executing query [m8kl8hck6go2pbr5052]: SELECT IDRol FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T19:14:19.989Z"}
{"level":"debug","message":"Executing query [m8kl8hcp7zjs3hatzrj]: SELECT Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T19:14:19.993Z"}
{"level":"error","message":"Error al verificar token: invalid signature","name":"JsonWebTokenError","stack":"JsonWebTokenError: invalid signature\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:171:19\n    at getSecret (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:97:14)\n    at Object.<anonymous>.module.exports [as verify] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\jsonwebtoken\\verify.js:101:10)\n    at verify (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\middleware\\auth.js:70:25)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\test-server.js:50:3)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at cors (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:188:7)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:214:15)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at jsonParser (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\body-parser\\lib\\types\\json.js:113:7)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at expressInit (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\middleware\\init.js:40:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at query (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\middleware\\query.js:45:5)\n    at Layer.handle [as handle_request] (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at Function.handle (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\application.js:181:10)\n    at Server.app (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\server\\node_modules\\express\\lib\\express.js:39:9)\n    at Server.emit (node:events:513:28)\n    at parserOnIncoming (node:_http_server:1153:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-03-22T19:14:20.022Z"}
{"level":"debug","message":"Executing query [m8kl8hdx67n286p9l5l]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T19:14:20.037Z"}
{"level":"debug","message":"Executing query [m8kl8hdz8xwd70rmsa]: SELECT IDRol, NombreRol, Permisos FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T19:14:20.039Z"}
{"level":"debug","message":"Executing query [m8kl8he1ll3802vj9a]: SELECT \n        pc.IDPermisoContextual,\n        pc.IDRol,\n        pc.IDArea,\n        pc.TipoRecurso,\n        pc.ReglaContexto,\n        pc.Activo\n      FROM \n        PermisoContextual pc\n      WHERE \n        pc.IDRol = ? \n        AND pc.IDArea = ?\n        AND pc.Activo = true","params":"[888,888]","timestamp":"2025-03-22T19:14:20.041Z"}
{"level":"debug","message":"Executing query [m8kl8heel6yzhu0oca]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[99999]","timestamp":"2025-03-22T19:14:20.054Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:14:20.058Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:15:02.718Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:15:03.043Z"}
{"level":"debug","message":"Executing query [m8kl9el2u3yflrp1nf]: SELECT IDRol FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T19:15:03.062Z"}
{"level":"debug","message":"Executing query [m8kl9eln2vb4mz89hlv]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T19:15:03.083Z"}
{"level":"debug","message":"Executing query [m8kl9em302yk2u7v6lg6]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T19:15:03.099Z"}
{"level":"debug","message":"Executing query [m8kl9emfgzpj1c3grr5]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[99999]","timestamp":"2025-03-22T19:15:03.111Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:15:03.115Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:16:27.197Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:16:27.514Z"}
{"level":"debug","message":"Executing query [m8klb7rgyc9e3pz6koo]: SELECT IDRol FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T19:16:27.532Z"}
{"level":"debug","message":"Executing query [m8klb7rz8qln8w95fvw]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T19:16:27.551Z"}
{"level":"debug","message":"Executing query [m8klb7sd0ul72l9ofwfh]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T19:16:27.565Z"}
{"level":"debug","message":"Executing query [m8klb7sqca2sa89nljr]: SELECT \n        u.IDUsuario, \n        u.IDRol,\n        r.NombreRol,\n        u.IDArea,\n        a.NombreArea\n      FROM \n        Usuario u\n        JOIN Rol r ON u.IDRol = r.IDRol\n        JOIN AreaEspecializada a ON u.IDArea = a.IDArea\n      WHERE \n        u.IDUsuario = ?","params":"[99999]","timestamp":"2025-03-22T19:16:27.578Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:16:27.582Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:17:30.531Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:17:30.854Z"}
{"level":"debug","message":"Executing query [m8klcknb5l78vexq0g]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T19:17:30.887Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:17:30.926Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:07.766Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:08.098Z"}
{"level":"debug","message":"Executing query [m8kldddt046mlyh16m8s]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T19:18:08.129Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:08.166Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:23.037Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T19:18:23.103Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:23.202Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T19:18:23.217Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:23.249Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:46.187Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:46.333Z"}
{"duration":"20ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T19:18:46.336Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T19:18:46.340Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:46.349Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:46.876Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:47.094Z"}
{"level":"debug","message":"Executing query [m8kle7grvgt2bijwsla]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T19:18:47.116Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:47.145Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:47.333Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T19:18:47.347Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:47.377Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T19:18:47.386Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:47.412Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:48.005Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:48.048Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T19:18:48.050Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:48.157Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:48.163Z"}
{"level":"debug","message":"Executing query [m8kle89wjikk841dlfg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:18:48.164Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:48.174Z"}
{"level":"debug","message":"Executing query [m8kle8a88u1iwq42auw]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T19:18:48.176Z"}
{"level":"debug","message":"Executing query [m8kle8aa0ol9a6g81fes]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T19:18:48.178Z"}
{"level":"debug","message":"Executing query [m8kle8ady7dfouqgdwb]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive, Descripcion) VALUES (?, ?, ?, ?, ?, ?)","params":"[999,\"Área de Prueba\",\"TEST-AREA\",\"PRUEBA\",1,\"Área creada para pruebas\"]","timestamp":"2025-03-22T19:18:48.181Z"}
{"level":"debug","message":"Executing query [m8kle8ahuhc3n6wto8]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[999,\"Rol de Prueba\",\"Rol creado para pruebas\",1,255]","timestamp":"2025-03-22T19:18:48.185Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T19:18:48.188Z"}
{"level":"debug","message":"Executing query [m8kle8albq1i7de9vx8]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:18:48.189Z"}
{"level":"debug","message":"Executing query [m8kle8am1bd953gpm5b]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:18:48.190Z"}
{"level":"debug","message":"Executing query [m8kle8an62kusiftl8i]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:18:48.191Z"}
{"level":"debug","message":"Executing query [m8kle8ao7405tlmlap6]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T19:18:48.192Z"}
{"level":"debug","message":"Executing query [m8kle8arjpz7pmtv84f]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.195Z"}
{"level":"debug","message":"Executing query [m8kle8au2dqpv8tg92]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T19:18:48.198Z"}
{"level":"debug","message":"Executing query [m8kle8ay5fbhnd8q6eb]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",1]","timestamp":"2025-03-22T19:18:48.202Z"}
{"level":"debug","message":"Executing query [m8kle8b1246ttaas7ys]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.205Z"}
{"level":"debug","message":"Executing query [m8kle8b2zmptjtkzgv]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.207Z"}
{"level":"debug","message":"Executing query [m8kle8b5940cstzruxq]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.209Z"}
{"level":"debug","message":"Executing query [m8kle8b685fzfsqzb56]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:18:48.210Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:48.211Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:48.310Z"}
{"level":"debug","message":"Executing query [m8kle8e1b56fyreki7m]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:18:48.313Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:48.321Z"}
{"level":"debug","message":"Executing query [m8kle8ebx11v7djl76]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T19:18:48.323Z"}
{"level":"debug","message":"Executing query [m8kle8edeee43n2gcfb]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742671128312\"]","timestamp":"2025-03-22T19:18:48.325Z"}
{"level":"debug","message":"Executing query [m8kle8ef5lj3x0qw0im]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-FORENSE-1742671128312\",\"TEST-OFI-FORENSE-1742671128312\",564,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742671128312\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:18:48.327Z"}
{"level":"debug","message":"Executing query [m8kle8ek2643ucnt5yh]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.332Z"}
{"level":"debug","message":"Executing query [m8kle8end12qjvxwcnw]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742671128312\"]","timestamp":"2025-03-22T19:18:48.335Z"}
{"level":"debug","message":"Executing query [m8kle8epcucs8smpv6e]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",1]","timestamp":"2025-03-22T19:18:48.337Z"}
{"level":"debug","message":"Executing query [m8kle8erilwfps7pbw]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.340Z"}
{"level":"debug","message":"Executing query [m8kle8et27n2djj0dqw]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.341Z"}
{"level":"debug","message":"Executing query [m8kle8evndczh5qwc58]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.343Z"}
{"level":"debug","message":"Executing query [m8kle8exfatpwt965w]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.345Z"}
{"level":"debug","message":"Executing query [m8kle8ezlezx95bn82]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.347Z"}
{"level":"debug","message":"Executing query [m8kle8f18l2b0i6u6gv]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-SP-FORENSE-1742671128349\",\"TEST-SP-OFI-FORENSE-1742671128349\",6173,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T19:18:48.349Z"}
{"level":"debug","message":"Executing query [m8kle8f40s4rnh4gf249]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742671128349\"]","timestamp":"2025-03-22T19:18:48.352Z"}
{"level":"debug","message":"Executing query [m8kle8f5vcamn2yo8kn]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742671128349\"]","timestamp":"2025-03-22T19:18:48.353Z"}
{"level":"debug","message":"Executing query [m8kle8f7pojqbo0lku]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:18:48.355Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:48.356Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:48.452Z"}
{"level":"debug","message":"Executing query [m8kle8hyaurbb6ivsge]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:18:48.455Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:48.467Z"}
{"level":"debug","message":"Executing query [m8kle8idsunin0ebkf]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T19:18:48.469Z"}
{"level":"debug","message":"Executing query [m8kle8ifni3glcyasj8]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742671128454\"]","timestamp":"2025-03-22T19:18:48.471Z"}
{"level":"debug","message":"Executing query [m8kle8ihc0m5eyp3fce]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[999,\"TEST-QUIMICA-1742671128454\",\"TEST-OFI-QUIMICA-1742671128454\",5511,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:18:48.473Z"}
{"level":"debug","message":"Executing query [m8kle8ionv99h0j4rva]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.480Z"}
{"level":"debug","message":"Executing query [m8kle8ir22r1963zwze]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742671128454\"]","timestamp":"2025-03-22T19:18:48.483Z"}
{"level":"debug","message":"Executing query [m8kle8izuo32rrbcys]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",1]","timestamp":"2025-03-22T19:18:48.491Z"}
{"level":"debug","message":"Executing query [m8kle8j30of01wu3ztb]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.495Z"}
{"level":"debug","message":"Executing query [m8kle8j6nk5v2tr4o7q]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.498Z"}
{"level":"debug","message":"Executing query [m8kle8j91znv350b6i2]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.501Z"}
{"level":"debug","message":"Executing query [m8kle8jbclf0cypdopn]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.503Z"}
{"level":"debug","message":"Executing query [m8kle8jfzkjd4rmqeje]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.507Z"}
{"level":"debug","message":"Executing query [m8kle8jg5x3c71qvuod]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:18:48.508Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:48.509Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:48.609Z"}
{"level":"debug","message":"Executing query [m8kle8mdkq3osf0kz7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:18:48.613Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:48.623Z"}
{"level":"debug","message":"Executing query [m8kle8moz2nj38w9nr]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T19:18:48.624Z"}
{"level":"debug","message":"Executing query [m8kle8mpm8jxzebejhm]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = ?","params":"[888]","timestamp":"2025-03-22T19:18:48.625Z"}
{"level":"debug","message":"Executing query [m8kle8mqqxokky2yerh]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Área Papelera\",\"TEST-PAPELERA\",\"PRUEBA\",1]","timestamp":"2025-03-22T19:18:48.626Z"}
{"level":"debug","message":"Executing query [m8kle8mtp16x7p00d2m]: SELECT IDRol FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T19:18:48.629Z"}
{"level":"debug","message":"Executing query [m8kle8mukzny3h9jiob]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Rol Papelera\",\"Rol para pruebas de papelera\",2,4]","timestamp":"2025-03-22T19:18:48.630Z"}
{"level":"debug","message":"Executing query [m8kle8mxzezbnckvm7]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TESTPAP123\",\"Usuario\",\"Papelera\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","timestamp":"2025-03-22T19:18:48.633Z"}
{"level":"debug","message":"Executing query [m8kle8mzrnmsvmn3co]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T19:18:48.635Z"}
{"level":"debug","message":"Executing query [m8kle8n22vg01ho1rbt]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1,888,2,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T19:18:48.638Z\",\"ACTIVO\"]","timestamp":"2025-03-22T19:18:48.638Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 2, Área ID: 888, Rol ID: 888, Documento ID: 1","timestamp":"2025-03-22T19:18:48.642Z"}
{"level":"debug","message":"Executing query [m8kle8n7ljb3jq12g1f]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T19:18:48.643Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kle8n7ljb3jq12g1f]","params":"[1,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T19:18:48.647Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T19:18:48.648Z"}
{"level":"debug","message":"Executing query [m8kle8ncdzfovewb9yg]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.648Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kle8ncdzfovewb9yg]","params":"[1]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T19:18:48.650Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T19:18:48.650Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T19:18:48.651Z"}
{"level":"debug","message":"Executing query [m8kle8nf9sxluccjm09]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,2,\"RESTAURAR\"]","timestamp":"2025-03-22T19:18:48.651Z"}
{"level":"debug","message":"Executing query [m8kle8nk0t5c1861u2hq]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.656Z"}
{"level":"debug","message":"Executing query [m8kle8nmkwgeuor9p5m]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T19:18:48.658Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kle8nmkwgeuor9p5m]","params":"[1,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T19:18:48.661Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T19:18:48.661Z"}
{"level":"debug","message":"Executing query [m8kle8np0hb0lzlgbbc7]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.661Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kle8np0hb0lzlgbbc7]","params":"[1]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T19:18:48.663Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T19:18:48.663Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T19:18:48.663Z"}
{"level":"debug","message":"Executing query [m8kle8nsfuv98gbgmk]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1,888,2,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T19:18:48.664Z\",\"ACTIVO\"]","timestamp":"2025-03-22T19:18:48.664Z"}
{"level":"debug","message":"Executing query [m8kle8nvf9fpcmricv]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T19:18:48.667Z"}
{"level":"debug","message":"Executing query [m8kle8nxfp0rsqr7q8]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[2,\"DOCUMENTO\",2,\"ELIMINAR\"]","timestamp":"2025-03-22T19:18:48.669Z"}
{"level":"debug","message":"Executing query [m8kle8nz2chybv2ujgs]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[2]","timestamp":"2025-03-22T19:18:48.672Z"}
{"level":"debug","message":"Executing query [m8kle8o23zq25v2cm2k]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T19:18:48.674Z"}
{"level":"debug","message":"Executing query [m8kle8o5tdkpgjtelxd]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-22T19:18:48.677Z"}
{"level":"debug","message":"Executing query [m8kle8o7pkqydnqpp1]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:18:48.679Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:48.680Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:48.774Z"}
{"level":"debug","message":"Executing query [m8kle8qx8i7wj3woa7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:18:48.777Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:48.786Z"}
{"level":"debug","message":"Executing query [m8kle8r89yhojqyyq6i]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742671128776\"]","timestamp":"2025-03-22T19:18:48.788Z"}
{"level":"debug","message":"Executing query [m8kle8r92rwzxl7nwx8]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742671128776\",true]","timestamp":"2025-03-22T19:18:48.789Z"}
{"level":"debug","message":"Executing query [m8kle8rfbg5c92oyzut]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T19:18:48.795Z"}
{"level":"debug","message":"Executing query [m8kle8rhry6wokfs6k]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742671128776\"]","timestamp":"2025-03-22T19:18:48.797Z"}
{"level":"debug","message":"Executing query [m8kle8rioikdx13qs9a]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",2]","timestamp":"2025-03-22T19:18:48.798Z"}
{"level":"debug","message":"Executing query [m8kle8rluyeaoqht9rj]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T19:18:48.801Z"}
{"level":"debug","message":"Executing query [m8kle8rnhugf3tkej7t]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T19:18:48.803Z"}
{"level":"debug","message":"Executing query [m8kle8rqkfm03qtjfj]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T19:18:48.806Z"}
{"level":"debug","message":"Executing query [m8kle8rrs63qdihoclh]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T19:18:48.807Z"}
{"level":"debug","message":"Executing query [m8kle8rtx18avf350fn]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T19:18:48.809Z"}
{"level":"debug","message":"Executing query [m8kle8rvi1o4kgz54sm]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T19:18:48.811Z"}
{"level":"debug","message":"Executing query [m8kle8rxdt96gi2gomk]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T19:18:48.813Z"}
{"level":"debug","message":"Executing query [m8kle8rzw5mkcaad2hp]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:18:48.815Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:48.816Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:48.912Z"}
{"level":"debug","message":"Executing query [m8kle8uqk02jc713ycq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:18:48.914Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:48.923Z"}
{"level":"debug","message":"Executing query [m8kle8v140qnq3ciau]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742671128914\"]","timestamp":"2025-03-22T19:18:48.925Z"}
{"level":"debug","message":"Executing query [m8kle8v3sa8fuqfsnzp]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742671128914\"]","timestamp":"2025-03-22T19:18:48.927Z"}
{"level":"debug","message":"Executing query [m8kle8v45bajltl4uwc]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742671128914\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:18:48.928Z"}
{"level":"debug","message":"Executing query [m8kle8v9i6w9ysr7la]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T19:18:48.933Z"}
{"level":"debug","message":"Executing query [m8kle8vc4ltpw8a5bbe]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742671128914\"]","timestamp":"2025-03-22T19:18:48.936Z"}
{"level":"debug","message":"Executing query [m8kle8veeoo7j77hcv]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1000]","timestamp":"2025-03-22T19:18:48.938Z"}
{"level":"debug","message":"Executing query [m8kle8vj39bv6fioqgt]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T19:18:48.943Z"}
{"level":"debug","message":"Executing query [m8kle8vlogguyxbulx]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T19:18:48.945Z"}
{"level":"debug","message":"Executing query [m8kle8vpjsfn10k7yu]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T19:18:48.949Z"}
{"level":"debug","message":"Executing query [m8kle8vqaulzg9487t]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T19:18:48.950Z"}
{"level":"debug","message":"Executing query [m8kle8vs5m98mh2gocu]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T19:18:48.952Z"}
{"level":"debug","message":"Executing query [m8kle8vwc3zgxto1rca]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T19:18:48.956Z"}
{"level":"debug","message":"Executing query [m8kle8vx0m3e6rd457u]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T19:18:48.957Z"}
{"level":"debug","message":"Executing query [m8kle8vy8codzo91st3]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:18:48.958Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:48.960Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:49.056Z"}
{"level":"debug","message":"Executing query [m8kle8yqfxn3h2ob4q]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:18:49.058Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:49.066Z"}
{"level":"debug","message":"Executing query [m8kle8yzp3jol9y8ap]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T19:18:49.067Z"}
{"level":"debug","message":"Executing query [m8kle8z13uz94a31qlg]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742671129057\"]","timestamp":"2025-03-22T19:18:49.069Z"}
{"level":"debug","message":"Executing query [m8kle8z3af9tivk0w4m]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742671129057\",\"TEST-OFICIO-1742671129057\",5094,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T19:18:49.071Z"}
{"level":"debug","message":"Executing query [m8kle8z88g65wfss7of]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T19:18:49.076Z"}
{"level":"debug","message":"Executing query [m8kle8zcookif1dl5us]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742671129057\"]","timestamp":"2025-03-22T19:18:49.080Z"}
{"level":"debug","message":"Executing query [m8kle8zezc027aya3w]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",1]","timestamp":"2025-03-22T19:18:49.082Z"}
{"level":"debug","message":"Executing query [m8kle8zhi0e8y0gz74]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T19:18:49.085Z"}
{"level":"debug","message":"Executing query [m8kle8zi89gonu04zt9]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T19:18:49.086Z"}
{"level":"debug","message":"Executing query [m8kle8zlnc6x5npsam]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T19:18:49.089Z"}
{"level":"debug","message":"Executing query [m8kle8zmxubbj5gxdu8]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T19:18:49.090Z"}
{"level":"debug","message":"Executing query [m8kle8zooaausbfm5ni]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T19:18:49.092Z"}
{"level":"debug","message":"Executing query [m8kle8zq0mbud10uwwpo]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742671129094\",\"TEST-SP-OFICIO-1742671129094\",2097,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T19:18:49.094Z"}
{"level":"debug","message":"Executing query [m8kle8ztsrml04uviwk]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742671129094\"]","timestamp":"2025-03-22T19:18:49.097Z"}
{"level":"debug","message":"Executing query [m8kle8zuo38ny4xz04o]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742671129094\"]","timestamp":"2025-03-22T19:18:49.098Z"}
{"level":"debug","message":"Executing query [m8kle8zxyh1c69mx6tr]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:18:49.101Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:49.102Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:49.194Z"}
{"level":"debug","message":"Executing query [m8kle92lrx2eri8g1lr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:18:49.197Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:49.205Z"}
{"level":"debug","message":"Executing query [m8kle92up1zd9mg8sa]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T19:18:49.206Z"}
{"level":"debug","message":"Executing query [m8kle92wd86nvx233fg]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T19:18:49.208Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T19:18:49.209Z"}
{"level":"debug","message":"Executing query [m8kle92y1b857lpba9q]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T19:18:49.210Z"}
{"level":"debug","message":"Executing query [m8kle92znnxcomxt4rs]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T19:18:49.211Z"}
{"level":"debug","message":"Executing query [m8kle931tns7aspkb5j]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T19:18:49.213Z"}
{"level":"debug","message":"Executing query [m8kle93602pggai1t2ae]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-22T19:18:49.218Z"}
{"level":"debug","message":"Executing query [m8kle9386y6io9p74xr]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-22T19:18:49.220Z"}
{"level":"debug","message":"Executing query [m8kle93a0bvrlxmft4m]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",2]","timestamp":"2025-03-22T19:18:49.222Z"}
{"level":"debug","message":"Executing query [m8kle93cfo4t2yilkd]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-22T19:18:49.224Z"}
{"level":"debug","message":"Executing query [m8kle93evq29p1sumcn]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-22T19:18:49.226Z"}
{"level":"debug","message":"Executing query [m8kle93g2jeoc37j9ee]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-22T19:18:49.228Z"}
{"level":"debug","message":"Executing query [m8kle93iw4gzv7e8ixn]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:18:49.230Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:49.231Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:49.323Z"}
{"level":"debug","message":"Executing query [m8kle966ahbelbwcu4k]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T19:18:49.326Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:49.338Z"}
{"level":"debug","message":"Executing query [m8kle96jbr5emog1b36]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T19:18:49.339Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T19:18:49.341Z"}
{"level":"debug","message":"Executing query [m8kle96lmifm6fhwi4h]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T19:18:49.341Z"}
{"level":"debug","message":"Executing query [m8kle96m8045wlvhrtg]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T19:18:49.342Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-22T19:18:49.343Z"}
{"level":"debug","message":"Executing query [m8kle96n0fpfvpf1ujl]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T19:18:49.343Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T19:18:49.344Z"}
{"level":"debug","message":"Executing query [m8kle96sn6ei70fbwbc]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T19:18:49.348Z"}
{"level":"debug","message":"Executing query [m8kle96v4v929vxeds7]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T19:18:49.351Z"}
{"level":"debug","message":"Executing query [m8kle96xrfmd368jqf]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T19:18:49.353Z"}
{"level":"debug","message":"Executing query [m8kle970qypszxbq8b]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T19:18:49.356Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T19:18:49.430Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T19:18:49.522Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:18:49.796Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:18:49.810Z"}
{"level":"debug","message":"Executing query [m8kle9jpebdplib3qap]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T19:18:49.813Z"}
{"level":"debug","message":"Executing query [m8kle9jqyzfd6nud3v7]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T19:18:49.814Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8kle9jqyzfd6nud3v7]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T19:18:49.818Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T19:18:49.819Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T19:18:49.891Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T19:18:49.891Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T19:18:49.892Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T19:18:49.895Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T19:18:49.896Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T19:18:49.896Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:24:51.224Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:24:51.230Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T19:24:51.482Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T19:24:51.672Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:43.050Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:02:43.210Z"}
{"duration":"22ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T20:02:43.213Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T20:02:43.217Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:02:43.228Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:43.784Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:02:44.012Z"}
{"level":"debug","message":"Executing query [m8kmyq4k5xd9hvgsxi7]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T20:02:44.036Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:02:44.068Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:44.671Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:02:44.717Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T20:02:44.719Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:44.910Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T20:02:44.927Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:02:44.955Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T20:02:44.964Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:02:44.989Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:45.090Z"}
{"level":"debug","message":"Executing query [m8kmyqxx7hzrzd6to4o]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:02:45.093Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:02:45.110Z"}
{"level":"debug","message":"Executing query [m8kmyqyfki5osaikvqh]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T20:02:45.111Z"}
{"level":"info","message":"Usando usuario existente ID: 2","timestamp":"2025-03-22T20:02:45.116Z"}
{"level":"debug","message":"Executing query [m8kmyqylt04tx9es6e]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T20:02:45.117Z"}
{"level":"debug","message":"Executing query [m8kmyqyomg75x1c88wo]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[3,888,2,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T20:02:45.120Z\",\"ACTIVO\"]","timestamp":"2025-03-22T20:02:45.120Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 2, Área ID: 888, Rol ID: 888, Documento ID: 3","timestamp":"2025-03-22T20:02:45.124Z"}
{"level":"debug","message":"Executing query [m8kmyqyt6n63wegn6vf]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T20:02:45.125Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kmyqyt6n63wegn6vf]","params":"[3,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T20:02:45.135Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T20:02:45.135Z"}
{"level":"debug","message":"Executing query [m8kmyqz4q45xvfiiepq]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T20:02:45.136Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kmyqz4q45xvfiiepq]","params":"[3]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T20:02:45.139Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T20:02:45.139Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T20:02:45.140Z"}
{"level":"debug","message":"Executing query [m8kmyqza1xcupabe2jl]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,2,\"RESTAURAR\"]","timestamp":"2025-03-22T20:02:45.142Z"}
{"level":"debug","message":"Executing query [m8kmyqzfilj7bal6o4]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T20:02:45.147Z"}
{"level":"debug","message":"Executing query [m8kmyqzj3b19bjgtrl2]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T20:02:45.151Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kmyqzj3b19bjgtrl2]","params":"[3,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T20:02:45.154Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T20:02:45.155Z"}
{"level":"debug","message":"Executing query [m8kmyqznnvjro7u6o0c]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T20:02:45.155Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kmyqznnvjro7u6o0c]","params":"[3]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T20:02:45.158Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T20:02:45.158Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T20:02:45.159Z"}
{"level":"debug","message":"Executing query [m8kmyqzrv1ibkl3ure9]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[3,888,2,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T20:02:45.159Z\",\"ACTIVO\"]","timestamp":"2025-03-22T20:02:45.159Z"}
{"level":"debug","message":"Executing query [m8kmyqzumqc5r4yi3ds]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T20:02:45.162Z"}
{"level":"debug","message":"Executing query [m8kmyqzwucva7lqgr4]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[2,\"DOCUMENTO\",4,\"ELIMINAR\"]","timestamp":"2025-03-22T20:02:45.164Z"}
{"level":"debug","message":"Executing query [m8kmyqzy4165vu6hdg8]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[4]","timestamp":"2025-03-22T20:02:45.166Z"}
{"level":"debug","message":"Executing query [m8kmyr016wedvzawi3u]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T20:02:45.169Z"}
{"level":"debug","message":"Executing query [m8kmyr04h9tmsz2uj1]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-22T20:02:45.172Z"}
{"level":"debug","message":"Executing query [m8kmyr078danwfmytly]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:02:45.175Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:02:45.176Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:45.451Z"}
{"level":"debug","message":"Executing query [m8kmyr7xj8ueic3o0ak]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:02:45.453Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:02:45.462Z"}
{"level":"debug","message":"Executing query [m8kmyr87q9d80t1ohjl]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:02:45.463Z"}
{"level":"debug","message":"Executing query [m8kmyr89me86f4vr0w]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742673765452\"]","timestamp":"2025-03-22T20:02:45.465Z"}
{"level":"debug","message":"Executing query [m8kmyr8bzz64r9z92b]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-QUIMICA-1742673765452\",\"TEST-OFI-QUIMICA-1742673765452\",9401,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:02:45.467Z"}
{"level":"debug","message":"Executing query [m8kmyr8h5p9x430e7ik]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T20:02:45.473Z"}
{"level":"debug","message":"Executing query [m8kmyr8kj6mrlaekt4g]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742673765452\"]","timestamp":"2025-03-22T20:02:45.476Z"}
{"level":"debug","message":"Executing query [m8kmyr8o8d0xxubonaj]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",2]","timestamp":"2025-03-22T20:02:45.480Z"}
{"level":"debug","message":"Executing query [m8kmyr8q2fdx9gb7jeg]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T20:02:45.482Z"}
{"level":"debug","message":"Executing query [m8kmyr8scm8uh2iwug]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T20:02:45.484Z"}
{"level":"debug","message":"Executing query [m8kmyr8uxybd8l921th]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T20:02:45.486Z"}
{"level":"debug","message":"Executing query [m8kmyr8wggopx4n4wit]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T20:02:45.488Z"}
{"level":"debug","message":"Executing query [m8kmyr8ymvuqoimktt]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T20:02:45.490Z"}
{"level":"debug","message":"Executing query [m8kmyr90jty92nt9kbk]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:02:45.492Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:02:45.493Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:45.590Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:45.595Z"}
{"level":"debug","message":"Executing query [m8kmyrbwtp60as1d7i]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:02:45.597Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:02:45.606Z"}
{"level":"debug","message":"Executing query [m8kmyrc7ebeuljjs2ke]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T20:02:45.607Z"}
{"level":"debug","message":"Executing query [m8kmyrc9xiql6yhpwr]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T20:02:45.609Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T20:02:45.611Z"}
{"level":"debug","message":"Executing query [m8kmyrcbinr34qaij6r]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:02:45.611Z"}
{"level":"debug","message":"Executing query [m8kmyrccfsuliwd0rso]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:02:45.612Z"}
{"level":"debug","message":"Executing query [m8kmyrcdfxio8dxrz0s]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:02:45.614Z"}
{"level":"debug","message":"Executing query [m8kmyrceo577gug930q]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T20:02:45.614Z"}
{"level":"debug","message":"Executing query [m8kmyrcijk8l9pdq0cp]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T20:02:45.618Z"}
{"level":"debug","message":"Executing query [m8kmyrckk212y4ip7kj]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:02:45.620Z"}
{"level":"debug","message":"Executing query [m8kmyrcm91kqrb0z0b]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",3]","timestamp":"2025-03-22T20:02:45.622Z"}
{"level":"debug","message":"Executing query [m8kmyrcpjx9hhwbcmp]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T20:02:45.625Z"}
{"level":"debug","message":"Executing query [m8kmyrcqi8es5j3kovl]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T20:02:45.626Z"}
{"level":"debug","message":"Executing query [m8kmyrctfu9egpqkkq8]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T20:02:45.629Z"}
{"level":"debug","message":"Executing query [m8kmyrcu4jr6q8zh143]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:02:45.630Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:02:45.631Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:45.729Z"}
{"level":"debug","message":"Executing query [m8kmyrfobt3nx2hqy7a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:02:45.732Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:02:45.743Z"}
{"level":"debug","message":"Executing query [m8kmyrg062c91nhb76p]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:02:45.745Z"}
{"level":"debug","message":"Executing query [m8kmyrg3nxld6hvp6r]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742673765731\"]","timestamp":"2025-03-22T20:02:45.747Z"}
{"level":"debug","message":"Executing query [m8kmyrg46682rjpo31x]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-FORENSE-1742673765731\",\"TEST-OFI-FORENSE-1742673765731\",528,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742673765731\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:02:45.749Z"}
{"level":"debug","message":"Executing query [m8kmyrgbcz05luhip7a]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T20:02:45.755Z"}
{"level":"debug","message":"Executing query [m8kmyrgd5ye0uomyie9]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742673765731\"]","timestamp":"2025-03-22T20:02:45.757Z"}
{"level":"debug","message":"Executing query [m8kmyrgfxdqh4qzifsf]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",3]","timestamp":"2025-03-22T20:02:45.759Z"}
{"level":"debug","message":"Executing query [m8kmyrgh43d9s79bfoc]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T20:02:45.761Z"}
{"level":"debug","message":"Executing query [m8kmyrgjf5lm1hcofz5]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T20:02:45.763Z"}
{"level":"debug","message":"Executing query [m8kmyrglxutxwlrxxw]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T20:02:45.765Z"}
{"level":"debug","message":"Executing query [m8kmyrgngymzrkf2sc9]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T20:02:45.767Z"}
{"level":"debug","message":"Executing query [m8kmyrgpihvrjqqvxxl]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T20:02:45.769Z"}
{"level":"debug","message":"Executing query [m8kmyrgrr474pau4wh]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-FORENSE-1742673765771\",\"TEST-SP-OFI-FORENSE-1742673765771\",5924,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T20:02:45.771Z"}
{"level":"debug","message":"Executing query [m8kmyrguyxdvaj5xrhs]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742673765771\"]","timestamp":"2025-03-22T20:02:45.774Z"}
{"level":"debug","message":"Executing query [m8kmyrgvu0478116u5r]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742673765771\"]","timestamp":"2025-03-22T20:02:45.775Z"}
{"level":"debug","message":"Executing query [m8kmyrgxn144nh1979]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:02:45.777Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:02:45.778Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:45.878Z"}
{"level":"debug","message":"Executing query [m8kmyrjsjg7t4c91ab]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:02:45.880Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:02:45.889Z"}
{"level":"debug","message":"Executing query [m8kmyrk22yx885bov77]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742673765879\"]","timestamp":"2025-03-22T20:02:45.890Z"}
{"level":"debug","message":"Executing query [m8kmyrk40vw4qk5oxuab]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742673765879\"]","timestamp":"2025-03-22T20:02:45.892Z"}
{"level":"debug","message":"Executing query [m8kmyrk5aanh9hgzijg]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742673765879\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:02:45.893Z"}
{"level":"debug","message":"Executing query [m8kmyrk9frlqqd4nh9h]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T20:02:45.897Z"}
{"level":"debug","message":"Executing query [m8kmyrkbfrgixezfdhv]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742673765879\"]","timestamp":"2025-03-22T20:02:45.899Z"}
{"level":"debug","message":"Executing query [m8kmyrkdv3aegw05wl]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1001]","timestamp":"2025-03-22T20:02:45.901Z"}
{"level":"debug","message":"Executing query [m8kmyrkgr9yt95g1z5]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T20:02:45.904Z"}
{"level":"debug","message":"Executing query [m8kmyrkitdj2dp2l7yk]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T20:02:45.906Z"}
{"level":"debug","message":"Executing query [m8kmyrklmzqr2peasxb]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T20:02:45.909Z"}
{"level":"debug","message":"Executing query [m8kmyrkmmaflbpdh8h]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T20:02:45.910Z"}
{"level":"debug","message":"Executing query [m8kmyrknotot1hhd0q]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T20:02:45.911Z"}
{"level":"debug","message":"Executing query [m8kmyrkq937fdfni6n]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T20:02:45.914Z"}
{"level":"debug","message":"Executing query [m8kmyrkrorw85pgzjgh]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T20:02:45.915Z"}
{"level":"debug","message":"Executing query [m8kmyrkt9gyhxfuk7g8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:02:45.917Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:02:45.918Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:46.013Z"}
{"level":"debug","message":"Executing query [m8kmyrnk64el39tsgkl]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:02:46.016Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:02:46.030Z"}
{"level":"debug","message":"Executing query [m8kmyrnzgqvikzgaaj5]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:02:46.031Z"}
{"level":"debug","message":"Executing query [m8kmyro1w07y6lbzza]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742673766015\"]","timestamp":"2025-03-22T20:02:46.033Z"}
{"level":"debug","message":"Executing query [m8kmyro2jny8nn5atod]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-DOSAJE-1742673766015\",\"TEST-OFICIO-1742673766015\",9146,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:02:46.034Z"}
{"level":"debug","message":"Executing query [m8kmyro6bmtm91gklyq]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T20:02:46.038Z"}
{"level":"debug","message":"Executing query [m8kmyro9ykr3iwnup1s]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742673766015\"]","timestamp":"2025-03-22T20:02:46.041Z"}
{"level":"debug","message":"Executing query [m8kmyrobopsv970k1y]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",3]","timestamp":"2025-03-22T20:02:46.043Z"}
{"level":"debug","message":"Executing query [m8kmyroejk1ivr8f8sg]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T20:02:46.046Z"}
{"level":"debug","message":"Executing query [m8kmyrohefrkt44grm9]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T20:02:46.049Z"}
{"level":"debug","message":"Executing query [m8kmyrok5zqdp51nt6]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T20:02:46.052Z"}
{"level":"debug","message":"Executing query [m8kmyromc100y6lp21]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T20:02:46.054Z"}
{"level":"debug","message":"Executing query [m8kmyropf5fca475rrc]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T20:02:46.057Z"}
{"level":"debug","message":"Executing query [m8kmyrorr4stznos6qn]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[888,\"TEST-SP-DOSAJE-1742673766059\",\"TEST-SP-OFICIO-1742673766059\",4611,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T20:02:46.059Z"}
{"level":"debug","message":"Executing query [m8kmyroua37ybh6uwd]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742673766059\"]","timestamp":"2025-03-22T20:02:46.062Z"}
{"level":"debug","message":"Executing query [m8kmyrowoi3betay2id]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742673766059\"]","timestamp":"2025-03-22T20:02:46.064Z"}
{"level":"debug","message":"Executing query [m8kmyrozsmkafi70grs]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:02:46.067Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:02:46.068Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:46.163Z"}
{"level":"debug","message":"Executing query [m8kmyrrqrz7jv6lzle]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:02:46.166Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:02:46.174Z"}
{"level":"debug","message":"Executing query [m8kmyrs0yvgb2ahqa8]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742673766165\"]","timestamp":"2025-03-22T20:02:46.176Z"}
{"level":"debug","message":"Executing query [m8kmyrs1db4v1w5gk0c]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742673766165\",true]","timestamp":"2025-03-22T20:02:46.178Z"}
{"level":"debug","message":"Executing query [m8kmyrs64tdcxhqb1kc]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T20:02:46.182Z"}
{"level":"debug","message":"Executing query [m8kmyrs8dua56d52ud9]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742673766165\"]","timestamp":"2025-03-22T20:02:46.184Z"}
{"level":"debug","message":"Executing query [m8kmyrsabjl6w41fln]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",4]","timestamp":"2025-03-22T20:02:46.186Z"}
{"level":"debug","message":"Executing query [m8kmyrsdc4mhb0xnzp8]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T20:02:46.189Z"}
{"level":"debug","message":"Executing query [m8kmyrsfaa4f2up5v8f]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T20:02:46.191Z"}
{"level":"debug","message":"Executing query [m8kmyrsjcedwy905fn6]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T20:02:46.195Z"}
{"level":"debug","message":"Executing query [m8kmyrsls2utkbz4imk]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T20:02:46.197Z"}
{"level":"debug","message":"Executing query [m8kmyrsnem8h09e40jg]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T20:02:46.199Z"}
{"level":"debug","message":"Executing query [m8kmyrsq58w9f2soqac]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T20:02:46.202Z"}
{"level":"debug","message":"Executing query [m8kmyrsrqov9xfmq5kl]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T20:02:46.203Z"}
{"level":"debug","message":"Executing query [m8kmyrss6xa6463zv7q]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:02:46.204Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:02:46.205Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:46.303Z"}
{"level":"debug","message":"Executing query [m8kmyrvlpe4qsu2hdce]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:02:46.305Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:02:46.317Z"}
{"level":"debug","message":"Executing query [m8kmyrvyvk9s9pcu75]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T20:02:46.318Z"}
{"level":"debug","message":"Executing query [m8kmyrvzvc7a16z2nxs]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T20:02:46.319Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T20:02:46.320Z"}
{"level":"debug","message":"Executing query [m8kmyrw1qx2utyi2gap]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T20:02:46.321Z"}
{"level":"debug","message":"Executing query [m8kmyrw2f3tw52ezq7b]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T20:02:46.322Z"}
{"level":"debug","message":"Executing query [m8kmyrw3gs6uotzd75j]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T20:02:46.323Z"}
{"level":"debug","message":"Executing query [m8kmyrw6a9nce4a30ao]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[4]","timestamp":"2025-03-22T20:02:46.326Z"}
{"level":"debug","message":"Executing query [m8kmyrw83qye3hktv89]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[4]","timestamp":"2025-03-22T20:02:46.328Z"}
{"level":"debug","message":"Executing query [m8kmyrwblgleok9972]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",4]","timestamp":"2025-03-22T20:02:46.331Z"}
{"level":"debug","message":"Executing query [m8kmyrwd9kzq8n2uq3b]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[4]","timestamp":"2025-03-22T20:02:46.333Z"}
{"level":"debug","message":"Executing query [m8kmyrwecnuvufzvy4i]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[4]","timestamp":"2025-03-22T20:02:46.334Z"}
{"level":"debug","message":"Executing query [m8kmyrwhnpyheakhbko]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[4]","timestamp":"2025-03-22T20:02:46.337Z"}
{"level":"debug","message":"Executing query [m8kmyrwi1pcpoi4ba1b]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:02:46.338Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:02:46.339Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:46.432Z"}
{"level":"debug","message":"Executing query [m8kmyrz7fkkpxayopuq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:02:46.435Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:02:46.443Z"}
{"level":"debug","message":"Executing query [m8kmyrzg1pvh7nhe06u]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T20:02:46.444Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T20:02:46.446Z"}
{"level":"debug","message":"Executing query [m8kmyrzjuq38qx5way]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T20:02:46.447Z"}
{"level":"debug","message":"Executing query [m8kmyrzk93cmeyn9sc4]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T20:02:46.448Z"}
{"level":"info","message":"No se encontraron suficientes Usuarios. Se requieren al menos dos Usuarios para las pruebas de derivación.","timestamp":"2025-03-22T20:02:46.449Z"}
{"level":"debug","message":"Executing query [m8kmyrzl1m74s7mzjeaj]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T20:02:46.449Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T20:02:46.451Z"}
{"level":"debug","message":"Executing query [m8kmyrzqe9hltg6ga5i]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T20:02:46.454Z"}
{"level":"debug","message":"Executing query [m8kmyrzsdnojx0w97z5]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[999]","timestamp":"2025-03-22T20:02:46.456Z"}
{"level":"debug","message":"Executing query [m8kmyrzuvlo556waqwd]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T20:02:46.458Z"}
{"level":"debug","message":"Executing query [m8kmyrzxp2nlvm27lv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:02:46.461Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:02:46.558Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:02:46.572Z"}
{"level":"debug","message":"Executing query [m8kmys33la8zfzmqkg9]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T20:02:46.575Z"}
{"level":"debug","message":"Executing query [m8kmys34fq8jkqfu4zh]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T20:02:46.576Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8kmys34fq8jkqfu4zh]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T20:02:46.578Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:02:46.579Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T20:02:46.654Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T20:02:46.751Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T20:02:46.845Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T20:02:46.846Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T20:02:46.846Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T20:02:46.847Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T20:02:46.848Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T20:02:46.848Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:06:12.356Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:06:12.360Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:06:12.641Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:06:12.833Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:06:19.699Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:06:19.702Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:06:19.958Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:06:20.144Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:09:10.247Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:09:10.251Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:09:10.522Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:09:10.716Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:11:02.519Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:11:02.523Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:11:02.804Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:11:03.009Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:11:44.494Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:11:44.498Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:11:44.786Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:11:44.996Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:11:54.538Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:11:54.542Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:11:54.809Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:11:55.012Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:12:43.971Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:12:43.974Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:12:44.236Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:12:44.431Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:12:55.779Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:12:55.782Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:12:56.073Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:12:56.275Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:17:20.205Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:17:20.209Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:17:20.517Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:17:20.745Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:17:22.458Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:17:22.462Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:17:22.723Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:17:22.923Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T20:17:32.445Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:17:40.050Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:17:40.054Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:17:40.353Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:17:40.577Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:20:25.400Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:20:25.403Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:20:25.676Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:20:25.868Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:24:50.422Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:24:50.425Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:24:50.686Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:24:50.881Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:25:20.571Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:25:20.575Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:25:20.853Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:25:21.045Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:25:47.415Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:25:47.418Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:25:47.667Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:25:47.853Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:26:11.202Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:26:11.205Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:26:11.455Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:26:11.658Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:28:07.055Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:28:07.058Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:28:07.331Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:28:07.541Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:28:14.620Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:28:14.624Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:28:14.885Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:28:15.087Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:28:33.275Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:28:33.279Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:28:33.551Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:28:33.741Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:29:49.471Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:29:49.474Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:29:49.742Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:29:49.950Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:30:15.596Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:30:15.599Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:30:15.856Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:30:16.048Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:30:20.588Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:30:20.591Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:30:20.849Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:30:21.039Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:31:02.178Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:31:02.181Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:31:02.434Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:31:02.623Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T20:31:52.313Z"}
{"level":"info","message":"🔒 Servidor seguro de documentación corriendo en http://localhost:3002","timestamp":"2025-03-22T20:31:52.319Z"}
{"level":"info","message":"📚 Documentación completa de API en http://localhost:3002/api-docs","timestamp":"2025-03-22T20:31:52.319Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:40.170Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:34:40.327Z"}
{"duration":"21ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T20:34:40.330Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T20:34:40.337Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:34:40.348Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:41.140Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T20:34:41.308Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:34:41.359Z"}
{"level":"debug","message":"Executing query [m8ko3tk6owph3th4cbq]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T20:34:41.382Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:34:41.429Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:42.553Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:34:42.620Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T20:34:42.623Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:42.937Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T20:34:42.955Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:34:42.993Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T20:34:43.005Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:34:43.100Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:43.304Z"}
{"level":"debug","message":"Executing query [m8ko3v1n88jx018iasg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:34:43.307Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:34:43.318Z"}
{"level":"debug","message":"Executing query [m8ko3v21joy96wu95l]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T20:34:43.321Z"}
{"level":"debug","message":"Executing query [m8ko3v23ws848s4m06j]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = ?","params":"[888]","timestamp":"2025-03-22T20:34:43.324Z"}
{"level":"debug","message":"Executing query [m8ko3v2anqkpin0jh7f]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Área Papelera\",\"TEST-PAPELERA\",\"PRUEBA\",1]","timestamp":"2025-03-22T20:34:43.330Z"}
{"level":"debug","message":"Executing query [m8ko3v2g3ioyuzwuozq]: SELECT IDRol FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-22T20:34:43.336Z"}
{"level":"debug","message":"Executing query [m8ko3v2j9uf59dif1lg]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Rol Papelera\",\"Rol para pruebas de papelera\",2,4]","timestamp":"2025-03-22T20:34:43.340Z"}
{"level":"debug","message":"Executing query [m8ko3v2qrlnr6k1r2hf]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TESTPAP123\",\"Usuario\",\"Papelera\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","timestamp":"2025-03-22T20:34:43.346Z"}
{"level":"debug","message":"Executing query [m8ko3v39fhg3tkg24po]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T20:34:43.365Z"}
{"level":"debug","message":"Executing query [m8ko3v3hnmgqcxi544]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1,888,2,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T20:34:43.373Z\",\"ACTIVO\"]","timestamp":"2025-03-22T20:34:43.373Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 2, Área ID: 888, Rol ID: 888, Documento ID: 1","timestamp":"2025-03-22T20:34:43.391Z"}
{"level":"debug","message":"Executing query [m8ko3v43a0vl0kuvfld]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T20:34:43.395Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8ko3v43a0vl0kuvfld]","params":"[1,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T20:34:43.406Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T20:34:43.407Z"}
{"level":"debug","message":"Executing query [m8ko3v4hrmr1a8q0fms]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T20:34:43.409Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8ko3v4hrmr1a8q0fms]","params":"[1]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T20:34:43.413Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T20:34:43.415Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T20:34:43.416Z"}
{"level":"debug","message":"Executing query [m8ko3v4q6d9h21m1ngy]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,2,\"RESTAURAR\"]","timestamp":"2025-03-22T20:34:43.418Z"}
{"level":"debug","message":"Executing query [m8ko3v4xhx9mbmd9arc]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T20:34:43.425Z"}
{"level":"debug","message":"Executing query [m8ko3v54mv6fuo5x1l]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T20:34:43.432Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8ko3v54mv6fuo5x1l]","params":"[1,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T20:34:43.437Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T20:34:43.438Z"}
{"level":"debug","message":"Executing query [m8ko3v5aa1kung3d3j5]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T20:34:43.438Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8ko3v5aa1kung3d3j5]","params":"[1]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T20:34:43.441Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T20:34:43.442Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T20:34:43.443Z"}
{"level":"debug","message":"Executing query [m8ko3v5g59kf8v950sf]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1,888,2,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T20:34:43.444Z\",\"ACTIVO\"]","timestamp":"2025-03-22T20:34:43.444Z"}
{"level":"debug","message":"Executing query [m8ko3v5kvwea57iw9sa]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T20:34:43.448Z"}
{"level":"debug","message":"Executing query [m8ko3v5oehklx7z0o2u]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[2,\"DOCUMENTO\",2,\"ELIMINAR\"]","timestamp":"2025-03-22T20:34:43.452Z"}
{"level":"debug","message":"Executing query [m8ko3v5sfjueivq0kt]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[2]","timestamp":"2025-03-22T20:34:43.456Z"}
{"level":"debug","message":"Executing query [m8ko3v5yknsmcipwzb]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T20:34:43.463Z"}
{"level":"debug","message":"Executing query [m8ko3v66s22widijrk]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-22T20:34:43.470Z"}
{"level":"debug","message":"Executing query [m8ko3v69a8cdn3uklys]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:34:43.473Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:34:43.477Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:44.167Z"}
{"level":"debug","message":"Executing query [m8ko3vpmee3wz28mvv5]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:34:44.170Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:34:44.184Z"}
{"level":"debug","message":"Executing query [m8ko3vq20zy25sdwj1r]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:34:44.186Z"}
{"level":"debug","message":"Executing query [m8ko3vq4ym9ptr158wh]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742675684169\"]","timestamp":"2025-03-22T20:34:44.188Z"}
{"level":"debug","message":"Executing query [m8ko3vq8kcblbyf6ykj]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742675684169\",\"TEST-OFI-QUIMICA-1742675684169\",4667,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:34:44.192Z"}
{"level":"debug","message":"Executing query [m8ko3vqf6jpiec66ghj]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.199Z"}
{"level":"debug","message":"Executing query [m8ko3vqlkqgqkbie7zo]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742675684169\"]","timestamp":"2025-03-22T20:34:44.205Z"}
{"level":"debug","message":"Executing query [m8ko3vqolsh5x7k55xc]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",1]","timestamp":"2025-03-22T20:34:44.208Z"}
{"level":"debug","message":"Executing query [m8ko3vqrgj1iabcneo]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.211Z"}
{"level":"debug","message":"Executing query [m8ko3vqumapgtuptowe]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.214Z"}
{"level":"debug","message":"Executing query [m8ko3vqyq8fbr9vgg2f]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.218Z"}
{"level":"debug","message":"Executing query [m8ko3vr0jza6bu32ta]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.220Z"}
{"level":"debug","message":"Executing query [m8ko3vr78em0cik7nqm]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.227Z"}
{"level":"debug","message":"Executing query [m8ko3vracr0nche61h]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:34:44.230Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:34:44.231Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:44.372Z"}
{"level":"debug","message":"Executing query [m8ko3vvcswbvu5dpcge]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:34:44.377Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:34:44.391Z"}
{"level":"debug","message":"Executing query [m8ko3vvshbccwyd6au6]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:34:44.392Z"}
{"level":"debug","message":"Executing query [m8ko3vvvy572eki70i]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742675684375\"]","timestamp":"2025-03-22T20:34:44.395Z"}
{"level":"debug","message":"Executing query [m8ko3vvyglc1jcxlzph]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742675684375\",\"TEST-OFICIO-1742675684375\",4957,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:34:44.398Z"}
{"level":"debug","message":"Executing query [m8ko3vw4i0ti04ci5qj]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.404Z"}
{"level":"debug","message":"Executing query [m8ko3vw8k7isxolvjko]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742675684375\"]","timestamp":"2025-03-22T20:34:44.408Z"}
{"level":"debug","message":"Executing query [m8ko3vwekmj4whcbdta]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",1]","timestamp":"2025-03-22T20:34:44.414Z"}
{"level":"debug","message":"Executing query [m8ko3vwjqtmttm6h8fg]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.419Z"}
{"level":"debug","message":"Executing query [m8ko3vwn143k8xl8swz]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.423Z"}
{"level":"debug","message":"Executing query [m8ko3vwri4gxdnl53u]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.428Z"}
{"level":"debug","message":"Executing query [m8ko3vwuev7txg6gkod]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.430Z"}
{"level":"debug","message":"Executing query [m8ko3vwxpbw30dcxvc]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.433Z"}
{"level":"debug","message":"Executing query [m8ko3vx1fp0q55fbhac]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742675684437\",\"TEST-SP-OFICIO-1742675684437\",9563,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T20:34:44.438Z"}
{"level":"debug","message":"Executing query [m8ko3vx6p86qjyfiw9]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742675684437\"]","timestamp":"2025-03-22T20:34:44.442Z"}
{"level":"debug","message":"Executing query [m8ko3vx88koylmqmqo6]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742675684437\"]","timestamp":"2025-03-22T20:34:44.444Z"}
{"level":"debug","message":"Executing query [m8ko3vxh4xutifwkn7]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:34:44.453Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:34:44.455Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:44.604Z"}
{"level":"debug","message":"Executing query [m8ko3w1r6tcpxujixgt]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:34:44.607Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:34:44.628Z"}
{"level":"debug","message":"Executing query [m8ko3w2edyfypum96tv]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:34:44.630Z"}
{"level":"debug","message":"Executing query [m8ko3w2hzgnc907gzuf]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742675684606\"]","timestamp":"2025-03-22T20:34:44.633Z"}
{"level":"debug","message":"Executing query [m8ko3w2ncwyg7022tb6]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742675684606\",\"TEST-OFI-FORENSE-1742675684606\",2282,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742675684606\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:34:44.639Z"}
{"level":"debug","message":"Executing query [m8ko3w2vqf2k1287naq]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.647Z"}
{"level":"debug","message":"Executing query [m8ko3w2zke1lv1cjgso]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742675684606\"]","timestamp":"2025-03-22T20:34:44.651Z"}
{"level":"debug","message":"Executing query [m8ko3w32pkyr4idn7h]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",1]","timestamp":"2025-03-22T20:34:44.655Z"}
{"level":"debug","message":"Executing query [m8ko3w36z75o0ir5gq]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.658Z"}
{"level":"debug","message":"Executing query [m8ko3w39qqfrm0udqb]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.661Z"}
{"level":"debug","message":"Executing query [m8ko3w3deuhdi5g5ywi]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.665Z"}
{"level":"debug","message":"Executing query [m8ko3w3gomj3k73thl]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.668Z"}
{"level":"debug","message":"Executing query [m8ko3w3kfppounzjxyh]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-22T20:34:44.672Z"}
{"level":"debug","message":"Executing query [m8ko3w3nyc5jnz7f97]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742675684675\",\"TEST-SP-OFI-FORENSE-1742675684675\",1351,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T20:34:44.675Z"}
{"level":"debug","message":"Executing query [m8ko3w3syfhrfgoituc]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742675684675\"]","timestamp":"2025-03-22T20:34:44.680Z"}
{"level":"debug","message":"Executing query [m8ko3w3u9ljaj77e3yo]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742675684675\"]","timestamp":"2025-03-22T20:34:44.682Z"}
{"level":"debug","message":"Executing query [m8ko3w3yb19e34b9goa]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:34:44.686Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:34:44.688Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:44.817Z"}
{"level":"debug","message":"Executing query [m8ko3w7okp1nup3qc6]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:34:44.820Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:34:44.834Z"}
{"level":"debug","message":"Executing query [m8ko3w82347gdy9sjg]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742675684819\"]","timestamp":"2025-03-22T20:34:44.835Z"}
{"level":"debug","message":"Executing query [m8ko3w86wbta1yu60ll]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742675684819\"]","timestamp":"2025-03-22T20:34:44.838Z"}
{"level":"debug","message":"Executing query [m8ko3w87rfsq4p2h9t]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742675684819\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:34:44.839Z"}
{"level":"debug","message":"Executing query [m8ko3w8elaj77a5f3pi]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[889]","timestamp":"2025-03-22T20:34:44.846Z"}
{"level":"debug","message":"Executing query [m8ko3w8htu4ndvfm4l]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742675684819\"]","timestamp":"2025-03-22T20:34:44.849Z"}
{"level":"debug","message":"Executing query [m8ko3w8j5uv5wtr2dfh]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",889]","timestamp":"2025-03-22T20:34:44.851Z"}
{"level":"debug","message":"Executing query [m8ko3w8q6rc9gi9je8p]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[889]","timestamp":"2025-03-22T20:34:44.858Z"}
{"level":"debug","message":"Executing query [m8ko3w8tmpz67chsj6i]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[889]","timestamp":"2025-03-22T20:34:44.861Z"}
{"level":"debug","message":"Executing query [m8ko3w90y02b4he39ha]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[889]","timestamp":"2025-03-22T20:34:44.868Z"}
{"level":"debug","message":"Executing query [m8ko3w938psrdh92qbu]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[889]","timestamp":"2025-03-22T20:34:44.871Z"}
{"level":"debug","message":"Executing query [m8ko3w95k7noovl4led]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[889]","timestamp":"2025-03-22T20:34:44.873Z"}
{"level":"debug","message":"Executing query [m8ko3w9b8zf09aptw4w]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[889]","timestamp":"2025-03-22T20:34:44.879Z"}
{"level":"debug","message":"Executing query [m8ko3w9emxakrqkzdmg]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T20:34:44.882Z"}
{"level":"debug","message":"Executing query [m8ko3w9h485wq3hree5]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:34:44.885Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:34:44.887Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:45.032Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:45.040Z"}
{"level":"debug","message":"Executing query [m8ko3wdv8dvr0p021is]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:34:45.043Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:34:45.063Z"}
{"level":"debug","message":"Executing query [m8ko3weia2pm328iw89]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T20:34:45.066Z"}
{"level":"debug","message":"Executing query [m8ko3wekacbovnub63]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T20:34:45.068Z"}
{"level":"debug","message":"Executing query [m8ko3welm2y3wu9uoz]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive, Descripcion) VALUES (?, ?, ?, ?, ?, ?)","params":"[999,\"Área de Prueba\",\"TEST-AREA\",\"PRUEBA\",1,\"Área creada para pruebas\"]","timestamp":"2025-03-22T20:34:45.069Z"}
{"level":"debug","message":"Executing query [m8ko3weua28l7j7xexp]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[999,\"Rol de Prueba\",\"Rol creado para pruebas\",1,255]","timestamp":"2025-03-22T20:34:45.078Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T20:34:45.084Z"}
{"level":"debug","message":"Executing query [m8ko3wf1zcdsayyesbb]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:34:45.085Z"}
{"level":"debug","message":"Executing query [m8ko3wf2indrtmjaqj]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:34:45.086Z"}
{"level":"debug","message":"Executing query [m8ko3wf4uaxol033ut9]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:34:45.088Z"}
{"level":"debug","message":"Executing query [m8ko3wf6ducdvrjhsge]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T20:34:45.090Z"}
{"level":"debug","message":"Executing query [m8ko3wfeo6x9o9m3z8g]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T20:34:45.098Z"}
{"level":"debug","message":"Executing query [m8ko3wfisyz8r32hn]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:34:45.103Z"}
{"level":"debug","message":"Executing query [m8ko3wfncexy5knnz4o]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",3]","timestamp":"2025-03-22T20:34:45.107Z"}
{"level":"debug","message":"Executing query [m8ko3wfs8a2yum7vs8o]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T20:34:45.112Z"}
{"level":"debug","message":"Executing query [m8ko3wfvf6y5i2f4aho]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T20:34:45.115Z"}
{"level":"debug","message":"Executing query [m8ko3wg0xitfzfgaqw]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-22T20:34:45.120Z"}
{"level":"debug","message":"Executing query [m8ko3wg2mvgy46l6pw]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:34:45.123Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:34:45.124Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:45.266Z"}
{"level":"debug","message":"Executing query [m8ko3wk6dajh8r3g0al]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:34:45.270Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:34:45.281Z"}
{"level":"debug","message":"Executing query [m8ko3wkjj7ptk3rz0mb]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742675685269\"]","timestamp":"2025-03-22T20:34:45.283Z"}
{"level":"debug","message":"Executing query [m8ko3wkkljm577qus7h]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742675685269\",true]","timestamp":"2025-03-22T20:34:45.284Z"}
{"level":"debug","message":"Executing query [m8ko3wkr3k23ld2fthi]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T20:34:45.292Z"}
{"level":"debug","message":"Executing query [m8ko3wkv2jwb8rq5gfz]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742675685269\"]","timestamp":"2025-03-22T20:34:45.295Z"}
{"level":"debug","message":"Executing query [m8ko3wky4c2bjgxlxmu]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",2]","timestamp":"2025-03-22T20:34:45.298Z"}
{"level":"debug","message":"Executing query [m8ko3wl2soiof16j2z]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T20:34:45.302Z"}
{"level":"debug","message":"Executing query [m8ko3wl614qmq1buffci]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T20:34:45.306Z"}
{"level":"debug","message":"Executing query [m8ko3wlapk7rsqb10fj]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T20:34:45.310Z"}
{"level":"debug","message":"Executing query [m8ko3wleetbic1o6x25]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T20:34:45.314Z"}
{"level":"debug","message":"Executing query [m8ko3wlkcnvbgoanwx]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T20:34:45.320Z"}
{"level":"debug","message":"Executing query [m8ko3wloi31x7c0fzz]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-22T20:34:45.324Z"}
{"level":"debug","message":"Executing query [m8ko3wlq5ogd8w41897]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T20:34:45.326Z"}
{"level":"debug","message":"Executing query [m8ko3wlsdwryr9t5ege]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:34:45.328Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:34:45.329Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:45.496Z"}
{"level":"debug","message":"Executing query [m8ko3wqlo60ocu5my2]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:34:45.501Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:34:45.524Z"}
{"level":"debug","message":"Executing query [m8ko3wr96ca503a09qx]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T20:34:45.525Z"}
{"level":"debug","message":"Executing query [m8ko3wrb40hobrxvcuw]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T20:34:45.527Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T20:34:45.529Z"}
{"level":"debug","message":"Executing query [m8ko3wrevzjqtdddm3j]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T20:34:45.530Z"}
{"level":"debug","message":"Executing query [m8ko3wrgngxf4igqh7]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T20:34:45.532Z"}
{"level":"debug","message":"Executing query [m8ko3wrh5834t2tbwyu]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T20:34:45.533Z"}
{"level":"debug","message":"Executing query [m8ko3wrlusxb0lqxx3p]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-22T20:34:45.537Z"}
{"level":"debug","message":"Executing query [m8ko3wrodnnfl1ht4v]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-22T20:34:45.540Z"}
{"level":"debug","message":"Executing query [m8ko3wrso09gxiemnkl]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",2]","timestamp":"2025-03-22T20:34:45.544Z"}
{"level":"debug","message":"Executing query [m8ko3wrx9lka8d3v1el]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-22T20:34:45.549Z"}
{"level":"debug","message":"Executing query [m8ko3ws0h9ufonklvy9]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-22T20:34:45.552Z"}
{"level":"debug","message":"Executing query [m8ko3ws55rxtrpghvr7]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-22T20:34:45.557Z"}
{"level":"debug","message":"Executing query [m8ko3ws8urzia5px9am]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:34:45.560Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:34:45.562Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:45.719Z"}
{"level":"debug","message":"Executing query [m8ko3wwtm21ngcv2a2]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:34:45.725Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:34:45.738Z"}
{"level":"debug","message":"Executing query [m8ko3wx82yra6vuikrq]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T20:34:45.740Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T20:34:45.742Z"}
{"level":"debug","message":"Executing query [m8ko3wxaogl37eg762]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T20:34:45.742Z"}
{"level":"debug","message":"Executing query [m8ko3wxc92wjn06k85]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T20:34:45.744Z"}
{"level":"debug","message":"Executing query [m8ko3wxdol1gxx4joxk]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T20:34:45.745Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T20:34:45.747Z"}
{"level":"debug","message":"Executing query [m8ko3wxgbq03ln4wsbd]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[1,1,888]","timestamp":"2025-03-22T20:34:45.748Z"}
{"level":"debug","message":"Executing query [m8ko3wxi6whqzlzyp0j]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1,null,1,888,1,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-22T20:34:45.750Z"}
{"level":"debug","message":"Executing query [m8ko3wxo1r8yxt7rkva]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-22T20:34:45.756Z"}
{"level":"debug","message":"Executing query [m8ko3wxreww59cw3dqr]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-22 20:34:45\",2,1]","timestamp":"2025-03-22T20:34:45.759Z"}
{"level":"debug","message":"Executing query [m8ko3wxv3hkj1r0jhdm]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-22T20:34:45.763Z"}
{"level":"debug","message":"Executing query [m8ko3wxy1adk34idq1x]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T20:34:45.766Z"}
{"level":"debug","message":"Executing query [m8ko3wy1nicson9so8l]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[888]","timestamp":"2025-03-22T20:34:45.769Z"}
{"level":"debug","message":"Executing query [m8ko3wy4ez9t81onjim]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-22T20:34:45.772Z"}
{"level":"debug","message":"Executing query [m8ko3wy7xmsovsq82ns]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-22T20:34:45.775Z"}
{"level":"debug","message":"Executing query [m8ko3wyat38dtudrsi]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-22T20:34:45.778Z"}
{"level":"debug","message":"Executing query [m8ko3wyebdbh78za7c]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:34:45.783Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:34:45.938Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:34:45.961Z"}
{"level":"debug","message":"Executing query [m8ko3x3g56laamd8mfa]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T20:34:45.964Z"}
{"level":"debug","message":"Executing query [m8ko3x3ib4guxwztvy]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T20:34:45.966Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8ko3x3ib4guxwztvy]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T20:34:45.967Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:34:45.968Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T20:34:46.054Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T20:34:46.165Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T20:34:46.280Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T20:34:46.281Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T20:34:46.282Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T20:34:46.282Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T20:34:46.283Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T20:34:46.283Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:13.264Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:37:13.420Z"}
{"duration":"22ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T20:37:13.423Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T20:37:13.427Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:37:13.436Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:14.067Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:37:14.119Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T20:37:14.121Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:14.646Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T20:37:14.807Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:37:14.863Z"}
{"level":"debug","message":"Executing query [m8ko7406em50ujhqxg9]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T20:37:14.887Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:37:14.919Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:15.276Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T20:37:15.291Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:37:15.319Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T20:37:15.329Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:37:15.358Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:15.457Z"}
{"level":"debug","message":"Executing query [m8ko74g3lm3ctm8rl5k]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:37:15.459Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:37:15.470Z"}
{"level":"debug","message":"Executing query [m8ko74ggp3ywqaf85bk]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T20:37:15.472Z"}
{"level":"info","message":"Usando usuario existente ID: 2","timestamp":"2025-03-22T20:37:15.474Z"}
{"level":"debug","message":"Executing query [m8ko74gi70krtioybdm]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T20:37:15.474Z"}
{"level":"debug","message":"Executing query [m8ko74gno5nltykjafc]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[3,888,2,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T20:37:15.479Z\",\"ACTIVO\"]","timestamp":"2025-03-22T20:37:15.480Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 2, Área ID: 888, Rol ID: 888, Documento ID: 3","timestamp":"2025-03-22T20:37:15.483Z"}
{"level":"debug","message":"Executing query [m8ko74gtzd663ue5ztg]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T20:37:15.485Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8ko74gtzd663ue5ztg]","params":"[3,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T20:37:15.497Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T20:37:15.498Z"}
{"level":"debug","message":"Executing query [m8ko74h7k017v8nybwc]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T20:37:15.499Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8ko74h7k017v8nybwc]","params":"[3]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T20:37:15.501Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T20:37:15.502Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T20:37:15.502Z"}
{"level":"debug","message":"Executing query [m8ko74hcjrhp7aqqxf]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,2,\"RESTAURAR\"]","timestamp":"2025-03-22T20:37:15.504Z"}
{"level":"debug","message":"Executing query [m8ko74hhp8maoyxn3h]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T20:37:15.509Z"}
{"level":"debug","message":"Executing query [m8ko74hjq03kmmeljr9]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[3,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T20:37:15.512Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8ko74hjq03kmmeljr9]","params":"[3,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T20:37:15.515Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T20:37:15.515Z"}
{"level":"debug","message":"Executing query [m8ko74hon9ex7j7krlp]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T20:37:15.516Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8ko74hon9ex7j7krlp]","params":"[3]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T20:37:15.518Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T20:37:15.519Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T20:37:15.520Z"}
{"level":"debug","message":"Executing query [m8ko74hsrrhe54hud5f]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[3,888,2,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T20:37:15.520Z\",\"ACTIVO\"]","timestamp":"2025-03-22T20:37:15.520Z"}
{"level":"debug","message":"Executing query [m8ko74hw289blr0w0b]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T20:37:15.524Z"}
{"level":"debug","message":"Executing query [m8ko74hyz3dxroiljd]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[2,\"DOCUMENTO\",4,\"ELIMINAR\"]","timestamp":"2025-03-22T20:37:15.526Z"}
{"level":"debug","message":"Executing query [m8ko74i0ulsp5yrwc0h]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[4]","timestamp":"2025-03-22T20:37:15.528Z"}
{"level":"debug","message":"Executing query [m8ko74i3y9ekgufpver]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T20:37:15.531Z"}
{"level":"debug","message":"Executing query [m8ko74i60sy3r0jqwss]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[3]","timestamp":"2025-03-22T20:37:15.534Z"}
{"level":"debug","message":"Executing query [m8ko74i9ji1ba877x8]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:37:15.537Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:37:15.538Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:15.640Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:15.647Z"}
{"level":"debug","message":"Executing query [m8ko74lcpxj938raqqe]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:37:15.648Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:37:15.658Z"}
{"level":"debug","message":"Executing query [m8ko74loimh6nb44pfa]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T20:37:15.660Z"}
{"level":"debug","message":"Executing query [m8ko74lph8esbs04zz]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T20:37:15.661Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T20:37:15.662Z"}
{"level":"debug","message":"Executing query [m8ko74lreg9j05wj7yl]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:37:15.663Z"}
{"level":"debug","message":"Executing query [m8ko74lrhu9zwuprl35]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:37:15.663Z"}
{"level":"debug","message":"Executing query [m8ko74lt0ccl9tb3dfpu]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:37:15.665Z"}
{"level":"debug","message":"Executing query [m8ko74luo14mclqo19m]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T20:37:15.666Z"}
{"level":"debug","message":"Executing query [m8ko74lysk4hx0n6wsm]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-22T20:37:15.670Z"}
{"level":"debug","message":"Executing query [m8ko74m07fua6e4g7l6]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:37:15.672Z"}
{"level":"debug","message":"Executing query [m8ko74m2ec70uv61w0f]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",4]","timestamp":"2025-03-22T20:37:15.674Z"}
{"level":"debug","message":"Executing query [m8ko74m4g9f35fihtv]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-22T20:37:15.676Z"}
{"level":"debug","message":"Executing query [m8ko74m6jhwe3xu254]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-22T20:37:15.678Z"}
{"level":"debug","message":"Executing query [m8ko74m97897zcmlof]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[4]","timestamp":"2025-03-22T20:37:15.681Z"}
{"level":"debug","message":"Executing query [m8ko74mbbgn1jrsdkhs]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:37:15.683Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:37:15.683Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:15.783Z"}
{"level":"debug","message":"Executing query [m8ko74p62acf57iyesg]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:37:15.786Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:37:15.794Z"}
{"level":"debug","message":"Executing query [m8ko74pfzi65oyjdqxr]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:37:15.795Z"}
{"level":"debug","message":"Executing query [m8ko74pi8eqmowsn5gn]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742675835785\"]","timestamp":"2025-03-22T20:37:15.798Z"}
{"level":"debug","message":"Executing query [m8ko74pjyysf22hhg0l]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742675835785\",\"TEST-OFI-QUIMICA-1742675835785\",1626,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:37:15.799Z"}
{"level":"debug","message":"Executing query [m8ko74pnz0iarmh4z2]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T20:37:15.803Z"}
{"level":"debug","message":"Executing query [m8ko74ppo97vjjyxmme]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742675835785\"]","timestamp":"2025-03-22T20:37:15.805Z"}
{"level":"debug","message":"Executing query [m8ko74psmmzvp0g9co]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",2]","timestamp":"2025-03-22T20:37:15.808Z"}
{"level":"debug","message":"Executing query [m8ko74pv8zyslaa97d]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T20:37:15.811Z"}
{"level":"debug","message":"Executing query [m8ko74pxeanxhuoariv]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T20:37:15.814Z"}
{"level":"debug","message":"Executing query [m8ko74q0pmphbz4ekl]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T20:37:15.816Z"}
{"level":"debug","message":"Executing query [m8ko74q1j3acw6a0y5]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T20:37:15.817Z"}
{"level":"debug","message":"Executing query [m8ko74q3x6s9f9v7gjm]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[2]","timestamp":"2025-03-22T20:37:15.819Z"}
{"level":"debug","message":"Executing query [m8ko74q5tg9sz4ypqyg]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:37:15.821Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:37:15.822Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:15.921Z"}
{"level":"debug","message":"Executing query [m8ko74t13pl4yuu513x]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:37:15.925Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:37:15.934Z"}
{"level":"debug","message":"Executing query [m8ko74tbac8qitliyrf]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:37:15.935Z"}
{"level":"debug","message":"Executing query [m8ko74tegguj0h57cmd]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742675835924\"]","timestamp":"2025-03-22T20:37:15.938Z"}
{"level":"debug","message":"Executing query [m8ko74tg56o52wiwdkt]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742675835924\",\"TEST-OFI-FORENSE-1742675835924\",3338,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742675835924\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:37:15.940Z"}
{"level":"debug","message":"Executing query [m8ko74tm89erf00i70a]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T20:37:15.946Z"}
{"level":"debug","message":"Executing query [m8ko74toqd1k67nyiyn]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742675835924\"]","timestamp":"2025-03-22T20:37:15.948Z"}
{"level":"debug","message":"Executing query [m8ko74tqlbad6mimfcr]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",3]","timestamp":"2025-03-22T20:37:15.950Z"}
{"level":"debug","message":"Executing query [m8ko74ts3xu6rmuwo9g]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T20:37:15.952Z"}
{"level":"debug","message":"Executing query [m8ko74tuyrnj2p7ose]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T20:37:15.954Z"}
{"level":"debug","message":"Executing query [m8ko74twort39307lu]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T20:37:15.956Z"}
{"level":"debug","message":"Executing query [m8ko74ty7etfpe2unh9]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T20:37:15.958Z"}
{"level":"debug","message":"Executing query [m8ko74u00t1sd37yvtwq]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[3]","timestamp":"2025-03-22T20:37:15.960Z"}
{"level":"debug","message":"Executing query [m8ko74u2224ssti3w0qj]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742675835962\",\"TEST-SP-OFI-FORENSE-1742675835962\",2318,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T20:37:15.962Z"}
{"level":"debug","message":"Executing query [m8ko74u4ag09iqfd3ed]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742675835962\"]","timestamp":"2025-03-22T20:37:15.964Z"}
{"level":"debug","message":"Executing query [m8ko74u6ubqcxillrtb]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742675835962\"]","timestamp":"2025-03-22T20:37:15.966Z"}
{"level":"debug","message":"Executing query [m8ko74u8ruxk33u9dzk]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:37:15.968Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:37:15.969Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:16.066Z"}
{"level":"debug","message":"Executing query [m8ko74x13favlb74jls]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:37:16.069Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:37:16.080Z"}
{"level":"debug","message":"Executing query [m8ko74xdzckgljtpzed]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T20:37:16.081Z"}
{"level":"debug","message":"Executing query [m8ko74xewlnk61gw9b]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T20:37:16.082Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T20:37:16.084Z"}
{"level":"debug","message":"Executing query [m8ko74xh2bj1wnqcv2t]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T20:37:16.085Z"}
{"level":"debug","message":"Executing query [m8ko74xig8lb7v5evvn]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T20:37:16.086Z"}
{"level":"debug","message":"Executing query [m8ko74xjt4gqwly5x1q]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T20:37:16.087Z"}
{"level":"debug","message":"Executing query [m8ko74xnkn25sdqh4ye]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[4]","timestamp":"2025-03-22T20:37:16.091Z"}
{"level":"debug","message":"Executing query [m8ko74xqfaz9tk6mk1e]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[4]","timestamp":"2025-03-22T20:37:16.094Z"}
{"level":"debug","message":"Executing query [m8ko74xs9nkh73f6epn]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",4]","timestamp":"2025-03-22T20:37:16.096Z"}
{"level":"debug","message":"Executing query [m8ko74xuklbordvlti]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[4]","timestamp":"2025-03-22T20:37:16.098Z"}
{"level":"debug","message":"Executing query [m8ko74xwz3drk48jdv]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[4]","timestamp":"2025-03-22T20:37:16.100Z"}
{"level":"debug","message":"Executing query [m8ko74xzpksuqgqjbv]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[4]","timestamp":"2025-03-22T20:37:16.103Z"}
{"level":"debug","message":"Executing query [m8ko74y0bm9qtlqso5]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:37:16.105Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:37:16.106Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:16.202Z"}
{"level":"debug","message":"Executing query [m8ko750tv38qwvkjxcf]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:37:16.205Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:37:16.214Z"}
{"level":"debug","message":"Executing query [m8ko7513oj6warnfoa]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:37:16.215Z"}
{"level":"debug","message":"Executing query [m8ko75155bwkkw0d8od]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742675836204\"]","timestamp":"2025-03-22T20:37:16.217Z"}
{"level":"debug","message":"Executing query [m8ko7516e2xgkwb8yzs]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742675836204\",\"TEST-OFICIO-1742675836204\",8871,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:37:16.218Z"}
{"level":"debug","message":"Executing query [m8ko7519cn1p69vp7dj]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T20:37:16.221Z"}
{"level":"debug","message":"Executing query [m8ko751c0t46sxxrccja]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742675836204\"]","timestamp":"2025-03-22T20:37:16.224Z"}
{"level":"debug","message":"Executing query [m8ko751eprzt9db9pq]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",3]","timestamp":"2025-03-22T20:37:16.226Z"}
{"level":"debug","message":"Executing query [m8ko751gtwdincae7ko]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T20:37:16.229Z"}
{"level":"debug","message":"Executing query [m8ko751izh3laprv1b]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T20:37:16.230Z"}
{"level":"debug","message":"Executing query [m8ko751k6yezuzxf0mg]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T20:37:16.232Z"}
{"level":"debug","message":"Executing query [m8ko751lmljya403eg]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T20:37:16.233Z"}
{"level":"debug","message":"Executing query [m8ko751n0mk4hprq5zgr]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[3]","timestamp":"2025-03-22T20:37:16.236Z"}
{"level":"debug","message":"Executing query [m8ko751pyaw3n03989r]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742675836237\",\"TEST-SP-OFICIO-1742675836237\",1556,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T20:37:16.237Z"}
{"level":"debug","message":"Executing query [m8ko751ty5e29k70aa9]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742675836237\"]","timestamp":"2025-03-22T20:37:16.241Z"}
{"level":"debug","message":"Executing query [m8ko751u7r4nnj1bcbs]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742675836237\"]","timestamp":"2025-03-22T20:37:16.242Z"}
{"level":"debug","message":"Executing query [m8ko751xan1wfhrzmgw]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:37:16.245Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:37:16.245Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:16.343Z"}
{"level":"debug","message":"Executing query [m8ko754q2a653rtefdx]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:37:16.346Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:37:16.358Z"}
{"level":"debug","message":"Executing query [m8ko7553so2mxd469m]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T20:37:16.359Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T20:37:16.360Z"}
{"level":"debug","message":"Executing query [m8ko7555tgsfe7agmt]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T20:37:16.361Z"}
{"level":"debug","message":"Executing query [m8ko75560ave3zv62lu]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T20:37:16.362Z"}
{"level":"debug","message":"Executing query [m8ko7557luo6cupt3zd]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T20:37:16.363Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T20:37:16.364Z"}
{"level":"debug","message":"Executing query [m8ko7559kq5ivqkmtdq]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[3,1,888]","timestamp":"2025-03-22T20:37:16.365Z"}
{"level":"debug","message":"Executing query [m8ko755a0afyh151mqwd]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[3,null,1,888,1,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-22T20:37:16.366Z"}
{"level":"debug","message":"Executing query [m8ko755g4ihsv0ebsv]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[2]","timestamp":"2025-03-22T20:37:16.372Z"}
{"level":"debug","message":"Executing query [m8ko755ixu4fq9w8p7]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-22 20:37:16\",2,2]","timestamp":"2025-03-22T20:37:16.374Z"}
{"level":"debug","message":"Executing query [m8ko755la12opmaugpm]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[2]","timestamp":"2025-03-22T20:37:16.377Z"}
{"level":"debug","message":"Executing query [m8ko755m4sob4dak9xt]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T20:37:16.379Z"}
{"level":"debug","message":"Executing query [m8ko755ovqi0j1q8nyi]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[888]","timestamp":"2025-03-22T20:37:16.380Z"}
{"level":"debug","message":"Executing query [m8ko755pfn4zw2g7woe]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[2]","timestamp":"2025-03-22T20:37:16.381Z"}
{"level":"debug","message":"Executing query [m8ko755s34sgdzbretu]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[2]","timestamp":"2025-03-22T20:37:16.384Z"}
{"level":"debug","message":"Executing query [m8ko755tdxqn10josrt]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[3]","timestamp":"2025-03-22T20:37:16.385Z"}
{"level":"debug","message":"Executing query [m8ko755wpbyp709rqc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:37:16.388Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:16.483Z"}
{"level":"debug","message":"Executing query [m8ko758limp5tsl93gm]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:37:16.485Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:37:16.494Z"}
{"level":"debug","message":"Executing query [m8ko758w42tv9ei5cmu]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742675836485\"]","timestamp":"2025-03-22T20:37:16.496Z"}
{"level":"debug","message":"Executing query [m8ko758xy3o2ehdmge]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742675836485\",true]","timestamp":"2025-03-22T20:37:16.497Z"}
{"level":"debug","message":"Executing query [m8ko7591o235u71brn9]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T20:37:16.501Z"}
{"level":"debug","message":"Executing query [m8ko7594zwnu91s2ai]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742675836485\"]","timestamp":"2025-03-22T20:37:16.504Z"}
{"level":"debug","message":"Executing query [m8ko7596l5porpzyfsm]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",4]","timestamp":"2025-03-22T20:37:16.506Z"}
{"level":"debug","message":"Executing query [m8ko75990hr5mveayq6]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T20:37:16.509Z"}
{"level":"debug","message":"Executing query [m8ko759ap75m1nedc2]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T20:37:16.510Z"}
{"level":"debug","message":"Executing query [m8ko759dg8zgub9rpu9]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T20:37:16.513Z"}
{"level":"debug","message":"Executing query [m8ko759ewd3ohr5e3qj]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T20:37:16.514Z"}
{"level":"debug","message":"Executing query [m8ko759fy2s0apj96yd]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T20:37:16.515Z"}
{"level":"debug","message":"Executing query [m8ko759ikosusx5cid]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[4]","timestamp":"2025-03-22T20:37:16.518Z"}
{"level":"debug","message":"Executing query [m8ko759kccg1i1r6q1m]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T20:37:16.520Z"}
{"level":"debug","message":"Executing query [m8ko759lejtjesxvnw5]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:37:16.521Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:37:16.522Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:16.617Z"}
{"level":"debug","message":"Executing query [m8ko75cccrj94cv6ho]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:37:16.620Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:37:16.632Z"}
{"level":"debug","message":"Executing query [m8ko75cp31wmyhkjbaw]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742675836619\"]","timestamp":"2025-03-22T20:37:16.633Z"}
{"level":"debug","message":"Executing query [m8ko75crcxku5yxa45t]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742675836619\"]","timestamp":"2025-03-22T20:37:16.635Z"}
{"level":"debug","message":"Executing query [m8ko75crq4oheu959hf]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742675836619\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:37:16.635Z"}
{"level":"debug","message":"Executing query [m8ko75cv6igdvasl534]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T20:37:16.639Z"}
{"level":"debug","message":"Executing query [m8ko75cx21awgvwi320j]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742675836619\"]","timestamp":"2025-03-22T20:37:16.641Z"}
{"level":"debug","message":"Executing query [m8ko75czle7d6978wpo]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1000]","timestamp":"2025-03-22T20:37:16.643Z"}
{"level":"debug","message":"Executing query [m8ko75d2o5wxmkzghcc]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T20:37:16.646Z"}
{"level":"debug","message":"Executing query [m8ko75d38uksa7uyd6v]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T20:37:16.647Z"}
{"level":"debug","message":"Executing query [m8ko75d6vu2cj204u2n]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T20:37:16.650Z"}
{"level":"debug","message":"Executing query [m8ko75d7953akcu5tup]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T20:37:16.651Z"}
{"level":"debug","message":"Executing query [m8ko75d9p1du6xvcem]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T20:37:16.653Z"}
{"level":"debug","message":"Executing query [m8ko75dbtnnhueq8k7q]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-22T20:37:16.656Z"}
{"level":"debug","message":"Executing query [m8ko75ddaqeu2bk37f]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T20:37:16.657Z"}
{"level":"debug","message":"Executing query [m8ko75dejk06oiv3sa7]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:37:16.658Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:37:16.659Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:37:16.753Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:37:16.764Z"}
{"level":"debug","message":"Executing query [m8ko75gfap5bdf0ms5e]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T20:37:16.767Z"}
{"level":"debug","message":"Executing query [m8ko75ghj1w507vhnv]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T20:37:16.769Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8ko75ghj1w507vhnv]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T20:37:16.772Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:37:16.774Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T20:37:16.854Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T20:37:16.954Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T20:37:17.049Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T20:37:17.050Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T20:37:17.050Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T20:37:17.051Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T20:37:17.052Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T20:37:17.052Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T20:39:49.081Z"}
{"level":"info","message":"🔒 Servidor seguro de documentación corriendo en http://localhost:3002","timestamp":"2025-03-22T20:39:49.087Z"}
{"level":"info","message":"📚 Documentación completa de API en http://localhost:3002/api-docs","timestamp":"2025-03-22T20:39:49.087Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:31.495Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:42:31.645Z"}
{"duration":"21ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T20:42:31.649Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T20:42:31.653Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:42:31.664Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:32.210Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T20:42:32.377Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:42:32.435Z"}
{"level":"debug","message":"Executing query [m8kodx1msmjwkgbvkji]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T20:42:32.458Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:42:32.491Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:33.088Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:42:33.134Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T20:42:33.136Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:33.330Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T20:42:33.343Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:42:33.377Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T20:42:33.390Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:42:33.416Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:33.516Z"}
{"level":"debug","message":"Executing query [m8kodxv2txio5zvdf7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:42:33.518Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:42:33.527Z"}
{"level":"debug","message":"Executing query [m8kodxvdub6m9h2z58o]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T20:42:33.529Z"}
{"level":"info","message":"Usando usuario existente ID: 2","timestamp":"2025-03-22T20:42:33.531Z"}
{"level":"debug","message":"Executing query [m8kodxvg9dl1wpu0d4u]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T20:42:33.532Z"}
{"level":"debug","message":"Executing query [m8kodxvjui4wfr2xyw]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[5,888,2,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T20:42:33.535Z\",\"ACTIVO\"]","timestamp":"2025-03-22T20:42:33.535Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 2, Área ID: 888, Rol ID: 888, Documento ID: 5","timestamp":"2025-03-22T20:42:33.539Z"}
{"level":"debug","message":"Executing query [m8kodxvoy5ngaqgur5g]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[5,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T20:42:33.540Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kodxvoy5ngaqgur5g]","params":"[5,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T20:42:33.544Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T20:42:33.545Z"}
{"level":"debug","message":"Executing query [m8kodxvtefe92px65t]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[5]","timestamp":"2025-03-22T20:42:33.545Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kodxvtefe92px65t]","params":"[5]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T20:42:33.547Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T20:42:33.548Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T20:42:33.548Z"}
{"level":"debug","message":"Executing query [m8kodxvxfn5ps4skvq]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[5,2,\"RESTAURAR\"]","timestamp":"2025-03-22T20:42:33.549Z"}
{"level":"debug","message":"Executing query [m8kodxw14p4g1lniqll]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[5]","timestamp":"2025-03-22T20:42:33.553Z"}
{"level":"debug","message":"Executing query [m8kodxw41k33u4sr55c]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[5,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T20:42:33.557Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kodxw41k33u4sr55c]","params":"[5,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T20:42:33.560Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T20:42:33.561Z"}
{"level":"debug","message":"Executing query [m8kodxw9gqdqzoeize]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[5]","timestamp":"2025-03-22T20:42:33.561Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kodxw9gqdqzoeize]","params":"[5]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T20:42:33.563Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T20:42:33.564Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T20:42:33.564Z"}
{"level":"debug","message":"Executing query [m8kodxwdwdp699iov6k]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[5,888,2,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T20:42:33.565Z\",\"ACTIVO\"]","timestamp":"2025-03-22T20:42:33.565Z"}
{"level":"debug","message":"Executing query [m8kodxwgaz1lf68egw]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T20:42:33.568Z"}
{"level":"debug","message":"Executing query [m8kodxwj9lenh4tll2r]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[2,\"DOCUMENTO\",6,\"ELIMINAR\"]","timestamp":"2025-03-22T20:42:33.571Z"}
{"level":"debug","message":"Executing query [m8kodxwkjbm23kxmhmp]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[6]","timestamp":"2025-03-22T20:42:33.572Z"}
{"level":"debug","message":"Executing query [m8kodxwnw7guuxise2e]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T20:42:33.575Z"}
{"level":"debug","message":"Executing query [m8kodxwq47zhunp7945]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[5]","timestamp":"2025-03-22T20:42:33.578Z"}
{"level":"debug","message":"Executing query [m8kodxwt6m3y0ma6lse]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:42:33.581Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:42:33.583Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:33.875Z"}
{"level":"debug","message":"Executing query [m8kody52gjtjwnofm4]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:42:33.878Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:42:33.887Z"}
{"level":"debug","message":"Executing query [m8kody5c58pa5lkuirv]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:42:33.888Z"}
{"level":"debug","message":"Executing query [m8kody5e04pkjpw23fl9]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742676153877\"]","timestamp":"2025-03-22T20:42:33.890Z"}
{"level":"debug","message":"Executing query [m8kody5gzirrdvxo8ah]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742676153877\",\"TEST-OFI-FORENSE-1742676153877\",8056,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742676153877\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:42:33.892Z"}
{"level":"debug","message":"Executing query [m8kody5lioj4r3cvfjc]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T20:42:33.897Z"}
{"level":"debug","message":"Executing query [m8kody5o4ce8359cwdk]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742676153877\"]","timestamp":"2025-03-22T20:42:33.900Z"}
{"level":"debug","message":"Executing query [m8kody5rmjk5xcaa6il]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",5]","timestamp":"2025-03-22T20:42:33.903Z"}
{"level":"debug","message":"Executing query [m8kody5uvqwyb126cn]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T20:42:33.906Z"}
{"level":"debug","message":"Executing query [m8kody5wjq9zzs520sq]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T20:42:33.908Z"}
{"level":"debug","message":"Executing query [m8kody5zsp85f7pstj]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T20:42:33.911Z"}
{"level":"debug","message":"Executing query [m8kody62vjb2u4a6z09]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T20:42:33.914Z"}
{"level":"debug","message":"Executing query [m8kody65g4m5ry8h4ro]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[5]","timestamp":"2025-03-22T20:42:33.917Z"}
{"level":"debug","message":"Executing query [m8kody67y6fxco7iteg]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742676153919\",\"TEST-SP-OFI-FORENSE-1742676153919\",3910,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T20:42:33.919Z"}
{"level":"debug","message":"Executing query [m8kody6a07pml913ujfp]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742676153919\"]","timestamp":"2025-03-22T20:42:33.922Z"}
{"level":"debug","message":"Executing query [m8kody6bbsa5plv0p2]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742676153919\"]","timestamp":"2025-03-22T20:42:33.923Z"}
{"level":"debug","message":"Executing query [m8kody6dvqocf84lvlm]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:42:33.925Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:42:33.927Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:34.026Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:34.031Z"}
{"level":"debug","message":"Executing query [m8kody9dyyz80vgvi7d]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:42:34.033Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:42:34.042Z"}
{"level":"debug","message":"Executing query [m8kody9nwslkix0bjwa]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T20:42:34.043Z"}
{"level":"debug","message":"Executing query [m8kody9qgzr9i6wrw4]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T20:42:34.046Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T20:42:34.048Z"}
{"level":"debug","message":"Executing query [m8kody9sbv361hbfili]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:42:34.048Z"}
{"level":"debug","message":"Executing query [m8kody9uxn2fszagqai]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:42:34.050Z"}
{"level":"debug","message":"Executing query [m8kody9v77knqdrxt7r]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:42:34.051Z"}
{"level":"debug","message":"Executing query [m8kody9wq33gs79stf]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T20:42:34.052Z"}
{"level":"debug","message":"Executing query [m8kody9zf9ze3t9rmh]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-22T20:42:34.055Z"}
{"level":"debug","message":"Executing query [m8kodya1w7rtwsj1vi]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:42:34.057Z"}
{"level":"debug","message":"Executing query [m8kodya25onxhnxpcab]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",5]","timestamp":"2025-03-22T20:42:34.059Z"}
{"level":"debug","message":"Executing query [m8kodya54aagw9cxa]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-22T20:42:34.061Z"}
{"level":"debug","message":"Executing query [m8kodya7gm1x1hxh32s]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-22T20:42:34.063Z"}
{"level":"debug","message":"Executing query [m8kodya9hwvsv1snbc]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[5]","timestamp":"2025-03-22T20:42:34.065Z"}
{"level":"debug","message":"Executing query [m8kodyabfxxy8qlz2mi]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:42:34.067Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:42:34.067Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:34.166Z"}
{"level":"debug","message":"Executing query [m8kodyd4r8y441z77wa]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:42:34.169Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:42:34.182Z"}
{"level":"debug","message":"Executing query [m8kodydjh88kg1teg6]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T20:42:34.183Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T20:42:34.185Z"}
{"level":"debug","message":"Executing query [m8kodydmjrr81d3a7a]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T20:42:34.186Z"}
{"level":"debug","message":"Executing query [m8kodydn03v58qicwzun]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T20:42:34.187Z"}
{"level":"debug","message":"Executing query [m8kodydo0rvbugzbyrvc]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T20:42:34.188Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T20:42:34.189Z"}
{"level":"debug","message":"Executing query [m8kodydqqh7k2tv4sh]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[5,1,888]","timestamp":"2025-03-22T20:42:34.190Z"}
{"level":"debug","message":"Executing query [m8kodydra508bum58b6]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[5,null,1,888,1,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-22T20:42:34.191Z"}
{"level":"debug","message":"Executing query [m8kodydvcfycx7633ud]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[3]","timestamp":"2025-03-22T20:42:34.195Z"}
{"level":"debug","message":"Executing query [m8kodydx7870ymss24q]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-22 20:42:34\",2,3]","timestamp":"2025-03-22T20:42:34.197Z"}
{"level":"debug","message":"Executing query [m8kodye04hti0zlc51a]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[3]","timestamp":"2025-03-22T20:42:34.200Z"}
{"level":"debug","message":"Executing query [m8kodye1tyxk3mky0y]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T20:42:34.201Z"}
{"level":"debug","message":"Executing query [m8kodye3e350mwzuyjq]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[888]","timestamp":"2025-03-22T20:42:34.203Z"}
{"level":"debug","message":"Executing query [m8kodye4yj3kq6kiwci]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[3]","timestamp":"2025-03-22T20:42:34.204Z"}
{"level":"debug","message":"Executing query [m8kodye64t0d181nbma]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[3]","timestamp":"2025-03-22T20:42:34.206Z"}
{"level":"debug","message":"Executing query [m8kodye8hxq0loxnk5i]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[5]","timestamp":"2025-03-22T20:42:34.208Z"}
{"level":"debug","message":"Executing query [m8kodyebvd5mme2w0p]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:42:34.211Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:34.317Z"}
{"level":"debug","message":"Executing query [m8kodyhbimylf463zsb]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:42:34.319Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:42:34.327Z"}
{"level":"debug","message":"Executing query [m8kodyhlor1p73ilgcl]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:42:34.329Z"}
{"level":"debug","message":"Executing query [m8kodyhmyw1ecibcctd]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742676154318\"]","timestamp":"2025-03-22T20:42:34.330Z"}
{"level":"debug","message":"Executing query [m8kodyhnum8ga50x68]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742676154318\",\"TEST-OFICIO-1742676154318\",5645,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:42:34.331Z"}
{"level":"debug","message":"Executing query [m8kodyhtdialvr3oss]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T20:42:34.337Z"}
{"level":"debug","message":"Executing query [m8kodyhvm28ezea3rr]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742676154318\"]","timestamp":"2025-03-22T20:42:34.340Z"}
{"level":"debug","message":"Executing query [m8kodyhxkw69cstc1v]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",5]","timestamp":"2025-03-22T20:42:34.341Z"}
{"level":"debug","message":"Executing query [m8kodyi0ohwb0vkc8or]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T20:42:34.344Z"}
{"level":"debug","message":"Executing query [m8kodyi29smdjaw2gqb]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T20:42:34.346Z"}
{"level":"debug","message":"Executing query [m8kodyi4arbyi6getr]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T20:42:34.348Z"}
{"level":"debug","message":"Executing query [m8kodyi50wtl6sksvj1]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T20:42:34.349Z"}
{"level":"debug","message":"Executing query [m8kodyi95quaf7nvfkf]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[5]","timestamp":"2025-03-22T20:42:34.353Z"}
{"level":"debug","message":"Executing query [m8kodyicgpcnd5pkrf]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742676154356\",\"TEST-SP-OFICIO-1742676154356\",6019,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T20:42:34.356Z"}
{"level":"debug","message":"Executing query [m8kodyifuwphbi9ku8]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742676154356\"]","timestamp":"2025-03-22T20:42:34.359Z"}
{"level":"debug","message":"Executing query [m8kodyih7l2dgu6t1vt]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742676154356\"]","timestamp":"2025-03-22T20:42:34.361Z"}
{"level":"debug","message":"Executing query [m8kodyijkukdmarcan]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:42:34.363Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:42:34.364Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:34.462Z"}
{"level":"debug","message":"Executing query [m8kodyldyb1uoncvg1a]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:42:34.465Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:42:34.477Z"}
{"level":"debug","message":"Executing query [m8kodylq9xnpue0b80e]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742676154464\"]","timestamp":"2025-03-22T20:42:34.478Z"}
{"level":"debug","message":"Executing query [m8kodylr2fz8j23jb5v]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742676154464\"]","timestamp":"2025-03-22T20:42:34.479Z"}
{"level":"debug","message":"Executing query [m8kodyls8jsbs8mmdlw]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742676154464\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:42:34.480Z"}
{"level":"debug","message":"Executing query [m8kodylvd3pdlbqkbt7]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T20:42:34.483Z"}
{"level":"debug","message":"Executing query [m8kodylys8hl5udtse]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742676154464\"]","timestamp":"2025-03-22T20:42:34.486Z"}
{"level":"debug","message":"Executing query [m8kodym0aidy2o1i7fj]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1001]","timestamp":"2025-03-22T20:42:34.488Z"}
{"level":"debug","message":"Executing query [m8kodym3fk9tjv0nk3n]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T20:42:34.491Z"}
{"level":"debug","message":"Executing query [m8kodym4nfxdhsjg5y]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T20:42:34.492Z"}
{"level":"debug","message":"Executing query [m8kodym7urjvyefs4i]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T20:42:34.495Z"}
{"level":"debug","message":"Executing query [m8kodym80k91hujstt89]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T20:42:34.496Z"}
{"level":"debug","message":"Executing query [m8kodym9k5xiz7q7o8]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T20:42:34.497Z"}
{"level":"debug","message":"Executing query [m8kodymbdxqzsxhosqa]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1001]","timestamp":"2025-03-22T20:42:34.499Z"}
{"level":"debug","message":"Executing query [m8kodymduu9k5e5po4]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T20:42:34.501Z"}
{"level":"debug","message":"Executing query [m8kodymf1xvgh82d9dk]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:42:34.503Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:42:34.504Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:34.600Z"}
{"level":"debug","message":"Executing query [m8kodyp7batl9cvmnfv]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:42:34.603Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:42:34.612Z"}
{"level":"debug","message":"Executing query [m8kodyph6wq9oscje29]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:42:34.613Z"}
{"level":"debug","message":"Executing query [m8kodypj32moeh2lyuy]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742676154602\"]","timestamp":"2025-03-22T20:42:34.615Z"}
{"level":"debug","message":"Executing query [m8kodypl7cm0eifmmsj]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742676154602\",\"TEST-OFI-QUIMICA-1742676154602\",9434,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:42:34.617Z"}
{"level":"debug","message":"Executing query [m8kodypqe9m2tes9dst]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T20:42:34.622Z"}
{"level":"debug","message":"Executing query [m8kodypsfsstnp0ggog]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742676154602\"]","timestamp":"2025-03-22T20:42:34.624Z"}
{"level":"debug","message":"Executing query [m8kodypup3l5qav1k6q]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",3]","timestamp":"2025-03-22T20:42:34.626Z"}
{"level":"debug","message":"Executing query [m8kodypwma0l7a1hd]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T20:42:34.628Z"}
{"level":"debug","message":"Executing query [m8kodypxozm3baxvx3]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T20:42:34.629Z"}
{"level":"debug","message":"Executing query [m8kodyq00ieg4rqkeexu]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T20:42:34.632Z"}
{"level":"debug","message":"Executing query [m8kodyq2r55u19xkgv9]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T20:42:34.634Z"}
{"level":"debug","message":"Executing query [m8kodyq59mpyimjvlw]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[3]","timestamp":"2025-03-22T20:42:34.637Z"}
{"level":"debug","message":"Executing query [m8kodyq6ks9crqgdqo]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:42:34.638Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:42:34.639Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:34.749Z"}
{"level":"debug","message":"Executing query [m8kodytbagn17kos01j]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:42:34.751Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:42:34.763Z"}
{"level":"debug","message":"Executing query [m8kodyto4nr7qpd08c7]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T20:42:34.764Z"}
{"level":"debug","message":"Executing query [m8kodytpockzhbkalb]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T20:42:34.765Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T20:42:34.767Z"}
{"level":"debug","message":"Executing query [m8kodytrtt28stnodwl]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T20:42:34.767Z"}
{"level":"debug","message":"Executing query [m8kodytsb9kva7yj4j4]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T20:42:34.768Z"}
{"level":"debug","message":"Executing query [m8kodytt9v9d1qiuvj]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T20:42:34.769Z"}
{"level":"debug","message":"Executing query [m8kodytyu52jmn4s11]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[6]","timestamp":"2025-03-22T20:42:34.774Z"}
{"level":"debug","message":"Executing query [m8kodyu0sml7424rqp]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[6]","timestamp":"2025-03-22T20:42:34.776Z"}
{"level":"debug","message":"Executing query [m8kodyu2qxld0bkcrx]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",6]","timestamp":"2025-03-22T20:42:34.778Z"}
{"level":"debug","message":"Executing query [m8kodyu5lo4t4np2iwc]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[6]","timestamp":"2025-03-22T20:42:34.781Z"}
{"level":"debug","message":"Executing query [m8kodyu81eehic2v1gn]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[6]","timestamp":"2025-03-22T20:42:34.784Z"}
{"level":"debug","message":"Executing query [m8kodyuad6ihyz6pkds]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[6]","timestamp":"2025-03-22T20:42:34.786Z"}
{"level":"debug","message":"Executing query [m8kodyubf871k1r9vr4]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:42:34.787Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:42:34.788Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:34.883Z"}
{"level":"debug","message":"Executing query [m8kodyx2nt3l9e8qiu]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:42:34.886Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:42:34.895Z"}
{"level":"debug","message":"Executing query [m8kodyxcjcn67tto7c]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742676154885\"]","timestamp":"2025-03-22T20:42:34.896Z"}
{"level":"debug","message":"Executing query [m8kodyxd1dwbywkm9ma]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742676154885\",true]","timestamp":"2025-03-22T20:42:34.897Z"}
{"level":"debug","message":"Executing query [m8kodyxhcw3gcqugw95]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-22T20:42:34.901Z"}
{"level":"debug","message":"Executing query [m8kodyxjdx8037zn1lh]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742676154885\"]","timestamp":"2025-03-22T20:42:34.903Z"}
{"level":"debug","message":"Executing query [m8kodyxkklj693iy73h]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",6]","timestamp":"2025-03-22T20:42:34.904Z"}
{"level":"debug","message":"Executing query [m8kodyxn3qdellxfm4]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-22T20:42:34.907Z"}
{"level":"debug","message":"Executing query [m8kodyxov286ergsna]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-22T20:42:34.908Z"}
{"level":"debug","message":"Executing query [m8kodyxq3081ratgjdm]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-22T20:42:34.910Z"}
{"level":"debug","message":"Executing query [m8kodyxsl4se5329ln]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-22T20:42:34.912Z"}
{"level":"debug","message":"Executing query [m8kodyxtork59aek1sh]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-22T20:42:34.913Z"}
{"level":"debug","message":"Executing query [m8kodyxxvelyn0oab7]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[6]","timestamp":"2025-03-22T20:42:34.917Z"}
{"level":"debug","message":"Executing query [m8kodyxyuubdird40rs]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T20:42:34.918Z"}
{"level":"debug","message":"Executing query [m8kodyxzkxg1g1wigtf]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:42:34.919Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:42:34.920Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:42:35.013Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:42:35.030Z"}
{"level":"debug","message":"Executing query [m8kodz14vn4nulcwuf]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T20:42:35.033Z"}
{"level":"debug","message":"Executing query [m8kodz161ahccxudnl2]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T20:42:35.034Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8kodz161ahccxudnl2]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T20:42:35.035Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:42:35.037Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T20:42:35.110Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T20:42:35.208Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T20:42:35.308Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T20:42:35.308Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T20:42:35.309Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T20:42:35.309Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T20:42:35.310Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T20:42:35.310Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T20:42:52.588Z"}
{"level":"info","message":"🔒 Servidor seguro de documentación corriendo en http://localhost:3002","timestamp":"2025-03-22T20:42:52.594Z"}
{"level":"info","message":"📚 Documentación completa de API en http://localhost:3002/api-docs","timestamp":"2025-03-22T20:42:52.595Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T20:45:19.530Z"}
{"level":"info","message":"🔒 Servidor seguro de documentación corriendo en http://localhost:3002","timestamp":"2025-03-22T20:45:19.537Z"}
{"level":"info","message":"📚 Documentación completa de API en http://localhost:3002/api-docs","timestamp":"2025-03-22T20:45:19.537Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T20:49:11.298Z"}
{"level":"info","message":"🔒 Servidor seguro de documentación corriendo en http://localhost:3002","timestamp":"2025-03-22T20:49:11.304Z"}
{"level":"info","message":"📚 Documentación completa de API en http://localhost:3002/api-docs","timestamp":"2025-03-22T20:49:11.305Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T20:51:22.146Z"}
{"level":"info","message":"🔒 Servidor seguro de documentación corriendo en http://localhost:3002","timestamp":"2025-03-22T20:51:22.153Z"}
{"level":"info","message":"📚 Documentación completa de API en http://localhost:3002/api-docs","timestamp":"2025-03-22T20:51:22.153Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:52:57.743Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:52:57.893Z"}
{"duration":"21ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T20:52:57.896Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T20:52:57.901Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:52:57.910Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:52:58.724Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T20:52:58.895Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:52:58.951Z"}
{"level":"debug","message":"Executing query [m8korcgv3eknpypc1a4]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T20:52:58.975Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:52:59.009Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:52:59.631Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:52:59.677Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T20:52:59.679Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:52:59.867Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T20:52:59.881Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:52:59.920Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T20:52:59.933Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:52:59.975Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:53:00.258Z"}
{"level":"debug","message":"Executing query [m8kordglpwcu0or0ubi]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:53:00.261Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:53:00.274Z"}
{"level":"debug","message":"Executing query [m8kordgzhsijunxb8hf]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:53:00.275Z"}
{"level":"debug","message":"Executing query [m8kordh1u6lwqlz2zx]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742676780260\"]","timestamp":"2025-03-22T20:53:00.277Z"}
{"level":"debug","message":"Executing query [m8kordh3qfdfgpxkqz]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742676780260\",\"TEST-OFI-FORENSE-1742676780260\",1897,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742676780260\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:53:00.279Z"}
{"level":"debug","message":"Executing query [m8kordh7ijwp34lhjr]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.283Z"}
{"level":"debug","message":"Executing query [m8kordhbj0nax1ib1d]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742676780260\"]","timestamp":"2025-03-22T20:53:00.287Z"}
{"level":"debug","message":"Executing query [m8kordhe863ljk4y4je]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",7]","timestamp":"2025-03-22T20:53:00.290Z"}
{"level":"debug","message":"Executing query [m8kordhhu5vwcra57x9]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.293Z"}
{"level":"debug","message":"Executing query [m8kordhia1kxv8qawvh]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.294Z"}
{"level":"debug","message":"Executing query [m8kordhlkt2kxwds1rh]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.297Z"}
{"level":"debug","message":"Executing query [m8kordhnoxfoab6hnml]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.299Z"}
{"level":"debug","message":"Executing query [m8kordhq81omgl940mb]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.302Z"}
{"level":"debug","message":"Executing query [m8kordhsi4nfid8h31n]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742676780304\",\"TEST-SP-OFI-FORENSE-1742676780304\",2131,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T20:53:00.304Z"}
{"level":"debug","message":"Executing query [m8kordhv7g0mo5b9vew]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742676780304\"]","timestamp":"2025-03-22T20:53:00.307Z"}
{"level":"debug","message":"Executing query [m8kordhwdolrmcne8ms]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742676780304\"]","timestamp":"2025-03-22T20:53:00.308Z"}
{"level":"debug","message":"Executing query [m8kordhz28uu9eal56v]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:53:00.311Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:53:00.312Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:53:00.414Z"}
{"level":"debug","message":"Executing query [m8kordkw6hfv4rw51o9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:53:00.416Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:53:00.427Z"}
{"level":"debug","message":"Executing query [m8kordl8sql2y26dqkp]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T20:53:00.428Z"}
{"level":"info","message":"Usando usuario existente ID: 2","timestamp":"2025-03-22T20:53:00.429Z"}
{"level":"debug","message":"Executing query [m8kordl9qql1wr041fe]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T20:53:00.429Z"}
{"level":"debug","message":"Executing query [m8kordlefqc9uya3w6q]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[7,888,2,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T20:53:00.434Z\",\"ACTIVO\"]","timestamp":"2025-03-22T20:53:00.434Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 2, Área ID: 888, Rol ID: 888, Documento ID: 7","timestamp":"2025-03-22T20:53:00.438Z"}
{"level":"debug","message":"Executing query [m8kordljed8p7krl3d]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[7,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T20:53:00.439Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kordljed8p7krl3d]","params":"[7,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T20:53:00.443Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T20:53:00.443Z"}
{"level":"debug","message":"Executing query [m8kordln0axoe6lra0h]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.443Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kordln0axoe6lra0h]","params":"[7]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T20:53:00.446Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T20:53:00.447Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T20:53:00.447Z"}
{"level":"debug","message":"Executing query [m8kordlsfmsand3apuo]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[7,2,\"RESTAURAR\"]","timestamp":"2025-03-22T20:53:00.448Z"}
{"level":"debug","message":"Executing query [m8kordlxmi9jy4s53d]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.453Z"}
{"level":"debug","message":"Executing query [m8kordlzogfa7vihjys]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[7,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T20:53:00.455Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kordlzogfa7vihjys]","params":"[7,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T20:53:00.459Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T20:53:00.459Z"}
{"level":"debug","message":"Executing query [m8kordm4dntoecmnekn]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.460Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kordm4dntoecmnekn]","params":"[7]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T20:53:00.462Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T20:53:00.462Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T20:53:00.463Z"}
{"level":"debug","message":"Executing query [m8kordm76ynrzu3j1p8]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[7,888,2,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T20:53:00.463Z\",\"ACTIVO\"]","timestamp":"2025-03-22T20:53:00.463Z"}
{"level":"debug","message":"Executing query [m8kordmarcbqxkfsmle]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T20:53:00.466Z"}
{"level":"debug","message":"Executing query [m8kordmcpxxwtturph]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[2,\"DOCUMENTO\",8,\"ELIMINAR\"]","timestamp":"2025-03-22T20:53:00.469Z"}
{"level":"debug","message":"Executing query [m8kordmfry7e59tu4]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[8]","timestamp":"2025-03-22T20:53:00.471Z"}
{"level":"debug","message":"Executing query [m8kordmibfjoluqhdb6]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T20:53:00.474Z"}
{"level":"debug","message":"Executing query [m8kordmmhilnya4dorh]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.478Z"}
{"level":"debug","message":"Executing query [m8kordmodhndz6dm01w]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:53:00.480Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:53:00.481Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:53:00.584Z"}
{"level":"debug","message":"Executing query [m8kordpm9ce3r80m4ob]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:53:00.586Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:53:00.599Z"}
{"level":"debug","message":"Executing query [m8kordpzti5x7dsevy]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:53:00.599Z"}
{"level":"debug","message":"Executing query [m8kordq1scvjwx85qdk]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742676780586\"]","timestamp":"2025-03-22T20:53:00.601Z"}
{"level":"debug","message":"Executing query [m8kordq3e4m4jx7vor7]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742676780586\",\"TEST-OFICIO-1742676780586\",5943,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:53:00.603Z"}
{"level":"debug","message":"Executing query [m8kordq8s3mheiguks]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.608Z"}
{"level":"debug","message":"Executing query [m8kordqa1uwdboxy1jb]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742676780586\"]","timestamp":"2025-03-22T20:53:00.610Z"}
{"level":"debug","message":"Executing query [m8kordqcvq6hzp8vcmr]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",7]","timestamp":"2025-03-22T20:53:00.612Z"}
{"level":"debug","message":"Executing query [m8kordqe919s6zhr0pt]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.614Z"}
{"level":"debug","message":"Executing query [m8kordqgulei1nbalf]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.616Z"}
{"level":"debug","message":"Executing query [m8kordqiogk3ksuojos]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.618Z"}
{"level":"debug","message":"Executing query [m8kordqkk0j3ey572i]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.620Z"}
{"level":"debug","message":"Executing query [m8kordqnaqtk44ocbuw]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.623Z"}
{"level":"debug","message":"Executing query [m8kordqpbers2gm7knb]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742676780625\",\"TEST-SP-OFICIO-1742676780625\",2105,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T20:53:00.625Z"}
{"level":"debug","message":"Executing query [m8kordqraij5jox220h]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742676780625\"]","timestamp":"2025-03-22T20:53:00.627Z"}
{"level":"debug","message":"Executing query [m8kordqsb1ocymrphk]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742676780625\"]","timestamp":"2025-03-22T20:53:00.628Z"}
{"level":"debug","message":"Executing query [m8kordqvwxo6bdmua]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:53:00.631Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:53:00.632Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:53:00.733Z"}
{"level":"debug","message":"Executing query [m8kordts00k8qgxe0gdlq]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:53:00.736Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:53:00.746Z"}
{"level":"debug","message":"Executing query [m8kordu3w3sh6lxdaho]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T20:53:00.747Z"}
{"level":"debug","message":"Executing query [m8kordu436vwisqni0e]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T20:53:00.748Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T20:53:00.749Z"}
{"level":"debug","message":"Executing query [m8kordu67t8h1l033rb]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T20:53:00.750Z"}
{"level":"debug","message":"Executing query [m8kordu7kcwjg1c1p8q]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T20:53:00.751Z"}
{"level":"debug","message":"Executing query [m8kordu8a2m9miofo4a]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T20:53:00.752Z"}
{"level":"debug","message":"Executing query [m8kordudbxzx8qssm8v]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[8]","timestamp":"2025-03-22T20:53:00.757Z"}
{"level":"debug","message":"Executing query [m8kordugzldeek0s9t]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[8]","timestamp":"2025-03-22T20:53:00.760Z"}
{"level":"debug","message":"Executing query [m8korduig95jwntfwk]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",8]","timestamp":"2025-03-22T20:53:00.762Z"}
{"level":"debug","message":"Executing query [m8kordukzi7tankuzpm]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[8]","timestamp":"2025-03-22T20:53:00.764Z"}
{"level":"debug","message":"Executing query [m8kordumm75bcmxaofh]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[8]","timestamp":"2025-03-22T20:53:00.766Z"}
{"level":"debug","message":"Executing query [m8kordupxnf7hczcwnf]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[8]","timestamp":"2025-03-22T20:53:00.769Z"}
{"level":"debug","message":"Executing query [m8kordurmroo4epoaq7]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:53:00.771Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:53:00.772Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:53:00.871Z"}
{"level":"debug","message":"Executing query [m8kordxm5g2vs01lypc]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:53:00.874Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:53:00.886Z"}
{"level":"debug","message":"Executing query [m8kordxzkwy8jo0icdb]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T20:53:00.888Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T20:53:00.889Z"}
{"level":"debug","message":"Executing query [m8kordy1ohmlx7u25w7]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T20:53:00.889Z"}
{"level":"debug","message":"Executing query [m8kordy2h38grbtcwtf]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T20:53:00.890Z"}
{"level":"debug","message":"Executing query [m8kordy3qmvcw4nl41]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T20:53:00.891Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T20:53:00.892Z"}
{"level":"debug","message":"Executing query [m8kordy5pvcwa6dvzo]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[7,1,888]","timestamp":"2025-03-22T20:53:00.893Z"}
{"level":"debug","message":"Executing query [m8kordy5k4ttt1ts25]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[7,null,1,888,1,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-22T20:53:00.894Z"}
{"level":"debug","message":"Executing query [m8kordybsxvdiw0n3x]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[4]","timestamp":"2025-03-22T20:53:00.899Z"}
{"level":"debug","message":"Executing query [m8kordyfrpka2me448]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-22 20:53:00\",2,4]","timestamp":"2025-03-22T20:53:00.903Z"}
{"level":"debug","message":"Executing query [m8kordyjcdjawz4zv7t]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[4]","timestamp":"2025-03-22T20:53:00.907Z"}
{"level":"debug","message":"Executing query [m8kordylsp4it8xbv8]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T20:53:00.909Z"}
{"level":"debug","message":"Executing query [m8kordymj0ykuaficad]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[888]","timestamp":"2025-03-22T20:53:00.910Z"}
{"level":"debug","message":"Executing query [m8kordyn3otz88qqsv8]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[4]","timestamp":"2025-03-22T20:53:00.911Z"}
{"level":"debug","message":"Executing query [m8kordyq5zlq3i7pkkc]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[4]","timestamp":"2025-03-22T20:53:00.914Z"}
{"level":"debug","message":"Executing query [m8kordyr43e6oorq5ju]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[7]","timestamp":"2025-03-22T20:53:00.915Z"}
{"level":"debug","message":"Executing query [m8kordyu9qai4cveto]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:53:00.918Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:53:01.016Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:53:01.022Z"}
{"level":"debug","message":"Executing query [m8kore1r2gd08bqehvk]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:53:01.023Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:53:01.032Z"}
{"level":"debug","message":"Executing query [m8kore2257lyha6kruy]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T20:53:01.034Z"}
{"level":"debug","message":"Executing query [m8kore23re27qvzjn7]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T20:53:01.035Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T20:53:01.036Z"}
{"level":"debug","message":"Executing query [m8kore24u7xy45spobe]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:53:01.036Z"}
{"level":"debug","message":"Executing query [m8kore25xvmp5awj71n]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:53:01.037Z"}
{"level":"debug","message":"Executing query [m8kore260q0c8v4lowhm]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:53:01.038Z"}
{"level":"debug","message":"Executing query [m8kore27pyc4t2c03kq]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T20:53:01.039Z"}
{"level":"debug","message":"Executing query [m8kore2bshul7ft8ah]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-22T20:53:01.043Z"}
{"level":"debug","message":"Executing query [m8kore2cal02rle41r]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T20:53:01.044Z"}
{"level":"debug","message":"Executing query [m8kore2e8mtrahm28hw]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",6]","timestamp":"2025-03-22T20:53:01.046Z"}
{"level":"debug","message":"Executing query [m8kore2h2cgjjbxjlei]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-22T20:53:01.049Z"}
{"level":"debug","message":"Executing query [m8kore2jtcy5rpsv4cp]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-22T20:53:01.051Z"}
{"level":"debug","message":"Executing query [m8kore2meydi3a1wm37]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[6]","timestamp":"2025-03-22T20:53:01.054Z"}
{"level":"debug","message":"Executing query [m8kore2nowmu8tk0m9a]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:53:01.055Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:53:01.056Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:53:01.158Z"}
{"level":"debug","message":"Executing query [m8kore5lkvzmcpjc10r]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:53:01.161Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:53:01.173Z"}
{"level":"debug","message":"Executing query [m8kore5y8xblldzncqa]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742676781160\"]","timestamp":"2025-03-22T20:53:01.174Z"}
{"level":"debug","message":"Executing query [m8kore5zilegx5tnpu]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742676781160\"]","timestamp":"2025-03-22T20:53:01.175Z"}
{"level":"debug","message":"Executing query [m8kore60m0r5f7ggyhb]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742676781160\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:53:01.176Z"}
{"level":"debug","message":"Executing query [m8kore643d7s73iuhjh]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-22T20:53:01.180Z"}
{"level":"debug","message":"Executing query [m8kore68liyy0ecke4l]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742676781160\"]","timestamp":"2025-03-22T20:53:01.184Z"}
{"level":"debug","message":"Executing query [m8kore6ag41fuw7wwb]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1002]","timestamp":"2025-03-22T20:53:01.186Z"}
{"level":"debug","message":"Executing query [m8kore6cbhz9o63kp3f]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-22T20:53:01.188Z"}
{"level":"debug","message":"Executing query [m8kore6ea6vwrsiep4v]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-22T20:53:01.190Z"}
{"level":"debug","message":"Executing query [m8kore6guj4ylahz6en]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-22T20:53:01.192Z"}
{"level":"debug","message":"Executing query [m8kore6iy0zwadzryo7]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-22T20:53:01.194Z"}
{"level":"debug","message":"Executing query [m8kore6k30tr4f9ojbh]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-22T20:53:01.196Z"}
{"level":"debug","message":"Executing query [m8kore6n5u1adjjpwlo]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1002]","timestamp":"2025-03-22T20:53:01.199Z"}
{"level":"debug","message":"Executing query [m8kore6onnd16btm2k]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T20:53:01.200Z"}
{"level":"debug","message":"Executing query [m8kore6pdno69jz5qhj]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:53:01.201Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:53:01.202Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:53:01.302Z"}
{"level":"debug","message":"Executing query [m8kore9kb31pjodh28k]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:53:01.304Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:53:01.312Z"}
{"level":"debug","message":"Executing query [m8kore9usl8wrayoq7]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T20:53:01.314Z"}
{"level":"debug","message":"Executing query [m8kore9wbgxlync86qd]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742676781304\"]","timestamp":"2025-03-22T20:53:01.316Z"}
{"level":"debug","message":"Executing query [m8kore9x9i941twkkb]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742676781304\",\"TEST-OFI-QUIMICA-1742676781304\",8811,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T20:53:01.317Z"}
{"level":"debug","message":"Executing query [m8korea30laiqo4zvwwj]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-22T20:53:01.323Z"}
{"level":"debug","message":"Executing query [m8korea5duc2gkhhz0h]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742676781304\"]","timestamp":"2025-03-22T20:53:01.325Z"}
{"level":"debug","message":"Executing query [m8korea79g4illzzbfi]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",4]","timestamp":"2025-03-22T20:53:01.327Z"}
{"level":"debug","message":"Executing query [m8koreab6m952nidt6e]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-22T20:53:01.331Z"}
{"level":"debug","message":"Executing query [m8koreactll1jkrhcem]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-22T20:53:01.332Z"}
{"level":"debug","message":"Executing query [m8koreafei2b1bcx5en]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-22T20:53:01.335Z"}
{"level":"debug","message":"Executing query [m8koreagsp3esr9jc9l]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-22T20:53:01.336Z"}
{"level":"debug","message":"Executing query [m8koreajc87p2kjzq7h]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[4]","timestamp":"2025-03-22T20:53:01.339Z"}
{"level":"debug","message":"Executing query [m8korealbmds49jqmei]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:53:01.341Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:53:01.342Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:53:01.440Z"}
{"level":"debug","message":"Executing query [m8koredfh12jpap5qud]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T20:53:01.443Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:53:01.455Z"}
{"level":"debug","message":"Executing query [m8koredtszvwtoryyq]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742676781442\"]","timestamp":"2025-03-22T20:53:01.457Z"}
{"level":"debug","message":"Executing query [m8koreduahasiacbalh]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742676781442\",true]","timestamp":"2025-03-22T20:53:01.458Z"}
{"level":"debug","message":"Executing query [m8koredya4mtcsnmc2l]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-22T20:53:01.462Z"}
{"level":"debug","message":"Executing query [m8koree0aleoklsl25d]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742676781442\"]","timestamp":"2025-03-22T20:53:01.464Z"}
{"level":"debug","message":"Executing query [m8koree1sxdtdqwzxsl]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",8]","timestamp":"2025-03-22T20:53:01.465Z"}
{"level":"debug","message":"Executing query [m8koree445if2ekxucl]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-22T20:53:01.468Z"}
{"level":"debug","message":"Executing query [m8koree57luo2rohtrj]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-22T20:53:01.469Z"}
{"level":"debug","message":"Executing query [m8koree8k2krjfxmoxq]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-22T20:53:01.472Z"}
{"level":"debug","message":"Executing query [m8koreebtmcbl2xlxe]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-22T20:53:01.475Z"}
{"level":"debug","message":"Executing query [m8koreecffjohwapf3o]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-22T20:53:01.476Z"}
{"level":"debug","message":"Executing query [m8koreeezn6qbm8ltc]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[8]","timestamp":"2025-03-22T20:53:01.478Z"}
{"level":"debug","message":"Executing query [m8koreegj1q3ynkyp3c]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T20:53:01.480Z"}
{"level":"debug","message":"Executing query [m8koreeht94j47etuy]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T20:53:01.481Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:53:01.482Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T20:53:01.582Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T20:53:01.594Z"}
{"level":"debug","message":"Executing query [m8korehp8dt82dj5zb]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T20:53:01.597Z"}
{"level":"debug","message":"Executing query [m8korehrlclvxj2snu]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T20:53:01.599Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8korehrlclvxj2snu]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T20:53:01.600Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T20:53:01.601Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T20:53:01.680Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T20:53:01.785Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T20:53:01.884Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T20:53:01.885Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T20:53:01.886Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T20:53:01.887Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T20:53:01.887Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T20:53:01.887Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:04.268Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:01:04.423Z"}
{"duration":"21ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T21:01:04.426Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T21:01:04.431Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:01:04.440Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:05.266Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T21:01:05.434Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:01:05.490Z"}
{"level":"debug","message":"Executing query [m8kp1rvr2fvrk2ue651]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T21:01:05.511Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:01:05.544Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:06.161Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:01:06.210Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T21:01:06.212Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:06.411Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T21:01:06.424Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:01:06.459Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T21:01:06.482Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:01:06.511Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:06.798Z"}
{"level":"debug","message":"Executing query [m8kp1svlku4j6u2m14b]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:01:06.801Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:01:06.813Z"}
{"level":"debug","message":"Executing query [m8kp1svzhe4z02y10aj]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T21:01:06.815Z"}
{"level":"info","message":"Usando usuario existente ID: 2","timestamp":"2025-03-22T21:01:06.816Z"}
{"level":"debug","message":"Executing query [m8kp1sw1lfqgcz53yea]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T21:01:06.817Z"}
{"level":"debug","message":"Executing query [m8kp1sw5qh0fbhvadu]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[9,888,2,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T21:01:06.821Z\",\"ACTIVO\"]","timestamp":"2025-03-22T21:01:06.821Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 2, Área ID: 888, Rol ID: 888, Documento ID: 9","timestamp":"2025-03-22T21:01:06.825Z"}
{"level":"debug","message":"Executing query [m8kp1swa78ywvvojkl]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[9,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T21:01:06.826Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kp1swa78ywvvojkl]","params":"[9,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T21:01:06.830Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T21:01:06.830Z"}
{"level":"debug","message":"Executing query [m8kp1swfkzxhsajxzn]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[9]","timestamp":"2025-03-22T21:01:06.831Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kp1swfkzxhsajxzn]","params":"[9]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T21:01:06.832Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T21:01:06.833Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T21:01:06.833Z"}
{"level":"debug","message":"Executing query [m8kp1swiqwwh3aykhup]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[9,2,\"RESTAURAR\"]","timestamp":"2025-03-22T21:01:06.834Z"}
{"level":"debug","message":"Executing query [m8kp1swn8pst3xodb5j]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[9]","timestamp":"2025-03-22T21:01:06.839Z"}
{"level":"debug","message":"Executing query [m8kp1swp2e7kxjlbjij]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[9,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T21:01:06.841Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kp1swp2e7kxjlbjij]","params":"[9,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T21:01:06.844Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T21:01:06.844Z"}
{"level":"debug","message":"Executing query [m8kp1swtv25am4z20vq]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[9]","timestamp":"2025-03-22T21:01:06.845Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kp1swtv25am4z20vq]","params":"[9]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T21:01:06.847Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T21:01:06.847Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T21:01:06.848Z"}
{"level":"debug","message":"Executing query [m8kp1swxphdl1u3fssc]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[9,888,2,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T21:01:06.849Z\",\"ACTIVO\"]","timestamp":"2025-03-22T21:01:06.849Z"}
{"level":"debug","message":"Executing query [m8kp1sx042su9w7y5ss]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T21:01:06.852Z"}
{"level":"debug","message":"Executing query [m8kp1sx3sll1ulzho4m]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[2,\"DOCUMENTO\",10,\"ELIMINAR\"]","timestamp":"2025-03-22T21:01:06.855Z"}
{"level":"debug","message":"Executing query [m8kp1sx50zly0iuogh7]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[10]","timestamp":"2025-03-22T21:01:06.857Z"}
{"level":"debug","message":"Executing query [m8kp1sx8qgidlkxdayf]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T21:01:06.860Z"}
{"level":"debug","message":"Executing query [m8kp1sxbc3vnit20dl4]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[9]","timestamp":"2025-03-22T21:01:06.863Z"}
{"level":"debug","message":"Executing query [m8kp1sxfdhnnn2k5uq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:01:06.867Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:01:06.868Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:06.966Z"}
{"level":"debug","message":"Executing query [m8kp1t09o4mq8r1zjxa]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:01:06.969Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:01:06.978Z"}
{"level":"debug","message":"Executing query [m8kp1t0jzcaxq1z46u8]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T21:01:06.979Z"}
{"level":"debug","message":"Executing query [m8kp1t0m5i348q9hp8q]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742677266968\"]","timestamp":"2025-03-22T21:01:06.982Z"}
{"level":"debug","message":"Executing query [m8kp1t0oy0xryni78mh]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742677266968\",\"TEST-OFI-FORENSE-1742677266968\",6191,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742677266968\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T21:01:06.984Z"}
{"level":"debug","message":"Executing query [m8kp1t0t4buzdret891]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-22T21:01:06.989Z"}
{"level":"debug","message":"Executing query [m8kp1t0voeku3fz3yi]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742677266968\"]","timestamp":"2025-03-22T21:01:06.991Z"}
{"level":"debug","message":"Executing query [m8kp1t0xe23ojp33yeg]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",9]","timestamp":"2025-03-22T21:01:06.993Z"}
{"level":"debug","message":"Executing query [m8kp1t10xkmjwqep9u]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-22T21:01:06.996Z"}
{"level":"debug","message":"Executing query [m8kp1t12yrxradlr9hf]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-22T21:01:06.998Z"}
{"level":"debug","message":"Executing query [m8kp1t14ekez1vwn41m]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-22T21:01:07.000Z"}
{"level":"debug","message":"Executing query [m8kp1t1634stdzufm69]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-22T21:01:07.002Z"}
{"level":"debug","message":"Executing query [m8kp1t187mbjfs3lvhx]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[9]","timestamp":"2025-03-22T21:01:07.004Z"}
{"level":"debug","message":"Executing query [m8kp1t19gnqjikms9xa]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742677267005\",\"TEST-SP-OFI-FORENSE-1742677267005\",658,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T21:01:07.005Z"}
{"level":"debug","message":"Executing query [m8kp1t1cimzhdij0iuo]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742677267005\"]","timestamp":"2025-03-22T21:01:07.008Z"}
{"level":"debug","message":"Executing query [m8kp1t1ebunizch2yrg]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742677267005\"]","timestamp":"2025-03-22T21:01:07.010Z"}
{"level":"debug","message":"Executing query [m8kp1t1hx7sbd25xxw]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:01:07.013Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:01:07.014Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:07.113Z"}
{"level":"debug","message":"Executing query [m8kp1t4csq0yacj7xla]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:01:07.116Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:01:07.127Z"}
{"level":"debug","message":"Executing query [m8kp1t4pipfb1z2weyd]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T21:01:07.129Z"}
{"level":"debug","message":"Executing query [m8kp1t4rwkpg45rvd7]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742677267115\"]","timestamp":"2025-03-22T21:01:07.131Z"}
{"level":"debug","message":"Executing query [m8kp1t4synee9xtbz5a]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742677267115\",\"TEST-OFICIO-1742677267115\",2270,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T21:01:07.132Z"}
{"level":"debug","message":"Executing query [m8kp1t4we3wjpjr7fmj]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-22T21:01:07.136Z"}
{"level":"debug","message":"Executing query [m8kp1t4yb79zgdt6uc8]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742677267115\"]","timestamp":"2025-03-22T21:01:07.138Z"}
{"level":"debug","message":"Executing query [m8kp1t4z3hyxrvv1gg3]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",9]","timestamp":"2025-03-22T21:01:07.139Z"}
{"level":"debug","message":"Executing query [m8kp1t52ge15aldswsb]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-22T21:01:07.142Z"}
{"level":"debug","message":"Executing query [m8kp1t54ndb2x6as5i]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-22T21:01:07.144Z"}
{"level":"debug","message":"Executing query [m8kp1t57ihfiqrkrdvm]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-22T21:01:07.147Z"}
{"level":"debug","message":"Executing query [m8kp1t59dyta14fjh5]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-22T21:01:07.149Z"}
{"level":"debug","message":"Executing query [m8kp1t5cuvp1fyxyuy]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[9]","timestamp":"2025-03-22T21:01:07.152Z"}
{"level":"debug","message":"Executing query [m8kp1t5es8mwyvhku7]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742677267154\",\"TEST-SP-OFICIO-1742677267154\",5594,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T21:01:07.154Z"}
{"level":"debug","message":"Executing query [m8kp1t5h1t684gjwsdbj]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742677267154\"]","timestamp":"2025-03-22T21:01:07.157Z"}
{"level":"debug","message":"Executing query [m8kp1t5if3gax11q9qt]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742677267154\"]","timestamp":"2025-03-22T21:01:07.159Z"}
{"level":"debug","message":"Executing query [m8kp1t5lf8rlr9ft13h]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:01:07.161Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:01:07.162Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:07.265Z"}
{"level":"debug","message":"Executing query [m8kp1t8ki686her74i8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:01:07.268Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:01:07.277Z"}
{"level":"debug","message":"Executing query [m8kp1t8uvxbr9bd12q]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T21:01:07.278Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T21:01:07.280Z"}
{"level":"debug","message":"Executing query [m8kp1t8wnrvp81vlfc]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T21:01:07.280Z"}
{"level":"debug","message":"Executing query [m8kp1t8xirhej9wcjz]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T21:01:07.281Z"}
{"level":"debug","message":"Executing query [m8kp1t8ylc291n06nbq]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T21:01:07.282Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T21:01:07.283Z"}
{"level":"debug","message":"Executing query [m8kp1t90flwngaadmus]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[9,1,888]","timestamp":"2025-03-22T21:01:07.284Z"}
{"level":"debug","message":"Executing query [m8kp1t905xlwlp8lwrj]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[9,null,1,888,1,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-22T21:01:07.284Z"}
{"level":"debug","message":"Executing query [m8kp1t96yzg447ygm4k]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[5]","timestamp":"2025-03-22T21:01:07.290Z"}
{"level":"debug","message":"Executing query [m8kp1t99yz76u9zi6q]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-22 21:01:07\",2,5]","timestamp":"2025-03-22T21:01:07.293Z"}
{"level":"debug","message":"Executing query [m8kp1t9cocbyp14mhkf]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[5]","timestamp":"2025-03-22T21:01:07.296Z"}
{"level":"debug","message":"Executing query [m8kp1t9dbokiyq58bm]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T21:01:07.297Z"}
{"level":"debug","message":"Executing query [m8kp1t9e95ttgvhvdj]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[888]","timestamp":"2025-03-22T21:01:07.299Z"}
{"level":"debug","message":"Executing query [m8kp1t9gwtcr0jxmm2n]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[5]","timestamp":"2025-03-22T21:01:07.300Z"}
{"level":"debug","message":"Executing query [m8kp1t9jpu5v2j2oqb]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[5]","timestamp":"2025-03-22T21:01:07.303Z"}
{"level":"debug","message":"Executing query [m8kp1t9lbr8g9j7idbb]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[9]","timestamp":"2025-03-22T21:01:07.305Z"}
{"level":"debug","message":"Executing query [m8kp1t9o7y6jaiisnul]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:01:07.308Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:07.407Z"}
{"level":"debug","message":"Executing query [m8kp1tci2aza9ks08ie]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:01:07.410Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:01:07.422Z"}
{"level":"debug","message":"Executing query [m8kp1tcv9jlttqh8vj5]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742677267409\"]","timestamp":"2025-03-22T21:01:07.423Z"}
{"level":"debug","message":"Executing query [m8kp1tcxyyw2afnqexe]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742677267409\"]","timestamp":"2025-03-22T21:01:07.425Z"}
{"level":"debug","message":"Executing query [m8kp1tcxt4ltguq9k5h]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742677267409\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T21:01:07.425Z"}
{"level":"debug","message":"Executing query [m8kp1td1gc9j4wjm5g]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-22T21:01:07.429Z"}
{"level":"debug","message":"Executing query [m8kp1td3laxy3hr3oc]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742677267409\"]","timestamp":"2025-03-22T21:01:07.431Z"}
{"level":"debug","message":"Executing query [m8kp1td4aaock7hgy3l]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1003]","timestamp":"2025-03-22T21:01:07.432Z"}
{"level":"debug","message":"Executing query [m8kp1td7j0tkhq4hvj]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-22T21:01:07.435Z"}
{"level":"debug","message":"Executing query [m8kp1td9dp4mr90yo7s]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-22T21:01:07.437Z"}
{"level":"debug","message":"Executing query [m8kp1tdbwiglp3lpht]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-22T21:01:07.439Z"}
{"level":"debug","message":"Executing query [m8kp1tdd9rkafy4348]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-22T21:01:07.441Z"}
{"level":"debug","message":"Executing query [m8kp1tddpkea6s8xnf]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-22T21:01:07.441Z"}
{"level":"debug","message":"Executing query [m8kp1tdg93mk1e0gbs]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1003]","timestamp":"2025-03-22T21:01:07.444Z"}
{"level":"debug","message":"Executing query [m8kp1tdhdej9o28rdve]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T21:01:07.445Z"}
{"level":"debug","message":"Executing query [m8kp1tdjapyo1dzvxpi]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:01:07.447Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:01:07.448Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:07.549Z"}
{"level":"debug","message":"Executing query [m8kp1tgfhw45rp0fx8]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:01:07.551Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:01:07.560Z"}
{"level":"debug","message":"Executing query [m8kp1tgpvxjqo1g414g]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T21:01:07.562Z"}
{"level":"debug","message":"Executing query [m8kp1tgrmf9neqf4nb]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742677267550\"]","timestamp":"2025-03-22T21:01:07.563Z"}
{"level":"debug","message":"Executing query [m8kp1tgs5vc6dwiu02]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742677267550\",\"TEST-OFI-QUIMICA-1742677267550\",1862,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T21:01:07.564Z"}
{"level":"debug","message":"Executing query [m8kp1tgwkj653fmkgn]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-22T21:01:07.568Z"}
{"level":"debug","message":"Executing query [m8kp1tgzvsx313nx6xb]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742677267550\"]","timestamp":"2025-03-22T21:01:07.571Z"}
{"level":"debug","message":"Executing query [m8kp1th1ik6xwndv1it]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",5]","timestamp":"2025-03-22T21:01:07.573Z"}
{"level":"debug","message":"Executing query [m8kp1th3idekkl2ckpp]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-22T21:01:07.575Z"}
{"level":"debug","message":"Executing query [m8kp1th5t594oniyz9b]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-22T21:01:07.577Z"}
{"level":"debug","message":"Executing query [m8kp1th786pqoq9y9xs]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-22T21:01:07.579Z"}
{"level":"debug","message":"Executing query [m8kp1th8nk0wg3fj87l]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-22T21:01:07.580Z"}
{"level":"debug","message":"Executing query [m8kp1thbxew7zrkud6]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[5]","timestamp":"2025-03-22T21:01:07.583Z"}
{"level":"debug","message":"Executing query [m8kp1thd66j9rgftgwb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:01:07.585Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:01:07.586Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:07.683Z"}
{"level":"debug","message":"Executing query [m8kp1tk6v3bmy1snle]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:01:07.686Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:01:07.699Z"}
{"level":"debug","message":"Executing query [m8kp1tklvw459o17vvi]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742677267685\"]","timestamp":"2025-03-22T21:01:07.701Z"}
{"level":"debug","message":"Executing query [m8kp1tkm2oc0g5ivvnz]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742677267685\",true]","timestamp":"2025-03-22T21:01:07.702Z"}
{"level":"debug","message":"Executing query [m8kp1tksb4fx34iv8iu]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-22T21:01:07.708Z"}
{"level":"debug","message":"Executing query [m8kp1tkucxlhdr9v5i]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742677267685\"]","timestamp":"2025-03-22T21:01:07.710Z"}
{"level":"debug","message":"Executing query [m8kp1tkw9zvgpbx839]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",10]","timestamp":"2025-03-22T21:01:07.712Z"}
{"level":"debug","message":"Executing query [m8kp1tkzshsren9muab]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-22T21:01:07.715Z"}
{"level":"debug","message":"Executing query [m8kp1tl1prlo5bn9do]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-22T21:01:07.717Z"}
{"level":"debug","message":"Executing query [m8kp1tl5mh8b93bh6k]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-22T21:01:07.721Z"}
{"level":"debug","message":"Executing query [m8kp1tl64pteflgv1dh]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-22T21:01:07.722Z"}
{"level":"debug","message":"Executing query [m8kp1tl7rvkxuvvhjgm]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-22T21:01:07.723Z"}
{"level":"debug","message":"Executing query [m8kp1tl9rxz8oz3jjkh]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[10]","timestamp":"2025-03-22T21:01:07.725Z"}
{"level":"debug","message":"Executing query [m8kp1tlbzjffko8rie]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T21:01:07.727Z"}
{"level":"debug","message":"Executing query [m8kp1tlcgknuf57vrs]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:01:07.728Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:01:07.730Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:07.829Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:07.835Z"}
{"level":"debug","message":"Executing query [m8kp1toc7i1y2m3l53l]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:01:07.836Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:01:07.845Z"}
{"level":"debug","message":"Executing query [m8kp1tom51idx6q1zcs]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T21:01:07.846Z"}
{"level":"debug","message":"Executing query [m8kp1tooe3pitlp417h]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T21:01:07.848Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T21:01:07.849Z"}
{"level":"debug","message":"Executing query [m8kp1top4zlretphejg]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T21:01:07.849Z"}
{"level":"debug","message":"Executing query [m8kp1tor6ytj4glqhqu]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T21:01:07.851Z"}
{"level":"debug","message":"Executing query [m8kp1totocw3xe8a4r]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T21:01:07.853Z"}
{"level":"debug","message":"Executing query [m8kp1touf4of5xr826]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T21:01:07.854Z"}
{"level":"debug","message":"Executing query [m8kp1tozm5qi57u3ud]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-22T21:01:07.859Z"}
{"level":"debug","message":"Executing query [m8kp1tp1bnwewqbrlki]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T21:01:07.861Z"}
{"level":"debug","message":"Executing query [m8kp1tp36s9y9jlxxnb]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",7]","timestamp":"2025-03-22T21:01:07.863Z"}
{"level":"debug","message":"Executing query [m8kp1tp926bjkht33p6]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-22T21:01:07.869Z"}
{"level":"debug","message":"Executing query [m8kp1tpb97lh7bbe8wc]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-22T21:01:07.871Z"}
{"level":"debug","message":"Executing query [m8kp1tpf9jgt2cxmlus]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[7]","timestamp":"2025-03-22T21:01:07.875Z"}
{"level":"debug","message":"Executing query [m8kp1tphh1rmggynfo5]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:01:07.877Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:01:07.878Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:07.977Z"}
{"level":"debug","message":"Executing query [m8kp1tsbj24xhfvmhfb]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:01:07.979Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:01:07.993Z"}
{"level":"debug","message":"Executing query [m8kp1tsqycdh2q0szcn]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T21:01:07.994Z"}
{"level":"debug","message":"Executing query [m8kp1tss9uihn7dnnhf]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T21:01:07.996Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T21:01:07.998Z"}
{"level":"debug","message":"Executing query [m8kp1tsubihv24asd0d]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T21:01:07.998Z"}
{"level":"debug","message":"Executing query [m8kp1tsvb6zwqpmtvfk]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T21:01:07.999Z"}
{"level":"debug","message":"Executing query [m8kp1tswr13hdkclud8]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T21:01:08.000Z"}
{"level":"debug","message":"Executing query [m8kp1tszhbe50sgpg5d]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[10]","timestamp":"2025-03-22T21:01:08.003Z"}
{"level":"debug","message":"Executing query [m8kp1tt1lbav0ru9gaf]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[10]","timestamp":"2025-03-22T21:01:08.005Z"}
{"level":"debug","message":"Executing query [m8kp1tt3o85rpmzgty]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",10]","timestamp":"2025-03-22T21:01:08.007Z"}
{"level":"debug","message":"Executing query [m8kp1tt6tm0s0l52x7]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[10]","timestamp":"2025-03-22T21:01:08.010Z"}
{"level":"debug","message":"Executing query [m8kp1tt8k5laemf882s]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[10]","timestamp":"2025-03-22T21:01:08.012Z"}
{"level":"debug","message":"Executing query [m8kp1ttbzpr65dlzg]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[10]","timestamp":"2025-03-22T21:01:08.015Z"}
{"level":"debug","message":"Executing query [m8kp1ttc62f5jiii3pi]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:01:08.016Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:01:08.017Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:01:08.112Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:01:08.124Z"}
{"level":"debug","message":"Executing query [m8kp1twfmeyadm3n6u7]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T21:01:08.127Z"}
{"level":"debug","message":"Executing query [m8kp1twgnwecc73nj2n]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T21:01:08.128Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8kp1twgnwecc73nj2n]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T21:01:08.130Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:01:08.132Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T21:01:08.212Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T21:01:08.312Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T21:01:08.409Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T21:01:08.410Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T21:01:08.410Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T21:01:08.411Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T21:01:08.412Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T21:01:08.412Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T21:01:19.749Z"}
{"level":"info","message":"🔒 Servidor seguro de documentación corriendo en http://localhost:3002","timestamp":"2025-03-22T21:01:19.755Z"}
{"level":"info","message":"📚 Documentación completa de API en http://localhost:3002/api-docs","timestamp":"2025-03-22T21:01:19.755Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:02.297Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:17:02.457Z"}
{"duration":"21ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-22T21:17:02.460Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-22T21:17:02.467Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:17:02.478Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:03.154Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T21:17:03.327Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:17:03.389Z"}
{"level":"debug","message":"Executing query [m8kpmb061ha9bscgg3r]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-22T21:17:03.414Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:17:03.449Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:04.106Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:17:04.158Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-22T21:17:04.160Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:04.363Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-22T21:17:04.377Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:17:04.414Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-22T21:17:04.437Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:17:04.466Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:04.574Z"}
{"level":"debug","message":"Executing query [m8kpmbwhknopcc6eavc]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:17:04.577Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:17:04.590Z"}
{"level":"debug","message":"Executing query [m8kpmbwvz3glcd66jm]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-22T21:17:04.591Z"}
{"level":"info","message":"Usando usuario existente ID: 2","timestamp":"2025-03-22T21:17:04.594Z"}
{"level":"debug","message":"Executing query [m8kpmbwy9f6e7ukwcbv]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-22T21:17:04.595Z"}
{"level":"debug","message":"Executing query [m8kpmbx458o0ax44ky4]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[11,888,2,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-22T21:17:04.600Z\",\"ACTIVO\"]","timestamp":"2025-03-22T21:17:04.601Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 2, Área ID: 888, Rol ID: 888, Documento ID: 11","timestamp":"2025-03-22T21:17:04.605Z"}
{"level":"debug","message":"Executing query [m8kpmbx9gxgqhw4puhc]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[11,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T21:17:04.605Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kpmbx9gxgqhw4puhc]","params":"[11,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T21:17:04.610Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T21:17:04.610Z"}
{"level":"debug","message":"Executing query [m8kpmbxf7x50h44uujt]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[11]","timestamp":"2025-03-22T21:17:04.611Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kpmbxf7x50h44uujt]","params":"[11]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T21:17:04.613Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T21:17:04.613Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T21:17:04.614Z"}
{"level":"debug","message":"Executing query [m8kpmbxjxe3hoabqq2e]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[11,2,\"RESTAURAR\"]","timestamp":"2025-03-22T21:17:04.615Z"}
{"level":"debug","message":"Executing query [m8kpmbxn2zr1uqbsz61]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[11]","timestamp":"2025-03-22T21:17:04.619Z"}
{"level":"debug","message":"Executing query [m8kpmbxpg7uxcolj6n8]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[11,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-22T21:17:04.621Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kpmbxpg7uxcolj6n8]","params":"[11,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-22T21:17:04.626Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-22T21:17:04.627Z"}
{"level":"debug","message":"Executing query [m8kpmbxvzu095qhwk5]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[11]","timestamp":"2025-03-22T21:17:04.627Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8kpmbxvzu095qhwk5]","params":"[11]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-22T21:17:04.630Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-22T21:17:04.630Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-22T21:17:04.631Z"}
{"level":"debug","message":"Executing query [m8kpmbxz8q8ev4jbqqc]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[11,888,2,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-22T21:17:04.631Z\",\"ACTIVO\"]","timestamp":"2025-03-22T21:17:04.631Z"}
{"level":"debug","message":"Executing query [m8kpmby2e1vs6vbmpe6]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T21:17:04.634Z"}
{"level":"debug","message":"Executing query [m8kpmby4f87zsglm0yn]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[2,\"DOCUMENTO\",12,\"ELIMINAR\"]","timestamp":"2025-03-22T21:17:04.637Z"}
{"level":"debug","message":"Executing query [m8kpmby85kgl1th8ezj]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[12]","timestamp":"2025-03-22T21:17:04.640Z"}
{"level":"debug","message":"Executing query [m8kpmbyav9tydlgdj1]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-22T21:17:04.642Z"}
{"level":"debug","message":"Executing query [m8kpmbyda17qqwh335t]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[11]","timestamp":"2025-03-22T21:17:04.645Z"}
{"level":"debug","message":"Executing query [m8kpmbygklby18v70an]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:17:04.648Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:17:04.649Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:04.950Z"}
{"level":"debug","message":"Executing query [m8kpmc6x9462xlkxcua]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:17:04.953Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:17:04.967Z"}
{"level":"debug","message":"Executing query [m8kpmc7d46e0x4me0qy]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T21:17:04.969Z"}
{"level":"debug","message":"Executing query [m8kpmc7fvzdt5pis3e7]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742678224952\"]","timestamp":"2025-03-22T21:17:04.971Z"}
{"level":"debug","message":"Executing query [m8kpmc7h181gd8foxe9j]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742678224952\",\"TEST-OFICIO-1742678224952\",1581,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T21:17:04.973Z"}
{"level":"debug","message":"Executing query [m8kpmc7mipyemkif5zp]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-22T21:17:04.978Z"}
{"level":"debug","message":"Executing query [m8kpmc7phdei5t8kna]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742678224952\"]","timestamp":"2025-03-22T21:17:04.981Z"}
{"level":"debug","message":"Executing query [m8kpmc7rjbqvhhvnpvf]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",11]","timestamp":"2025-03-22T21:17:04.983Z"}
{"level":"debug","message":"Executing query [m8kpmc7uswxfek4gbia]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-22T21:17:04.986Z"}
{"level":"debug","message":"Executing query [m8kpmc7w6cgzg2ii1qm]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-22T21:17:04.988Z"}
{"level":"debug","message":"Executing query [m8kpmc7yx4c2a1d14fa]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-22T21:17:04.990Z"}
{"level":"debug","message":"Executing query [m8kpmc80wwk0c39svo]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-22T21:17:04.992Z"}
{"level":"debug","message":"Executing query [m8kpmc82xqklyl37bmj]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[11]","timestamp":"2025-03-22T21:17:04.994Z"}
{"level":"debug","message":"Executing query [m8kpmc84d35y3cia5x]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742678224996\",\"TEST-SP-OFICIO-1742678224996\",3198,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-22T21:17:04.996Z"}
{"level":"debug","message":"Executing query [m8kpmc88j71a0ckgdcl]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742678224996\"]","timestamp":"2025-03-22T21:17:05.000Z"}
{"level":"debug","message":"Executing query [m8kpmc89wk23o4imds]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742678224996\"]","timestamp":"2025-03-22T21:17:05.001Z"}
{"level":"debug","message":"Executing query [m8kpmc8ca5a0yv9mcx6]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:17:05.004Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:17:05.005Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:05.105Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:05.110Z"}
{"level":"debug","message":"Executing query [m8kpmcbc66p99jnjfs7]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:17:05.112Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:17:05.122Z"}
{"level":"debug","message":"Executing query [m8kpmcbnldh2hlcyi8]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T21:17:05.123Z"}
{"level":"debug","message":"Executing query [m8kpmcbouusgr6m80ps]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T21:17:05.124Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-22T21:17:05.125Z"}
{"level":"debug","message":"Executing query [m8kpmcbpswodvzgo7il]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-22T21:17:05.125Z"}
{"level":"debug","message":"Executing query [m8kpmcbqyvltqpq7un]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T21:17:05.126Z"}
{"level":"debug","message":"Executing query [m8kpmcbrfblecmxwdje]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T21:17:05.127Z"}
{"level":"debug","message":"Executing query [m8kpmcbsw2asczn2ki9]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-22T21:17:05.128Z"}
{"level":"debug","message":"Executing query [m8kpmcbx78jr74ml4ut]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-22T21:17:05.133Z"}
{"level":"debug","message":"Executing query [m8kpmcbzwxsejryrhhf]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-22T21:17:05.135Z"}
{"level":"debug","message":"Executing query [m8kpmcc1gqxn9gnc79t]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",8]","timestamp":"2025-03-22T21:17:05.137Z"}
{"level":"debug","message":"Executing query [m8kpmcc3g82t5e4ayg]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-22T21:17:05.139Z"}
{"level":"debug","message":"Executing query [m8kpmcc4dmitw1ky7in]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-22T21:17:05.140Z"}
{"level":"debug","message":"Executing query [m8kpmcc7yh036sjld9]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[8]","timestamp":"2025-03-22T21:17:05.143Z"}
{"level":"debug","message":"Executing query [m8kpmcc9pr8w7l13y7]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:17:05.145Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:17:05.146Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:05.254Z"}
{"level":"debug","message":"Executing query [m8kpmcfdhavdmdembl9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:17:05.257Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:17:05.269Z"}
{"level":"debug","message":"Executing query [m8kpmcfr7k0150m1qg4]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T21:17:05.271Z"}
{"level":"debug","message":"Executing query [m8kpmcfsvvoo4zljqyh]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742678225256\"]","timestamp":"2025-03-22T21:17:05.272Z"}
{"level":"debug","message":"Executing query [m8kpmcfthw6uyo384]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742678225256\",\"TEST-OFI-FORENSE-1742678225256\",9524,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742678225256\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T21:17:05.273Z"}
{"level":"debug","message":"Executing query [m8kpmcfyhbncs9te2s]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-22T21:17:05.278Z"}
{"level":"debug","message":"Executing query [m8kpmcg1kw5uyy01cq]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742678225256\"]","timestamp":"2025-03-22T21:17:05.281Z"}
{"level":"debug","message":"Executing query [m8kpmcg3lxb6g57q1oj]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",11]","timestamp":"2025-03-22T21:17:05.283Z"}
{"level":"debug","message":"Executing query [m8kpmcg64j7mlwh2jtk]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-22T21:17:05.286Z"}
{"level":"debug","message":"Executing query [m8kpmcg7wc06qe1m2uc]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-22T21:17:05.287Z"}
{"level":"debug","message":"Executing query [m8kpmcgdkopvn7ad9ni]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-22T21:17:05.293Z"}
{"level":"debug","message":"Executing query [m8kpmcggdbu987aziu]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-22T21:17:05.296Z"}
{"level":"debug","message":"Executing query [m8kpmcgj09ju4c6ycg9]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[11]","timestamp":"2025-03-22T21:17:05.299Z"}
{"level":"debug","message":"Executing query [m8kpmcglzktv0w15uyc]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742678225301\",\"TEST-SP-OFI-FORENSE-1742678225301\",125,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-22T21:17:05.301Z"}
{"level":"debug","message":"Executing query [m8kpmcgolu62fzo7pg]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742678225301\"]","timestamp":"2025-03-22T21:17:05.304Z"}
{"level":"debug","message":"Executing query [m8kpmcgqfmztybz84h]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742678225301\"]","timestamp":"2025-03-22T21:17:05.306Z"}
{"level":"debug","message":"Executing query [m8kpmcgtnzwa98jjmwc]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:17:05.309Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:17:05.310Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:05.416Z"}
{"level":"debug","message":"Executing query [m8kpmcjunum1hpchrvh]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:17:05.418Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:17:05.430Z"}
{"level":"debug","message":"Executing query [m8kpmck76vx802knlli]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-22T21:17:05.431Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-22T21:17:05.432Z"}
{"level":"debug","message":"Executing query [m8kpmck9yr05445duj]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-22T21:17:05.433Z"}
{"level":"debug","message":"Executing query [m8kpmcka4m7tcexity]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-22T21:17:05.434Z"}
{"level":"debug","message":"Executing query [m8kpmckbx3k7dwl7hm9]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-22T21:17:05.435Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-22T21:17:05.436Z"}
{"level":"debug","message":"Executing query [m8kpmckds5basj3n37f]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[11,1,888]","timestamp":"2025-03-22T21:17:05.437Z"}
{"level":"debug","message":"Executing query [m8kpmcket5gb7740kro]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[11,null,1,888,1,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-22T21:17:05.438Z"}
{"level":"debug","message":"Executing query [m8kpmckkvni0f4cgzih]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[6]","timestamp":"2025-03-22T21:17:05.444Z"}
{"level":"debug","message":"Executing query [m8kpmckmhvxfwv0q67]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-22 21:17:05\",2,6]","timestamp":"2025-03-22T21:17:05.446Z"}
{"level":"debug","message":"Executing query [m8kpmckqwf94auwn27g]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[6]","timestamp":"2025-03-22T21:17:05.450Z"}
{"level":"debug","message":"Executing query [m8kpmcksxi8h2yjrlwd]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-22T21:17:05.452Z"}
{"level":"debug","message":"Executing query [m8kpmcku29buat0mwtd]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[888]","timestamp":"2025-03-22T21:17:05.454Z"}
{"level":"debug","message":"Executing query [m8kpmckw81spym2uhrq]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[6]","timestamp":"2025-03-22T21:17:05.456Z"}
{"level":"debug","message":"Executing query [m8kpmcl11sfflu737q5]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[6]","timestamp":"2025-03-22T21:17:05.461Z"}
{"level":"debug","message":"Executing query [m8kpmcl3rwl3f7fspg]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[11]","timestamp":"2025-03-22T21:17:05.463Z"}
{"level":"debug","message":"Executing query [m8kpmcl9d84lvwe1rnv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:17:05.469Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:05.572Z"}
{"level":"debug","message":"Executing query [m8kpmco6qohhnxim4kr]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:17:05.574Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:17:05.586Z"}
{"level":"debug","message":"Executing query [m8kpmcokgk92bde2p9b]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742678225574\"]","timestamp":"2025-03-22T21:17:05.588Z"}
{"level":"debug","message":"Executing query [m8kpmcompiehyb7h6pn]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742678225574\",true]","timestamp":"2025-03-22T21:17:05.590Z"}
{"level":"debug","message":"Executing query [m8kpmcorp7spue8x7jh]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-22T21:17:05.595Z"}
{"level":"debug","message":"Executing query [m8kpmcovu10npxt1lm]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742678225574\"]","timestamp":"2025-03-22T21:17:05.599Z"}
{"level":"debug","message":"Executing query [m8kpmcoys605qh5ez6a]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",12]","timestamp":"2025-03-22T21:17:05.602Z"}
{"level":"debug","message":"Executing query [m8kpmcp1m7aduc7j5qn]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-22T21:17:05.605Z"}
{"level":"debug","message":"Executing query [m8kpmcp3vo52ptxrvjc]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-22T21:17:05.607Z"}
{"level":"debug","message":"Executing query [m8kpmcp6wrfzcbtvg88]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-22T21:17:05.610Z"}
{"level":"debug","message":"Executing query [m8kpmcp8m21lzsipqtk]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-22T21:17:05.612Z"}
{"level":"debug","message":"Executing query [m8kpmcpagta9d58dtkm]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-22T21:17:05.614Z"}
{"level":"debug","message":"Executing query [m8kpmcpdzjvrgig0dxr]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[12]","timestamp":"2025-03-22T21:17:05.617Z"}
{"level":"debug","message":"Executing query [m8kpmcpefjq154xhszg]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T21:17:05.618Z"}
{"level":"debug","message":"Executing query [m8kpmcpf6qmcsl8gj4o]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:17:05.619Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:17:05.620Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:05.719Z"}
{"level":"debug","message":"Executing query [m8kpmcsa6f5n1a8kygi]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:17:05.722Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:17:05.734Z"}
{"level":"debug","message":"Executing query [m8kpmcsn2c6ytctn84g]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742678225721\"]","timestamp":"2025-03-22T21:17:05.735Z"}
{"level":"debug","message":"Executing query [m8kpmcspws374v0r33]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742678225721\"]","timestamp":"2025-03-22T21:17:05.737Z"}
{"level":"debug","message":"Executing query [m8kpmcsp96f94tzt9v5]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742678225721\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-22T21:17:05.737Z"}
{"level":"debug","message":"Executing query [m8kpmcsuf1r48yf0kmv]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-22T21:17:05.742Z"}
{"level":"debug","message":"Executing query [m8kpmcsx6n761qqgwv]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742678225721\"]","timestamp":"2025-03-22T21:17:05.745Z"}
{"level":"debug","message":"Executing query [m8kpmcsy4ow2cnldkw4]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1004]","timestamp":"2025-03-22T21:17:05.746Z"}
{"level":"debug","message":"Executing query [m8kpmct1mv5o61kvzi]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-22T21:17:05.749Z"}
{"level":"debug","message":"Executing query [m8kpmct2wk4jt45nr9a]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-22T21:17:05.750Z"}
{"level":"debug","message":"Executing query [m8kpmct4pyiy0s11eso]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-22T21:17:05.752Z"}
{"level":"debug","message":"Executing query [m8kpmct63db2dijbae8]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-22T21:17:05.754Z"}
{"level":"debug","message":"Executing query [m8kpmct7kc0dg7mizf]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-22T21:17:05.755Z"}
{"level":"debug","message":"Executing query [m8kpmctaf9yxowcnf44]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1004]","timestamp":"2025-03-22T21:17:05.758Z"}
{"level":"debug","message":"Executing query [m8kpmctcg45vyb1dkg6]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-22T21:17:05.760Z"}
{"level":"debug","message":"Executing query [m8kpmcteztxr43xulb]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:17:05.762Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:17:05.763Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:05.861Z"}
{"level":"debug","message":"Executing query [m8kpmcw8xjti0c7wain]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:17:05.864Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:17:05.875Z"}
{"level":"debug","message":"Executing query [m8kpmcwkhxvs5ap3qq]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-22T21:17:05.876Z"}
{"level":"debug","message":"Executing query [m8kpmcwmpj7no1kzbwb]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-22T21:17:05.878Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-22T21:17:05.879Z"}
{"level":"debug","message":"Executing query [m8kpmcwo9kwj2e3zxso]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-22T21:17:05.880Z"}
{"level":"debug","message":"Executing query [m8kpmcwpk4ex72aex7f]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-22T21:17:05.881Z"}
{"level":"debug","message":"Executing query [m8kpmcwqhw39mjst6z]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-22T21:17:05.882Z"}
{"level":"debug","message":"Executing query [m8kpmcwufug1qjg5l66]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[12]","timestamp":"2025-03-22T21:17:05.886Z"}
{"level":"debug","message":"Executing query [m8kpmcwx356ro4ppgeu]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[12]","timestamp":"2025-03-22T21:17:05.889Z"}
{"level":"debug","message":"Executing query [m8kpmcx2k9rspz3a9cq]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",12]","timestamp":"2025-03-22T21:17:05.894Z"}
{"level":"debug","message":"Executing query [m8kpmcx5rp3b4nwcz4]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[12]","timestamp":"2025-03-22T21:17:05.897Z"}
{"level":"debug","message":"Executing query [m8kpmcx7q95dqkjy32r]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[12]","timestamp":"2025-03-22T21:17:05.899Z"}
{"level":"debug","message":"Executing query [m8kpmcx9458f7taqs8]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[12]","timestamp":"2025-03-22T21:17:05.901Z"}
{"level":"debug","message":"Executing query [m8kpmcxayhbxcqthkj]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:17:05.902Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:17:05.904Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:06.006Z"}
{"level":"debug","message":"Executing query [m8kpmd08f1emmejpez]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-22T21:17:06.008Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:17:06.017Z"}
{"level":"debug","message":"Executing query [m8kpmd0jmryxlk0tutb]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-22T21:17:06.019Z"}
{"level":"debug","message":"Executing query [m8kpmd0kxtc2gk3riiq]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742678226008\"]","timestamp":"2025-03-22T21:17:06.020Z"}
{"level":"debug","message":"Executing query [m8kpmd0l0h9tigoh77ta]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742678226008\",\"TEST-OFI-QUIMICA-1742678226008\",8312,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-22T21:17:06.021Z"}
{"level":"debug","message":"Executing query [m8kpmd0q5nt1hbwye2r]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-22T21:17:06.026Z"}
{"level":"debug","message":"Executing query [m8kpmd0sp7tzxaj66g]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742678226008\"]","timestamp":"2025-03-22T21:17:06.028Z"}
{"level":"debug","message":"Executing query [m8kpmd0ugugh9f008w]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",6]","timestamp":"2025-03-22T21:17:06.030Z"}
{"level":"debug","message":"Executing query [m8kpmd0wkfm3xny93rf]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-22T21:17:06.032Z"}
{"level":"debug","message":"Executing query [m8kpmd0yfopmynvaebk]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-22T21:17:06.034Z"}
{"level":"debug","message":"Executing query [m8kpmd10jm6cbvdjwdb]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-22T21:17:06.036Z"}
{"level":"debug","message":"Executing query [m8kpmd129mzpqeoig4]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-22T21:17:06.038Z"}
{"level":"debug","message":"Executing query [m8kpmd15898925qpkgp]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[6]","timestamp":"2025-03-22T21:17:06.041Z"}
{"level":"debug","message":"Executing query [m8kpmd16b6n7zviwqkl]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-22T21:17:06.042Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:17:06.043Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:17:06.141Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:17:06.159Z"}
{"level":"debug","message":"Executing query [m8kpmd4h4ntf854mqt]: SELECT 1 as test","params":"[]","timestamp":"2025-03-22T21:17:06.161Z"}
{"level":"debug","message":"Executing query [m8kpmd4j8mrnzcizkav]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-22T21:17:06.163Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8kpmd4j8mrnzcizkav]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-22T21:17:06.164Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-22T21:17:06.165Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-22T21:17:06.242Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-22T21:17:06.345Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-22T21:17:06.456Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-22T21:17:06.457Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-22T21:17:06.458Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-22T21:17:06.458Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-22T21:17:06.458Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-22T21:17:06.458Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:18:20.230Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:18:20.233Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:18:20.509Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:18:20.794Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T21:18:42.600Z"}
{"level":"info","message":"🔒 Servidor seguro de documentación corriendo en http://localhost:3002","timestamp":"2025-03-22T21:18:42.608Z"}
{"level":"info","message":"📚 Documentación completa de API en http://localhost:3002/api-docs","timestamp":"2025-03-22T21:18:42.608Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:26:38.629Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:26:38.634Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:26:38.920Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:26:39.216Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:26:47.824Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:26:47.828Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:26:48.083Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:26:48.359Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:27:13.813Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:27:13.816Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:27:14.090Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:27:14.378Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T21:28:19.779Z"}
{"level":"info","message":"🔒 Servidor seguro de documentación corriendo en http://localhost:3002","timestamp":"2025-03-22T21:28:19.786Z"}
{"level":"info","message":"📚 Documentación completa de API en http://localhost:3002/api-docs","timestamp":"2025-03-22T21:28:19.786Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-22T21:43:44.216Z"}
{"level":"info","message":"🔒 Servidor seguro de documentación corriendo en http://localhost:3002","timestamp":"2025-03-22T21:43:44.222Z"}
{"level":"info","message":"📚 Documentación completa de API en http://localhost:3002/api-docs","timestamp":"2025-03-22T21:43:44.223Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:43:54.568Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:43:54.572Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-22T21:43:54.902Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-22T21:43:55.206Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:09:23.016Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:09:23.019Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:09:23.385Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T04:09:23.763Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:18:43.971Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:18:43.974Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:18:44.253Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T04:18:44.563Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:22:00.856Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:22:00.860Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:22:01.134Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T04:22:01.423Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:24:23.600Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:24:23.604Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:24:23.902Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T04:24:24.198Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:24:37.364Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:24:37.368Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:24:37.632Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T04:24:37.906Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:46:24.180Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:46:24.183Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:46:24.462Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T04:46:24.758Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:47:06.047Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:47:06.052Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:47:06.304Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T04:47:06.556Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:48:37.010Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:48:37.014Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:48:37.267Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T04:48:37.531Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:48:49.470Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:48:49.473Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T04:48:49.732Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T04:48:49.993Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-23T04:49:02.109Z"}
{"level":"info","message":"🔒 Servidor seguro de documentación corriendo en http://localhost:3002","timestamp":"2025-03-23T04:49:02.116Z"}
{"level":"info","message":"📚 Documentación completa de API en http://localhost:3002/api-docs","timestamp":"2025-03-23T04:49:02.116Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-23T04:52:57.405Z"}
{"level":"info","message":"🔒 Servidor seguro de documentación corriendo en http://localhost:3002","timestamp":"2025-03-23T04:52:57.413Z"}
{"level":"info","message":"📚 Documentación completa de API en http://localhost:3002/api-docs","timestamp":"2025-03-23T04:52:57.414Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:21:54.913Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:21:54.916Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:21:55.167Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:21:55.425Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-23T05:22:01.277Z"}
{"level":"info","message":"🔒 Servidor seguro de documentación corriendo en http://localhost:3002","timestamp":"2025-03-23T05:22:01.284Z"}
{"level":"info","message":"📚 Documentación completa de API en http://localhost:3002/api-docs","timestamp":"2025-03-23T05:22:01.284Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:32:31.780Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:32:31.784Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:32:32.065Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:32:32.353Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:33:04.314Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:33:04.317Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:33:04.588Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:33:04.868Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:33:19.654Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:33:19.657Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:33:19.965Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:33:20.290Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:33:22.120Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:33:22.124Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:33:22.379Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:33:22.676Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:33:48.564Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:33:48.568Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:33:48.845Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:33:49.116Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:36:07.815Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:36:07.819Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:36:08.081Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:36:08.371Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:36:24.166Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:36:24.169Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:36:24.428Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:36:24.712Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:37:05.769Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:37:05.773Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:37:06.056Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:37:06.345Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:37:21.599Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:37:21.603Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:37:21.870Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:37:22.153Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:37:34.245Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:37:34.249Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:37:34.530Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:37:34.806Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:37:58.035Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:37:58.039Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:37:58.320Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:37:58.616Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:38:20.910Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:38:20.914Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:38:21.200Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:38:21.558Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:38:22.739Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:38:22.743Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:38:23.002Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:38:23.266Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:38:54.128Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:38:54.131Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:38:54.410Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:38:54.669Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:40:55.405Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:40:55.409Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:40:55.656Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:40:55.902Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:41:42.471Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:41:42.476Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:41:42.719Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:41:42.967Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:53:32.109Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:53:32.113Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:53:32.379Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:53:32.647Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-23T05:54:52.419Z"}
{"level":"info","message":"🔒 Servidor seguro de documentación corriendo en http://localhost:3002","timestamp":"2025-03-23T05:54:52.426Z"}
{"level":"info","message":"📚 Documentación completa de API en http://localhost:3002/api-docs","timestamp":"2025-03-23T05:54:52.427Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:55:06.658Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:55:06.661Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T05:55:06.910Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T05:55:07.212Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T15:31:51.365Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T15:31:51.369Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T15:31:51.715Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T15:31:52.079Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T15:39:23.648Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T15:41:02.967Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T15:41:02.971Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=oficri_sistema","timestamp":"2025-03-23T15:41:03.223Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T15:41:03.476Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T16:23:57.513Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T16:23:57.517Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=oficri_sistema","timestamp":"2025-03-23T16:23:57.781Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:23:58.061Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T16:31:39.136Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T16:31:39.139Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=oficri_sistema","timestamp":"2025-03-23T16:31:39.402Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T16:31:54.969Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T16:31:54.972Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=oficri_sistema","timestamp":"2025-03-23T16:31:55.244Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:31:55.535Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T16:32:54.633Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T16:32:54.637Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=oficri_sistema","timestamp":"2025-03-23T16:32:55.018Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:32:55.304Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:40.896Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:45:41.053Z"}
{"duration":"22ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-23T16:45:41.056Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-23T16:45:41.063Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T16:45:41.074Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:41.976Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-23T16:45:42.159Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:45:42.234Z"}
{"level":"debug","message":"Executing query [m8lvd71teayslugsa2]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-23T16:45:42.257Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T16:45:42.288Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:42.903Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T16:45:42.952Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-23T16:45:42.955Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:43.147Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-23T16:45:43.161Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:45:43.191Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-23T16:45:43.203Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T16:45:43.229Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:43.332Z"}
{"level":"debug","message":"Executing query [m8lvd7vqonrrz5k8y5d]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T16:45:43.335Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:45:43.349Z"}
{"level":"debug","message":"Executing query [m8lvd7w74unqynx9ma7]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-23T16:45:43.351Z"}
{"level":"info","message":"Usando usuario existente ID: 2","timestamp":"2025-03-23T16:45:43.353Z"}
{"level":"debug","message":"Executing query [m8lvd7wa65fn7gimf4]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-23T16:45:43.354Z"}
{"level":"debug","message":"Executing query [m8lvd7wgz2m6l8a22d]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[15,888,2,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-23T16:45:43.360Z\",\"ACTIVO\"]","timestamp":"2025-03-23T16:45:43.360Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 2, Área ID: 888, Rol ID: 888, Documento ID: 15","timestamp":"2025-03-23T16:45:43.366Z"}
{"level":"debug","message":"Executing query [m8lvd7wowtwwomi5xn9]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[15,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-23T16:45:43.368Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8lvd7wowtwwomi5xn9]","params":"[15,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-23T16:45:43.376Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-23T16:45:43.377Z"}
{"level":"debug","message":"Executing query [m8lvd7wybkuw6o0m13g]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.378Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8lvd7wybkuw6o0m13g]","params":"[15]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-23T16:45:43.381Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-23T16:45:43.382Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-23T16:45:43.383Z"}
{"level":"debug","message":"Executing query [m8lvd7x4w9k2cs6i5s]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[15,2,\"RESTAURAR\"]","timestamp":"2025-03-23T16:45:43.385Z"}
{"level":"debug","message":"Executing query [m8lvd7xb1a2ihnasds9]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.391Z"}
{"level":"debug","message":"Executing query [m8lvd7xe52sac8aidpx]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[15,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-23T16:45:43.394Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8lvd7xe52sac8aidpx]","params":"[15,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-23T16:45:43.397Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-23T16:45:43.398Z"}
{"level":"debug","message":"Executing query [m8lvd7xiqehsvru7j3]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.398Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8lvd7xiqehsvru7j3]","params":"[15]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-23T16:45:43.400Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-23T16:45:43.401Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-23T16:45:43.401Z"}
{"level":"debug","message":"Executing query [m8lvd7xmagdail8tskh]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[15,888,2,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-23T16:45:43.402Z\",\"ACTIVO\"]","timestamp":"2025-03-23T16:45:43.402Z"}
{"level":"debug","message":"Executing query [m8lvd7xp5ionshg5dk]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-23T16:45:43.405Z"}
{"level":"debug","message":"Executing query [m8lvd7xrgxl1goiwza]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[2,\"DOCUMENTO\",16,\"ELIMINAR\"]","timestamp":"2025-03-23T16:45:43.407Z"}
{"level":"debug","message":"Executing query [m8lvd7xv8259leu3adq]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[16]","timestamp":"2025-03-23T16:45:43.411Z"}
{"level":"debug","message":"Executing query [m8lvd7xyqu7kxqucsg]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-23T16:45:43.414Z"}
{"level":"debug","message":"Executing query [m8lvd7y2psmbmmlctah]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.419Z"}
{"level":"debug","message":"Executing query [m8lvd7y6xip3g0784o]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T16:45:43.422Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T16:45:43.423Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:43.698Z"}
{"level":"debug","message":"Executing query [m8lvd85xcz266979pet]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T16:45:43.701Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:45:43.711Z"}
{"level":"debug","message":"Executing query [m8lvd868vdg30o9bqjs]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-23T16:45:43.712Z"}
{"level":"debug","message":"Executing query [m8lvd86bt7ye4s4xpvf]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742748343700\"]","timestamp":"2025-03-23T16:45:43.715Z"}
{"level":"debug","message":"Executing query [m8lvd86cwzb7q0e7of]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742748343700\",\"TEST-OFICIO-1742748343700\",8603,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-23T16:45:43.717Z"}
{"level":"debug","message":"Executing query [m8lvd86j828whg43cu3]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.723Z"}
{"level":"debug","message":"Executing query [m8lvd86npbi3g7t62ok]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742748343700\"]","timestamp":"2025-03-23T16:45:43.727Z"}
{"level":"debug","message":"Executing query [m8lvd86siwwwpy507d]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",15]","timestamp":"2025-03-23T16:45:43.732Z"}
{"level":"debug","message":"Executing query [m8lvd86v6u14mrwlstr]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.735Z"}
{"level":"debug","message":"Executing query [m8lvd86w2lfsb5zxw4t]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.736Z"}
{"level":"debug","message":"Executing query [m8lvd86yt3fgn3uttbh]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.739Z"}
{"level":"debug","message":"Executing query [m8lvd871sde7tgxid9]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.741Z"}
{"level":"debug","message":"Executing query [m8lvd8744dxegsgq6bb]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.744Z"}
{"level":"debug","message":"Executing query [m8lvd875th84uwhn0l]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742748343745\",\"TEST-SP-OFICIO-1742748343745\",8962,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-23T16:45:43.745Z"}
{"level":"debug","message":"Executing query [m8lvd878y1s1b719nck]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742748343745\"]","timestamp":"2025-03-23T16:45:43.748Z"}
{"level":"debug","message":"Executing query [m8lvd879k4f5ub2xhtr]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742748343745\"]","timestamp":"2025-03-23T16:45:43.749Z"}
{"level":"debug","message":"Executing query [m8lvd87b57a6trwjueo]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T16:45:43.751Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T16:45:43.752Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:43.850Z"}
{"level":"debug","message":"Executing query [m8lvd8a50dg4mit67th9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T16:45:43.853Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:45:43.862Z"}
{"level":"debug","message":"Executing query [m8lvd8afkh0gkl4q0qo]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-23T16:45:43.863Z"}
{"level":"debug","message":"Executing query [m8lvd8ahlu06j65jyur]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742748343852\"]","timestamp":"2025-03-23T16:45:43.865Z"}
{"level":"debug","message":"Executing query [m8lvd8ai5hcb3et7abd]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742748343852\",\"TEST-OFI-FORENSE-1742748343852\",8468,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742748343852\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-23T16:45:43.866Z"}
{"level":"debug","message":"Executing query [m8lvd8apenaa45aow34]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.873Z"}
{"level":"debug","message":"Executing query [m8lvd8as4zl0zlj1unf]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742748343852\"]","timestamp":"2025-03-23T16:45:43.876Z"}
{"level":"debug","message":"Executing query [m8lvd8auekyvzwm0awn]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",15]","timestamp":"2025-03-23T16:45:43.878Z"}
{"level":"debug","message":"Executing query [m8lvd8axvkvgxguepq8]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.881Z"}
{"level":"debug","message":"Executing query [m8lvd8az4wk3lycvaq7]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.883Z"}
{"level":"debug","message":"Executing query [m8lvd8b1xbwekcgbr7]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.885Z"}
{"level":"debug","message":"Executing query [m8lvd8b4jrulzfx18b]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.888Z"}
{"level":"debug","message":"Executing query [m8lvd8b7elu1mreo1lv]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[15]","timestamp":"2025-03-23T16:45:43.891Z"}
{"level":"debug","message":"Executing query [m8lvd8b9fb7lgoqqm8d]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742748343893\",\"TEST-SP-OFI-FORENSE-1742748343893\",7403,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-23T16:45:43.893Z"}
{"level":"debug","message":"Executing query [m8lvd8bcob3huovpddm]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742748343893\"]","timestamp":"2025-03-23T16:45:43.896Z"}
{"level":"debug","message":"Executing query [m8lvd8bdkvojmc4b4br]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742748343893\"]","timestamp":"2025-03-23T16:45:43.897Z"}
{"level":"debug","message":"Executing query [m8lvd8bh4zb6iwiqgtv]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T16:45:43.901Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T16:45:43.902Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:44.001Z"}
{"level":"debug","message":"Executing query [m8lvd8eb4n9716dntgt]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T16:45:44.003Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:45:44.014Z"}
{"level":"debug","message":"Executing query [m8lvd8eokkg1ll03cnh]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-23T16:45:44.016Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-23T16:45:44.017Z"}
{"level":"debug","message":"Executing query [m8lvd8eq527puzvhnyr]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-23T16:45:44.018Z"}
{"level":"debug","message":"Executing query [m8lvd8ern4l58es3i2k]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-23T16:45:44.020Z"}
{"level":"debug","message":"Executing query [m8lvd8eubalvx32i6i]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-23T16:45:44.022Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-23T16:45:44.023Z"}
{"level":"debug","message":"Executing query [m8lvd8ewo3pf0wd2b1]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[13,1,888]","timestamp":"2025-03-23T16:45:44.024Z"}
{"level":"debug","message":"Executing query [m8lvd8expitcx472f1c]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[13,null,1,888,1,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-23T16:45:44.025Z"}
{"level":"debug","message":"Executing query [m8lvd8f1cbdgckuv2wf]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[7]","timestamp":"2025-03-23T16:45:44.029Z"}
{"level":"debug","message":"Executing query [m8lvd8f3t0isn4r3ctr]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-23 16:45:44\",2,7]","timestamp":"2025-03-23T16:45:44.031Z"}
{"level":"debug","message":"Executing query [m8lvd8f55xxt9eo35sc]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[7]","timestamp":"2025-03-23T16:45:44.033Z"}
{"level":"debug","message":"Executing query [m8lvd8f8i180v62if1r]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-23T16:45:44.036Z"}
{"level":"debug","message":"Executing query [m8lvd8f9t3fwycyityg]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[888]","timestamp":"2025-03-23T16:45:44.037Z"}
{"level":"debug","message":"Executing query [m8lvd8fbvofyr7jw75]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[7]","timestamp":"2025-03-23T16:45:44.039Z"}
{"level":"debug","message":"Executing query [m8lvd8fdi7za00rhmc]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[7]","timestamp":"2025-03-23T16:45:44.041Z"}
{"level":"debug","message":"Executing query [m8lvd8femr6rzc2nwg]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[13]","timestamp":"2025-03-23T16:45:44.042Z"}
{"level":"debug","message":"Executing query [m8lvd8fhu8knlboz3w]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T16:45:44.045Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:44.144Z"}
{"level":"debug","message":"Executing query [m8lvd8ib9hbs7xnhmo]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T16:45:44.147Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:45:44.155Z"}
{"level":"debug","message":"Executing query [m8lvd8ils4jed89f95d]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742748344146\"]","timestamp":"2025-03-23T16:45:44.157Z"}
{"level":"debug","message":"Executing query [m8lvd8inbf8twdqypa5]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742748344146\",true]","timestamp":"2025-03-23T16:45:44.159Z"}
{"level":"debug","message":"Executing query [m8lvd8ius9y7fgdpt68]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-23T16:45:44.166Z"}
{"level":"debug","message":"Executing query [m8lvd8iwd3cnjice0zw]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742748344146\"]","timestamp":"2025-03-23T16:45:44.168Z"}
{"level":"debug","message":"Executing query [m8lvd8iy5o3b9vg0k35]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",16]","timestamp":"2025-03-23T16:45:44.170Z"}
{"level":"debug","message":"Executing query [m8lvd8j0l8gytqs43c]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-23T16:45:44.172Z"}
{"level":"debug","message":"Executing query [m8lvd8j2qnjcsa6yec]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-23T16:45:44.174Z"}
{"level":"debug","message":"Executing query [m8lvd8j5j11avexnet]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-23T16:45:44.177Z"}
{"level":"debug","message":"Executing query [m8lvd8j6b1wmbkn5lyt]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-23T16:45:44.178Z"}
{"level":"debug","message":"Executing query [m8lvd8j71y67bqkryb1]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-23T16:45:44.179Z"}
{"level":"debug","message":"Executing query [m8lvd8jbexrx440plan]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[16]","timestamp":"2025-03-23T16:45:44.183Z"}
{"level":"debug","message":"Executing query [m8lvd8jcuk9dtxax2i]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-23T16:45:44.184Z"}
{"level":"debug","message":"Executing query [m8lvd8jd8rtrk9y5kqy]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T16:45:44.185Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T16:45:44.186Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:44.284Z"}
{"level":"debug","message":"Executing query [m8lvd8m7a5tkjdxvlp4]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T16:45:44.287Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:45:44.298Z"}
{"level":"debug","message":"Executing query [m8lvd8mkix5pw56b5s]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742748344286\"]","timestamp":"2025-03-23T16:45:44.300Z"}
{"level":"debug","message":"Executing query [m8lvd8mmcsepwphf6a]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742748344286\"]","timestamp":"2025-03-23T16:45:44.302Z"}
{"level":"debug","message":"Executing query [m8lvd8mn4m8ds8ydbeo]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742748344286\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-23T16:45:44.303Z"}
{"level":"debug","message":"Executing query [m8lvd8ms8o8xoen2a1n]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-23T16:45:44.308Z"}
{"level":"debug","message":"Executing query [m8lvd8mues5o5sa2gj6]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742748344286\"]","timestamp":"2025-03-23T16:45:44.310Z"}
{"level":"debug","message":"Executing query [m8lvd8mvldglhubjar]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1006]","timestamp":"2025-03-23T16:45:44.311Z"}
{"level":"debug","message":"Executing query [m8lvd8myommigw9nuz]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-23T16:45:44.314Z"}
{"level":"debug","message":"Executing query [m8lvd8n0j5p1aa4flj]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-23T16:45:44.316Z"}
{"level":"debug","message":"Executing query [m8lvd8n2jdu6sby4c6r]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-23T16:45:44.318Z"}
{"level":"debug","message":"Executing query [m8lvd8n4udmgy9h2ql]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-23T16:45:44.320Z"}
{"level":"debug","message":"Executing query [m8lvd8n5x4veln26c3h]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-23T16:45:44.321Z"}
{"level":"debug","message":"Executing query [m8lvd8n8p45jxfwg9ej]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1006]","timestamp":"2025-03-23T16:45:44.324Z"}
{"level":"debug","message":"Executing query [m8lvd8n9q41jnv5xvu]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-23T16:45:44.325Z"}
{"level":"debug","message":"Executing query [m8lvd8na2s1wvbjh30v]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T16:45:44.326Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T16:45:44.327Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:44.425Z"}
{"level":"debug","message":"Executing query [m8lvd8q3ea7aelfbw1o]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T16:45:44.427Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:45:44.436Z"}
{"level":"debug","message":"Executing query [m8lvd8qe4xzroowhf5e]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-23T16:45:44.438Z"}
{"level":"debug","message":"Executing query [m8lvd8qgu5qek6h2gvt]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-23T16:45:44.440Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-23T16:45:44.441Z"}
{"level":"debug","message":"Executing query [m8lvd8qivf5lh3m676]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-23T16:45:44.442Z"}
{"level":"debug","message":"Executing query [m8lvd8qkg8ilp7p5amw]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-23T16:45:44.444Z"}
{"level":"debug","message":"Executing query [m8lvd8qlb58fvfvxz3w]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-23T16:45:44.445Z"}
{"level":"debug","message":"Executing query [m8lvd8qpnq24pvbttcf]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[16]","timestamp":"2025-03-23T16:45:44.449Z"}
{"level":"debug","message":"Executing query [m8lvd8qrx0lqtr9y76f]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[16]","timestamp":"2025-03-23T16:45:44.451Z"}
{"level":"debug","message":"Executing query [m8lvd8qu7bihoel74ky]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",16]","timestamp":"2025-03-23T16:45:44.454Z"}
{"level":"debug","message":"Executing query [m8lvd8qwk9e418u58xi]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[16]","timestamp":"2025-03-23T16:45:44.456Z"}
{"level":"debug","message":"Executing query [m8lvd8qx1kciauuv8g9]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[16]","timestamp":"2025-03-23T16:45:44.457Z"}
{"level":"debug","message":"Executing query [m8lvd8r0axnh6huoasi]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[16]","timestamp":"2025-03-23T16:45:44.460Z"}
{"level":"debug","message":"Executing query [m8lvd8r29oww7vgqe06]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T16:45:44.462Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T16:45:44.463Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:44.559Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:44.599Z"}
{"level":"debug","message":"Executing query [m8lvd8uw708t25zlnlo]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T16:45:44.600Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:45:44.610Z"}
{"level":"debug","message":"Executing query [m8lvd8v7nvbudgs74g]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-23T16:45:44.611Z"}
{"level":"debug","message":"Executing query [m8lvd8v8e2kpo80l6fg]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-23T16:45:44.612Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-23T16:45:44.613Z"}
{"level":"debug","message":"Executing query [m8lvd8vamw50jz3vgt]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-23T16:45:44.614Z"}
{"level":"debug","message":"Executing query [m8lvd8vbv8ink5btd7]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-23T16:45:44.615Z"}
{"level":"debug","message":"Executing query [m8lvd8vcfxjb5xxvl4w]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-23T16:45:44.616Z"}
{"level":"debug","message":"Executing query [m8lvd8vcw3aez7mmuwf]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-23T16:45:44.616Z"}
{"level":"debug","message":"Executing query [m8lvd8vgtn5xczo0sv]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[10]","timestamp":"2025-03-23T16:45:44.620Z"}
{"level":"debug","message":"Executing query [m8lvd8vi4855toalvhd]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-23T16:45:44.622Z"}
{"level":"debug","message":"Executing query [m8lvd8vkawm9lp1fl0o]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",10]","timestamp":"2025-03-23T16:45:44.624Z"}
{"level":"debug","message":"Executing query [m8lvd8vn3luu9tzv2l2]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[10]","timestamp":"2025-03-23T16:45:44.627Z"}
{"level":"debug","message":"Executing query [m8lvd8vony9x0epcbfe]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[10]","timestamp":"2025-03-23T16:45:44.628Z"}
{"level":"debug","message":"Executing query [m8lvd8vsle51db3ha8]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[10]","timestamp":"2025-03-23T16:45:44.632Z"}
{"level":"debug","message":"Executing query [m8lvd8vvhwdfyj7rb7o]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T16:45:44.635Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T16:45:44.636Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:44.736Z"}
{"level":"debug","message":"Executing query [m8lvd8yq8zd0etu24bk]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T16:45:44.738Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:45:44.750Z"}
{"level":"debug","message":"Executing query [m8lvd8z3szvlrszrjik]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-23T16:45:44.751Z"}
{"level":"debug","message":"Executing query [m8lvd8z5rpyn6vpumd]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742748344738\"]","timestamp":"2025-03-23T16:45:44.753Z"}
{"level":"debug","message":"Executing query [m8lvd8z7i1iyxvdzrg]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742748344738\",\"TEST-OFI-QUIMICA-1742748344738\",4755,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-23T16:45:44.755Z"}
{"level":"debug","message":"Executing query [m8lvd8zbgi45h0wm1sl]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-23T16:45:44.759Z"}
{"level":"debug","message":"Executing query [m8lvd8zdls06w1nyibj]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742748344738\"]","timestamp":"2025-03-23T16:45:44.761Z"}
{"level":"debug","message":"Executing query [m8lvd8zebas2jumdpr]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",8]","timestamp":"2025-03-23T16:45:44.763Z"}
{"level":"debug","message":"Executing query [m8lvd8zh1vw9egvomjt]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-23T16:45:44.765Z"}
{"level":"debug","message":"Executing query [m8lvd8zjfxxldacrgq]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-23T16:45:44.767Z"}
{"level":"debug","message":"Executing query [m8lvd8zmmos8afa9qf]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-23T16:45:44.770Z"}
{"level":"debug","message":"Executing query [m8lvd8zn7pxgfr6m3e7]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-23T16:45:44.771Z"}
{"level":"debug","message":"Executing query [m8lvd8zqwza0z5mowvo]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[8]","timestamp":"2025-03-23T16:45:44.774Z"}
{"level":"debug","message":"Executing query [m8lvd8zrmslzt4nty9]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T16:45:44.775Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T16:45:44.776Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T16:45:44.872Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T16:45:44.884Z"}
{"level":"debug","message":"Executing query [m8lvd92vbkrjdwcvqt9]: SELECT 1 as test","params":"[]","timestamp":"2025-03-23T16:45:44.888Z"}
{"level":"debug","message":"Executing query [m8lvd92x4uq98zqt52l]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-23T16:45:44.889Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8lvd92x4uq98zqt52l]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-23T16:45:44.891Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T16:45:44.892Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-23T16:45:44.970Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-23T16:45:45.071Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-23T16:45:45.169Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-23T16:45:45.170Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-23T16:45:45.170Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-23T16:45:45.170Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-23T16:45:45.171Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-23T16:45:45.171Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T17:20:23.732Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T17:20:23.736Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:20:23.740Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:20:23.785Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:20:23.791Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:20:23.804Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:20:23.811Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:20:23.818Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:20:23.900Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:20:23.909Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:20:23.913Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T17:21:10.280Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T17:21:10.283Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:10.286Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:10.332Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:10.337Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:10.374Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:10.381Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:10.387Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:10.393Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:10.401Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:10.481Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:10.490Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:10.493Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:38.820Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T17:21:38.980Z"}
{"duration":"21ms","level":"info","message":"Request completed","method":"POST","path":"/api/auth/login","status":404,"timestamp":"2025-03-23T17:21:38.984Z"}
{"level":"error","message":"Failed to obtain auth token for document API tests","timestamp":"2025-03-23T17:21:38.988Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T17:21:38.999Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:39.566Z"}
{"level":"info","message":"📚 Documentación Swagger disponible en /api-docs","timestamp":"2025-03-23T17:21:39.733Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T17:21:39.808Z"}
{"level":"debug","message":"Executing query [m8lwnfukwrg0rriunkr]: SELECT * FROM v_permisos_contextuales","params":"[]","timestamp":"2025-03-23T17:21:39.836Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T17:21:39.873Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:40.505Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T17:21:40.556Z"}
{"level":"error","message":"Error al conectar a la base de datos: Pool is closed.","stack":"Error: Pool is closed.\n    at D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\pool.js:55:21\n    at PoolConnection.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:818:13)\n    at Object.onceWrapper (node:events:628:26)\n    at PoolConnection.emit (node:events:513:28)\n    at ClientHandshake.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:137:14)\n    at ClientHandshake.emit (node:events:513:28)\n    at ClientHandshake.execute (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\commands\\command.js:49:10)\n    at PoolConnection.handlePacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:475:34)\n    at PacketParser.onPacket (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:93:12)\n    at PacketParser.executeStart (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\packet_parser.js:75:16)\n    at Socket.<anonymous> (D:\\proye\\OFICRI\\pagina\\Final\\refactored\\OFICRI\\node_modules\\mysql2\\lib\\base\\connection.js:100:25)\n    at Socket.emit (node:events:513:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Socket.Readable.push (node:internal/streams/readable:390:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-23T17:21:40.559Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:40.752Z"}
{"level":"info","message":"Iniciando pruebas de autenticación","timestamp":"2025-03-23T17:21:40.765Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T17:21:40.798Z"}
{"authTokenExists":true,"level":"info","message":"Estado de tokens después del login:","refreshTokenExists":true,"timestamp":"2025-03-23T17:21:40.809Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T17:21:40.837Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:40.939Z"}
{"level":"debug","message":"Executing query [m8lwngpa8egbhegte6l]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T17:21:40.942Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T17:21:40.954Z"}
{"level":"debug","message":"Executing query [m8lwngpoiachd5qsu4o]: SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?","params":"[\"TESTPAP123\"]","timestamp":"2025-03-23T17:21:40.956Z"}
{"level":"debug","message":"Executing query [m8lwngpqd7o5vp196s8]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = ?","params":"[888]","timestamp":"2025-03-23T17:21:40.958Z"}
{"level":"debug","message":"Executing query [m8lwngpsdf7n0wz24i]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Área Papelera\",\"TEST-PAPELERA\",\"PRUEBA\",1]","timestamp":"2025-03-23T17:21:40.960Z"}
{"level":"debug","message":"Executing query [m8lwngpwy634n2jiprf]: SELECT IDRol FROM Rol WHERE IDRol = ?","params":"[888]","timestamp":"2025-03-23T17:21:40.964Z"}
{"level":"debug","message":"Executing query [m8lwngpxkuj5bhb0r5]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[888,\"Rol Papelera\",\"Rol para pruebas de papelera\",2,4]","timestamp":"2025-03-23T17:21:40.966Z"}
{"level":"debug","message":"Executing query [m8lwngq0b91i3qhkjev]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TESTPAP123\",\"Usuario\",\"Papelera\",\"Teniente\",\"$2a$10$abcdefghijklmnopqrstuvwxyz12345678901234\",888,888]","timestamp":"2025-03-23T17:21:40.968Z"}
{"level":"debug","message":"Executing query [m8lwngq33chlabw79gv]: INSERT INTO MesaPartes (Descripcion, IsActive, CodigoIdentificacion) VALUES (?, ?, ?)","params":"[\"Mesa Papelera\",1,\"MP-TEST\"]","timestamp":"2025-03-23T17:21:40.971Z"}
{"level":"debug","message":"Executing query [m8lwngq9fwtd56gbrxw]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1,888,2,\"DOC-TEST-001\",\"OFICIO-TEST-001\",\"2025-03-23T17:21:40.977Z\",\"ACTIVO\"]","timestamp":"2025-03-23T17:21:40.977Z"}
{"level":"info","message":"Preparación completa - Usuario ID: 2, Área ID: 888, Rol ID: 888, Documento ID: 1","timestamp":"2025-03-23T17:21:40.982Z"}
{"level":"debug","message":"Executing query [m8lwngqesh2gwn2z4r]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-23T17:21:40.982Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8lwngqesh2gwn2z4r]","params":"[1,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-23T17:21:40.986Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-23T17:21:40.987Z"}
{"level":"debug","message":"Executing query [m8lwngqj7igefz1eshd]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-23T17:21:40.987Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8lwngqj7igefz1eshd]","params":"[1]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-23T17:21:40.990Z"}
{"level":"error","message":"Error al mover documento a papelera: Column 'IDUsuario' cannot be null","timestamp":"2025-03-23T17:21:40.991Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-23T17:21:40.991Z"}
{"level":"debug","message":"Executing query [m8lwngqoot3745jxehl]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,2,\"RESTAURAR\"]","timestamp":"2025-03-23T17:21:40.992Z"}
{"level":"debug","message":"Executing query [m8lwngqsw8yrahsepz8]: SELECT Estado FROM Documento WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-23T17:21:40.996Z"}
{"level":"debug","message":"Executing query [m8lwngqud5lkha85rfu]: CALL sp_papelera_reciclaje(?, ?, ?)","params":"[1,2,\"MOVER_PAPELERA\"]","timestamp":"2025-03-23T17:21:40.998Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8lwngqud5lkha85rfu]","params":"[1,2,\"MOVER_PAPELERA\"]","query":"CALL sp_papelera_reciclaje(?, ?, ?)","timestamp":"2025-03-23T17:21:41.002Z"}
{"level":"warn","message":"Error al llamar al procedimiento sp_papelera_reciclaje: Column 'IDUsuario' cannot be null. Realizando actualización manual...","timestamp":"2025-03-23T17:21:41.002Z"}
{"level":"debug","message":"Executing query [m8lwngqzwqcbh8k89hn]: UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.003Z"}
{"code":"ER_BAD_NULL_ERROR","error":"Column 'IDUsuario' cannot be null","level":"error","message":"Database query error [m8lwngqzwqcbh8k89hn]","params":"[1]","query":"UPDATE Documento SET \n            Estado = 'PAPELERA', \n            Observaciones = CONCAT(IFNULL(Observaciones, ''), ' | Movido a papelera por test en ', NOW()) \n          WHERE IDDocumento = ?","timestamp":"2025-03-23T17:21:41.005Z"}
{"level":"error","message":"Error al eliminar permanentemente documento: Column 'IDUsuario' cannot be null","timestamp":"2025-03-23T17:21:41.006Z"}
{"level":"info","message":"Continuando con la prueba a pesar del error...","timestamp":"2025-03-23T17:21:41.006Z"}
{"level":"debug","message":"Executing query [m8lwngr3zbbmsgdd8ws]: INSERT INTO Documento (IDMesaPartes, IDAreaActual, IDUsuarioCreador, NroRegistro, NumeroOficioDocumento, FechaDocumento, Estado) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1,888,2,\"DOC-TEST-002\",\"OFICIO-TEST-002\",\"2025-03-23T17:21:41.007Z\",\"ACTIVO\"]","timestamp":"2025-03-23T17:21:41.007Z"}
{"level":"debug","message":"Executing query [m8lwngr6m1yxoilcvz]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[888,888,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-23T17:21:41.010Z"}
{"level":"debug","message":"Executing query [m8lwngr96skar5seyio]: SELECT fn_verificar_permiso_contextual(?, ?, ?, ?) AS tienePermiso","params":"[2,\"DOCUMENTO\",2,\"ELIMINAR\"]","timestamp":"2025-03-23T17:21:41.013Z"}
{"level":"debug","message":"Executing query [m8lwngrd2phyv7scw7d]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[2]","timestamp":"2025-03-23T17:21:41.017Z"}
{"level":"debug","message":"Executing query [m8lwngrgc1oclyavjr4]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ? AND TipoRecurso = ?","params":"[888,888,\"DOCUMENTO\"]","timestamp":"2025-03-23T17:21:41.020Z"}
{"level":"debug","message":"Executing query [m8lwngrjzpk7hk0tqi9]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.023Z"}
{"level":"debug","message":"Executing query [m8lwngrlvi8eliqlb7l]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T17:21:41.025Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T17:21:41.026Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:41.127Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:41.132Z"}
{"level":"debug","message":"Executing query [m8lwngumkzkbfof5am9]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T17:21:41.134Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T17:21:41.147Z"}
{"level":"debug","message":"Executing query [m8lwngv1zn825yklg2m]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-23T17:21:41.149Z"}
{"level":"debug","message":"Executing query [m8lwngv35jscwaupo7c]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-23T17:21:41.151Z"}
{"level":"debug","message":"Executing query [m8lwngv5oc5qllsw97]: INSERT INTO AreaEspecializada (IDArea, NombreArea, CodigoIdentificacion, TipoArea, IsActive, Descripcion) VALUES (?, ?, ?, ?, ?, ?)","params":"[999,\"Área de Prueba\",\"TEST-AREA\",\"PRUEBA\",1,\"Área creada para pruebas\"]","timestamp":"2025-03-23T17:21:41.153Z"}
{"level":"debug","message":"Executing query [m8lwngv8hdoccvk52s8]: INSERT INTO Rol (IDRol, NombreRol, Descripcion, NivelAcceso, Permisos) VALUES (?, ?, ?, ?, ?)","params":"[999,\"Rol de Prueba\",\"Rol creado para pruebas\",1,255]","timestamp":"2025-03-23T17:21:41.156Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de Usuario","timestamp":"2025-03-23T17:21:41.159Z"}
{"level":"debug","message":"Executing query [m8lwngvc57pc5ucz84]: DELETE FROM UsuarioLog WHERE IDUsuario IN (SELECT IDUsuario FROM Usuario WHERE CodigoCIP = ?)","params":"[\"TEST123456\"]","timestamp":"2025-03-23T17:21:41.160Z"}
{"level":"debug","message":"Executing query [m8lwngvn0nj1v3ehgawp]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-23T17:21:41.171Z"}
{"level":"debug","message":"Executing query [m8lwngvpr3h5uvurwk]: DELETE FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-23T17:21:41.173Z"}
{"level":"debug","message":"Executing query [m8lwngvr6d9lia0pney]: INSERT INTO Usuario (CodigoCIP, Nombres, Apellidos, Grado, PasswordHash, IDArea, IDRol) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[\"TEST123456\",\"Usuario\",\"De Prueba\",\"Suboficial\",\"$2a$10$mBpQoMfPGGjYV2NzvL.YHeTw0znNqptBsYKrn.zxr5Hd2zQvmCv9q\",999,999]","timestamp":"2025-03-23T17:21:41.175Z"}
{"level":"debug","message":"Executing query [m8lwngvyl7lp2qgp9ps]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-23T17:21:41.182Z"}
{"level":"debug","message":"Executing query [m8lwngw1zx1zjs0git]: SELECT * FROM Usuario WHERE CodigoCIP = ?","params":"[\"TEST123456\"]","timestamp":"2025-03-23T17:21:41.186Z"}
{"level":"debug","message":"Executing query [m8lwngw4iwfz7m1e2p]: UPDATE Usuario SET Nombres = ? WHERE IDUsuario = ?","params":"[\"NombreActualizado\",3]","timestamp":"2025-03-23T17:21:41.188Z"}
{"level":"debug","message":"Executing query [m8lwngw840cww4psz02]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-23T17:21:41.192Z"}
{"level":"debug","message":"Executing query [m8lwngwaz3ton90tz2f]: DELETE FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-23T17:21:41.194Z"}
{"level":"debug","message":"Executing query [m8lwngwd8y4e84jfahy]: SELECT * FROM Usuario WHERE IDUsuario = ?","params":"[3]","timestamp":"2025-03-23T17:21:41.197Z"}
{"level":"debug","message":"Executing query [m8lwngwffizvtznb1zf]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T17:21:41.199Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T17:21:41.200Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:41.478Z"}
{"level":"debug","message":"Executing query [m8lwnh49ygcflu0lebp]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T17:21:41.481Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T17:21:41.493Z"}
{"level":"debug","message":"Executing query [m8lwnh4mmqa93t5igl]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-23T17:21:41.494Z"}
{"level":"debug","message":"Executing query [m8lwnh4silpew392ggg]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742750501480\"]","timestamp":"2025-03-23T17:21:41.500Z"}
{"level":"debug","message":"Executing query [m8lwnh4v330wq599l8r]: INSERT INTO Dosaje (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoDosaje, Nombres, Apellidos, DocumentoIdentidad, Procedencia,\n          ResultadoCualitativo, ResultadoCuantitativo, UnidadMedida, MetodoAnalisis,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-DOSAJE-1742750501480\",\"TEST-OFICIO-1742750501480\",6830,\"ETÍLICO\",\"Persona\",\"De Prueba\",\"12345678\",\"Pruebas Automatizadas\",\"POSITIVO\",1.25,\"g/L\",\"Espectrofotometría\",\"Técnico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-23T17:21:41.503Z"}
{"level":"debug","message":"Executing query [m8lwnh52d0msdhcb7ao]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.510Z"}
{"level":"debug","message":"Executing query [m8lwnh543zg0cdhizeg]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-DOSAJE-1742750501480\"]","timestamp":"2025-03-23T17:21:41.512Z"}
{"level":"debug","message":"Executing query [m8lwnh56unscrb7e0aj]: UPDATE Dosaje SET ResultadoCualitativo = ?, Observaciones = ? WHERE IDDosaje = ?","params":"[\"NEGATIVO\",\"Registro de dosaje actualizado en pruebas\",1]","timestamp":"2025-03-23T17:21:41.514Z"}
{"level":"debug","message":"Executing query [m8lwnh596f1qwxb294t]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.517Z"}
{"level":"debug","message":"Executing query [m8lwnh5bbphp8gu9e9d]: UPDATE Dosaje SET IsActive = FALSE WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.519Z"}
{"level":"debug","message":"Executing query [m8lwnh5dd1qs2bsqdk]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.521Z"}
{"level":"debug","message":"Executing query [m8lwnh5f7ui86w5dwja]: DELETE FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.523Z"}
{"level":"debug","message":"Executing query [m8lwnh5id0gklsbivhm]: SELECT * FROM Dosaje WHERE IDDosaje = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.526Z"}
{"level":"debug","message":"Executing query [m8lwnh5k5ukyyz3i94w]: CALL sp_insertar_dosaje(?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-DOSAJE-1742750501528\",\"TEST-SP-OFICIO-1742750501528\",7346,\"ETÍLICO-SP\",\"Persona SP\",\"De Prueba SP\",\"Prueba SP\",\"Técnico SP\"]","timestamp":"2025-03-23T17:21:41.528Z"}
{"level":"debug","message":"Executing query [m8lwnh5nkl25u1stddg]: SELECT * FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742750501528\"]","timestamp":"2025-03-23T17:21:41.531Z"}
{"level":"debug","message":"Executing query [m8lwnh5pw9gn0kyr1s]: DELETE FROM Dosaje WHERE NumeroRegistro = ?","params":"[\"TEST-SP-DOSAJE-1742750501528\"]","timestamp":"2025-03-23T17:21:41.533Z"}
{"level":"debug","message":"Executing query [m8lwnh5r3lbab2m87b5]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T17:21:41.535Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T17:21:41.536Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:41.636Z"}
{"level":"debug","message":"Executing query [m8lwnh8numxouom9mgp]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T17:21:41.639Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T17:21:41.649Z"}
{"level":"debug","message":"Executing query [m8lwnh8yyqik8wndsu]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-23T17:21:41.650Z"}
{"level":"debug","message":"Executing query [m8lwnh90yfovgmoyzol]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742750501638\"]","timestamp":"2025-03-23T17:21:41.652Z"}
{"level":"debug","message":"Executing query [m8lwnh94k0vxg92xxmp]: INSERT INTO ForenseDigital (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          TipoPericia, Nombres, Apellidos, DelitoInvestigado,\n          DispositivoTipo, DispositivoMarca, DispositivoModelo, DispositivoNumeroSerie, MetodoExtraccion,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-FORENSE-1742750501638\",\"TEST-OFI-FORENSE-1742750501638\",5170,\"EXTRACCIÓN DE INFORMACIÓN\",\"Investigador\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"CELULAR\",\"TEST BRAND\",\"TEST MODEL\",\"SN-1742750501638\",\"MANUAL\",\"Perito de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-23T17:21:41.656Z"}
{"level":"debug","message":"Executing query [m8lwnh9823cgmk0zwh5j]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.660Z"}
{"level":"debug","message":"Executing query [m8lwnh9a6lailcbq964]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-FORENSE-1742750501638\"]","timestamp":"2025-03-23T17:21:41.662Z"}
{"level":"debug","message":"Executing query [m8lwnh9cxfmkxqgj00n]: UPDATE ForenseDigital SET TipoPericia = ?, Observaciones = ? WHERE IDForenseDigital = ?","params":"[\"ANALISIS DE METADATOS\",\"Registro forense actualizado en pruebas\",1]","timestamp":"2025-03-23T17:21:41.664Z"}
{"level":"debug","message":"Executing query [m8lwnh9f2qa30s3tcb7]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.667Z"}
{"level":"debug","message":"Executing query [m8lwnh9ha9br741l4k]: UPDATE ForenseDigital SET IsActive = FALSE WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.669Z"}
{"level":"debug","message":"Executing query [m8lwnh9kqjqm0fdgxr]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.672Z"}
{"level":"debug","message":"Executing query [m8lwnh9l7fto1bn71qi]: DELETE FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.673Z"}
{"level":"debug","message":"Executing query [m8lwnh9o76vicni0pnm]: SELECT * FROM ForenseDigital WHERE IDForenseDigital = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.676Z"}
{"level":"debug","message":"Executing query [m8lwnh9pmnm49bqk0ar]: CALL sp_insertar_forense_digital(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-SP-FORENSE-1742750501677\",\"TEST-SP-OFI-FORENSE-1742750501677\",8155,\"EXTRACCIÓN DE DATOS\",\"Investigador SP\",\"De Prueba SP\",\"PRUEBA SP\",\"LAPTOP\",\"Perito SP\"]","timestamp":"2025-03-23T17:21:41.677Z"}
{"level":"debug","message":"Executing query [m8lwnh9t00uyqv8n5ur3]: SELECT * FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742750501677\"]","timestamp":"2025-03-23T17:21:41.681Z"}
{"level":"debug","message":"Executing query [m8lwnh9vpkrcx0r620c]: DELETE FROM ForenseDigital WHERE NumeroRegistro = ?","params":"[\"TEST-SP-FORENSE-1742750501677\"]","timestamp":"2025-03-23T17:21:41.683Z"}
{"level":"debug","message":"Executing query [m8lwnh9ydiazm2pwe6q]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T17:21:41.686Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T17:21:41.688Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:41.790Z"}
{"level":"debug","message":"Executing query [m8lwnhcx8f7syy0og95]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T17:21:41.793Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T17:21:41.804Z"}
{"level":"debug","message":"Executing query [m8lwnhdaxra1bw7v549]: SELECT IDMesaPartes FROM MesaPartes LIMIT 1","params":"[]","timestamp":"2025-03-23T17:21:41.806Z"}
{"level":"info","message":"No se encontraron Mesas de Partes. Se requiere al menos una Mesa de Partes para las pruebas.","timestamp":"2025-03-23T17:21:41.808Z"}
{"level":"debug","message":"Executing query [m8lwnhdc0volo8g1zv8h]: SELECT IDArea FROM AreaEspecializada LIMIT 2","params":"[]","timestamp":"2025-03-23T17:21:41.808Z"}
{"level":"debug","message":"Executing query [m8lwnhddknlof8azv6k]: SELECT IDUsuario FROM Usuario LIMIT 2","params":"[]","timestamp":"2025-03-23T17:21:41.809Z"}
{"level":"debug","message":"Executing query [m8lwnhdffiapvivynl]: SELECT IDDocumento FROM Documento LIMIT 1","params":"[]","timestamp":"2025-03-23T17:21:41.811Z"}
{"level":"warn","message":"No se pueden ejecutar todas las pruebas de Derivación debido a la falta de datos necesarios.","timestamp":"2025-03-23T17:21:41.812Z"}
{"level":"debug","message":"Executing query [m8lwnhdg5wf2v5i395h]: DELETE FROM Derivacion WHERE IDDocumento = ? AND IDAreaOrigen = ? AND IDAreaDestino = ?","params":"[1,1,888]","timestamp":"2025-03-23T17:21:41.812Z"}
{"level":"debug","message":"Executing query [m8lwnhdh8bykrat0v44]: INSERT INTO Derivacion (\n          IDDocumento, IDMesaPartes, IDAreaOrigen, IDAreaDestino, \n          IDUsuarioDeriva, EstadoDerivacion, Observacion\n        ) VALUES (?, ?, ?, ?, ?, ?, ?)","params":"[1,null,1,888,1,\"PENDIENTE\",\"Derivación creada para pruebas automatizadas\"]","timestamp":"2025-03-23T17:21:41.813Z"}
{"level":"debug","message":"Executing query [m8lwnhdnrpjdp5hjzq9]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.819Z"}
{"level":"debug","message":"Executing query [m8lwnhdp9o0a8lv13gb]: UPDATE Derivacion SET EstadoDerivacion = ?, Observacion = ?, FechaRecepcion = ?, IDUsuarioRecibe = ? WHERE IDDerivacion = ?","params":"[\"RECIBIDO\",\"Derivación actualizada en pruebas\",\"2025-03-23 17:21:41\",2,1]","timestamp":"2025-03-23T17:21:41.821Z"}
{"level":"debug","message":"Executing query [m8lwnhdrkvoeyshtgc]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.823Z"}
{"level":"debug","message":"Executing query [m8lwnhdtdesptxdoet]: SELECT * FROM Derivacion WHERE EstadoDerivacion = ? LIMIT 10","params":"[\"PENDIENTE\"]","timestamp":"2025-03-23T17:21:41.825Z"}
{"level":"debug","message":"Executing query [m8lwnhdupx7y06ygszd]: SELECT * FROM Derivacion WHERE IDAreaDestino = ? LIMIT 10","params":"[888]","timestamp":"2025-03-23T17:21:41.826Z"}
{"level":"debug","message":"Executing query [m8lwnhdvngbfewsxzn]: DELETE FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.827Z"}
{"level":"debug","message":"Executing query [m8lwnhdzjjsnh3zlzsm]: SELECT * FROM Derivacion WHERE IDDerivacion = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.831Z"}
{"level":"debug","message":"Executing query [m8lwnhe07yy3nlsgc1b]: DELETE FROM Documento WHERE IDDocumento = ?","params":"[1]","timestamp":"2025-03-23T17:21:41.832Z"}
{"level":"debug","message":"Executing query [m8lwnhe3105qzvsiyej]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T17:21:41.835Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:41.932Z"}
{"level":"debug","message":"Executing query [m8lwnhguzenr1sa7hma]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T17:21:41.934Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T17:21:41.946Z"}
{"level":"debug","message":"Executing query [m8lwnhh8aa31jrg1zyl]: SELECT IDArea FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742750501934\"]","timestamp":"2025-03-23T17:21:41.948Z"}
{"level":"debug","message":"Executing query [m8lwnhhaluemy132zx]: DELETE FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742750501934\"]","timestamp":"2025-03-23T17:21:41.950Z"}
{"level":"debug","message":"Executing query [m8lwnhhbkbh7h24goui]: INSERT INTO AreaEspecializada (NombreArea, CodigoIdentificacion, TipoArea, Descripcion, IsActive) VALUES (?, ?, ?, ?, ?)","params":"[\"Área de Prueba Automatizada\",\"TEST-AUTO-AREA-1742750501934\",\"ESPECIALIZADA\",\"Área creada para pruebas automatizadas\",true]","timestamp":"2025-03-23T17:21:41.951Z"}
{"level":"debug","message":"Executing query [m8lwnhhgsq4mkjsy60k]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-23T17:21:41.956Z"}
{"level":"debug","message":"Executing query [m8lwnhhid0jz3m8u7ni]: SELECT * FROM AreaEspecializada WHERE CodigoIdentificacion = ?","params":"[\"TEST-AUTO-AREA-1742750501934\"]","timestamp":"2025-03-23T17:21:41.958Z"}
{"level":"debug","message":"Executing query [m8lwnhhkgzyj3kxqr4d]: UPDATE AreaEspecializada SET NombreArea = ?, Descripcion = ? WHERE IDArea = ?","params":"[\"Área Actualizada\",\"Descripción actualizada para pruebas\",1000]","timestamp":"2025-03-23T17:21:41.960Z"}
{"level":"debug","message":"Executing query [m8lwnhhmnz0mt3leskl]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-23T17:21:41.962Z"}
{"level":"debug","message":"Executing query [m8lwnhhpxu1bgr0abbn]: UPDATE AreaEspecializada SET IsActive = FALSE WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-23T17:21:41.965Z"}
{"level":"debug","message":"Executing query [m8lwnhhrn9c2k14icjg]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-23T17:21:41.967Z"}
{"level":"debug","message":"Executing query [m8lwnhhtsfqxyt7bk6]: SELECT COUNT(*) as count FROM Usuario WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-23T17:21:41.969Z"}
{"level":"debug","message":"Executing query [m8lwnhhu9kmwsr2onxs]: DELETE FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-23T17:21:41.970Z"}
{"level":"debug","message":"Executing query [m8lwnhhw0glfkgm3jkl]: SELECT * FROM AreaEspecializada WHERE IDArea = ?","params":"[1000]","timestamp":"2025-03-23T17:21:41.972Z"}
{"level":"debug","message":"Executing query [m8lwnhhxr0nw2qciyb]: SELECT * FROM AreaEspecializada WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-23T17:21:41.973Z"}
{"level":"debug","message":"Executing query [m8lwnhhyd3gio2apcnt]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T17:21:41.974Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T17:21:41.976Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:42.076Z"}
{"level":"debug","message":"Executing query [m8lwnhkubixaqqfels]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T17:21:42.078Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T17:21:42.091Z"}
{"level":"debug","message":"Executing query [m8lwnhl8byco9mg53jn]: SELECT IDArea FROM AreaEspecializada LIMIT 1","params":"[]","timestamp":"2025-03-23T17:21:42.092Z"}
{"level":"debug","message":"Executing query [m8lwnhl9ly5oprmyerg]: DELETE FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742750502077\"]","timestamp":"2025-03-23T17:21:42.093Z"}
{"level":"debug","message":"Executing query [m8lwnhlde5letp23bhe]: INSERT INTO QuimicaToxicologiaForense (\n          IDArea, NumeroRegistro, FechaIngreso, OficioDoc, NumeroOficio,\n          Examen, Nombres, Apellidos, DelitoInfraccion, Como,\n          Responsable, Observaciones, IsActive\n        ) VALUES (?, ?, CURDATE(), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","params":"[1,\"TEST-QUIMICA-1742750502077\",\"TEST-OFI-QUIMICA-1742750502077\",346,\"TOXICOLOGÍA\",\"Sujeto\",\"De Prueba\",\"PRUEBA AUTOMATIZADA\",\"SUSTANCIA INCAUTADA\",\"Químico de prueba\",\"Registro creado para pruebas automatizadas\",true]","timestamp":"2025-03-23T17:21:42.097Z"}
{"level":"debug","message":"Executing query [m8lwnhljl4m5arq8w4o]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-23T17:21:42.103Z"}
{"level":"debug","message":"Executing query [m8lwnhlmzghgvwjjjt]: SELECT * FROM QuimicaToxicologiaForense WHERE NumeroRegistro = ?","params":"[\"TEST-QUIMICA-1742750502077\"]","timestamp":"2025-03-23T17:21:42.106Z"}
{"level":"debug","message":"Executing query [m8lwnhlo5jzekygvigy]: UPDATE QuimicaToxicologiaForense SET Examen = ?, Observaciones = ? WHERE IDQuimicaToxForense = ?","params":"[\"ANÁLISIS QUÍMICO\",\"Registro químico actualizado en pruebas\",1]","timestamp":"2025-03-23T17:21:42.108Z"}
{"level":"debug","message":"Executing query [m8lwnhlrzcnpi8s25t]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-23T17:21:42.111Z"}
{"level":"debug","message":"Executing query [m8lwnhlttp894v66wu]: UPDATE QuimicaToxicologiaForense SET IsActive = FALSE WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-23T17:21:42.113Z"}
{"level":"debug","message":"Executing query [m8lwnhlv23gj4pw6uaw]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-23T17:21:42.115Z"}
{"level":"debug","message":"Executing query [m8lwnhlwum2hbu7o89s]: DELETE FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-23T17:21:42.116Z"}
{"level":"debug","message":"Executing query [m8lwnhlzg1e8xas3y8s]: SELECT * FROM QuimicaToxicologiaForense WHERE IDQuimicaToxForense = ?","params":"[1]","timestamp":"2025-03-23T17:21:42.119Z"}
{"level":"debug","message":"Executing query [m8lwnhm0zbu0ql9uiyq]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T17:21:42.120Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T17:21:42.121Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:42.222Z"}
{"level":"debug","message":"Executing query [m8lwnhoxh0ycaudcxdv]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T17:21:42.225Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T17:21:42.234Z"}
{"level":"debug","message":"Executing query [m8lwnhp7lzoq7rpfq4l]: DELETE FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742750502224\"]","timestamp":"2025-03-23T17:21:42.235Z"}
{"level":"debug","message":"Executing query [m8lwnhp9nnqx317fbt]: INSERT INTO MesaPartes (Descripcion, CodigoIdentificacion, IsActive) VALUES (?, ?, ?)","params":"[\"Mesa de Partes de Prueba Automatizada\",\"TEST-MP-1742750502224\",true]","timestamp":"2025-03-23T17:21:42.237Z"}
{"level":"debug","message":"Executing query [m8lwnhpf20bgyeg5frc]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-23T17:21:42.243Z"}
{"level":"debug","message":"Executing query [m8lwnhpicia9zs54jid]: SELECT * FROM MesaPartes WHERE CodigoIdentificacion = ?","params":"[\"TEST-MP-1742750502224\"]","timestamp":"2025-03-23T17:21:42.246Z"}
{"level":"debug","message":"Executing query [m8lwnhpk1eu1z90j8gr]: UPDATE MesaPartes SET Descripcion = ? WHERE IDMesaPartes = ?","params":"[\"Mesa de Partes Actualizada\",2]","timestamp":"2025-03-23T17:21:42.248Z"}
{"level":"debug","message":"Executing query [m8lwnhpmrtzqcxaf4j9]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-23T17:21:42.250Z"}
{"level":"debug","message":"Executing query [m8lwnhpodxpf3crkrm]: UPDATE MesaPartes SET IsActive = FALSE WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-23T17:21:42.252Z"}
{"level":"debug","message":"Executing query [m8lwnhpq8dl95zf8mqr]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-23T17:21:42.254Z"}
{"level":"debug","message":"Executing query [m8lwnhptcm82yc3smeb]: SELECT COUNT(*) as count FROM Documento WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-23T17:21:42.257Z"}
{"level":"debug","message":"Executing query [m8lwnhpvyzwf5iyfwds]: DELETE FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-23T17:21:42.259Z"}
{"level":"debug","message":"Executing query [m8lwnhpyu2gocwj4hwq]: SELECT * FROM MesaPartes WHERE IDMesaPartes = ?","params":"[2]","timestamp":"2025-03-23T17:21:42.262Z"}
{"level":"debug","message":"Executing query [m8lwnhq177hzqpi3rnw]: SELECT * FROM MesaPartes WHERE IsActive = TRUE","params":"[]","timestamp":"2025-03-23T17:21:42.265Z"}
{"level":"debug","message":"Executing query [m8lwnhq3yjjc4mkxqeh]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T17:21:42.267Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T17:21:42.270Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:42.365Z"}
{"level":"debug","message":"Executing query [m8lwnhswy7nl0ucydlc]: SET FOREIGN_KEY_CHECKS = 0","params":"[]","timestamp":"2025-03-23T17:21:42.368Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T17:21:42.383Z"}
{"level":"debug","message":"Executing query [m8lwnhtc2s1ov1i0jpn]: SELECT IDArea FROM AreaEspecializada WHERE IDArea = 999","params":"[]","timestamp":"2025-03-23T17:21:42.384Z"}
{"level":"debug","message":"Executing query [m8lwnhtdh6ajwb3k6hl]: SELECT IDRol FROM Rol WHERE IDRol = 999","params":"[]","timestamp":"2025-03-23T17:21:42.385Z"}
{"level":"info","message":"Usando Área ID: 999 y Rol ID: 999 para las pruebas de PermisoContextual","timestamp":"2025-03-23T17:21:42.386Z"}
{"level":"debug","message":"Executing query [m8lwnhtegnj0ddwyt3h]: DELETE FROM PermisoContextualLog WHERE IDPermisoContextual IN (SELECT IDPermisoContextual FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?)","params":"[999,999]","timestamp":"2025-03-23T17:21:42.386Z"}
{"level":"debug","message":"Executing query [m8lwnhtfkq3xj78tdy]: DELETE FROM PermisoContextual WHERE IDRol = ? AND IDArea = ?","params":"[999,999]","timestamp":"2025-03-23T17:21:42.387Z"}
{"level":"debug","message":"Executing query [m8lwnhthdmvomyykdm]: INSERT INTO PermisoContextual (IDRol, IDArea, TipoRecurso, ReglaContexto, Activo) VALUES (?, ?, ?, ?, ?)","params":"[999,999,\"DOCUMENTO\",\"{\\\"condicion\\\":\\\"PROPIETARIO\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",true]","timestamp":"2025-03-23T17:21:42.389Z"}
{"level":"debug","message":"Executing query [m8lwnhtmwp4pgsq3xee]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-23T17:21:42.394Z"}
{"level":"debug","message":"Executing query [m8lwnhtoxjnd4vebzd]: SELECT * FROM v_permisos_contextuales WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-23T17:21:42.396Z"}
{"level":"debug","message":"Executing query [m8lwnhtq0cuaz39keox]: UPDATE PermisoContextual SET ReglaContexto = ? WHERE IDPermisoContextual = ?","params":"[\"{\\\"condicion\\\":\\\"MISMA_AREA\\\",\\\"accion\\\":\\\"ELIMINAR\\\"}\",2]","timestamp":"2025-03-23T17:21:42.398Z"}
{"level":"debug","message":"Executing query [m8lwnhttfjb6v1stxe6]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-23T17:21:42.401Z"}
{"level":"debug","message":"Executing query [m8lwnhtvwi4jwzkay9o]: DELETE FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-23T17:21:42.403Z"}
{"level":"debug","message":"Executing query [m8lwnhtyon1hudm7cem]: SELECT * FROM PermisoContextual WHERE IDPermisoContextual = ?","params":"[2]","timestamp":"2025-03-23T17:21:42.406Z"}
{"level":"debug","message":"Executing query [m8lwnhtzo9e28l06m0k]: SET FOREIGN_KEY_CHECKS = 1","params":"[]","timestamp":"2025-03-23T17:21:42.407Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T17:21:42.408Z"}
{"level":"debug","message":"Configuración de base de datos: host=localhost, port=3306, user=root, database=Oficri_sistema","timestamp":"2025-03-23T17:21:42.504Z"}
{"level":"info","message":"Conexión a la base de datos establecida","timestamp":"2025-03-23T17:21:42.517Z"}
{"level":"debug","message":"Executing query [m8lwnhx3f3l85ranvsr]: SELECT 1 as test","params":"[]","timestamp":"2025-03-23T17:21:42.519Z"}
{"level":"debug","message":"Executing query [m8lwnhx6ltt70nzyaj]: SELECT * FROM tabla_que_no_existe","params":"[]","timestamp":"2025-03-23T17:21:42.522Z"}
{"code":"ER_NO_SUCH_TABLE","error":"Table 'oficri_sistema.tabla_que_no_existe' doesn't exist","level":"error","message":"Database query error [m8lwnhx6ltt70nzyaj]","params":"[]","query":"SELECT * FROM tabla_que_no_existe","timestamp":"2025-03-23T17:21:42.523Z"}
{"level":"info","message":"Database connection pool closed successfully","timestamp":"2025-03-23T17:21:42.525Z"}
{"level":"info","message":"Usando Documento ID: 1 para las pruebas de DocumentoArchivo","timestamp":"2025-03-23T17:21:42.604Z"}
{"level":"info","message":"Usando Mesa de Partes ID: 1, Área ID: 1 y Usuario ID: 1 para las pruebas de Documento","timestamp":"2025-03-23T17:21:42.708Z"}
{"level":"info","message":"Test info message","timestamp":"2025-03-23T17:21:42.806Z"}
{"level":"error","message":"Test error message","timestamp":"2025-03-23T17:21:42.807Z"}
{"level":"warn","message":"Test warning message","timestamp":"2025-03-23T17:21:42.807Z"}
{"level":"debug","message":"Test debug message","timestamp":"2025-03-23T17:21:42.808Z"}
{"action":"test","level":"info","message":"Test message with object","timestamp":"2025-03-23T17:21:42.808Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"action":"test","error":{},"level":"error","message":"Test error with object","timestamp":"2025-03-23T17:21:42.808Z","user":{"id":1,"name":"Test User","roles":["admin","user"]}}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T17:21:50.692Z"}
{"level":"debug","message":"Configuración DB: host=localhost, user=root, database=oficri_sistema","timestamp":"2025-03-23T17:21:50.695Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:50.698Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:50.743Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:50.749Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:50.761Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:50.767Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:50.771Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:50.848Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:50.858Z"}
{"level":"debug","message":"Conexión a: localhost@oficri_sistema como root","timestamp":"2025-03-23T17:21:50.861Z"}
